<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    lang="en"
    metal:use-macro="context/@@malone_template/master"
    i18n:domain="malone">
<body>
<div metal:fill-slot="main">
    <tal:block condition="view/update" />

    <h1>Welcome to Malone!</h1>

    <h1>Search packages</h1>

    <form method="post">
        <fieldset>
            <legend>Search details</legend>

            <div class="field">
                <input name="query" />
            </div>

            <div class="formControls">
                <input type="submit" value="Search" />
            </div>
        </fieldset>
    </form>

    <div tal:condition="exists:request/query">
        <span tal:condition="not:view/results">
            No results were returned from your query
        </span>
        <table tal:condition="view/results" class="listing rowNavigation">
            <tr>
                <th>Name</th>
                <th>Title</th>
                <th>Description</th>
                <th>Distribution</th>
            </tr>
            <tr tal:repeat="result view/results" tal:attributes="onclick 
                string:window.location='sourcepackages/${result/name}'">
                <td>
                    <a href="#" tal:content="result/name"
                        tal:attributes="href 
                        string:sourcepackages/${result/name}">
                        $SourcepackageName.name
                    </a>
                </td>
                <td tal:content="result/title">$Sourcepackage.title</td>
                <td tal:content="result/description">
                    $Sourcepackage.description</td>
                <td tal:content="result/distro">$Sourcepackage.distro</td>
            </tr>
        </table>
    </div>
  
    <ul>
        <li><a href="sourcepackages">See all source package bugs</a></li>
        <li><a href="bugs">See the bug list</a></li>
        <li><a href="projects">Search projects</a></li>
    </ul>
</div>
</body>
</html>

<!--
<div metal:fill-slot="main">
  <table tal:condition="exists:request/name"
         class="listing">
    <tr>
      <th>Project</th>
      <th>Title</th>
      <th>Description</th>
      <th>Homepage</th>
    </tr>
    <tr tal:repeat="project python:context.search(name=request.get('name'),
                                                  title=request.get('title'))">
      <td>
        <a tal:attributes="href project/id"
           tal:content="project/name">Name</a>
      </td>
      <td tal:content="project/title">Title</td>
      <td tal:content="project/description">Description</td>
      <td>
        <a tal:attributes="href project/homepageurl"
           tal:content="project/homepageurl">http://www.gnu.org/</a>
      </td>
    </tr>
  </table>
</div>

</body>
</html>
-->
