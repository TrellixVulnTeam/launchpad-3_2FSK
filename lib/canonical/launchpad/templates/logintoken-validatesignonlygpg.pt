<tal:do-this-first tal:content="view/processForm" />

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Confirm OpenPGP key</h1>
    </metal:heading>

<div metal:fill-slot="main">

    <div tal:condition="not: view/successfullyProcessed">

      <div tal:condition="view/errormessage" class="portalMessage"
           tal:content="structure view/errormessage">
      </div>

      <p>
        To confirm the key <code tal:content="context/fingerprint"/> by 
        <tal:name replace="context/requester/displayname">Foo Bar</tal:name>,
        please enter your Launchpad password.
      </p>

      <form autocomplete="off" name="validate" action="" method="POST">
        <div class="field">

          <label>Launchpad password:</label>
          <br>
          <input type="password" size="30" name="password" />
          <br>

          <tal:block condition="not: request/lp:person">
            <label>
              <input type="checkbox" checked="checked" name="logmein" />
              Log me in after validating my key
            </label><br />
          </tal:block>

          <p>Please paste a clear-signed copy of the following phrase
          into the text box below.  This can be acheived by saving the
          phrase to a file and running <kbd>gpg --clearsign
          FILENAME</kbd>.</p>

          <pre tal:content="view/validationphrase">
            Please register ABCDEF... to the Launchpad user joe
            2005-04-01 10:30:42 UTC
          </pre>

          <textarea name="signedcontent" rows="14" cols="70"></textarea>

          <div class="formControls">
            <input type="submit" name="SUBMIT_CHANGES" value="Submit" />
          </div>

        </div>
      </form>
    </div>

</div>


</body>
</html>
