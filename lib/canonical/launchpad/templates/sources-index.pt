<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="bazaar">

<body>

<div metal:fill-slot="main" class="visualPadding"
     tal:define="batch view/batchnav/currentBatch">

  <h1>Bazaar: Upstream revision control imports</h1>

  <form action="" method="GET">
    <fieldset>
        <legend>Filter criteria</legend>

        <div class="formControls">
            <input type="text" name="text"
                   tal:attributes="value view/text" size="25">
            <span tal:replace="structure view/sourcestateselector">
                StateSelector
            </span>
            <input type="checkbox" name="ready" id="ready"
                   tal:attributes="checked view/ready">
            <label for="ready">Ready</label>
            <input type="submit" name="search" value="search" />
            <br />
        </div>

    </fieldset>
  </form>

  <tal:no-results condition="not:batch">
    <p>No product series found matching criteria.</p>
  </tal:no-results>

  <tal:results condition="batch">
    <div class="lesser"
         tal:content="structure view/batchnav/@@+navigation-links" />
    <table class="listing" width="100%">
      <thead>
        <tr>
          <th>Product</th>
          <th>Series</th>
          <th>Started</th>
          <th>Finished</th>
          <th>Tested</th>
          <th>Process</th>
          <th>Sync</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="series batch">
          <td><a tal:attributes="href string:${series/fmt:url}/+source"
                 style="display: block"
                 tal:content="series/product/name">$Product.name</a></td>
          <td><a tal:attributes="href string:${series/fmt:url}/+source"
                 style="display: block"
                 tal:content="series/name">$Series.name</a></td>
          <td tal:content="series/datestarted/fmt:date | string: -- "
              >$Series.datestarted</td>
          <td tal:content="series/datefinished/fmt:date | string: -- "
              >$Series.datefinished</td>
          <td tal:content="series/dateautotested/fmt:date | string: --"
              >$Series.dateautotested</td>
          <td tal:content="series/dateprocessapproved/fmt:date | string: -- "
              >$Series.dateprocessapproved</td>
          <td tal:content="series/datesyncapproved/fmt:date | string: -- "
              >$Series.datesyncapproved</td>
        </tr>
      </tbody>
    </table>

    <div class="lesser"
         tal:content="structure view/batchnav/@@+navigation-links" />
  </tal:results>

</div>

</body>
</html>
