<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
    <title metal:fill-slot="title">Launchpad People</title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Launchpad style sheet -->
    <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

  <body>
    <div metal:fill-slot="main">
      <tal:block define="bn view/searchPeopleBatchNavigator">
        <h1>People and teams in Launchpad</h1>
        <form name="search" action="" method="GET">
          <table style="margin-bottom: 1em;">
            <tr>
              <th><label>Search for:</label></th>
              <td tal:define="searchfor request/searchfor|nothing">
                <label>
                  <input
                    tal:condition="python: searchfor == 'peopleonly'"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="peopleonly"
                  />
                  <input
                    tal:condition="python: searchfor != 'peopleonly'"
                    type="radio"
                    name="searchfor"
                    value="peopleonly"
                  />
                  people
                </label>
                <label>
                  <input
                    tal:condition="python: searchfor == 'teamsonly'"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="teamsonly"
                  />
                  <input
                    tal:condition="python: searchfor != 'teamsonly'"
                    type="radio"
                    name="searchfor"
                    value="teamsonly"
                  />
                  teams
                </label>
                <label>
                  <input
                    tal:condition="python: searchfor == 'all' or
                                           searchfor == nothing"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="all"
                  />
                  <input
                    tal:condition="python: searchfor == 'teamsonly' or
                                           searchfor == 'peopleonly'"
                    type="radio"
                    name="searchfor"
                    value="all"
                  />
                  both
                </label>
              </td>
            </tr>
            <tr>
              <th><label>with names containing:</label></th>
              <td>
                <input type="text" name="name" size="20" tabindex="1"
                     tal:attributes="value request/name|nothing"
                />
                <input
                  tal:condition="not: bn"
                  type="submit"
                  value="Search"
                />
                <input
                  tal:condition="bn"
                  type="submit"
                  value="Search Again"
                />
              </td>
            </tr>
          </table>
        </form>
        <tal:block condition="not: bn">
          <p> 
            There are currently <span tal:replace="view/peopleCount" />
            people and <span tal:replace="view/teamsCount" /> teams 
            registered in Launchpad.
          </p>
          <p> 
            Some accounts have been automatically created by Launchpad
            and may be duplicates.
            If you find you have multiple accounts, please
            <a href="+requestmerge">merge them</a>.
          </p>
        </tal:block>
        <tal:block condition="bn">
          <tal:block
            define="prev_url bn/prevBatchURL;
            next_url bn/nextBatchURL;"
          >
            <table class="data">
              <thead class="results">
                <tr>
                  <td>
                    <div style="width: 50%; float: left;">
                      Search results
                    </div>
                    <div
                      style="width: 50%; float: right; text-align: right;"
                      tal:condition="python:prev_url or next_url"
                    >
                  	  <!-- <th condition="not: prev_url"><< prev</th> -->
                      <tal:block condition="prev_url">
                	      <a tal:attributes="href prev_url">Previous</a>
                	    </tal:block>
                      <tal:block repeat="page_link bn/batchPageURLs">
                	      <a tal:attributes="href python:page_link.values()[0]"
                                tal:content="python:page_link.keys()[0]"></a>
                	    </tal:block>
                      <tal:block condition="next_url" >
                	      <a tal:attributes="href next_url">Next</a>
                      </tal:block>
                      <!-- <th condition="not: next_url">next >></th> -->
                    </div>
                    <br style="clear: both;">
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="person python:list(bn.currentBatch())">      
                  <td><a tal:content="person/displayname"
            	    tal:attributes="href person/name"/>
                  </td>
                </tr>    
              </tbody>
            </table>
          </tal:block>
        </tal:block>
      </tal:block>
      <ul>
        <li><a href="+peoplelist">List all people</a></li>
        <li><a href="+teamlist">List all teams</a></li>
      </ul>
    </div>
  </body>
</html>
