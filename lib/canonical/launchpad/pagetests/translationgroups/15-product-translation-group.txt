We should also be able to set a translation group and translation
permissions on a product. We'll use the Netapplet product for this test.

First make sure it uses Launchpad for translations.

    >>> netapplet_owner_browser = setupBrowser(
    ...     auth='Basic test@canonical.com:test')
    >>> netapplet_owner_browser.open('http://launchpad.dev/netapplet')
    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents, 'uses'))
    Does not use Launchpad for development.

    >>> netapplet_owner_browser.getLink('Change details').click()
    >>> print netapplet_owner_browser.title
    Change project details

    >>> netapplet_owner_browser.getControl(
    ...     'Translations for this project are done in Launchpad'
    ...     ).selected = True
    >>> netapplet_owner_browser.getControl('Change').click()
    >>> print netapplet_owner_browser.title
    Network Applet in Launchpad

    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents, 'uses'))
    Uses Launchpad for: Translations.

Netapplet doesn't have TranslationGroup and uses open permissions. We
can see that from the translations page.

    >>> netapplet_owner_browser.getLink('Translations').click()
    >>> print netapplet_owner_browser.title
    Translations of Network Applet in Launchpad

    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents,
    ...                    'portlet-translation-permissions'))
    Translation permissions
    Translation group: Not assigned
    Permissions: Open

Now let's make sure we can see the page to let us change translation
group and permissions.

    >>> netapplet_owner_browser.getLink('Change translators').click()
    >>> print netapplet_owner_browser.title
    Set translation group for Network Applet

    >>> print netapplet_owner_browser.getControl(
    ...     'Translation group').displayOptions
    ['(no value)', 'Single-language Translators',
     'The PolyGlot Translation Group', 'Just a testing team']

    >>> print netapplet_owner_browser.getControl(
    ...     'Translation group').displayValue
    ['(no value)']

Now let's post to the form. We should be redirected to the product page.

    >>> netapplet_owner_browser.getControl(
    ...     'Translation group').displayValue = [
    ...         'The PolyGlot Translation Group']
    >>> netapplet_owner_browser.getControl('Change').click()
    >>> print netapplet_owner_browser.title
    Translations of Network Applet in Launchpad

Now these changes show up in the product page. (XXX mpt 20070126:
Launchpad should be fixed so that you can't set translation
group/permissions without using Translations.)

    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents,
    ...                    'portlet-translation-permissions'))
    Translation permissions
    Translation group: The PolyGlot Translation Group
    Permissions: Open

    >>> polyglot_link = netapplet_owner_browser.getLink(
    ...     'The PolyGlot Translation Group')
    >>> polyglot_link.click()
    >>> netapplet_owner_browser.title
    '\xe2\x80\x9cThe PolyGlot Translation Group\xe2\x80\x9d
    Launchpad translation group'
