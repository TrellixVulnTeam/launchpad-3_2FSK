<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
>

<body>

<metal:block fill-slot="head_epilogue">
  <tal:devmode condition="devmode">
    <tal:archive_js define="lp_js string:${icingroot}/build">
      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/soyuz/base.js">
      </script>
    </tal:archive_js>
  </tal:devmode>
</metal:block>


<tal:heading metal:fill-slot="heading">
    &ldquo;<span tal:replace="context/name" />&rdquo; source package in
    <span tal:replace="context/distribution/displayname" />
</tal:heading>

<tal:side metal:fill-slot="side">
    <div class="yui-u first portlet">
      <h2>Get Involved</h2>
      <div class="actions"
           tal:define="distribution context/distribution">
  
        <a tal:define="link context/menu:bugs/filebug"
           tal:condition="distribution/official_malone"
           tal:attributes="href link/url">
          <img tal:attributes="alt link/text"
               src="/+icing/but-sml-reportabug.gif" />
        </a>

        <a tal:define="link context/menu:answers/new"
           tal:condition="distribution/official_answers"
           tal:attributes="href link/url">
           <img tal:attributes="alt link/text"
                src="/+icing/but-sml-askaquestion.gif" />
        </a>
      </div>
    </div>
</tal:side>

<tal:main metal:fill-slot="main">
  <h1> &ldquo;<span tal:replace="context/name" />&rdquo; source package in
    <span tal:replace="context/distribution/displayname" />
  </h1>
  <p class="error message"
     tal:condition="view/errors"
     tal:content="view/error_count" />
  <p class="error message"
     tal:repeat="form_wide_error view/form_wide_errors"
     tal:content="structure form_wide_error">
     Schema validation errors.
  </p>
  <p class="error message"
     tal:define="error python:view.getFieldError('packaging')"
     tal:condition="error"
     tal:content="structure error">
     Field specific error for the hidden packaging field.
  </p>

  <div class="top-portlet">
    <tal:project define="project context/upstream_product">
      <tal:has_project condition="project">
        <img width="64" height="64" src="/@@/product-logo"
             style="float:left;"/>
        <tal:summary content="structure project/summary" />
      </tal:has_project>
      <tal:noproject condition="not: project">
          This package is not linked to an upstream project.
      </tal:noproject>
    </tal:project>
  </div>

<style>
.bugscolour {
color:#A02C35;
}
.answerscolour {
color:#3941BF;
}
</style>

  <div class="yui-u first portlet" style="clear: left;">
    This source package has <a class="bugscolour" href="blah">300 bugs</a> and <a class="answerscolour" href="blah">20 questions</a>
  </div>

  <div class="yui-u portlet">
    <table class="form" id="packages_list">
      <tr style="font-weight: bold"><td colspan=3>Karmic 9.10 (development focus)</td></tr>
      <tr>
        <td>3.5</td>
        <td>Release (main)</td>
        <td>13 days ago</td>
      </tr>
      <tr style="font-weight: bold"><td colspan=3>Jaunty 9.04 (current release)</td></tr>
      <tr>
        <td>3.5</td>
        <td>Release (main)</td>
        <td>13 days ago</td>
      </tr>
      <tr>
        <td>3.4</td>
        <td>Security, Updates (main)</td>
        <td>18 days ago</td>
      </tr>
      <tr tal:define="pub context/latest_overall_publication">
        <td tal:replace="structure pub/@@+listing-archive-detailed"/>
        <metal:js use-macro="pub/archive/@@+macros/expandable-table-js"/>
      </tr>
    </table>
  </div>

  <div class="yui-u portlet"
       tal:define="ppa_versions view/related_ppa_versions"
       tal:condition="ppa_versions" id="related-ppa-versions">
    <div id="slide-trigger">
      <div class="widget-hd">
        Other versions of '<span tal:replace="context/name" />' in untrusted
        archives.
      </div>
    </div>
    <div class="widget-bd">
      <p>The following <strong>unsupported</strong> and 
         <strong>untrusted</strong> Personal Archives (PPAs) provide
         packages of
         '<span tal:replace="context/name" />':</p>
      <dl id="ppa_packaging">
        <tal:definition tal:repeat="ppa_version ppa_versions">
          <dt>
            <a tal:attributes="href ppa_version/archive/fmt:url">
              <img tal:replace="structure ppa_version/archive/image:icon" />
              <span tal:replace="ppa_version/archive/displayname">
                Super trusted PPA
              </span>
            </a> owned by
            <a tal:replace="structure ppa_version/archive/owner/fmt:link">
              Joe Dodgy
            </a>
          </dt>
          <dd>
            Versions:
            <span tal:replace="ppa_version/versions">
              Hoary (1.0.1), Feisty (2.0.1)
            </span>
          </dd>
        </tal:definition>
      </dl>

      <p>You can also search for
         <a tal:attributes="href view/further_ppa_versions_url">
           more untrusted versions of
           '<span tal:replace="context/name" />'</a>.
      </p>
    </div>
<script type="text/javascript">
YUI({
        base: '../../lib/yui/current/build/',
        filter: 'raw'
    }).use('node', 'event', 'lazr.effects', function(Y) {

    // XXX Michael Nelson 20090702 bug=340497 This slider
    // needs an integration test.
    // Collapse the body of the slider widget initially.
    Y.get('#related-ppa-versions .widget-bd').addClass('lazr-closed');

    // Ensure that the widget header uses the correct sprite icon
    // and gets the styling for javascript actions applied.
    var widget_header = Y.get('#related-ppa-versions .widget-hd');
    widget_header.addClass('sprite');
    widget_header.addClass('treeCollapsed');
    widget_header.addClass('js-action');

    var slide;
    Y.on('click', function(e) {
        if (!slide) {
            slide = Y.lazr.effects.slide_out('#related-ppa-versions .widget-bd');
            widget_header.replaceClass('treeCollapsed', 'treeExpanded');
        } else {
            slide.set('reverse', !slide.get('reverse'));
            widget_header.toggleClass('treeExpanded');
            widget_header.toggleClass('treeCollapsed');
        }
        slide.stop();
        slide.run();

    }, '#slide-trigger');
});
</script>

  </div>
    <p style="text-align: left">
      <a href="+publishinghistory">See full publishing history...</a>
    </p>


</tal:main>

</body>
</html>
