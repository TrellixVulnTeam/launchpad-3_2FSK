So now No Privileges Person is the Welsh translator for the PolyGlot
translation group, and they are the translation group for Ubuntu, which
uses the Closed translation mode. This means that No Privileges Person
should be able to translate any strings in Ubuntu to Welsh. In other
languages, he will not be able to add or change translations.

Let's see if No Privileges Person can see the translated strings in
Southern Sotho. We expect them to see a readonly form:

    >>> browser.addHeader(
    ...     'Authorization', 'Basic no-priv@canonical.com:test')
    >>> browser.open(
    ...     'http://translations.launchpad.dev/'
    ...     'ubuntu/hoary/+source/evolution/'
    ...     '+pots/evolution-2.2/st/+translate')
    >>> print browser.url
    http://.../ubuntu/.../evolution/+pots/evolution-2.2/st/+translate

We are in read only mode, so there shouldn't be any textareas:

    >>> main_content = find_tag_by_id(
    ...     browser.contents, 'messages_to_translate')
    >>> for textarea in main_content.findAll('textarea'):
    ...     print 'Found textarea:\n%s' % textarea

Neither any input widget:

    >>> for input in main_content.findAll('input'):
    ...     print 'Found input:\n%s' % input

However, in Welsh, No Privileges Person does have the ability to edit
directly.

    >>> browser.open(
    ...     'http://translations.launchpad.dev/'
    ...     'ubuntu/hoary/+source/evolution/'
    ...     '+pots/evolution-2.2/cy/19/+translate')
    >>> print browser.url
    http://.../ubuntu/.../evolution/+pots/evolution-2.2/cy/19/+translate

No Privileges is going to do some translation here.  Right now, message
number 148 is not translated.

    >>> tag = find_tag_by_id(browser.contents, 'msgset_148_cy_translation_0')
    >>> print tag.renderContents()
    (no translation yet)

After No posts a translation, however, it is.

    >>> browser.getControl(
    ...     name='msgset_148_cy_translation_0_radiobutton').value = [
    ...         'msgset_148_cy_translation_0_new']
    >>> browser.getControl(
    ...     name='msgset_148_cy_translation_0_new').value = 'foo\n%i%i%i\n'
    >>> browser.getControl('Save & Continue').click()
    >>> print browser.url
    http://.../ubuntu/.../evolution/+pots/evolution-2.2/cy/20/+translate

And finally, let's take a look again, and we should have a translation
added (with some extra html code, but the same content we wanted to add)

    >>> browser.getLink('Previous').click()
    >>> print browser.url
    http://.../ubuntu/.../evolution/+pots/evolution-2.2/cy/19/+translate

    >>> tag = find_tag_by_id(browser.contents, 'msgset_148_cy_translation_0')
    >>> print tag.renderContents()
    foo<img alt="" src="/@@/translation-newline" /><br />
    %i%i%i

