<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
>

<head>
    <metal:block fill-slot="head_epilogue">
    <script tal:content="structure string:
            LPJS.use('base', 'node', 'event',
                    'lp.registry.disclosure.sharing',
                function(Y) {
            Y.on('domready', function() {
                var config = ${view/json_sharing_picker_config}
                Y.lp.registry.disclosure.sharing.setup_product_sharing(config);
            });
          });
    "/>

    <!-- Handlebars templates -->
    <script id="observer-table-template" type="text/x-template"
        tal:content="structure string:
        <table class='disclosure listing' id='observer-table'>
            <thead>
                <tr><th style='width: 33%' colspan='2'>User or Team</th>
                    <th colspan='2'>
                        Sharing
                        <span class='help'>
                            (<a class='js-action help' target='help'
                                href='permissions_help.html'>help</a>)
                        </span>
                    </th>
                    <th style='width: ' colspan='1'>Shared items</th>
                </tr>
            </thead>
            <tbody id='observer-table-body'>
                {{#observers}}
                <tr id='permission-{{name}}'><td>
                    <a href='{{web_link}}' class='sprite person'>{{display_name}}
                    <span class='formHelp'>{{role}}</span></a>
                </td>
                <td id='remove-{{name}}'>
                    <a title='Share nothing with this user'
                       href='#' class='sprite remove'>
                    </a>
                </td>
                <td id='td-permission-{{name}}'>
                    <span class='sortkey'>1</span>
                    <ul class='horizontal'>
                       {{>observer_access_policies}}
                    </ul>
                </td>
                <td></td>
                <td><span class='formHelp'>No items shared</span>
                </td>
                </tr>
                {{/observers}}
            </tbody>
        </table>
    "/>
     <script id='observer-access-policy' type="text/x-template"
         tal:content="structure string:
       {{#access_policies}}
       <li><span id='{{policy}}-permission'>
         <span class='value'></span>
         <a href='#'>
           <img class='editicon sprite edit'/>
         </a>
       </span></li>
       {{/access_policies}}
    "/>

    </metal:block>
</head>
<body>
  <div metal:fill-slot="main">
    <p>
      Proprietary, embargoed security, or user-data information about this
      project is shared with these users and teams.
    </p>

    <table id="observer-table" class="disclosure listing">
      <thead>
        <tr>
          <th colspan="2" style="width: 33%">User or Team</th>
          <th colspan="2" style="width: ">Sharing <span class="help">(<a href="permissions_help.html" target="help" class="js-action help">help</a>)</span></th>
          <th colspan="1" style="width: ">Shared items</th>
        </tr>
      </thead>
      <tbody id="observer-table-body"></tbody>
    </table>
  </div>

  <div metal:fill-slot="side" tal:define="overview_menu context/menu:overview">
    <tal:comment replace="nothing">
    XXX j.c.sackett 2012-02-16 The data in this portlet is static right now,
    as policy architecture (which determines the numbers to display) are in
    flux. Once they settle down, the view needs to populate some methods to
    set the numbers in this portlet.
    </tal:comment>
    <div id="portlet-disclosure-links" class="first portlet">
      <a id='add-observer-link' class='sprite add js-action' href="#">Share</a>
    </div>
    <div id="portlet-disclosure-summary" class="portlet">
      <p>
        Permavirgin is shared with <a href="#">0</a> users:
      </p>

      <table>
        <thead>
          <tr>
            <td colspan="2"><strong>Embargoed Security:</strong></td>
          </tr>
        </thead>
        <tbody>
          <tr class="code-links">
            <td>Sharing everything with <a href="#">0</a> users</td>
          </tr>
          <tr class="code-links">
            <td>Sharing some things with <a href="#">0</a> users</td>
          </tr>
        </tbody>
      </table>

      <p></p>

      <table>
        <thead>
          <tr>
            <td colspan="2"><strong>User Data:</strong></td>
          </tr>
        </thead>
        <tbody>
          <tr class="code-links">
            <td>Sharing everything with <a href="#">0</a> users</td>
          </tr>
          <tr class="code-links">
            <td>Sharing some things with <a href="#">0</a> users</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
