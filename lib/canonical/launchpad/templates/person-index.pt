<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
    <tal:block metal:fill-slot="head_epilogue">
        <link rel="meta" type="application/rdf+xml" title="FOAF" href="+rdf"
              tal:condition="context/preferredemail" />
    </tal:block>
</head>

<body>

<metal:leftportlets fill-slot="portlets_one">
    <div tal:replace="structure context/@@+portlet-details" />
    <div tal:replace="structure context/@@+portlet-emails" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure context/@@+portlet-actions" />
    <div tal:replace="structure context/@@+portlet-calendar" />
</metal:rightportlets>

<div metal:fill-slot="main">

  <div class="highlighted" style="font-size: 80%;">
    <img tal:condition="context/hackergotchi"
         tal:attributes="src context/hackergotchi/url"
         style="float: left;" />
    <img tal:condition="not: context/hackergotchi"
         src="/++resource++hackergotchi"
         style="float: left;" />
    <p tal:condition="not: context/homepage_content">
      <span tal:replace="context/browsername">Foo Bar</span> has not
      created a homepage. The home page is like a wiki page - you can use
      it to keep people up to date on your activities, interests, etc. It
      is a free-form space, you can put anything here.
      [<a href="+edithomepage">Edit</a>]
    </p>

    <tal:homepage condition="context/homepage_content"
       replace="structure context/homepage_content/fmt:text-to-html">
       The home page content goes here.
    </tal:homepage>
  </div>


  <h2>Registered Details</h2>

  <table>
    <tr tal:condition="context/allwikis">
      <th>Wiki:</th>
      <td>
        <span tal:repeat="wiki context/allwikis">
          <a tal:content="wiki/wikiname" 
             tal:attributes="href wiki/url"
           >WikiName</a><tal:block condition="not: repeat/wiki/end">,
           </tal:block>
        </span>
      </td>
    </tr>

    <tr tal:repeat="ircnick context/ircnicknames">
      <th>IRC:</th>
      <td><code style="font-size: 120%"
                tal:content="ircnick/nickname"/>
          on network <code style="font-size: 120%"
                           tal:content="ircnick/network" />
      </td>
    </tr> 

    <tr tal:condition="context/jabberids">
      <th>Jabber:</th>
      <td>
        <tal:block repeat="jabber context/jabberids">
          <span tal:replace="jabber/jabberid"
            /><span tal:condition="not: repeat/jabber/end">,</span>
        </tal:block>
      </td>
    </tr> 

    <tr tal:define="keysCount view/gpgkeysCount">
      <th>GPG&nbsp;Keys:</th>
      <td>
        <tal:block condition="not: keysCount">
          <span tal:condition="python: view.user == context">
            You haven't told Launchpad about
            <a href="+editgpgkeys">your gpgkeys</a> yet. Please register
            any GPG keys that you have, so that we can verify digital
            signatures that you make.
          </span>
          <i tal:condition="python: view.user != context">
            None registered.
          </i>
        </tal:block>
        <tal:block repeat="key context/gpgkeys">
        <a tal:attributes="href key/keyserverURL">
          <span tal:replace="key/keyid"
            /></a><span tal:condition="not: repeat/key/end">,</span>
        </tal:block>
      </td>
    </tr>

    <tr tal:condition="context/sshkeys">
      <th>SSH Keys:</th>
      <td>
        <a href="+sshkeys">
          <span tal:replace="view/sshkeysCount">0</span> SSH key(s)
        </a>
      </td>
    </tr>

  </table>

  <!-- Members of this team -->
  <tal:block condition="context/isTeam">
    <h2>Team members</h2>
    <p>
      These people and/or teams are members of
      <span tal:replace="context/browsername">Ubuntu Members</span>.
    </p>
    <ul>
      <li tal:repeat="member context/activememberships">
        <a tal:content="member/person/browsername"
           tal:attributes="href member/person/fmt:url">Joe Soap</a>
          (<span tal:replace="member/status/title">Admin</span>)
      </li>
    </ul>
  </tal:block>


  <!-- Teams of which I'm a member -->
  <tal:block condition="context/myactivememberships">
    <h2>Team Memberships</h2>

    <p tal:condition="context/isTeam">
      <span tal:replace="context/browsername">Ubuntu Members</span> is
      a member of these teams, so all members of
      <span tal:replace="context/browsername">Ubuntu Members</span> are
      also members of these teams.
    </p>
    <p tal:condition="not: context/isTeam">
      <span tal:replace="context/browsername">Foo Bar</span> is
      a member of these teams.
    </p>
    <ul>
      <li class="person"
          tal:repeat="membership context/myactivememberships">
        <a tal:attributes="href string:../${membership/team/name}"
           tal:content="membership/team/browsername">foo</a>
        (<span tal:replace="membership/statusname">
          Administrator</span>)
      </li>
    </ul>
  </tal:block>
  <p tal:condition="not: context/activememberships">
    <span tal:replace="context/browsername">Foo Bar</span> is not an
    active member of any Launchpad teams.
  </p>


  <tal:block condition="context/isTeam">
    <h2>Your involvement</h2>

    <p tal:condition="not: request/lp:person">
      You must <a href="+login">log in</a>
      to join or leave this team.
    </p>
    <tal:block condition="request/lp:person">
      <tal:block condition="view/userIsOwner">
        <p tal:condition="view/userIsActiveMember">
          You are the owner of this team.
        </p>
        <p tal:condition="not: view/userIsActiveMember">
          You are the owner of this team,
          but not currently an active member.
        </p>
      </tal:block>
      <tal:block condition="not: view/userIsOwner">
        <p tal:condition="view/userIsActiveMember">
          You are a member of this team.
        </p>
        <p tal:condition="not: view/userIsActiveMember">
          You are not a member of this team.
        </p>
      </tal:block>
    </tal:block>
  </tal:block>

</div> 
</body>
</html>
