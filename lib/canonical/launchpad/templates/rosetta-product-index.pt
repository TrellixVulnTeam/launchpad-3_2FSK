<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="rosetta">

<head>
    <title metal:fill-slot="title">Rosetta:
        <span tal:replace="context/title">Some product or other</span></title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Rosetta style sheet -->
    <style type="text/css" media="screen">@import url(rosetta.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <h1>Translation overview: <span tal:replace="context/title">NAME</span></h1>

    <div style="float: right; clear: both; margin-top: 0.25em;">
    Product home page:
    <a href="http://product.home/page"
       tal:content="context/url|default"
       tal:attributes="href context/url|nothing">(None supplied)</a>
    </div>

    <p tal:content="context/description">
    Mozilla offers a full suite of integrated Internet applications including
    a web browser, e-mail client, address book, web page composer, Internet
    chat software and calendar application.
    </p>

    <p class="discreet">
    These language name headlines are based on the user preferences, if
    the user hasn't set anything, it's the stuff we can extract from
    browser/IP.
    </p>

    <tal:block condition="view/thereAreTemplates">
        <!--
        XXX: There is no pulldown.

        <div class="documentDescription">
        Here are the translation resources available, select language from the
        pulldown, and click an entry to translate.
        </div>
        -->

        <div tal:condition="not: view/languages">
            <ul>
                <li tal:repeat="template context/poTemplates">
                    <a tal:attributes="href string:${template/name}/translate"
                        tal:content="template/title">template</a></li>
            </ul>
        </div>

        <div tal:condition="view/languages" tal:repeat="LT view/languageTemplates">

            <h2 tal:content="LT/language/englishName">Language</h2>

            <table class="listing">
                <thead>
                    <th>Resource</th>
                    <th>Translated</th>
                    <th>Untranslated</th>
                    <th>Graph</th>
                    <th>Message catalog</th>
                </thead>

                <tbody>
                    <tr tal:repeat="template LT/templates">
                        <!--
                        XXX: Assumption that a PO file exists for this
                        language.
                        CarlosPerelloMarin: Fixed for the statistics, we
                        should implement the export code in a way we get
                        an empty .po file from the .pot one
                        -->
                        <td><a tal:attributes="href
                            string:${template/name}/translate"
                            tal:content="template/title">Resource Name</a></td>
                        <td><span tal:replace="template/poTranslated">0</span></td>
                        <td><span tal:replace="template/poUntranslated">0</span></td>
                        <td>
                            <img src="/++resource++green-bar.png"
                                height="15"
                                alt="Translated &amp; non updated graph"
                                tal:condition="template/poNonUpdatesCount"
                                tal:attributes="width template/poNonUpdatesPercent;
                                                title string: Translated: ${template/poNonUpdatesPercent}%"
                            /><img src="/++resource++blue-bar.png"
                                height="15"
                                alt="Updated graph"
                                tal:condition="template/poUpdatesCount"
                                tal:attributes="width template/poUpdatesPercent;
                                                title string: Updates: ${template/poUpdatesPercent}%"
                            /><img src="/++resource++dwelled-bar.png"
                                height="15"
                                alt="Rosetta additions graph"
                                tal:condition="template/poRosettaCount"
                                tal:attributes="width template/poRosettaPercent;
                                                title string: Rosetta additions: ${template/poRosettaPercent}%"
                            /><img src="/++resource++red-bar.png"
                                height="15"
                                alt="Fuzzy graph"
                                tal:condition="template/poUntranslated"
                                tal:attributes="width template/poUntranslatedPercent;
                                                title string: Untranslated: ${template/poUntranslatedPercent}%" />
                        </td>
                        <td><a tal:attributes="href
                            string:${template/name}/${LT/language/code}/po">
                            <img src="/++resource++download.png" alt="Download PO file" />Download .po</a></td>
                    </tr>
                </tbody>
            </table>

        </div>
    </tal:block> <!-- condition="view/thereAreTemplates -->

    <tal:block condition="not: view/thereAreTemplates">
        <p>
        Rosetta doesn't currently know of any translatable resources for
        <span tal:content="context/title">product title</span>.
        </p>
    </tal:block>

</div>

</body>
</html>
