<metal:mirrors-table define-macro="mirrors-table">
  <tal:comment replace="nothing">
  This macro expects the following variables defined:
    :mirrors_by_country: A list of dictionaries containing country names
                         and the list of IDistributionMirrors to be listed
  </tal:comment>

  <table class="listing">
  <tbody>
    <tal:country_and_mirrors repeat="country_and_mirrors mirrors_by_country">
      <tr class="highlighted">
        <th colspan="5" style="text-align: left">
          <strong tal:content="country_and_mirrors/country" />
        </th>
      </tr>
      <tr tal:repeat="mirror country_and_mirrors/mirrors">
        <td>
          <a tal:attributes="href mirror/http_base_url"
             tal:content="mirror/title">Mirror Name</a>
        </td>
        <td><span tal:replace="mirror/speed/title" /></td>
        <td tal:define="status mirror/getOverallStatus">
          <span tal:replace="status/title" />
        </td>
        <td>
          <tal:block condition="mirror/has_ftp_or_rsync_base_url">
            Alternatives:
            <a tal:condition="mirror/ftp_base_url"
              tal:attributes="href mirror/ftp_base_url">ftp</a>
            <a tal:condition="mirror/rsync_base_url"
            tal:attributes="href mirror/rsync_base_url">rsync</a>
          </tal:block>
        </td>
        <td><a tal:attributes="href mirror/fmt:url">Details</a>
        </td>
      </tr>
    <tr tal:condition="not: repeat/country_and_mirrors/end" class="note">
      <td>&nbsp;</td>
    </tr>
    </tal:country_and_mirrors>
  </tbody>
  </table>
</metal:mirrors-table>


<metal:archive-mirror-content define-macro="archive-mirror-content">
  <tal:comment replace="nothing">
  This macro expects the following variables defined:
      :arch_releases: The list of MirrorDistroArchRelease objects of this
                      mirror.
      :source_releases: The list of MirrorDistroReleaseSource objects of this
                        mirror.
  </tal:comment>

  <h2>Architecture Releases Mirrored</h2>
  <div tal:condition="not: arch_releases">
    We have found no releases for any architectures on this mirror.
    This is normal if we have not yet successfully verified the mirror.
  </div>

  <table tal:condition="arch_releases"
         class="listing sortable" id="arches">
  <thead>
    <tr>
      <th>Release</th>
      <th>Architecture</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="arch_release arch_releases">
      <td tal:content="arch_release/distro_arch_release/distrorelease/title" />
      <td tal:content="arch_release/distro_arch_release/architecturetag" />
      <td tal:content="arch_release/status/title" />
    </tr>
  </tbody>
  </table>

  <h2>Source Releases Mirrored</h2>
  <div tal:condition="not: source_releases">
    We have found no source releases on this mirror. This is normal
    if we have not yet successfully verified the mirror.
  </div>

  <table tal:condition="source_releases" 
         class="listing sortable" id="sources">
  <thead>
    <tr>
      <th>Release</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="source_release source_releases">
      <td tal:content="source_release/distrorelease/title" />
      <td tal:content="source_release/status/title" />
    </tr>
  </tbody>
  </table>
</metal:archive-mirror-content>

<metal:release-mirror-content define-macro="release-mirror-content">
  <tal:comment replace="nothing">
  This macro expects the following variables defined:
      :flavours_by_releases: A list where each element contains attributes
                             named 'distrorelease' and 'flavours'.
  </tal:comment>

  <h2>Releases And Flavours Mirrored</h2>
  <div tal:condition="not: flavours_by_releases">
    We have found no CD images for any releases on this mirror.
    This is normal if we have not yet successfully verified the mirror.
  </div>

  <table class="listing sortable" id="releases"
         tal:condition="flavours_by_releases">
    <thead>
      <tr>
        <th>Release</th>
        <th>Flavours</th>
      </tr>
    </thead>
    <tbody>
      <tr tal:repeat="flavours_by_release flavours_by_releases">
        <td tal:content="flavours_by_release/distrorelease/title" />
        <td>
          <tal:flavours repeat="flavour flavours_by_release/flavours">
            <span tal:replace="flavour/capitalize"
            /><span tal:condition="not: repeat/flavour/end">,</span>
          </tal:flavours>
        </td>
      </tr>
    </tbody>
  </table>
</metal:release-mirror-content>
