<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
  >
<body>

<metal:portlets fill-slot="portlets">
   <tal:portlet replace="structure context/distribution/@@+portlet-ppa-architectures" />
</metal:portlets>

<div metal:fill-slot="main">

  <tal:privacy-icon replace="structure context/@@+privacy-icon"/>

  <h1>Delete packages from <tal:title replace="context/title" /></h1>

    <tal:inactive_ppa_header condition="not: view/has_sources">
      <p>This PPA does not contain any source packages published.</p>
    </tal:inactive_ppa_header>

  <div metal:use-macro="context/@@launchpad_form/form">

    <div class="form" metal:fill-slot="widgets"
         tal:condition="view/has_sources">

      <div metal:use-macro="context/@@+form-macros/selectable-sources" />

      <tal:actions condition="view/available_sources_size"
                   define="widget nocall:view/widgets/deletion_comment;
                           field_name widget/context/__name__;
                           error python:view.getFieldError(field_name);">
        <p class="warning message"
          >Read the page help to understand how removals work.</p>
        <div style="margin-top: 1em;">
          <label tal:attributes="for widget/name"
                 tal:content="string:${widget/label}:">Label</label>
          <input tal:replace="structure widget" />
          <input tal:replace="structure
             view/actions/field.actions.delete/render" />
          <p class="formHelp" tal:condition="widget/hint"
             tal:content="widget/hint">Some Help Text</p>
        </div>
        <div class="error message" tal:condition="error"
             tal:content="structure error">Error message</div>
      </tal:actions>

   </div> <!-- widgets -->

   <div class="actions" metal:fill-slot="buttons">
   </div> <!--empties buttons section -->

  </div> <!-- launchpad_form -->

</div> <!--main -->

<div metal:fill-slot="help">
   <p>This page allows you to schedule packages for deletion. To do
     this, search first for the desired packages, select one of more
     of them, input a comment, and request deletion. Deletion will
     affect the source selected and any binary packages built from
     it.</p>

   <p>Deletion marks the packages as deleted in the UI, but they are
     actually removed from your PPA in separate steps:</p>

   <ul>
     <li>
       <b>Archive indexes</b>: A deleted package disappears from the
       archive indexes in at most 20 minutes. As soon as this
       happens, users will no longer be able to install it via
       apt.
     </li>

     <li>
       <b>Files on disk</b>; A file will be removed from the archive
       disk pool only when <b>all</b> packages referencing it have
       been scheduled for deletion. This includes packages published
       in other series, or multiple package versions referring to
       the same original upstream tarball.

       Since the archive removal job runs only once a day, it may
       take up to a few days to remove a file from disk, depending
       on the number of packages referencing it. In the most common
       situation, files are removed within 24 hours.
     </li>
   </ul>

   <p>Because of these conditions, the easiest alternative to replace
     a broken source is always to upload a package with a higher
     version number and let the system automatically supersede and
     remove the older version. <b>You should not rely on deletion
     requests to re-upload the same source version with different
     contents</b>.</p>
</div>

</body>
</html>
