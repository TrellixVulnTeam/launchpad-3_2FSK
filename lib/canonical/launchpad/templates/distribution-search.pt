<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<div metal:fill-slot="main">

  <h1>Source Package Search</h1>

  <form name="search" method="GET">
    <div>
      <label for="text">
        Show <span tal:replace="context/title" />packages containing:
      </label>
    </div>
    <input type="text"
      name="text"
      size="35"
      tal:attributes="value request/text|nothing" />

    <input type="submit" value="Search"
        tal:condition="not: view/searchrequested" />
    <input type="submit" value="Search Again"
        tal:condition="view/searchrequested" />

  </form>

  <tal:searching condition="view/searchrequested">

    <tal:has_matches condition="view/searchresults">

      <tal:per_match repeat="dsp view/searchresults">
        <img src="/++resource++package-source" />
        <a tal:content="dsp/name"
           tal:attributes="href dsp/fmt:url">foobar</a>:
        <div style="margin-left: 30px; font-size: 80%;"
          tal:content="dsp/binary_package_names">
          apache2 apache-runtime-utils apr
        </div>
      </tal:per_match>

    </tal:has_matches>

    <tal:no_matches condition="not: view/matches">

      <img src="/++resource++alert" />
      <i>No packages matching "<span tal:replace="view/text">amarok</span>"
      are published in
      <span tal:replace="context/displayname">ubuntu</span>.</i>

    </tal:no_matches>

  </tal:searching>

</div>

</body>

</html>
