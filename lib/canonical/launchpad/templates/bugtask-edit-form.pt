      <p class="portalMessage"
         tal:define="status view/process_form"
         tal:condition="status"
         tal:content="status" />

      <div class="portalError"
        tal:repeat="top_of_page_error view/top_of_page_errors"
        tal:content="structure top_of_page_error">
        Schema validation errors.
      </div>

      <p tal:condition="context/bug/duplicateof"
         class="portalMessage">
        This bug is a duplicate of
        <a href="#"
           tal:attributes="href context/bug/duplicateof/fmt:url">bug
             #<span tal:replace="context/bug/duplicateof/id">42</span></a>
      </p>

      <div metal:define-macro="editform">
        <form
          action="#"
          tal:attributes="action string:${context/fmt:url}/+editstatus"
          method="post"
          enctype="multipart/form-data">
          <div metal:define-macro="formbody">
            <p tal:define="errors view/errors|nothing"
               tal:condition="errors"
               class="portalMessage"
               i18n:translate="">
              There are <strong
              tal:content="view/errors/count:len"
              i18n:name="num_errors">6</strong>
              problems with the information you entered.
              Please fix them and try again.
            </p>
            <p tal:condition="not: context/required:launchpad.Edit"
               class="portalMessage">
              You are not the assignee, or the maintainer of
              <span tal:replace="context/targetname">product</span> so you
              cannot edit this status page.
            </p>
          </div>

          <div class="field">
            <table>
            <tal:distrotask condition="python:context.distribution or
                                      context.distrorelease">
              <tr>
                <td>
                  <label tal:attributes="for view/sourcepackagename_widget/name"
                         tal:content="view/sourcepackagename_widget/label">
                    Source package name
                  </label>
                </td>
                <td>
                  <label tal:attributes="for view/binarypackagename_widget/name"
                         tal:content="view/binarypackagename_widget/label">
                    Binary package name
                  </label>
                </td>
              </tr>
              <tr>
                <td tal:content="structure view/sourcepackagename_widget" nowrap />
                <td tal:content="structure view/binarypackagename_widget" nowrap />
              </tr>
            </tal:distrotask>
            <tal:upstreamtask condition="python:context.product">
              <tr>
                <td colspan="0">
                  <label tal:attributes="for view/product_widget/name"
                         tal:content="view/product_widget/label">
                    Upstream product
                  </label>
                </td>
              </tr>
              <tr>
                <td colspan="0"
                    tal:content="structure view/product_widget" nowrap />
              </tr>
            </tal:upstreamtask>
            </table>
            <table>
            <tr>
              <td>
                <label tal:attributes="for view/status_widget/name"
                       tal:content="view/status_widget/label">
                  Status
                </label>
              </td>
              <td>
                <label tal:attributes="for view/severity_widget/name"
                       tal:content="view/severity_widget/label">
                  Severity
                </label>
              </td>
              <td>
                <label tal:attributes="for view/priority_widget/name"
                       tal:content="view/priority_widget/label">
                  Priority
                </label>
              </td>
              <td>
                <label tal:attributes="for view/milestone_widget/name"
                       tal:content="view/milestone_widget/label">
                  Target
                </label>
              </td>
            </tr>
            <tr>
              <td tal:content="structure view/status_widget" />
              <td tal:content="structure view/severity_widget" />
              <td tal:content="structure view/priority_widget" />
              <td tal:content="structure view/milestone_widget" />
            </tr>
            </table>
            <table>
            <tr>
              <td>
                <label tal:attributes="for view/assignee_widget/name"
                       tal:content="view/assignee_widget/label" />
              </td>
            </tr>
            <tr>
              <td nowrap tal:content="structure view/assignee_widget"
                  colspan="2" />
            </tr>
            </table>
            <table>
            <tr>
              <td>
                <label tal:attributes="for view/bugwatch_widget/name"
                       style="white-space: nowrap">
                  <a href="#"
                     tal:condition="context/bugwatch"
                     tal:attributes="href context/bugwatch/url"
                     tal:content="view/bugwatch_widget/label">
                   Remote Watch
                  </a>
                  <span tal:condition="not: context/bugwatch"
                        tal:content="view/bugwatch_widget/label" />
                </label>
              </td>
            </tr>
            <tr>
              <td nowrap tal:content="structure view/bugwatch_widget"
                  colspan="2" />
            </tr>
            </table>
          </div>

          <div class="field" style="margin-left: 4px">
            <div>
              <label for="comment_on_change">Comment on most recent change</label>
              <div style="margin-top: 5px">
                <i tal:content="python:context.statusexplanation or '(none)'" />
              </div>
            </div>
          </div>

          <div class="field" style="margin-left: 4px">
            <div tal:condition="not:view/comment_on_change_error">
              <label for="comment_on_change">Comment on this change (optional)</label>

              <div>
                <textarea cols="62" id="comment_on_change" name="comment_on_change" rows="15"
                          tal:content="request/comment_on_change|nothing"></textarea>
              </div>
            </div>
            <div tal:condition="view/comment_on_change_error" class="portalError">
              <label for="comment_on_change">Comment on this change (optional)</label>

              <div>
                <textarea cols="62" id="comment_on_change" name="comment_on_change" rows="15"
                          tal:content="request/comment_on_change|nothing"></textarea>
              </div>
              <div>
                <img src="/@@/info_icon.gif" />
                <span class="error" tal:content="view/comment_on_change_error">
                  An error on comment on change.
                </span>
              </div>
            </div>
          </div>

          <div class="actions" tal:condition="context/required:launchpad.Edit">
            <input
              type="submit"
              name="FORM_SUBMIT"
              value="Save Changes"
              i18n:attributes="value submit-button" />
          </div>
        </form>

      </div>
