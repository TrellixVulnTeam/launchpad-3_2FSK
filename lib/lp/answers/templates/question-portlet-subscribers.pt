<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">

<div class="portlet" id="subscribers">
  <h2>Subscribers</h2>

  <div class="portletBody portletContent"
       tal:define="subscribers context/getDirectSubscribers;
                   indirect_subscribers context/getIndirectSubscribers">

    <ul tal:condition="subscribers">
      <li tal:repeat="subscriber subscribers">
        <a
          tal:condition="subscriber/name|nothing"
          tal:attributes="href subscriber/fmt:url">

          <tal:block replace="structure subscriber/fmt:icon" />
          <tal:block replace="subscriber/fmt:displayname/fmt:shorten/20" />
        </a>
      </li>
    </ul>
    <p tal:condition="not: subscribers">
      <i>No subscribers.</i>
    </p>
    <div style="margin-top: 1em;" tal:condition="indirect_subscribers">

      <b>Also notified:</b><br />
      <ul>
        <li tal:repeat="subscriber indirect_subscribers">
          <a
            tal:condition="subscriber/name|nothing"
            tal:attributes="href subscriber/fmt:url">

            <tal:block replace="structure subscriber/fmt:icon" />
            <tal:block replace="subscriber/fmt:displayname/fmt:shorten/20" />
          </a>
        </li>
      </ul>

    </div>
  </div>
</div>
</tal:root>
