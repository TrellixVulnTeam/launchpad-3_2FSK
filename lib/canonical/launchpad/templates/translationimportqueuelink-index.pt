<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">
  <body>
    <metal:rightportlets fill-slot="portlets_two">
      <div tal:replace="structure context/@@+portlet-details" />
    </metal:rightportlets>

    <div metal:fill-slot="main">
      <div metal:use-macro="context/@@launchpad_form/form">
        <h1 tal:condition="view/label"
            tal:content="view/label"
            metal:fill-slot="heading">
          Translation files waiting to be imported for $context
        </h1>

        <div metal:fill-slot="extra_info" class="documentDescription">
          Here you have all translation related entries that are
          imported, blocked, deleted or waiting to be imported in Launchpad for
          <tal:displayname replace="context/displayname">Foo</tal:displayname>.
          <tal:login condition="not:request/lp:person">
            <a href="+login">Log in</a> to change items in this list.
          </tal:login>
        </div>

        <!-- Filtering options. -->
        <div metal:fill-slot="extra_top">
          <label>Show:</label>
          <tal:comment tal:replace="nothing">
            The 'selected' attribute value in next select means basically
            the following:

            if request.form['status'] == literalvalue:
                return 'selected'
            else:
                return None

            Where 'literalvalue' is 'all' or any valid status.
          </tal:comment>
          <select name="status" title="Choose which status to show">
            <option value="all"
              tal:attributes="selected
              request/htmlform:status/selected/all"
              >
              All
            </option>
            <tal:options content="structure view/getStatusFilteringSelect" />
          </select>
          <select name="type" title="Choose which kind of files to show">
            <option value="all"
              tal:attributes="selected request/htmlform:type/selected/all">
              Files of any type
            </option>
            <option value="po"
              tal:attributes="selected request/htmlform:type/selected/po">
              Only .po files
            </option>
            <option value="pot"
              tal:attributes="selected request/htmlform:type/selected/pot">
              Only .pot files
            </option>
          </select>
          <input type="submit" id="field.actions.filter"
                 name="field.actions.filter" value="Filter" class="button" />
        </div>

        <!-- Queue entries -->
        <div metal:fill-slot="extra_bottom">
        <tal:block condition="not:view/batchnav/currentBatch">
          <div class="documentDescription">
            There are no entries that match this filtering.
          </div>
        </tal:block>
        <tal:block condition="view/batchnav/currentBatch">
          <tal:navigation
               replace="structure view/batchnav/@@+navigation-links-upper" />
          <table class="listing" width="100%">
            <tal:loop repeat="entry view/batchnav/currentBatch">
              <tr>
                <tal:comment replace="nothing">
                  XXX: CarlosPerelloMarin 20060309:
                  We are using here condition="entry/import_into/title|nothing"
                  because, sometimes, entry/import_into evaluates as false when
                  it should not. See bug #34213 for more information.
                </tal:comment>
                <td tal:condition="entry/import_into/title|nothing" rowspan="3">
                  <img alt="" src="/@@/download.png" />
                </td>
                <td tal:condition="not: entry/import_into/title|nothing" rowspan="2">
                  <img alt="" src="/@@/download.png" />
                </td>
                <td>
                  <a tal:attributes="href entry/content/http_url"
                     tal:content="entry/path">po/foo.pot</a> in
                  <a tal:condition="entry/sourcepackage"
                     tal:content="entry/sourcepackage/title"
                     tal:attributes="href entry/sourcepackage/fmt:url"
                     >evolution in Ubuntu Hoary</a>
                  <a tal:condition="entry/productseries"
                     tal:content="entry/productseries/title"
                     tal:attributes="href entry/productseries/fmt:url"
                     >Evolution Series: MAIN</a>
                </td>
                <td tal:condition="entry/required:launchpad.Edit"
                    tal:content="structure python: view.getStatusSelect(entry)">
                </td>
                <td tal:condition="not: entry/required:launchpad.Edit"
                    tal:content="entry/status/title">Needs Review
                </td>
                <td>
                  <tal:block condition="entry/required:launchpad.Admin">
                    [<a tal:attributes="href entry/fmt:url">Edit</a>]
                  </tal:block>
                </td>
              </tr>
              <tr class="discreet secondary">
                <td colspan="3">
                  Uploaded by 
                  <a tal:content="entry/importer/browsername"
                     tal:attributes="href entry/importer/fmt:url"
                     >Mark Shuttleworth</a>
                  on <span tal:content="entry/dateimported/fmt:datetime">date</span>
                </td>
              </tr>
              <tal:comment replace="nothing">
                XXX: CarlosPerelloMarin 20060309:
                We are using here condition="entry/import_into/title|nothing"
                because, sometimes, entry/import_into evaluates as false when
                it should not. See bug #34213 for more information.
              </tal:comment>
              <tr tal:condition="entry/import_into/title|nothing" class="discreet secondary">
                <td colspan="3">
                  Will be imported into 
                  <a tal:content="entry/import_into/title"
                     tal:attributes="href entry/import_into/fmt:url"
                     >Foo</a>
                </td>
              </tr>
            </tal:loop>
          </table>
          <tal:navigation
               replace="structure view/batchnav/@@+navigation-links-lower" />
        </tal:block>
        </div>
      </div>
    </div>
  </body>
</html>
