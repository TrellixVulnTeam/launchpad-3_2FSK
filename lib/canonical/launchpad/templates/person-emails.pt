<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
  <title metal:fill-slot="title">Edit
    <span tal:replace="context/displayname">Name</span>
    Information</title>
  <!-- Plone style sheet -->
  <style type="text/css" media="screen">@import url(plone.css);</style>
  <!-- Launchpad style sheet -->
  <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure view/actionsPortlet" />
</metal:rightportlets>

<div metal:fill-slot="main">

  <h1>Your Email Addresses</h1>

  <tal:dummy tal:define="submitted view/emailFormSubmitted">
  <div tal:condition="submitted">
    <p class="portalMessage" tal:content="structure view/message"></p>
  </div>
  </tal:dummy>
  
  <form name="email" action="" method="POST">

  <p class="documentDescription">A list of the email addresses associated
  with this account in the Launchpad.</p>
  
  <tal:block tal:condition="view/anyRegisteredEmail">
  <p>Your preferred email address is the only
  one we'll use to communicate with you. There can be only one preferred
  email address at a time, and it cannot be removed.</p>

  <table id="ass_listing" class="listing" width="100%">
    <tr>
      <th>Preferred</th>
      <th>Email</th>
      <th>Remove</th>
    </tr>
    <tr tal:define="email context/preferredemail" tal:condition="email">
      <td>
        <input type="radio" name="PREFERRED_EMAIL"
               tal:attributes="value email/id" checked />
      </td>
      <td tal:content="email/email">email</td>
      <td>
        <input tal:attributes="value email/id" name="REMOVE_EMAIL" type="checkbox" disabled/>
      </td>
    </tr>
    <tr tal:repeat="email context/validatedemails">
      <td>
        <input type="radio" name="PREFERRED_EMAIL" tal:attributes="value email/id" />
      </td>
      <td tal:content="email/email">email</td>
      <td> 
        <input tal:attributes="value email/id" name="REMOVE_EMAIL" type="checkbox" />
      </td>
    </tr>
    <tr tal:repeat="newemail context/unvalidatedemails">
      <td>
        unvalidated
      </td>
      <td tal:content="newemail">email@foo.com</td>
      <td> 
      </td>
    </tr>
  </table>
  <br />
  </tal:block>

  <tal:block tal:condition="not: view/anyRegisteredEmail">
  <p>You don't have any registered email address in Launchpad. You can do so
  by filling in the form bellow with the email address you want and your
  password. After that, we will e-mail you to check your address and give you
  instructions on how to complete the registration of your email address.</p>
  </tal:block>

  <table>
    <tr>
      <td>Add a New Email: </td>
      <td><input type="text" name="newemail" /></td>
    </tr>

    <tr>
      <td>Your password: </td>
      <td><input type="password" name="password" /></td>
    </tr>
    <tr>
      <td></td>
      <td align="right"><input type="submit" name="SUBMIT_CHANGES" value="Submit"/>
      </td>
    </tr>
  </table>

  <tal:block define="guessedemails context/guessedemails">
  <fieldset tal:condition="guessedemails">
    <legend>Detected Emails</legend>
    <p>The following email addresses have been detected by our system as 
    probably being yours. In order to use them on Launchpad, you must 
    validate them. To do so, just select one from the list below and 
    click on the Validate button.</p>
    <select name="NOT_VALIDATED_EMAIL">
      <option tal:repeat="email guessedemails"
              tal:attributes="value email/id"
              tal:content="email/email">email</option>
    </select>
    <input type="submit" value="Validate" name="VALIDATE_EMAIL" />
  </fieldset>
  </tal:block>

  </form>
  </div>

</body>
</html>
