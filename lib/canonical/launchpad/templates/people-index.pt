<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
    i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>People and teams in Launchpad</h1>
    </metal:heading>

  <metal:leftportlets fill-slot="portlets_one">
    <div tal:replace="structure context/@@+portlet-about" />
  </metal:leftportlets>

  <metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure context/@@+portlet-stats" />
  </metal:rightportlets>

    <div metal:fill-slot="main">
      <tal:block define="bn view/searchPeopleBatchNavigator">
        <form name="search" action="." method="GET">
          <table style="margin-bottom: 1em;">
            <tr>
              <td>
                <input type="text" name="name" size="35" tabindex="1"
                     tal:attributes="value request/name|nothing"
                />
                <input
                  tal:condition="not: bn"
                  type="submit"
                  value="Search"
                />
                <input
                  tal:condition="bn"
                  type="submit"
                  value="Search Again"
                />
              </td>
            </tr>
            <tr>
              <td tal:define="searchfor request/searchfor|nothing">
                <label>
                  <input
                    tal:condition="python: searchfor == 'peopleonly'"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="peopleonly"
                  />
                  <input
                    tal:condition="python: searchfor != 'peopleonly'"
                    type="radio"
                    name="searchfor"
                    value="peopleonly"
                  />
                  people
                </label>
                <label>
                  <input
                    tal:condition="python: searchfor == 'teamsonly'"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="teamsonly"
                  />
                  <input
                    tal:condition="python: searchfor != 'teamsonly'"
                    type="radio"
                    name="searchfor"
                    value="teamsonly"
                  />
                  teams
                </label>
                <label>
                  <input
                    tal:condition="python: searchfor == 'all' or
                                           searchfor == nothing"
                    checked="checked"
                    type="radio"
                    name="searchfor"
                    value="all"
                  />
                  <input
                    tal:condition="python: searchfor == 'teamsonly' or
                                           searchfor == 'peopleonly'"
                    type="radio"
                    name="searchfor"
                    value="all"
                  />
                  both
                </label>
              </td>
            </tr>
          </table>
        </form>
        <tal:block condition="not: bn">
          <p> 
            <b>Duplicate accounts</b> may have been created
            automatically by Launchpad. If you find you have more than
            one account, perhaps for different email addresses, you can
            <a href="+requestmerge">merge the duplicate accounts</a>.
          </p>
        </tal:block>
        <tal:block condition="bn">
          <tal:block
            define="prev_url bn/prevBatchURL;
            next_url bn/nextBatchURL;"
          >
            <table class="listing">
              <thead class="results">
                <tr tal:condition="python:prev_url or next_url">
                  <td colspan="3">
                    <div style="float: right; text-align: right;">
                      <tal:block condition="prev_url">
                        <a tal:attributes="href prev_url">Previous</a>
                      </tal:block>
                      <tal:block repeat="page_link bn/batchPageURLs">
                        <a tal:attributes="href python:page_link.values()[0]"
                                tal:content="python:page_link.keys()[0]"></a>
                      </tal:block>
                      <tal:block condition="next_url" >
                        <a tal:attributes="href next_url">Next</a>
                      </tal:block>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th colspan="2">
                    Name
                  </th>
                  <th>
                    Karma
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="person bn/currentBatch">
                  <td><a tal:content="person/browsername"
                         tal:attributes="href person/name"/>
                  </td>
                  <td tal:content="person/name">foobar</td>
                  <td class="amount" tal:content="person/karma">34</td>
                </tr>    
              </tbody>
            </table>
          </tal:block>
        </tal:block>
      </tal:block>
    </div>
  </body>
</html>
