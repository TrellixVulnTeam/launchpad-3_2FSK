<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="rosetta">

<head>
    <title metal:fill-slot="title">Rosetta: Translator dashboard</title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Rosetta style sheet -->
    <style type="text/css" media="screen">@import url(rosetta.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <h1>Translator's Dashboard</h1>

    <!-- XXX XXX XXX XXX -->
    <div tal:condition="python: False">
    <div class="rosettaDashboardElement">
        <h2>My current projects</h2>

        <table class="listing">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>Project</th>
                    <th>Progress</th>
                </tr>
            </thead>

            <tbody>
                <tr tal:repeat="project view/projects">
                    <td><input type="checkbox" /></td>
                    <td><a tal:attributes="href
                        python: 'projects/' + project.name"><span
                        tal:replace="project/name">Name</span></a></td>
                    <td><!-- XXX --></td>
               </tr>
            </tbody>

        </table>
        <input type="submit" value="Remove selected project from list" />
    </div>

    <div class="rosettaDashboardElement">
        <h2>Available/Recommended projects</h2>

        <div class="discreet">
        Below is a list of projects that are not translated to your language.
        We have recommended some popular ones that you might want to help translate,
        or you can search for specific projects that you know you want to translate.
        </div>

        Project search:
        <input type="text" />
        <input type="submit" value="Search" class="searchButton"/>


        <table class="listing">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>Project</th>
                    <th>Category</th>
                    <th>Translatable messages</th>
                </tr>
            </thead>

            <tbody>
                <tr tal:repeat="project view/projects">
                    <td><input type="checkbox" />
                    <td><span tal:replace="project/name">Project</span></td>
                    <td><!-- XXX --></td>
                    <td><!-- XXX --></td>
                </tr>
            </tbody>

        </table>
        <input type="submit" value="Add selected project to list" />

        <!--
        <p>
        Is the project you're looking for not listed?
        <a href="interest">Register interest to get the project into the system</a>
        </p>
        -->

    </div>
    <!-- XXX XXX XXX XXX -->
    </div> <!-- condition: python: False -->

    <tal:block condition="not: view/person">
        <p>
        You must authenticate yourself before you can set your preferences.
        </p>
    </tal:block>

    <tal:block condition="view/person">
        <h2>Recently Translated Templates</h2>

        <tal:block define="templates
                python: list(view.person.translatedTemplates())[:10]">

            <p tal:condition="not: templates">
            No recently translated projects.
            </p>

            <ul tal:condition="templates">
                <li tal:repeat="template templates">
                    <a
                        tal:define="
                            project template/product/project/name;
                            product template/product/name;
                            "
                        tal:attributes="href string: projects/${project}/${product}/${template/name}"
                        tal:content="template/title">foo template</a>
                </li>
            </ul>
        </tal:block>
    </tal:block> <!-- condition: view/person -->
</div>

</body>
</html>
