Test to check that Rosetta is able to get translation errors.

First, we get the form we are going to submit:

  >>> user_browser.open(
  ...    'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20')
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20'

We do the changes:

  >>> user_browser.getControl(name='msgset_150_es_translation_0').value = u'Found %s invalid file.'
  >>> user_browser.getControl(name='msgset_150_es_translation_1').value = u'Found %s invalid files.'

And do the submission:

  >>> user_browser.getControl(name='submit_translations').click()

We are still in the same URL, because the system detected an error.

  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20'

  >>> 'Error in Translation:' in user_browser.contents
  True
  >>> ('format specifications in \'msgid\' and \'msgstr[0]\' for argument 1 are not the sameformat specifications'
  ...  ' in \'msgid\' and \'msgstr[1]\' for argument 1 are not the same') in user_browser.contents
  True

Load the form again to be sure that previous submit was not saved.

  >>> user_browser.open(
  ...    'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20')
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20'
  >>> print user_browser.contents
  <...
                        <td>Found <code>%i</code> invalid file.</td>
  ...
                        <td>Found <code>%i</code> invalid files.</td>
  ...

                          <input type="text"
      name="msgset_150_es_translation_0" tabindex="1" />





                          <input type="text"
      name="msgset_150_es_translation_1" tabindex="1" />
  ...
                              <input type="checkbox"
      value="fuzzy" name="msgset_150_es_needsreview" tabindex="1" />
  ...
