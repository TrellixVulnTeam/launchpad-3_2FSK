= Official Bug Tags =

Project admins can manage the official bug tags by following a link
from the main bug page.

    >>> admin_browser.open(
    ...     'http://bugs.launchpad.dev/firefox')
    >>> admin_browser.getLink('Edit official tags').click()
    >>> print admin_browser.url
    http://bugs.launchpad.dev/firefox/+manage-official-tags

Tags are entered into a textarea as a list of white-spaces separated
words.

    >>> admin_browser.getControl('Official Bug Tags').value = 'foo bar'
    >>> admin_browser.getControl('Save').click()
    >>> print admin_browser.url
    http://bugs.launchpad.dev/firefox
    >>> admin_browser.open(
    ...     'http://bugs.launchpad.dev/firefox/+manage-official-tags')
    >>> print admin_browser.getControl('Official Bug Tags').value
    bar foo

The link as well as the edit form is only available for products and
distributions but not for other bug targets.

    >>> admin_browser.open(
    ...     'http://bugs.launchpad.dev/firefox/1.0')
    >>> print admin_browser.getLink('Edit official tags')
    Traceback (most recent call last):
    ...
    LinkNotFoundError

    >>> admin_browser.open(
    ...     'http://bugs.launchpad.dev/firefox/1.0/+manage-official-tags')
    Traceback (most recent call last):
    ...
    NotFound...

The link as well as the edit form is only available for project
administrators but not for ordinary users.

    >>> browser.open('http://bugs.launchpad.dev/firefox')
    >>> print browser.getLink('Edit official tags')
    Traceback (most recent call last):
    ...
    LinkNotFoundError

    >>> browser.open(
    ...     'http://bugs.launchpad.dev/firefox/+manage-official-tags')
    Traceback (most recent call last):
    ...
    Unauthorized...


== Official Tags on Bug Pages ==

Official tags are displayed using a different style from unofficial ones.
They are grouped together at the beginning of the list.

    >>> from canonical.launchpad.ftests import login, logout
    >>> from canonical.launchpad.webapp import canonical_url
    >>> import transaction
    >>> login('foo.bar@canonical.com')
    >>> gfoobar = factory.makeProduct(name='gfoobar')
    >>> gfoobar.official_bug_tags = [u'alpha', u'charlie']
    >>> gfoobar_bug = factory.makeBug(product=gfoobar)
    >>> gfoobar_bug.tags = [u'alpha', u'bravo', u'charlie', u'delta']
    >>> gfoobar_bug_url = canonical_url(gfoobar_bug)
    >>> transaction.commit()
    >>> logout()

    >>> browser.open(gfoobar_bug_url)
    >>> tags_div = find_tag_by_id(browser.contents, 'bug-tags')
    >>> for tag_anchor in tags_div.findAll('a'):
    ...     print tag_anchor['class'], tag_anchor.contents[0]
    official-tag alpha
    official-tag charlie
    unofficial-tag bravo
    unofficial-tag delta

