
Subscribing to Specifications
=============================

Just for fun, let's subscribe to one of the specifications. We'll subscribe
to the spec about E4X.

First, let's make sure we can see the link called "Subscribe..."

  >>> print http(r"""
  ... GET /products/firefox/+spec/e4x HTTP/1.1
  ... """)
  HTTP/1.1 200 Ok
  ...Subscribe Yourself...


And let's make sure we can see the subscription page. The form should want
to be posted back to the main spec page.

  >>> print http(r"""
  ... GET /products/firefox/+spec/e4x/+subscribe HTTP/1.1
  ... Authorization: Basic Y2FybG9zQGNhbm9uaWNhbC5jb206dGVzdA==
  ... """)
  HTTP/1.1 200 Ok
  ...<form action="." method="POST">...

Now, we'll POST to the main page. We should see a message that we have just
subscribed.

  >>> print http(r"""
  ... POST /products/firefox/+spec/e4x/ HTTP/1.1
  ... Authorization: Basic Y2FybG9zQGNhbm9uaWNhbC5jb206dGVzdA==
  ... Content-Length: 19
  ... Content-Type: application/x-www-form-urlencoded
  ... 
  ... subscribe=Subscribe""")
  HTTP/1.1 200 Ok
  ...You have subscribed to this spec...

Now the link should say "Unsubscribe" in the actions menu.

  >>> print http(r"""
  ... GET /products/firefox/+spec/e4x HTTP/1.1
  ... Authorization: Basic Y2FybG9zQGNhbm9uaWNhbC5jb206dGVzdA==
  ... """)
  HTTP/1.1 200 Ok
  ...Unsubscribe Yourself...

We don't really want to be subscribed, so lets unsubscribe from that spec.
We load the subscription page, and now the button says "Unsubscribe".

  >>> print http(r"""
  ... GET /products/firefox/+spec/e4x/+subscribe HTTP/1.1
  ... Authorization: Basic Y2FybG9zQGNhbm9uaWNhbC5jb206dGVzdA==
  ... """)
  HTTP/1.1 200 Ok
  ...<input type="submit" name="subscribe"...value="Unsubscribe" />...

And when we POST this form, we see a nice message saying we are no longer a
subscriber.

  >>> print http(r"""
  ... POST /products/firefox/+spec/e4x/ HTTP/1.1
  ... Authorization: Basic Y2FybG9zQGNhbm9uaWNhbC5jb206dGVzdA==
  ... Content-Length: 21
  ... Content-Type: application/x-www-form-urlencoded
  ... 
  ... subscribe=Unsubscribe""")
  HTTP/1.1 200 Ok
  ...You have unsubscribed from this spec...


