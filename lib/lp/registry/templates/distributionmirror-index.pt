<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
>
<body>

  <tal:heading metal:fill-slot="heading">
    <h1>
      <tal:distro replace="context/distribution/displayname">Ubuntu
      Linux</tal:distro>
      mirror "<tal:mirror replace="context/title">foobar</tal:mirror>"
    </h1>
  </tal:heading>

  <tal:main metal:fill-slot="main"
            define="overview_menu context/menu:overview">

    <p id="status" class="registered">
      <strong>
        <tal:status replace="context/status/title">Official</tal:status>
      </strong>
      <span tal:replace="context/distribution/title" /> Mirror registered by
      <span tal:content="structure context/owner/fmt:link" />
      <span tal:content="context/date_created/fmt:displaydate" />
    </p>

    <tal:is-admin condition="context/required:launchpad.Admin">
      <div class="whiteboard" id="whiteboard">
        <h2>Whiteboard
          <a tal:replace="structure overview_menu/review/fmt:icon"/>
        </h2>
        <tal:whiteboard replace="structure context/whiteboard/fmt:text-to-html" />
      </div>
    </tal:is-admin>

    <table id="mirror-details" class="summary" style="float: right">
      <tr>
        <th>Speed:</th>
        <td tal:content="context/speed/title">2 Mbps</td>
      </tr>
      <tr>
        <th>Country:</th>
        <td tal:content="context/country/name">Brazil</td>
      </tr>
      <tr>
        <th>Content:</th>
        <td tal:content="context/content/title">Archive</td>
      </tr>
    </table>

    <div class="highlighted" style="font-size: 80%;"
         tal:condition="context/description">
      <p tal:replace="structure context/description/fmt:text-to-html">
          Distribution Mirror Description
      </p>
    </div>

    <h2>Mirror URLs</h2>

    <ul class="webref" id="mirror-urls">
      <li tal:condition="context/http_base_url" >
        Web: <a tal:content="context/http_base_url"
                 tal:attributes="href context/http_base_url">http://url/</a>
      </li>
      <li tal:condition="context/ftp_base_url" >
        FTP: <a tal:content="context/ftp_base_url"
                tal:attributes="href context/ftp_base_url">ftp://url/</a>
      </li>
      <li tal:condition="context/rsync_base_url" >
        Rsync: <a tal:content="context/rsync_base_url"
                  tal:attributes="href context/rsync_base_url">
                  rsync://url/</a>
      </li>
    </ul>

    <tal:entries condition="context/content/enumvalue:ARCHIVE"
                 replace="structure view/sources_list_entries" />

    <div id="last-probe" tal:define="probe context/last_probe_record">
      <h2>Last probe</h2>

      <tal:no-last-probe condition="not: probe">
        <p tal:condition="context/isOfficial">
          This mirror has never been verified.
        </p>

        <p tal:condition="not: context/isOfficial">
          This mirror is an
          <tal:status replace="context/status/title">Official</tal:status>
          <span tal:replace="context/distribution/title">Ubuntu</span> mirror,
          and will not be verified.
        </p>
      </tal:no-last-probe>

      <tal:has-last-probe condition="probe">
        <p>This mirror was last verified
          <span
            tal:attributes="title probe/date_created/fmt:datetime"
            tal:content="probe/date_created/fmt:approximatedate" />.

          <tal:is-owner condition="context/required:launchpad.Edit">
            You can see the
            <a tal:attributes="href probe/log_file/http_url">log file</a> of the
            probe.
          </tal:is-owner>
        </p>
      </tal:has-last-probe>
    </div>

    <tal:has-last-probe condition="context/last_probe_record">
      <tal:archive-mirror condition="context/content/enumvalue:ARCHIVE"
        define="arch_serieses view/summarized_arch_series;
                source_serieses view/summarized_source_series">
        <metal:mirror-content
          use-macro="context/@@+distributionmirror-macros/archive-mirror-content" />
      </tal:archive-mirror>

      <tal:cdimage-mirror condition="context/content/enumvalue:RELEASE"
        define="flavours_by_serieses view/getCDImageMirroredFlavoursBySeries">
        <metal:mirror-content
          use-macro="context/@@+distributionmirror-macros/cdimage-mirror-content" />
      </tal:cdimage-mirror>
    </tal:has-last-probe>
  </tal:main>

  <tal:side metal:fill-slot="side">
    <tal:menu replace="structure context/@@+global-actions" />
  </tal:side>

</body>
</html>
