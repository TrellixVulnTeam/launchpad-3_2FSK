<html>
    <head>
        <style type="text/css">
        <!--
            body {
                font-size: 80%;
            }
            h1 {
                font-size: 95%;
                display: block;
                background: #e0e0e0;
                padding: 0.5em;
            }
        -->
        </style>
        <title tal:content="view/title">Title</title>
        <tal:comment condition="nothing">
            This javascript iterates over all forms and their elements in
            the source window, and sets the elements value if the elements
            name matches. It would be much nicer if the source form had a
            name... or I knew Javascript ;-)
        </tal:comment>
        <script language="Javascript" type="text/javascript"
            tal:content="string:field = '${request/form/field}';" />
        <script language="Javascript" type="text/javascript">
            function update(value) {
                e = window.parent.document.getElementById(field);
                if (e == null) {
                    alert(field);
                }
                if (e != null) {
                    e.value = value;
                    hide();
                    }
                }
            function hide() {
                parent_doc = window.parent.document
                parent_doc.getElementsByTagName('body')[0].onclick = null;
                div = parent_doc.getElementById('popup_div_' + field);
                div.style.display = 'none';
            }
        </script>
    </head>
    <body onLoad="document.searchform.search.focus()">
        <div style="float: right; padding: 0.5em;"><a href="#"
            style="text-decoration: none;" onClick="javascript: hide()"><small>[cancel]</small></a></div>
        <div tal:define="batchnav view/search">
            <h1 tal:content="view/title">Title</h1>

            <center>
              <form method="GET" name="searchform">
                  <input type="text" name="search"
                      tal:attributes="value request/search|nothing" />
                  <input type="submit" value="Search" />
                  <input type="hidden" name="vocabulary"
                      tal:attributes="value request/vocabulary" />
                  <input type="hidden" name="field"
                      tal:attributes="value request/field" />
              </form>
            </center>

            <table tal:condition="view/hasMoreThanOnePage">
                <tr>
                    <th>
                        <a tal:attributes="href batchnav/prevBatchURL">&larr;</a>
                    </th>
                    <tal:x repeat="page_link batchnav/batchPageURLs">
                        <th tal:condition="python:not
                                str(page_link.keys()[0]).startswith('_')">
                            <a tal:attributes="href
                                    python:page_link.values()[0]"
                                tal:content="python:page_link.keys()[0]">#</a>
                        </th>
                    </tal:x>
                    <th>
                        <a tal:attributes="href batchnav/nextBatchURL">&rarr;</a>
                    </th>
                </tr>
            </table>
            <tal:has-search condition="request/search|nothing">
              <dl>
                  <tal:x repeat="item batchnav/currentBatch">
                      <dt><img src="/@@/bullet" alt="" border="" />
                          <a href="#" title="Click to select"
                              tal:content="item/token"
                              tal:attributes="onclick 
                              string:update('${item/token}')">Token</a>
                      </dt>
                      <dd tal:content="item/title">Title</dd>
                  </tal:x>
              </dl>
              <tal:no-items condition="not: batchnav/currentBatch">
                  No results found for keyword '<span tal:replace="request/search" />'.
              </tal:no-items>
            </tal:has-search>
        </div>
    </body>
</html>
