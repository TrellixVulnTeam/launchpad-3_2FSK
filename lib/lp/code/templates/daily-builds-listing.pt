<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    metal:use-macro="view/macro:page/main_only"
    i18n:domain="launchpad">

  <body>

    <metal:heading fill-slot="heading">
      <h1 tal:content="view/page_title" />
    </metal:heading>

    <div metal:fill-slot="main"
         tal:define="dailybuilds view/batchnav/currentBatch">

      <tal:block tal:condition="not:dailybuilds">
        <p id="no-builds">No recently completed daily builds found.</p>
      </tal:block>

      <tal:block tal:condition="dailybuilds">
        <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-upper"/>
        <table class="listing sortable" id="daily-build-listing">
          <thead>
            <tr>
              <th>
                Source Package
              </th>
              <th>
                Recipe
              </th>
              <th>
                Recipe Owner
              </th>
              <th>
                Archive
              </th>
              <th>
                Most Recent Build Time
              </th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="dailybuild dailybuilds">
              <td>
                <a tal:replace="structure dailybuild/recipebuild/distribution/fmt:link">distribution</a>
                <a tal:attributes="href string:${dailybuild/recipebuild/distribution/fmt:url}/+source/${dailybuild/sourcepackagename/name}"
                  tal:content="dailybuild/sourcepackagename/name">source package name</a>
              </td>

              <td>
                <a href="recipe" tal:attributes="href dailybuild/recipebuild/recipe/fmt:url">
                <span tal:replace="dailybuild/recipebuild/recipe/name">
                  recipe
                </span>
                </a>
              </td>

              <td>
                <tal:recipeowner replace="structure dailybuild/recipeowner/fmt:link">
                  recipe owner
                </tal:recipeowner>
              </td>

              <td>
                <tal:archivelink tal:condition="dailybuild/archive/is_ppa"
                              replace="structure dailybuild/archive/fmt:link">
                  archive link
                </tal:archivelink>
                <tal:archive tal:condition="not:dailybuild/archive/is_ppa"
                              replace="structure dailybuild/archive/displayname">
                  archive name
                </tal:archive>
              </td>

              <td tal:content="dailybuild/most_recent_build_time/fmt:datetime">
                a date
              </td>

            </tr>
          </tbody>
        </table>
        <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-lower" />
      </tal:block>
    </div>

  </body>
</html>
