<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  omit-tag="">

<metal:search_results define-macro="search-results">

  <tal:comment replace="nothing">
    Presents the results of a package search by views inheriting from
    AbstractPackageSearchView.
  </tal:comment>

  <div id="search-results">

  <tal:search_requested condition="view/search_requested">

    <tal:batch define="batch view/batchnav/currentBatch">

      <tal:navigation replace="structure view/batchnav/@@+navigation-links-upper" />

      <ul class="search_results" tal:condition="batch">
        <li tal:repeat="pkg batch">
          <img metal:define-slot="pkg-image" src="/@@/package-binary" />
          <a tal:attributes="href pkg/fmt:url;
                             title pkg/title"
             class="packagetitle"
             tal:content="pkg/name"/>:
          <div style="margin-left: 30px; font-size: 80%;"
               tal:content="pkg/summary">
            Gee whiz special package.
            <span tal:replace="pkg/description"
                  tal:condition="view/detailed">
              Gee whiz special package description goes here if there are
              fewer than 5 matches.
            </span>
          </div>
        </li>
      </ul>

      <tal:navigation replace="structure view/batchnav/@@+navigation-links-lower" />

      <tal:no_matches condition="not: view/matches">

        No packages matching '<span tal:replace="view/text">amarok</span>'
        are published in
        <span tal:replace="context/displayname">hoary</span>.

      </tal:no_matches>

    </tal:batch>

  </tal:search_requested>

  </div>
</metal:search_results>
</tal:root>
