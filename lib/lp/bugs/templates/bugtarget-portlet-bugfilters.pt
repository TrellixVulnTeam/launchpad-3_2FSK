<div
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  class="portlet" id="portlet-bugfilters">
  <a id="bugtarget-bugfilters-link"
     tal:attributes="href context/fmt:url/+bugtarget-portlet-bugfilters-content" >
  </a>
  <h2>Filters</h2>
  <div id="bugfilters-portlet-spinner"
       style="text-align: center; display: none">
    <img src="/@@/spinner" />
  </div>
    <script type="text/javascript">
    YUI().use('io-base', 'node', function(Y) {
      Y.on('domready', function() {
        var portlet = Y.one('#portlet-bugfilters');
        Y.one('#bugfilters-portlet-spinner').setStyle('display', 'block');

        function hide_spinner() {
          Y.one('#bugfilters-portlet-spinner').setStyle('display', 'none');
        }

        function on_success(transactionid, response, arguments) {
          hide_spinner();
          portlet.set('innerHTML',
                      portlet.get('innerHTML') + response.responseText);
        }

        var config = {on: {success: on_success,
                           failure: hide_spinner}};
        var url = Y.one('#bugtarget-bugfilters-link').getAttribute('href');
        var request = Y.io(url, config);
      });
    });
   </script>
</div>
