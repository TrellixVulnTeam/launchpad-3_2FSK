<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@malone_template/master"
      i18n:domain="rosetta">
<body>
 
<div metal:fill-slot="main">
    <h1>Search projects</h1>

    <form method="post">
        <fieldset tal:condition="not:exists:request/name">
            <legend>Search details</legend>

            <div class="field">
                <label>Name</label>
                <div class="formHelp">Enter the project name</div>
                <input name="name" />
            </div>

            <div class="field">
                <label>Title</label>
                <div class="formHelp">Enter any part of the project title</div>
                <input name="title" />
            </div>

            <div class="formControls">
                <input type="submit" value="Search" />
            </div>

        </fieldset>
    </form>

    <table tal:condition="exists:request/name"
         class="listing rowNavigation">
        <tr>
        <th>Project</th>
        <th>Title</th>
        <th>Description</th>
        <th>Homepage</th>
        </tr>
        <tr tal:repeat="project python:context.search(name=request.get('name'),
            title=request.get('title'))"
            tal:attributes="onclick string:window.location='${project/name}';">
            <td>
                <a tal:attributes="href project/name" href="#"
                    tal:content="project/name">$Project.name</a>
            </td>
            <td tal:content="project/title">$Project.title</td>
            <td tal:content="project/description">$Project.description</td>
            <td>
                <a tal:attributes="href project/homepageurl"
                    tal:content="project/homepageurl">http://www.gnu.org/</a>
            </td>
        </tr>
    </table>
</div>

</body>
</html>
