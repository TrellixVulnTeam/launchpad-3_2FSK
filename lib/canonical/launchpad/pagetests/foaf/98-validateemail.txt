The user 'salgado' has an unvalidated email address that was probably
added by gina. Now he wants to validate it.

    # Workaround for https://launchpad.net/launchpad/+bug/39016
    >>> from canonical.launchpad.mail import stub
    >>> stub.test_emails[:] = []

    >>> browser = setupBrowser(auth='Basic salgado@ubuntu.com:zeca')
    >>> browser.open('http://launchpad.dev/~foo/+editemails')
    >>> browser.title
    Your e-mail addresses

    >>> browser.getControl('salgado@ubuntu.com').selected = True
    >>> browser.getControl('Confirm').click()
    >>> for msg in get_feedback_messages(browser.contents):
    ...     print msg
    A new email was sent to...

Retrieve the email and make sure it was sent to the right address.

    >>> from_addr, to_addrs, raw_msg = stub.test_emails.pop()
    >>> msg = email.message_from_string(raw_msg)
    >>> to_addrs
    ['salgado@ubuntu.com']

Visit the token URL mentioned in the email, and get redirected to
+validateemail.

    >>> from canonical.launchpad.ftests.logintoken import (
    ...     get_token_url_from_email)
    >>> token_url = get_token_url_from_email(msg)
    >>> browser.open(token_url)

    >>> print browser.url
    http://launchpad.dev/token/.../+validateemail
    # XXX FIXME
    >>> print browser.contents
    ...Confirm e-mail address...salgado@ubuntu.com...

    >>> browser.getControl('Continue').click()
    >>> print browser.url
    http://launchpad.dev/~salgado
