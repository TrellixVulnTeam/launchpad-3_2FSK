<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Your e-mail addresses</h1>
    </metal:heading>

<div metal:fill-slot="main">
  <div metal:use-macro="context/@@launchpad_form/form">

    <metal:extra-info fill-slot="extra_info">
      <tal:block condition="context/preferredemail">
        <p>Your preferred contact address for all Launchpad e-mail is:</p>
        <ul id="preferred-email">
          <li class="mail"><b tal:content="context/preferredemail/email" /></li>
        </ul>
      </tal:block>

      <tal:block tal:condition="not: context/preferredemail">
        <p>Currently you don't have a contact address in
        Launchpad. Please choose one from the list of confirmed
        addresses.</p>
      </tal:block>
    </metal:extra-info>

    <metal:widgets fill-slot="widgets">

      <tal:widget define="widget nocall:view/widgets/VALIDATED_SELECTED">
        <metal:block use-macro="context/@@launchpad_form/widget_row" />
      </tal:widget>
      <input tal:replace="structure view/action_set_preferred/render" />
      <input tal:replace="structure view/action_remove_validated/render" />
      <br /><br />

      <tal:block tal:condition="view/unvalidated_addresses">
        <tal:widget define="widget nocall:view/widgets/UNVALIDATED_SELECTED">
          <metal:block use-macro="context/@@launchpad_form/widget_row" />
        </tal:widget>
        <input tal:replace="structure view/action_confirm/render" />
        <input tal:replace="structure view/action_remove_unvalidated/render" />
        <br /><br />
      </tal:block>

      <tal:widget define="widget nocall:view/widgets/newemail">
        <metal:block use-macro="context/@@launchpad_form/widget_row" />
      </tal:widget>

      <tal:block tal:condition="view/mailing_list_widgets">
        <h1>Mailing list subscriptions</h1>
        <table>
          <tr tal:repeat="widget view/mailing_list_widgets">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tr>
        </table>
      </tal:block>

    </metal:widgets>

    <metal:widgets fill-slot="buttons">
      <input tal:replace="structure view/action_add_email/render" />
    </metal:widgets>
  </div>

</div>
</body>
</html>
