Delete a productseries
======================

A project series can be made by accident and the project owner or driver
may choose to delete it. Sample Person is the owner of the Firefox
project and he wants to delete the trunk series because development
is really happening in the 1.0 series.

    >>> owner_browser = setupBrowser(auth='Basic test@canonical.com:test')
    >>> owner_browser.open('http://launchpad.dev/firefox/trunk')
    >>> print owner_browser.title
    Series trunk : Mozilla Firefox

    >>> owner_browser.getLink('Delete series').click()
    >>> print owner_browser.title
    +delete : Series trunk : Mozilla Firefox

The trunk series is the focus of development. It cannot be deleted.
The owner learns that he must make another series the focus of development
first. There is no delete button on the page.

    >>> print extract_text(find_main_content(owner_browser.contents).p)
    You cannot delete a series that is the focus of development. Make
    another series the focus of development before deleting this one.

    >>> owner_browser.getControl('Delete this Series')
    Traceback (most recent call last):
     ...
    LookupError: ...

Sample person chooses to cancel the action and make the 1.0 series the focus
of development.

    >>> owner_browser.getLink('Cancel').click()
    >>> owner_browser.open('http://launchpad.dev/firefox/+edit')
    >>> print owner_browser.title
    +edit : Mozilla Firefox

    >>> owner_browser.getControl('Development focus').value = ['2']
    >>> owner_browser.getControl('Change').click()
    >>> print owner_browser.title
     Mozilla Firefox in Launchpad

Then he returns to delete trunk. He is informed that deletion is permanent,
and that the milestones, releases, and files will also be deleted. The
milestones and releases are linked.

    >>> owner_browser.getLink('View full history').click()
    >>> owner_browser.getLink('trunk').click()
    >>> owner_browser.getLink('Delete series').click()
    >>> print owner_browser.title
    +delete : Series trunk : Mozilla Firefox

    >>> contents = find_main_content(owner_browser.contents)
    >>> print extract_text(find_tag_by_id(contents, 'milestones-and-files'))
    The associated milestones and releases
    and their files will be also be deleted:

    >>> print extract_text(find_tag_by_id(contents, 'milestones'))
    0.9.2 "One (secure) Tree Hill"
    0.9.1 "One Tree Hill (v2)"
    0.9 "One Tree Hill"
    1.0

    >>> print owner_browser.getLink('0.9.2 "One (secure) Tree Hill"')
    <Link text='0.9.2 "One (secure) Tree Hill"' ...>

    >>> print extract_text(find_tag_by_id(contents, 'files'))
    firefox-0.9.2.orig.tar.gz

    >>> print extract_text(
    ... find_tag_by_id(contents, 'bugtasks-and-blueprints'))
    Support E4X in EcmaScript

The owner deletes the series and the project page is displayed. He reads
that the series was deleted, and can not see a link to it anymore.

    >>> owner_browser.getControl('Delete this Series').click()
    >>> print owner_browser.title
    Mozilla Firefox in Launchpad

    >>> for message in get_feedback_messages(owner_browser.contents):
    ...     print message
    Series trunk deleted.

    >>> owner_browser.getLink('trunk')
    Traceback (most recent call last):
     ...
    LinkNotFoundError
