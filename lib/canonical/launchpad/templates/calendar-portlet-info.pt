<div class="portlet" tal:condition="view/calendar">
  <h4 tal:content="view/calendar/title">Calendar</h4>

  <div class="portletBody portletContent">
    <b tal:content="view/month">January 2005</b>
    <table class="cal-table">
      <tr>
        <th tal:repeat="day view/daynames"
            tal:content="day">Day of Week</th>
      </tr>
      <tr tal:repeat="row view/layout">
        <tal:block tal:repeat="daynum row">
          <td tal:condition="daynum"
              tal:define="day python:view.days[daynum-1]"
              class="cal-daycell">
            <a tal:attributes="href day/dayURL;
                               class python:day['hasEvents'] and 'cal-busyday' or 'cal-freeday'"
               tal:content="day/day">1</a>
          </td>
          <td tal:condition="not:daynum"></td>
        </tal:block>
      </tr>
    </table>
    <p tal:condition="view/canSubscribe">
      <a href="+calendar/+subscribe">Subscribe to this calendar</a>
    </p>
  </div>
</div>
<tal:block condition="not:view/calendar">
  <!-- No calendar -->
  <div class="portlet" tal:condition="context/required:launchpad.Edit">
    <h4>Calendar</h4>
    <div class="portletBody portletContent" style="text-align: center">
      <form action="+calendar-create" method="post">
          <input type="submit" value="Create Calendar" />
      </form>
    </div>
  </div>
</tal:block>
