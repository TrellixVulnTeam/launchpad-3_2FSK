<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
  >
<body>

    <tal:heading metal:fill-slot="heading">
      <h1 tal:condition="context/enabled"
          tal:replace="structure view/displayname_edit_widget">
        PPA for user
      </h1>
      <h1 tal:condition="not: context/enabled"
          tal:content="CONTEXTS/fmt:pagetitle"
          class="disabled">
        PPA for user
      </h1>
    </tal:heading>
    <tal:main metal:fill-slot="main"
         tal:define="archive_active view/has_sources;
                     archive_label  view/archive_label;"
         tal:attributes="class string:archive">

      <div class="top-portlet" style="padding-top:0.5em;">

        <p tal:condition="not: context/enabled"
           style="clear: right;" class="warning message">
          This archive has been disabled.
        </p>

        <div id="edit-description"
          tal:content="structure view/archive_description_html"
          />
      </div>

      <div class="portlet" id="upload-hint"
           tal:condition="context/required:launchpad.Append">
        <h2>Uploading packages to this PPA</h2>
        <p>You can upload packages to this PPA using:</p>
        <p><tt>dput ppa:<tal:owner-name
                  replace="context/owner/name" />/<tal:ppa-name
                  replace="context/name" /> &lt;source.changes&gt;</tt>
              (<a href="https://help.launchpad.net/Packaging/PPA/Uploading"
                 >Read about uploading</a>)</p>
      </div>

      <div class="yui-gc">
        <div class="yui-u first" tal:condition="context/is_ppa">
        <div class="portlet">
          <h2>Adding this PPA to your system</h2>
          <tal:is-active condition="archive_active">
          <p>Copy the lines below and add them to your system's software
             sources. (<a href="/+help/soyuz/ppa-sources-list.html"
                          target="help">Read about installing</a>)</p>
          <tal:entries replace="structure view/sources_list_entries" />
          <dl id="signing-key"
              tal:define="signing_key context/signing_key"
              tal:condition="signing_key">
            <dt>Signing key:</dt>
            <dd>
              <a tal:attributes="href signing_key/keyserverURL">
                <code tal:content="signing_key/displayname"
                  >1024R/23456789</code>
              </a>
              (<a href="/+help/soyuz/ppa-sources-list.html"
                  target="help">What is this?</a>)
            </dd>
          </dl>
          <div tal:condition="context/dependencies" id="archive-dependencies">
            <h3>Dependencies:</h3>
            <p tal:condition="view/has_disabled_dependencies"
               class="message warning">
              This PPA depends on disabled archives. it may cause
              spurious build failures or binaries with unexpected
              contents.
            </p>
            <ul>
              <li tal:repeat="dependency context/dependencies">
                <a tal:attributes="href dependency/dependency/fmt:url"
                   tal:condition="
                   dependency/dependency/required:launchpad.View"
                   tal:content="dependency/title" />
                <span tal:replace="dependency/title"
                      tal:condition="
                      not: dependency/dependency/required:launchpad.View" />
                <span style="color: red"
                      tal:condition="not: dependency/dependency/enabled"
                 >[disabled]</span>
                (included <span
                 tal:replace="dependency/date_created/fmt:displaydate" />)
              </li>
            </ul>
          </div>
          <tal:package-copy-request-list tal:condition="context/is_copy">
            <metal:package-copy-request-list
              use-macro="context/@@+macros/package-copy-request-list" />
          </tal:package-copy-request-list>
          </tal:is-active>
          <p tal:condition="not: archive_active">
            This <tal:archive_label replace="archive_label" /> does not contain
            any packages yet. Find more information about how to upload
            packages in the <a href="https://help.launchpad.net/Packaging/PPA"
            >PPA help page</a>
          </p>
        </div></div>
        <div class="yui-u"><div class="portlet">
          <h2><tal:archive_label replace="archive_label" /> statistics</h2>
          <dl tal:define="pkg_build_counts view/num_pkgs_building">
            <dt>Activity</dt>
            <dd><span tal:replace="view/num_updates_over_last_days">10</span>
              updates were added during the past month.</dd>
            <dd tal:condition="pkg_build_counts">
              Currently <span tal:replace="pkg_build_counts/building">2</span>
              packages are building and
              <span tal:replace="pkg_build_counts/waiting">2</span> packages
              are waiting to build.</dd>
          </dl>
        </div></div>
      </div><!-- yui-g -->

      <div class="portlet" tal:condition="archive_active">
        <span class="see-all"><a
              tal:replace="structure context/menu:overview/packages/fmt:link" />
        </span>
        <h2>Overview of all packages published in
          <form class="package-search-filter" action="" method="GET"
                style="display:inline;font-size:90%">
            <tal:series_filter
              replace="structure view/plain_series_filter_widget" />
            <input type="submit" value="Filter" />
          </form>
        </h2>

        <div style="padding-top: 1em;" tal:define="batch view/batched_sources">

          <tal:navigation_top
            replace="structure view/batchnav/@@+navigation-links-upper" />

          <table class="listing sortable" id="packages_list"
                 tal:condition="batch">
            <thead>
              <tr>
                <th>Package</th>
                <th>Version</th>
                <th>Uploaded by</th>
              </tr>
            </thead>
            <tbody>
              <tr tal:repeat="publishing batch">
                <td>
                  <img src="/@@/package-source" />
                  <tal:source_name replace="publishing/sourcepackagerelease/name">
                    foo
                  </tal:source_name>
                </td>
                <td tal:define="
                  version_name publishing/meta_distroseriessourcepackagerelease/version;"
                    tal:content="version_name">
                  2.0.39</td>
                <td tal:define="spr publishing/sourcepackagerelease;
                                signer spr/dscsigningkey/owner/fmt:link|string:no signer">
                    <span tal:replace="structure signer">Joe Bloggs</span>
                    <tal:date_published
                      condition="publishing/datepublished">
                    (<span 
                      tal:replace="publishing/datepublished/fmt:approximatedate">
                       2007-08-01</span>)
                    </tal:date_published>
                </td>

              </tr>
            </tbody>
          </table>

          <tal:navigation_bottom
            replace="structure view/batchnav/@@+navigation-links-lower" />

          <div id="empty-result"
               tal:define="name_filter view/specified_name_filter|nothing"
               tal:condition="not: batch">
            No matching package for '<tal:name_filter replace="name_filter" />'.
          </div>

        </div>
      </div>

    </tal:main>

    <tal:side metal:fill-slot="side">
      <tal:menu replace="structure view/@@+global-actions" />
      <metal:build-status-summary
        use-macro="context/@@+macros/latest-updates-portlet" />

    </tal:side>
  </body>
</html>
