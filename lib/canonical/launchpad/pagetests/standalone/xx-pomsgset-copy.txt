We are going to check that copy buttons in the translation form work as
designed.

XXX CarlosPerelloMarin 20061202: textarea values gets extra '\n' char when
reading its value due a bug in our test infrastructure. For more info
you can see bug #47511.

  >>> user_browser.open(
  ...     'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/'
  ...     '+pots/evolution-2.2/es/5/+translate')
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/5/+translate'

We can see that the new translation textarea is empty:

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new').value == ''
  True
  >>> user_browser.getControl(name='msgset_134_es_translation_0_new_checkbox').value
  False

Now, we are going to do a copy submission using current translation.

  >>> user_browser.getControl(name='msgset_134_es_translation_0_copy').click()
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/5/+translate'

And now, the new translation textarea has current translation:

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new').value
  '\n caratas'

And its checkbox is set

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new_checkbox').value
  True

Next step, copy original english string.

  >>> user_browser.getControl(name='msgset_134_singular_copy').click()
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/5/+translate'

And now, the new translation textarea has the original english string:

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new').value
  '\n cards'

And its checkbox is set

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new_checkbox').value
  True

Now, is time for the suggestions.

  >>> user_browser.getControl(name='msgset_134_es_suggestion_689_0_copy').click()
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/5/+translate'

And now, the new translation textarea is the suggestion content:

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new').value
  '\n Srprise! (non-editor)'

And its checkbox is set

  >>> user_browser.getControl(name='msgset_134_es_translation_0_new_checkbox').value
  True

Let's move to a message set that has plural.

  >>> user_browser.open(
  ...     'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/15/+translate')
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/15/+translate'

And we check the copy of plural forms.

  >>> user_browser.getControl(name='msgset_144_plural_copy').click()
  >>> user_browser.url
  'http://launchpad.dev/distros/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/15/+translate'

The new translation textarea is the original English plural form:

  >>> user_browser.getControl(name='msgset_144_es_translation_1_new').value
  '\n%d contacts'

And its checkbox is set

  >>> user_browser.getControl(name='msgset_144_es_translation_1_new_checkbox').value
  True

The singular textarea should not have any translation because we don't change
it:

  >>> user_browser.getControl(name='msgset_144_es_translation_0_new').value
  ''

And its checkbox is not set

  >>> user_browser.getControl(name='msgset_144_es_translation_0_new_checkbox').value
  False
