= Filing bugs on Projects =

Even though it's not possible to file bugs against projects directly,
it's still possible to file a bug from a project's main page.

    >>> user_browser.open('http://launchpad.dev/gnome')
    >>> user_browser.getLink(url='+filebug').click()
    >>> user_browser.url
    'http://launchpad.dev/gnome/+filebug'

The Project filebug page is like a Product's filebug page, except that
it also asks for a Product. Only Products that are using Bugs are
shown in the list of options.

    >>> user_browser.getControl('Project').options
    ['evolution']

After we selected a product and entered a summary, we get presented with
a list of possible duplicates.

    >>> user_browser.getControl('Project').value = ['evolution']
    >>> user_browser.getControl('Summary').value = 'Evolution crashes'
    >>> user_browser.getControl('Continue').click()

    >>> for message in find_tags_by_class(user_browser.contents, 'message'):
    ...     print message.renderContents()
    No similar bugs were found.

Entering a description and submitting the bug takes the user to the bug
page.

    >>> user_browser.getControl('Further information').value = 'Crash.'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/evolution/+bug/...'
    >>> user_browser.title
    'Bug #... in Evolution: ...Evolution crashes...'


== Advanced filebug page ==

From the Project filebug page it's possible to go to the advanced
filebug page.

    >>> user_browser.open('http://launchpad.dev/gnome')
    >>> user_browser.getLink(url='+filebug').click()
    >>> user_browser.getLink('complicated bug filing form').click()
    >>> user_browser.url
    'http://launchpad.dev/gnome/+filebug-advanced'

    >>> user_browser.getControl('Project').value = ['evolution']
    >>> user_browser.getControl('Summary').value = 'Evolution crashes lots'
    >>> user_browser.getControl('Further information').value = 'Crash.'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/evolution/+bug/...'
    >>> user_browser.title
    'Bug #... in Evolution: ...Evolution crashes...'


== Subscribing to a similar bug ==

If our bug is described by one of the suggested similar bugs, we can
subscribe to it instead of filing a new bug. This also loosely implies
a "me too" vote.

    >>> user_browser.open("http://bugs.launchpad.dev/gnome/+filebug")
    >>> user_browser.getControl('Project').value = ['evolution']
    >>> user_browser.getControl('Summary').value = 'Evolution crashes'
    >>> user_browser.getControl('Continue').click()

As before, we get a list of similar bugs to choose from, including the
bugs we filed recently.

    >>> from canonical.launchpad.ftests.bug import print_bugs_list
    >>> print_bugs_list(user_browser.contents, "similar-bugs")
    #... Evolution crashes
    New, last updated ...
    #... Evolution crashes lots
    New, last updated ...

This one matches, so we subscribe.

    >>> user_browser.getControl(
    ...     label='Evolution crashes lots').selected = True
    >>> user_browser.getControl('Subscribe To This Bug').click()

    >>> print user_browser.url
    http://bugs.launchpad.dev/evolution/+bug/...

But, of course, we're already subscribed because we created it.

    >>> for message in get_feedback_messages(user_browser):
    ...     print message
    You are already subscribed to this bug.


== Filing a bug when there are none similar ==

When no similar bugs are found the form works the same but appears
different in the user agent.

    >>> user_browser.open("http://launchpad.dev/gnome/+filebug")

Submitting some distinctive details...

    >>> user_browser.getControl('Project').value = ['evolution']
    >>> user_browser.getControl('Summary').value = (
    ...     'Faznambutron dumps core unless clenching')
    >>> user_browser.getControl('Continue').click()

...yields no similar bugs. In fact, the similar bugs table is not even
shown.

    >>> similar_bugs_list = find_tag_by_id(
    ...     user_browser.contents, "similar-bugs")
    >>> print similar_bugs_list
    None

But, as before, entering a description and submitting the bug takes
the user to the bug page.

    >>> user_browser.getControl('Further information').value = (
    ...     'Faznambutron is a plugin designed to ...')
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/evolution/+bug/...'
    >>> user_browser.title
    'Bug #... in Evolution: ...Faznambutron dumps core...'
