<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template_2col/master"
      i18n:domain="launchpad">

  <body>

    <metal:leftportlets fill-slot="portlets_one">
      <div tal:replace="structure context/@@+portlet-about" />
      <div tal:replace="structure context/@@+portlet-details" />
      <div tal:replace="structure context/@@+portlet-quickhelp" />
      <div tal:replace="structure context/@@+portlet-stats" />
    </metal:leftportlets>

    <metal:rightportlets fill-slot="portlets_two">
      <div tal:replace="structure context/@@+portlet-translators" />
      <div tal:replace="structure context/@@+portlet-contributors" />
    </metal:rightportlets>

    <div metal:fill-slot="main">

      <div>You are translating</div>
      <h1>
        <tal:productseries
          condition="exists:context/potemplate/productseries/displayname"
          tal:replace="context/potemplate/productseries/displayname"
        />
        <tal:sourcepackage
          condition="exists:context/potemplate/sourcepackagename"
          replace="context/potemplate/sourcepackagename"
        />
        into
        <tal:language replace="context/language/englishname" />
      </h1>
      <div class="discreet">
        Template: <tal:template replace="context/title" />
      </div>

      <tal:havepluralforms condition="view/has_plural_form_information">

        <!-- Alternative suggestions. -->
        <div metal:define-macro="editform">
          <form method="POST" action="+translate">
            <!-- the hidden elements -->
            <input type="hidden" name="offset" value=""
                   tal:attributes="value view/offset" />
            <input type="hidden" name="count" value=""
                   tal:attributes="value view/count" />
            <input type="hidden" name="show" value=""
                   tal:attributes="value view/show" />
            <tal:comment replace="nothing">
              Suggestions from this alternative language will be displayed as
              well as suggestions from the translation language. In the case
              where two languages are very similar it will often be useful to
              show the second language as a source of suggestions when
              translating into the first.
            </tal:comment>
            <label>Make suggestions from:</label>
            <tal:language-widget content="structure view/alternative_language_widget" />
            <input
              type="submit" name='select_alternate_language' value="Change" />
          </form>
        </div>
        <form method="POST" action="+translate">
          <!-- the hidden elements -->
          <input type="hidden" name="offset" value=""
                 tal:attributes="value view/offset" />
          <input type="hidden" name="count" value=""
                 tal:attributes="value view/count" />
          <input type="hidden" name="alt" value=""
                 tal:attributes="value view/second_lang_code" />
          <label>Show:</label>

          <tal:comment tal:replace="nothing">
            The 'selected' attribute value in next select means basically
            the following:

            if request.form['show'] == literalvalue:
                return 'selected'
            else:
                return None

            Where 'literalvalue' is 'all', 'untranslated' 'fuzzy' or
            'translated'.
          </tal:comment>

          <select name="show" title="Choose which items to show">
            <option value="all"
              tal:attributes="selected
              request/htmlform:show/selected/all"
              >
              all
            </option>
            <option value="untranslated"
              tal:attributes="selected
              request/htmlform:show/selected/untranslated"
              >
              untranslated
            </option>
            <option value="need_review"
              tal:attributes="selected
              request/htmlform:show/selected/need_review"
              >
              need review
            </option>
            <option value="translated"
              tal:attributes="selected
              request/htmlform:show/selected/translated"
              >
              translated
            </option>
          </select>
          <input
            type="submit" name='pofile_translation_filter' value="Filter" />
        </form>

        <!-- The translation form. -->
        <form method="post" action="+translate">
          <!-- the hidden elements -->
          <input type="hidden" name="count"
                 tal:attributes="value view/count" />
          <input type="hidden" name="alt"
                 tal:condition="view/second_lang_code"
                 tal:attributes="value view/second_lang_code" />
          <input type="hidden" name="offset"
                 tal:condition="not: view/is_at_end"
                 tal:attributes="value view/offset" />
          <input type="hidden" name="show"
                 tal:condition="view/show"
                 tal:attributes="value view/show" />
          <table class="listing" style="margin-top: 0.5em;">
            <thead>
              <tr class="results">
                <td colspan="4">

                  <!-- Show which messages are displayed. -->
                  <div style="width: 50%; float: left;">
                    <tal:block tal:condition="view/fits_in_one_form">
                      All
                      <strong tal:content="view/shown_count">23</strong>
                      items
                    </tal:block>
                    <tal:block tal:condition="not:view/fits_in_one_form">
                      Items
                      <strong tal:content="view/first_message_shown">5</strong>
                      &rarr;
                      <strong tal:content="view/last_message_shown">10</strong>
                      of
                      <strong tal:content="view/shown_count">23</strong>
                    </tal:block>
                  </div>

                  <!-- Paging doodads. -->
                  <div style="width: 50%; float: right; text-align: right;">

                    <tal:comment tal:replace="nothing">
                      Link to previous page and beginning, if this is not
                      the beginning page.
                    </tal:comment>

                    <span class="previous" tal:condition="not:view/is_at_beginning">
                      <a tal:attributes="href view/beginning_URL">First</a>
                        &ndash;
                      <a tal:attributes="href view/previous_URL">Previous
                        <span tal:replace="view/count">5</span></a>
                      <span tal:condition="not:view/is_at_end">&ndash;</span>
                    </span>

                    <tal:comment tal:replace="nothing">
                      Link to next page and end, if this is not the end page.
                    </tal:comment>

                    <!-- Offset of next page, if not at end. -->
                    <span class="next" tal:condition="not:view/is_at_end">
                      <a tal:attributes="href view/next_URL">Next
                        <span tal:replace="view/count">5</span></a>
                      &ndash;
                      <a tal:attributes="href view/end_URL">Last</a>
                    </span>
                  </div>
                </td>
              </tr>
            </thead>
            <tbody class="greater">
              <tal:comment replace="nothing">
                We can control the amount of entries we could get from
                suggestions defining 'maxentries'
                This should be moved to python code, for more information,
                look at bug #41858.
              </tal:comment>
              <tal:maxentries define="maxentries python:3">
                <tal:pomsgsetview condition="view/pomsgset_views"
                                  repeat="pomsgset_view view/pomsgset_views">
                  <metal:pomsgsetview
                    use-macro="pomsgset_view/@@+pomsgset-translate/pomsgset-view"
                    />
                </tal:pomsgsetview>
              </tal:maxentries>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="4" tal:condition="view/pomsgset_views">
                  <input type="submit"
                         name="submit_translations"
                         value="Save &amp; Continue"
                         style="text-align: right;"
                         tal:attributes="tabindex view/generateNextTabIndex" />
                </th>
              </tr>
            </tfoot>
          </table>

        </form>
        <p class="discreet">
          Translation status:
          <span class="language-code"
                tal:content="context/language/englishname"
                tal:omit-tag="">Spanish</span>
          <span tal:replace="view/completeness" tal:omit-tag="">0 %</span>
        </p>
      </tal:havepluralforms>
    </div>

  </body>
</html>
