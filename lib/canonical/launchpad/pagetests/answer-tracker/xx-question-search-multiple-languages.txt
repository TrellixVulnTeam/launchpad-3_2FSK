= Searching Questions in Multiple Languages =

By default, only questions written in English or one of the user
preferred languages are listed and searched.

For example, a user who isn't logged in will only see questions written
in English, in one of the language configured in his browser,
or inferred from GeoIP information. In this example, only English
questions will be shown.

    >>> anon_browser.open('http://launchpad.dev/distros/ubuntu/+questions')

    >>> from BeautifulSoup import BeautifulSoup
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     print question.first('a').renderContents()
    Continue playing after shutdown
    Play DVDs in Totem
    mailto: problem in webpage
    Installation of Java Runtime Environment for Mozilla
    Slow system

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     print question.first('a').renderContents()
    Installation failed

The questions match the Person's preferred language settings, or in
the case of the anonymous user, the prefferred languages in the 
request made by the browser

    >>> anon_browser.getControl('All Languages').selected
    False
    >>> anon_browser.getControl('English (en)').selected
    True

If the user selects the 'All Languages' option, then all questions,
whatever the language they are written in are displayed:

    >>> anon_browser.getControl('All Languages').selected = True
    >>> anon_browser.getControl('Search').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     question.first('a').renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
    'Continue playing after shutdown'
    'Play DVDs in Totem'
    'mailto: problem in webpage'
    'Installation of Java Runtime Environment for Mozilla'

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     question.first('a').renderContents()
    'Slow system'
    'Installation failed'

When that option is selected, no warning message will appear:

    >>> anon_browser.getControl('All Languages').selected
    True

    >>> for message in find_tags_by_class(anon_browser.contents, 'message'):
    ...     print message.renderContents()

But if the user configures his browser to accept Spanish, then all
languages will be displayed and no warning nor 'All Languages' control
will appear:

    >>> anon_browser.addHeader('Accept-Language', 'es')
    >>> anon_browser.open('http://launchpad.dev/distros/ubuntu/+questions')

    >>> anon_browser.getControl('All Languages')
    Traceback (most recent call last):
      ...
    LookupError...

    >>> for message in find_tags_by_class(anon_browser.contents, 'message'):
    ...     print message.renderContents()

    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     question.first('a').renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
    'Continue playing after shutdown'
    'Play DVDs in Totem'
    'mailto: problem in webpage'
    'Installation of Java Runtime Environment for Mozilla'

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for question in soup.fetch('td', 'question'):
    ...     question.first('a').renderContents()
    'Slow system'
    'Installation failed'

= Multiple Request Languages in Latest Questions =

The portlet that lists the latest questions involving a person displays
all the questions, whatever the user preferred languages. (Since this
portlet is there to give an idea of activity, it also advertise
multi-language activity. Besides this avoids misleading the user by
showing no questions when there could be in other languages.)

    >>> browser.open('http://launchpad.dev/~carlos')
    >>> portlet = find_portlet(
    ...    browser.contents, 'Latest questions')
    >>> for link in portlet.fetch('a'):
    ...    link.renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
