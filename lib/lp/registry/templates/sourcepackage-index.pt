<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad">
  <body>
    <div metal:fill-slot="main">
      <div class="top-portlet">
        <h1 tal:content="view/page_title"></h1>

        <h2>Versions published</h2>

        <p class="warning message" tal:condition="not:context/currentrelease">
          There is no current release of this source package
          in <span tal:replace="context/distroseries/title" />.
          You can still report bugs, make translations, and so on,
          but they might not be used until the package is published.
        </p>

        <dl id="publishing_history" tal:condition="view/published_by_pocket">
          <tal:block repeat="pocket view/published_by_pocket">
            <tal:block condition="pocket/packages">
              <dt><dfn tal:content="pocket/pocketdetails/title">Plain</dfn></dt>
              <dd>
                <p tal:content="pocket/pocketdetails/description">
                  The description of the pocket.
                </p>
                <ul>
                  <li tal:repeat="spr pocket/packages">
                    <a tal:content="spr/displayname"
                       tal:attributes="href spr/fmt:url">apache2</a>
                  </li>
                </ul>
              </dd>
            </tal:block>
          </tal:block>
        </dl>

        <ul class="horizontal">
          <li>
            <a tal:replace="structure context/menu:overview/changelog/fmt:link" />
          </li>
        </ul>
      </div>

      <div class="yui-g">
        <div class="yui-u first">
          <div tal:replace="structure context/@@+portlet-details" />
        </div>

        <div class="yui-u">
          <div class="portlet">
            <h2>Upstream associations</h2>

            <div id="upstreams" class="two-column-list"
              tal:define="series context/productseries">
              <tal:has_series condition="series">
                <dl
                  tal:define="project series/product/project"
                  tal:condition="project">
                  <dt>Project Group:</dt>
                  <dd>
                    <a tal:replace="structure project/fmt:link" />
                  </dd>
                </dl>

                <dl>
                  <dt>Project:</dt>
                  <dd>
                    <a tal:replace="structure series/product/fmt:link" />
                  </dd>
                </dl>

                <dl>
                  <dt>Series:</dt>
                  <dd>
                    <a
                      tal:content="series/name"
                      tal:attributes="href series/fmt:url">Series</a>
                    <a tal:replace="structure context/menu:overview/edit_packaging/fmt:icon" />
                  </dd>
                </dl>
              </tal:has_series>

              <tal:has_no_series condition="not: context/productseries">
                 <dl>
                   <dt>Related project:</dt>
                   <dd>
                     <em>No project associated with this sourcepackage</em>
                   </dd>
                 </dl>
              </tal:has_no_series>
            </div>

            <ul class="horizontal">
              <li>
                <a tal:replace="structure context/menu:overview/packaging/fmt:link" />
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="yui-g">
        <div class="yui-u first">
          <div tal:replace="structure context/@@+portlet-releases" />

          <ul class="horizontal" style="margin-bottom: 1em;">
            <li>
              <a tal:replace="structure context/menu:overview/builds/fmt:link" />
            </li>
          </ul>
        </div>

        <div class="yui-u">
          <div tal:replace="structure context/@@+portlet-upstream" />

          <div>
            <h2>Binary packages</h2>

            <div id="binaries" tal:define="binaries view/binaries">
              <ul tal:condition="binaries">
                <li tal:repeat="bin_name binaries">
                  <span tal:replace="bin_name" />
                  <span tal:repeat="archtag python:binaries[bin_name]">
                    (<a tal:content="archtag" tal:attributes="href
                                     string:../../${archtag}/${bin_name}" />)</span>
                </li>
              </ul>

              <p tal:condition="not: binaries">
                 No binaries have been generated for this release.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="portlet"
        tal:define="current context/currentrelease"
        tal:condition="current">
        <h2>Download files from current release (<span
          tal:replace="current/version">2.1.3-4</span>)</h2>

        <div id="files" tal:content="structure current/@@+files" />

        <h2>Package relationships</h2>

        <table width="100%" valign="top">
          <tr>
              <td id="depends" tal:define="relationships view/builddepends">
                  <h3>Build dependencies</h3>
                  <tal:block tal:condition="relationships/has_items"
                             replace="structure relationships/@@+render-list"/>
              </td>
              <td id="dependsindep"
                  tal:define="relationships view/builddependsindep">
                  <h3>Platform-independent build dependencies</h3>
                  <tal:block tal:condition="relationships/has_items"
                             replace="structure relationships/@@+render-list"/>
              </td>
          </tr>
          <tr>
              <td id="conflicts" tal:define="relationships view/build_conflicts">
                  <h3>Build conflicts</h3>
                  <tal:block tal:condition="relationships/has_items"
                             replace="structure relationships/@@+render-list"/>
              </td>
              <td id="conflictsindep"
                  tal:define="relationships view/build_conflicts_indep">
                  <h3>Platform-independent build dependencies</h3>
                  <tal:block tal:condition="relationships/has_items"
                             replace="structure relationships/@@+render-list"/>
              </td>
          </tr>
        </table>
      </div>
    </div>
  </body>
</html>
