We should also be able to set a translation group and translation
permissions on a product. We'll use the Netapplet product for this test.

First make sure it uses Launchpad for translations.

    >>> netapplet_owner_browser = setupBrowser(
    ...     auth='Basic test@canonical.com:test')
    >>> netapplet_owner_browser.open('http://launchpad.dev/netapplet')
    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents, 'uses'))
    Does not use Launchpad for development.

    >>> netapplet_owner_browser.getLink(
    ...   'Configure translations').click()
    >>> print netapplet_owner_browser.title
    Configure Translations : NetApplet

    >>> netapplet_owner_browser.getControl('Launchpad').click()
    >>> netapplet_owner_browser.getControl('Change').click()
    >>> print netapplet_owner_browser.title
    Network Applet in Launchpad

    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents, 'uses'))
    Uses Launchpad for: Translations.

Netapplet doesn't have TranslationGroup and uses open permissions. We
can see that from the translations page.

    >>> netapplet_owner_browser.getLink('Translations').click()
    >>> print netapplet_owner_browser.title
    Translations : NetApplet

    >>> print extract_text(
    ...     find_tag_by_id(netapplet_owner_browser.contents,
    ...                    'translation-permissions'))
    NetApplet (Unspecified) is translated with Open permissions.

Now let's make sure we can see the page to let us change translation
group and permissions.

    >>> translations_page_url = netapplet_owner_browser.url
    >>> netapplet_owner_browser.getLink('Change permissions').click()
    >>> change_translators_url = netapplet_owner_browser.url

    >>> print netapplet_owner_browser.title
    Permissions and policies...

    >>> print netapplet_owner_browser.getControl(
    ...     'Translation group').displayOptions
    ['(no value)', 'Single-language Translators',
     'The PolyGlot Translation Group', 'Just a testing team']

    >>> print netapplet_owner_browser.getControl(
    ...     'Translation group').displayValue
    ['(no value)']

Ordinary users cannot see the "Change permissions" link or the page it
leads to.

    >>> user_browser.open(translations_page_url)
    >>> user_browser.getLink('Change permissions').click()
    Traceback (most recent call last):
    ...
    LinkNotFoundError

    >>> user_browser.open(change_translators_url)
    Traceback (most recent call last):
    ...
    Unauthorized...

Now let's post to the form. We should be redirected to the product page.

    >>> netapplet_owner_browser.getControl(
    ...     'Translation group').displayValue = [
    ...         'The PolyGlot Translation Group']
    >>> netapplet_owner_browser.getControl('Change').click()
    >>> print netapplet_owner_browser.title
    Translations : NetApplet

Now these changes show up in the product page. (XXX mpt 20070126:
Launchpad should be fixed so that you can't set translation
group/permissions without using Translations.)
