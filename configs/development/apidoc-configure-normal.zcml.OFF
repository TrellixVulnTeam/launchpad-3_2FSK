<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:meta="http://namespaces.zope.org/meta">
    <!-- These packages are required by apidoc. If they are deemed
    generally useful, move them to zopeapp.zcml
    -->
    <!--
    How frustrating.  This is needed for just one page registration
    in introspector.zcml.
    -->
    <include package="zope.app" file="menus.zcml" />
    <include package="zope.app.tree.browser" />
    <include package="zope.app.tree" />  
    <include package="zope.app.renderer" file="meta.zcml" />
    <include package="zope.app.renderer" />

    <!-- XXX: StuartBishop 2005-03-13 Bug 39834:
    We also need the Z3 preference junk, whatever that is.
    Unfortunately, this depends on annotatable principals so will not
    currently work with Launchpad. We can still get some apidoc functionality,
    such as the ZCML browser, but the bulk of it is not functional.
    -->
    <include package="zope.app.preference" file="meta.zcml" />
    <!--
    <include package="zope.app.preference" />
    -->


    <!-- Turn on devmode for the following includes principal=work -->
    <meta:provides feature="devmode" />

    <include package="zope.app.apidoc" file="meta.zcml" />
    <include package="zope.app.apidoc" />

    <meta:redefinePermission
        from="zope.app.apidoc.UseAPIDoc"  to="zope.Public"
        />

    <!-- Override a strange permission in apidoc -->
    <class class="zope.app.apidoc.apidoc.APIDocumentation">
        <require
            interface="zope.app.container.interfaces.IReadContainer"
            permission="zope.Public"
            />
    </class>

</configure>

