<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master">
  i18n:domain="launchpad"
>
  <body>
<div metal:fill-slot="main">
  <div metal:use-macro="context/@@launchpad_form/form">
    <metal:extra-info fill-slot="extra_info">
      <h1>Change your e-mail settings</h1>
      <h2>Your e-mail addresses</h2>
      <tal:block condition="context/preferredemail">
        <p>Your preferred contact address for all Launchpad e-mail is:</p>
        <ul id="preferred-email">
          <li class="mail"><b tal:content="context/preferredemail/email" /></li>
        </ul>
      </tal:block>

      <tal:block tal:condition="not: context/preferredemail">
        <p id="no-contact-address">
          Currently you don't have a contact address in
          Launchpad.
        </p>
      </tal:block>
    </metal:extra-info>

    <metal:widgets fill-slot="widgets">

      <table class="form">
        <tal:validated tal:condition="view/validated_addresses">
          <tal:widget define="widget nocall:view/widgets/VALIDATED_SELECTED">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
          <tr>
            <td></td>
            <td>
              <input
                 tal:replace="structure view/action_set_preferred/render" />
              <tal:comment condition="nothing">
                XXX 2009-06-06 jamesh bug=371567: We don't support
                deletion of email addresses yet.
              <input tal:replace="structure
                                  view/action_remove_validated/render" />
              </tal:comment>
            </td>
          </tr>
        </tal:validated>

        <tal:block tal:condition="view/unvalidated_addresses">
          <tal:widget define="widget nocall:view/widgets/UNVALIDATED_SELECTED">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
          <tr>
            <td></td>
            <td>
              <input tal:replace="structure view/action_confirm/render" />
              <input tal:replace="structure
                                  view/action_remove_unvalidated/render" />
            </td>
          </tr>
        </tal:block>

        <tal:widget define="widget nocall:view/widgets/newemail">
          <metal:block use-macro="context/@@launchpad_form/widget_row" />
          <tr>
            <td></td>
            <td>
              <input tal:replace="structure view/action_add_email/render" />
            </td>
          </tr>
        </tal:widget>
      </table>
    </metal:widgets>
    <metal:widgets fill-slot="buttons" />
  </div>

</div>

</body>
</html>
