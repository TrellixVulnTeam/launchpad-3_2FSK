= The BranchFileSystem application =

The branch file system application is an XMLRPC service that provides
data for the virtual filesystems used by the codehosting service.  It
is available as the branchfilesystem attribute of our private XMLRPC
instance.

    >>> from canonical.launchpad.interfaces import (
    ...     IPrivateApplication)
    >>> from canonical.launchpad.interfaces.codehosting import (
    ...     IBranchFileSystemApplication)
    >>> from canonical.launchpad.webapp.testing import verifyObject

    >>> private_root = getUtility(IPrivateApplication)
    >>> verifyObject(
    ...     IBranchFileSystemApplication,
    ...     private_root.branchfilesystem)
    True

The end point is implemented by the BranchFileSystemAPI, which
implements the IBranchFileSystem class.

    >>> from zope.publisher.xmlrpc import TestRequest
    >>> from canonical.launchpad.interfaces.codehosting import IBranchFileSystem
    >>> from canonical.launchpad.xmlrpc.codehosting import (
    ...     BranchFileSystemAPI)

    >>> branchdetails_api = BranchFileSystemAPI(
    ...     private_root.branchdetails, TestRequest())
    >>> verifyObject(IBranchFileSystem, branchdetails_api)
    True

The IBranchFileSystem interface defines some methods, for which
see the unit tests.  One of these is the 'getBranchesForUser'.

    >>> branchdetails_api.getBranchesForUser('whoever')
    []

This method can be accessed over XMLRPC.

    >>> import xmlrpclib
    >>> from canonical.functional import XMLRPCTestTransport
    >>> branchdetails = xmlrpclib.ServerProxy(
    ...     'http://xmlrpc-private.launchpad.dev:8087/branchfilesystem',
    ...     transport=XMLRPCTetTransport())
    >>> branchdetails.getBranchesForUser('whoever')
    []
