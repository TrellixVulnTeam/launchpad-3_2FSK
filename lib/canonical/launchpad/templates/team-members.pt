<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
  <title metal:fill-slot="title">Members of 
    <span tal:replace="context/browsername">Name</span></title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Soyuz style sheet -->
    <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<div metal:fill-slot="main">

  <div id="content" class="documentEditable">
    <ul class="contentViews">
      <li id="contentview-profile" class="plain">
        <a href=".">Team Information</a>
      </li>

      <li id="contentview-members" class="selected">
        <a href="+members">Active Members</a>
      </li>
    </ul>

    <div class="documentContent" id="region-content">

      <h1>Active Members of <span tal:replace="context/browsername" /></h1>

      <br />
      <div>This team currently have <em>
        <span tal:replace="view/activeMembersCount" /></em> active members:
      </div>

      <table tal:condition="view/activeMembersCount"
             width="100%" id="ass_listing" class="listing rowNavigation">
        <tr>
          <th>Name</th>
          <th>Joined</th>
          <th>Expires</th>
          <th>Status</th>
        </tr>
        <tr tal:repeat="membership view/activeMemberships">
          <tal:block tal:define="member membership/person">
          <td><a tal:attributes="href string:/people/${member/name}">
            <span tal:replace="member/browsername" /></a></td>
          <td tal:content="membership/datejoined/date"></td>
          <td tal:condition="membership/dateexpires"
              tal:content="membership/dateexpires/date"></td>
          <td tal:condition="not: membership/dateexpires">Never</td>
          <td tal:content="membership/statusname"></td>
          </tal:block>
        </tr>
      </table>

      <div tal:define="proposedmembers context/proposedmembers;
                       expiredmembers context/expiredmembers;
                       deactivatedmembers context/deactivatedmembers"
           tal:condition="python: proposedmembers or expiredmembers or deactivatedmembers">
        There's also:
        <div tal:condition="proposedmembers" style="margin: 0.5em 2em">
          <span tal:replace="python: len(proposedmembers)" />
          new member(s) awaiting for approval.
        </div>

        <div tal:condition="expiredmembers" style="margin: 0.5em 2em">
          <span tal:replace="python: len(expiredmembers)" />
          member(s) whose subscription is expired.
        </div>

        <div tal:condition="deactivatedmembers" style="margin: 0.5em 2em">
          <span tal:replace="python: len(deactivatedmembers)" />
          member(s) whose subscription have been canceled.
        </div>
      </div>

      <div style="float: right; padding-right: 1em">
        <p><a href="+addmembers">Manage All Members</a></p>
      </div>

    </div>
  </div>
</div>

</body>
</html>
