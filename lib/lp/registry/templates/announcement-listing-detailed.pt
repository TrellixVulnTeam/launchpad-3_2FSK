<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n">

<div class="announcement"
   tal:define="id_string string:${context/id}"
   tal:attributes="id id_string/fmt:css-id">
    <h2>
      <a tal:attributes="href string:${context/fmt:url}">
        <tal:date tal:condition="context/date_announced">
          <span tal:replace="context/date_announced/fmt:date"/>:
        </tal:date>
        <tal:title content="context/title">News item title</tal:title>
      </a>
    </h2>

    <p class="registered">
      Written for
      <tal:pillar replace="structure context/target/fmt:link" />
      by
      <tal:registrant replace="structure context/registrant/fmt:link" />.
    </p>

    <div tal:condition="context/summary"
         tal:replace="structure context/summary/fmt:text-to-html" />
    <p>
      <tal:future condition="context/future">
        <img src="/@@/warning" title="Announcement is not yet public." />
        <strong tal:condition="context/active">
          <tal:date_set condition="context/date_announced">
            This announcement will be published on
            <span tal:replace="context/date_announced/fmt:datetime" />.
          </tal:date_set>
        </strong>
      </tal:future>
      <strong tal:condition="not: context/active">
        <img src="/@@/info" title="Announcement has been retracted." />
          Retracted.
      </strong>
      <strong tal:condition="not: context/date_announced">
          No publishing date set.
      </strong>
      <strong tal:condition="context/date_last_modified">
          Updated
          <span tal:replace="context/date_last_modified/fmt:displaydate" />.
      </strong>
      <a tal:condition="context/url"
         tal:attributes="href context/url">
         <img src="/@@/link" alt="Link" /> Read more</a>
    </p>
  </div>
</tal:root>
