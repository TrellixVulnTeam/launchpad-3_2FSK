<tal:do-this-first tal:content="view/processForm" />
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<div metal:fill-slot="main">

<h1> Reset password</h1>

<div tal:condition="not: view/successfullyProcessed">
  <div class="error" tal:condition="view/errormessage"
    tal:content="view/errormessage" />

  <fieldset>
    <legend>
      Account details
    </legend>
    <form autocomplete="off" name="resetpassword" method="POST">
    <div class="field">
      <label>Email address</label>

      <br>
      <div class="formHelp">Enter the email address you used to request a new password.</div>
      <input type="text" size="50" name="email" 
             tal:attributes="value view/email|nothing" />
      <br>

      <label>Password</label>
      <br>
      <div class="formHelp"> Type your new password </div>

      <input type="password" size="30" name="password" />
      <br>

      <label>Confirm password</label>
      <br>
      <div class="formHelp"> Re-type your new password </div>
      <input type="password" size="30" name="password2" />
      <br>

      <tal:block condition="not: request/lp:person">
        <label>
          <input type="checkbox" checked="checked" name="logmein" />
          Log me in after resetting my password
        </label>
      </tal:block>

      <div class="formControls">
        <input type="submit" value="Submit" />
      </div>
    </div>
    </form>

  </fieldset>
</div>


<div tal:condition="view/successfullyProcessed">
  <div class="documentDescription">
    Your password has successfully been reset. 
    <tal:block condition="not: request/lp:person">
      You can now <a href="/+login">login</a>.
    </tal:block>
  </div>
</div>

</div>

</body>
</html>
