<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template_2col/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-latestspecs" />
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
</metal:heading>

<div metal:fill-slot="main"
     tal:define="specs view/specs;
                 has_any_specs view/has_any_specifications">

  <h1>Blueprint listing for <tal:name replace="context/displayname" /></h1>

  <tal:no_specs condition="not: has_any_specs">

    <p>
      Launchpad lets projects track the features they intend to implement over
      the next few releases. It can generate reports of the project roadmap, as
      well as notifying developers of blueprint status changes.
      Examples:
      <a href="/ubuntu/">Ubuntu</a>,
      <a href="/bzr/">Bazaar</a>.
    </p>

    <p>
      <strong>Register the first blueprint in this project!</strong>
      Start by choosing the relevant project from the list below:
    </p>
    <ul class="menu">
      <li class="add" tal:repeat="product context/products">
        <a tal:attributes="href string:${product/fmt:url}/+addspec"
           tal:content="product/displayname">Firefox</a>
      </li>
    </ul>

    <p>
      Once you have a few blueprints in the system you can plan releases,
      and keep track of who is responsible for what. You can approve
      blueprints as goals for a particular release, and then
      generate a simple report of progress towards feature
      completion for that release.
    </p>

      <ul class="menu">
        <li class="info">
          <a href="https://help.launchpad.net/BlueprintDocumentation"
          >Read more about tracking blueprints</a>
        </li>
      </ul>

  </tal:no_specs>
  <tal:has_specs condition="has_any_specs">
    <div>
      <form name="spec_search" method="GET">

        Show only blueprints containing:
  
        <input type="text" name="searchtext"
               tal:attributes="value view/searchtext" />
        <input tal:condition="view/searchrequested"
          type="submit"
          value="Search again"
          />
        <input tal:condition="not: view/searchrequested"
          type="submit"
          value="Search blueprints"
          />
      </form>
    </div>
    <table class="listing sortable" id="speclisting"
          tal:condition="view/specs">
      <thead>
        <tr>
          <th>Priority</th>
          <th>Specification</th>
          <th>Status</th>
          <th>Delivery</th>
          <th>Assignee</th>
          <th>Project</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="spec view/specs">
          <td>
            <span class="sortkey" tal:content="spec/priority/sortkey" />
            <span tal:content="spec/priority/title"
                  tal:attributes="
                  class string:specpriority${spec/priority/name}">High</span>
          </td>
          <td><a tal:content="spec/name/fmt:shorten/35"
                 tal:attributes="
                   href spec/fmt:url;
                   title spec/title">foo-bar-baz</a>
              <img src="/@@/info" alt="Informational specification"
                   title="Informational specification"
                   tal:condition="spec/informational" />
          </td>
          <td>
            <span class="sortkey" tal:content="spec/status/sortkey" />
            <span tal:content="spec/status/title"
                  tal:attributes="
                  class string:specstatus${spec/status/name}">Approved</span>
          </td>
          <td>
            <span class="sortkey" tal:content="spec/delivery/sortkey" />
            <span
              tal:attributes="class string:specdelivery${spec/delivery/name}"
              tal:content="spec/delivery/title">Deployed</span>
          </td>
          <td>
            <a tal:condition="spec/assignee"
               tal:attributes="href spec/assignee/fmt:url"
               tal:content="spec/assignee/browsername">
              Carlos Perello Marin
            </a>
          </td>
          <td>
            <a tal:content="spec/product/name"
               tal:attributes="href spec/product/fmt:url">Firefox</a
              ><tal:series condition="spec/productseries">/<a
                tal:attributes="href spec/productseries/fmt:url"
                tal:content="spec/productseries/name"
                >1.0</a>
            </tal:series>
          </td>
        </tr>
      </tbody>
    </table>

    <tal:nomatches condition="not: view/specs"
                   replace="structure context/@@+nomatches" />

    <p tal:condition="view/specs" class="discreet">
      <span tal:replace="view/specs/count:len">7</span> specification(s) listed.
    </p>

    <p tal:condition="view/specs" class="discreet">
      This listing shows by default all the unimplemented feature
      specifications currently associated with all projects in 
      <span tal:replace="context/displayname">Mozilla</span>.
    </p>

  </tal:has_specs>

</div>
</body>
</html>
