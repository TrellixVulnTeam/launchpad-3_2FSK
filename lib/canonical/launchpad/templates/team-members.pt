<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<div metal:fill-slot="main">

  <h1>
    Members of
    &#8220;<span tal:replace="context/browsername" />&#8221;
  </h1>

  <p tal:condition="not: view/allMembersCount">
    This team currently has no members.
  </p>

  <tal:block condition="view/allMembersCount">
    <tal:block condition="context/active_member_count">
      <h2>Active members</h2>

      <table class="listing sortable" id="activemembers">
        <thead>
          <tr>
            <th>Name</th>
            <th>Member since</th>
            <th>Expires</th>
            <th>Status</th>
            <th tal:condition="context/required:launchpad.Edit">&nbsp;</th>
          </tr>
        </thead>

        <tbody>
          <tr tal:repeat="membership view/activeMemberships">
            <tal:block define="member membership/person">
              <td>
                <a tal:attributes="href member/fmt:url"
                   tal:content="member/browsername" />
              </td>
              <td
                tal:content="membership/datejoined/fmt:date"
              >2005-06-14</td>
              <td
                tal:condition="not: membership/dateexpires"
              >&ndash;</td>
              <td
                tal:condition="membership/dateexpires"
                tal:content="membership/dateexpires/fmt:date"
              >2006-06-13</td>
              <td tal:content="membership/statusname"></td>
              <td tal:condition="context/required:launchpad.Edit">
                [<a tal:attributes="href membership/fmt:url">Edit</a>]
              </td>
            </tal:block>
          </tr>
        </tbody>
      </table>
    </tal:block>

    <tal:block condition="context/proposedmembers/count">
      <h2>Proposed members</h2>

      <p>
        Proposed members may be approved or declined by a
        team administrator.
      </p>

      <table class="listing sortable" id="proposedmembers">
        <thead>
          <tr>
            <th>Name</th>
            <th>Applied for membership</th>
            <th>&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="membership view/proposedMemberships">
            <tal:block tal:define="member membership/person">
            <td>
              <a tal:attributes="href member/fmt:url"
                 tal:content="member/browsername" />
            </td>
            <td
              tal:content="membership/datejoined/fmt:date"
            >2005-04-01</td>
            <td tal:condition="context/required:launchpad.Edit">
              [<a tal:attributes="href membership/fmt:url">Edit</a>]
            </td>
            </tal:block>
          </tr>
        </tbody>
      </table>

      <ul class="edit" tal:condition="context/required:launchpad.Edit">
        <li>
          <a href="+editproposedmembers"
          >Approve or decline members</a>
        </li>
      </ul>
    </tal:block>
    <tal:block condition="context/inactivemembers/count">
      <h2>Inactive members</h2>
      <p>
        Inactive members are those whose
        subscriptions have expired, or were
        deactivated by themselves or by an admin.
      </p>
      <table class="listing sortable" id="inactivemembers">
        <thead>
          <tr>
            <th>Name</th>
            <th>Joined in</th>
            <th>Status</th>
            <th>&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="membership view/inactiveMemberships">
            <tal:block define="member membership/person">
            <td>
              <a tal:attributes="href member/fmt:url"
                 tal:content="member/browsername"
                 title="Renew/Reactivate this membership" />
            </td>
            <td
              tal:content="membership/datejoined/fmt:date"
            >2005-04-01</td>

            <td tal:condition="membership/isExpired">
                Expired on
                <span tal:replace="membership/dateexpires/fmt:date" />
            </td>
            <td
              tal:condition="not: membership/isExpired"
              tal:content="membership/statusname" />
            <td tal:condition="context/required:launchpad.Edit">
              [<a tal:attributes="href membership/fmt:url">Edit</a>]
            </td>
            </tal:block>
          </tr>
        </tbody>
      </table>
    </tal:block>

    <ul class="add" tal:condition="context/required:launchpad.Edit">
      <li><a href="+addmember">Add a new member</a></li>
    </ul>

  </tal:block>
</div>

</body>
</html>
