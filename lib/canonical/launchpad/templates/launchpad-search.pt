<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/search"
  i18n:domain="launchpad"
>

  <body>
    <div metal:fill-slot="main">
      <form
	 action=""
	 name="sitesearch"
	 id="sitesearch"
	 method="get"
	 accept-charset="UTF-8">
        <label for="field.search_text">Search Launchpad:</label>
        <input
          id="field.search_text"
          class="textType"
          type="text"
          size="36"
          name="field.search_text"
          tal:attributes="value view/search_text"/>
          <script
            type="text/javascript"
            tal:define="script view/focusedElementScript"
            tal:condition="script"
            tal:content="structure script" />
        <input
           id="field.actions.search"
           name="field.actions.search"
           class="button"
           type="submit"
           value="Search" />
      </form>

      <tal:wants-results condition="view/search_text">

        <div id="search-results" tal:condition="view/has_matches">
          <tal:has_exact_matches condition="view/has_exact_matches">
	    <h2>Most relavent matches</h2>

            <ul class="exact-matches">
              <li tal:condition="view/bug">
                <div>
                  <tal:link replace="structure view/bug/fmt:link" />
                </div>
                <div class="summary">
                  in 
                    <tal:per_pillar repeat="pillar view/bug/affected_pillars">
                      <b tal:content="pillar/displayname" />,
                    </tal:per_pillar>
                  reported
                  <span
                    tal:attributes="title view/bug/datecreated/fmt:datetime"
                    tal:content="view/bug/datecreated/fmt:displaydate">2005-10-05</span>
                  by
                  <a
                    tal:attributes="href view/bug/owner/fmt:url"
                    tal:content="view/bug/owner/browsername">Foo Bar</a>
                </div>
              </li>

              <li tal:condition="view/question">
                <div>
                  <tal:link replace="structure view/question/fmt:link" />
                </div>
                <div class="summary">
                  posted
                  <span
                    tal:attributes="title view/question/datecreated/fmt:datetime"
                    tal:content="view/question/datecreated/fmt:displaydate">2005-10-05</span>
                  by
                  <a tal:replace="structure view/question/owner/fmt:link"
                    >Foo Bar</a><tal:assignee condition="view/question/assignee">,
                  assigned to
                  <a tal:replace="structure view/question/assignee/fmt:link"
                    >Foo Bar</a></tal:assignee><tal:answerer condition="view/question/answerer">,
                  answered by
                  <a tal:replace="structure view/question/answerer/fmt:link">Foo Bar</a>
                  </tal:answerer>
                  in
                  <strong tal:content="view/question/target/title">ubuntu</strong>
                </div>
              </li>

              <li tal:condition="view/pillar" class="pillar">
                <tal:link replace="structure view/pillar/@@+listing-detailed" />
              </li>

              <li tal:condition="view/person_or_team">
                <div>
                  <a tal:replace="structure view/person_or_team/fmt:link">
                    Sample Person
                  </a>
                  <a
                    tal:attributes="href view/person_or_team/fmt:url"
                    tal:content="string:(${view/person_or_team/name})">(name12)</a>
                </div>
                <div class="summary">
                  <tal:team
                    tal:condition="view/person_or_team/isTeam" >
                    <div
                      tal:content="view/person_or_team/teamdescription">
                      The Launchpad team creates Launchpad. That's what they do.
                      They rock!
                    </div>
                    <div>
                      Created
                      <span
                        tal:attributes="title view/person_or_team/datecreated/fmt:datetime"
                        tal:content="view/person_or_team/datecreated/fmt:displaydate">2005-10-05</span>
                    </div>
                  </tal:team>
                  <tal:person
                    tal:condition="not: view/person_or_team/isTeam">
                    <div>
                      Member since 
                      <span
                        tal:attributes="title view/person_or_team/datecreated/fmt:datetime"
                        tal:content="view/person_or_team/datecreated/fmt:displaydate">2005-10-05</span>,
                        with <tal:karma content="view/person_or_team/karma">1000</tal:karma> karma
                    </div>
                  </tal:person>
                </div>
              </li>
            </ul>
          </tal:has_exact_matches>

          <tal:batch
            condition="view/pages"
            define="batch view/pages/currentBatch|nothing">
	    <h2>Matching pages</h2>

	    <div class="upper-batch-nav">
              <tal:navigation
		 replace="structure view/pages/@@+navigation-links-upper"/>
	    </div>

            <ul class="site-matches" tal:condition="batch">
              <li class="pagematch" tal:repeat="page batch">
                <div>
                  <a
                    tal:attributes="href page/url"
                    tal:content="structure page/title">Page title</a>
                </div>
                <div
                  class="summary"
                  tal:content="structure page/summary">
                  A snippet of search result summary text.
                </div>
              </li>
            </ul>

	    <div class="lower-batch-nav">
              <tal:navigation
		 replace="structure view/pages/@@+navigation-links-lower" />
	    </div>
          </tal:batch>
        </div>

        <p id="no-results" tal:condition="not:view/has_matches">
          Your search, 
          &ldquo;<span class="search_text" tal:content="view/search_text">some text</span>&rdquo;,
          did not return any results.
        </p>

      </tal:wants-results>
    </div>
  </body>
</html>
