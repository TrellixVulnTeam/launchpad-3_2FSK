<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
    <title metal:fill-slot="title">
        <span
        tal:replace="context/release/distribution/title">Distro</span> Release: <span tal:replace="context/release/title">Foo</span>
    </title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Soyuz style sheet -->
    <style type="text/css" media="screen">@import url(soyuz.css);</style>
</head>

<body>


<metal:leftportlets fill-slot="portlets_one">

<tal:block tal:define="distro context/release/distribution">

 <div class="portlet">
  <h4><span tal:content="distro/title">DISTRO</span> Links</h4>

   <div class="portletBody">

     <div class="portletContent even">

     <ul>
     <li><a tal:attributes="href string:/soyuz/distros/${distro/name}">
     Home Page</a></li>
     <li><a tal:attributes="href string:/soyuz/distros/${distro/name}/releases">
      Releases</a></li>
     <li><a tal:attributes="href string:/soyuz/distros/${distro/name}/src">
      Source Packages</a></li>
     <li><a tal:attributes="href string:/soyuz/distros/${distro/name}/bin">
     Binary Packages</a></li>
     </ul>

     </div>
   </div>  
 </div>

 <div class="portlet">
  <h4>Local Links</h4>
   <div class="portletBody">
     <div class="portletContent even">
     <ul>
     <li><a href="+bugs">Packages with Open Bugs</a></li>
     <li><a href="+deliver">Deliver this Release</a></li>
     <li><a href="+edit">Edit Release Information</a></li>
     </ul>
     </div>
   </div>  
 </div>
</tal:block>

</metal:leftportlets>


<metal:rightportlets fill-slot="portlets_two">
<div tal:replace="structure view/rolesPortlet" />
</metal:rightportlets>



<div metal:fill-slot="main" tal:define="distro context/release/distribution">
  <div id="content" class="documentEditable">
    <div class="documentContent" id="region-content"/>    

    <h1><span tal:content="distro/title">
            Foo</span> Release: <span tal:content="context/release/title">displayname</span></h1> 
     <p />
  
         <div>
          <span tal:content="context/release/description">description</span>   
         </div>

         <ul>
         <li>Owner: <a tal:attributes="href string:/foaf/people/${context/release/owner/name}"
                       tal:content="context/release/owner/displayname">OWNER</a></li> 
         <li>Status: <span tal:content="context/release/state">STATE</span></li>
         <li>Date Released: <span tal:content="context/release/datereleased">DATERELEASED</span></li>
         <li tal:condition="context/release/parentrelease">
            Originating Release: <a tal:attributes="href string:/soyuz/distros/${context/release/parentrelease/distribution/name}/releases/${context/release/parentrelease/name}">
           <span tal:content="context/release/parentrelease/title">
           PARENTRELEASE</span></a></li>
         </ul>

      <h4 style="margin-bottom: 1em;">Packages</h4>

    <div tal:define="sourcecount context/release/sourcecount">

      <div tal:condition="not: sourcecount">
      No packages have been released for <span tal:content="context/release/title">displayname</span>.
      </div>

      <div tal:condition="sourcecount" align="center">

          <form name="search" method="POST" action="+search">
           <div class="formControls">
            <label>Package name:</label>
            <input title="Enter the package name" size="50"
               type="text" name="name"/>
            <input type="submit" value="Search"/>
           </div>
          </form>

          <table>
          <tr><td><a 
            tal:attributes="href string:../../src/${context/release/name}?showall=1">
            View All 
            (<span tal:content="sourcecount"/> Packages)
            </a></td>
          </tr>
          </table>

      </div>

    </div>
  </div>

</div>

</body>
</html>
