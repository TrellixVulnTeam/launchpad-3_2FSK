<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="view/macro:page/main_only"
>
  <body>
    <div metal:fill-slot="head_epilogue">
      <style type="text/css">
        .inactive_links a img{
          visibility: hidden;
        }
        .inactive_links a{
          color: lightgray;
        }
        .template_links a{
          padding-right: 1em;
        }
        td.template_column, th.template_column,
        td.sourcepackage_column, th.sourcepackage_column {
            width: 20em;
        }
        td.actions_column, th.actions_column {
            width: 27em;
        }
      </style>
      <style tal:condition="view/is_distroseries" type="text/css">
        #templates_table {
            width: 72em;
        }
      </style>
      <style tal:condition="not:view/is_distroseries" type="text/css">
        #templates_table {
            width: 50em;
        }
      </style>
      <script language="JavaScript" type="text/javascript">
      YUI().use('node', function(Y) {
          Y.on('domready', function(e) {
              Y.all('.template_links').addClass('inactive_links');
              var template_rows = Y.all('.template_row');
              template_rows.each(function(row) {
                  var template_links = row.query('.template_links');
                  row.on('mouseover', function(e) {
                      template_links.removeClass('inactive_links');
                  });
                  row.on('mouseout', function(e) {
                      template_links.addClass('inactive_links');
                  });
              });
          });
      });
      </script>
    </div>
    <div metal:fill-slot="main">
      <div class="translation-help-links">
        <a href="https://help.launchpad.net/Translations"
           id="link-to-translations-help"
           >Help for translations
        </a>
        <div></div><!-- to clear-up all floats -->
      </div>

      <div class="yui-b top-portlet">
        <p>
          This is a listing of all the translatable templates
          in <a tal:replace="structure context/fmt:link">here</a>.
        </p>
      </div>

      <div class="yui-b">
      <table class="sortable listing" id="templates_table">
        <thead>
          <tr>
            <th tal:condition="view/is_distroseries"
                class="sourcepackage_column">Source package</th>
            <th class="template_column">Template name</th>
            <th class="actions_column"
                tal:condition="context/required:launchpad.AnyPerson">
              Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="template view/iter_templates" class="template_row">
            <td tal:condition="view/is_distroseries"
                tal:content="template/sourcepackagename/name"
                class="sourcepackage_column">Source package
            </td>
            <td class="template_column"><a tal:attributes="href template/fmt:url"
                   tal:content="template/name">Template name</a></td>
            <td class="actions_column"
                tal:condition="context/required:launchpad.AnyPerson">
            <div class="template_links">
              <tal:maintainer condition="template/required:launchpad.Edit">
                <a tal:attributes="href string:${template/fmt:url}/+edit;
                                   title string:Edit ${template/name}'s details">
                   <img src="/@@/edit" />&nbsp;Edit</a>
                <a tal:attributes="href string:${template/fmt:url}/+upload;
                      title string:Upload translations to ${template/name}">
                   <img src="/@@/add" />&nbsp;Upload</a>
              </tal:maintainer>
              <a tal:attributes="href string:${template/fmt:url}/+export;
                   title string:Download translations from ${template/name}">
                <img src="/@@/download" />&nbsp;Download</a>
              <tal:admin condition="template/required:launchpad.TranslationsAdmin">
                <a tal:attributes="href string:${template/fmt:url}/+admin;
                                   title string:Administer ${template/name}">
                   <img src="/@@/edit" />&nbsp;Administer</a>
              </tal:admin>
            </div>
            </td>
          </tr>
        </tbody>
      </table>
      </div>
    </div>
  </body>
</html>
