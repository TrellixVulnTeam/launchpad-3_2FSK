<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/distribution/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <h1>
    <tal:distro replace="context/distribution/displayname">Ubuntu
    Linux</tal:distro>
    mirror "<tal:mirror replace="context/title">foobar</tal:mirror>"
  </h1>
</metal:heading>

<div metal:fill-slot="main">

    <tal:is-owner-or-admin condition="context/required:launchpad.Edit">
      <div tal:condition="context/whiteboard" class="highlighted"
           id="whiteboard">
        <p tal:content="context/whiteboard">Whiteboard goes here.</p>
      </div>
    </tal:is-owner-or-admin>

    <p id="status">
      <strong>
        <tal:official condition="context/isOfficial">Official</tal:official>
        <tal:not-official condition="not:context/isOfficial">Unofficial</tal:not-official>
      </strong>
      <span tal:replace="context/distribution/title" /> Mirror registered by
      <span tal:content="structure context/owner/fmt:link" /> 
      <span tal:content="context/date_created/fmt:displaydate" />
    </p>

    <div class="highlighted" style="font-size: 80%;"
         tal:condition="context/description">
      <p tal:replace="structure context/description/fmt:text-to-html">
          Distribution Mirror Description
      </p>
    </div>

    <table id="mirror-details" class="summary" style="float: none">
      <tr>
        <th>Speed:</th>
        <td tal:content="context/speed/title">2 Mbps</td>
      </tr>
      <tr>
        <th>Country:</th>
        <td tal:content="context/country/name">Brazil</td>
      </tr>
      <tr>
        <th>Content:</th>
        <td tal:content="context/content/title">Archive</td>
      </tr>
    </table>

    <h2>Mirror URLs</h2>

    <ul class="webref" id="mirror-urls">
      <li tal:condition="context/http_base_url" >
        Web: <a tal:content="context/http_base_url"
                 tal:attributes="href context/http_base_url">http://url/</a>
      </li>
      <li tal:condition="context/ftp_base_url" >
        FTP: <a tal:content="context/ftp_base_url"
                tal:attributes="href context/ftp_base_url">ftp://url/</a>
      </li>
      <li tal:condition="context/rsync_base_url" >
        Rsync: <a tal:content="context/rsync_base_url"
                  tal:attributes="href context/rsync_base_url">
                  rsync://url/</a>
      </li>
    </ul>

    <div id="last-probe" tal:define="probe context/last_probe_record">
      <h2>Last probe</h2>

      <tal:no-last-probe condition="not: probe">
        <p tal:condition="context/isOfficial">
          This mirror has never been verified.
        </p>

        <p tal:condition="not: context/isOfficial">
          This mirror is an unofficial 
          <span tal:replace="context/distribution/title">Ubuntu</span> mirror,
          and will not be verified.
        </p>
      </tal:no-last-probe>

      <tal:has-last-probe condition="probe">
        <p>This mirror was last verified
          <span
            tal:attributes="title probe/date_created/fmt:datetime"
            tal:content="probe/date_created/fmt:approximatedate" />.

          <tal:is-owner condition="context/required:launchpad.Edit">
            You can see the 
            <a tal:attributes="href probe/log_file/http_url">log file</a> of the
            probe.
          </tal:is-owner>
        </p>
      </tal:has-last-probe>
    </div>

    <tal:has-last-probe condition="context/last_probe_record">
      <tal:archive-mirror condition="context/content/enumvalue:ARCHIVE"
        define="arch_releases view/getSummarizedMirroredArchReleases;
                source_releases view/getSummarizedMirroredSourceReleases">
        <metal:mirror-content
          use-macro="context/@@+distributionmirror-macros/archive-mirror-content" />
      </tal:archive-mirror>

      <tal:release-mirror condition="context/content/enumvalue:RELEASE"
        define="flavours_by_releases view/getCDImageMirroredFlavoursByRelease">
        <metal:mirror-content
          use-macro="context/@@+distributionmirror-macros/release-mirror-content" />
      </tal:release-mirror>
    </tal:has-last-probe>

</div>

<div metal:fill-slot="help">
  <p>
    Archive mirrors are used to get Ubuntu updates; they are the repositories
    used by the Synaptic Package Manager.
  </p>
  <p>
    Release mirrors include the latest CD images that can be used to install
    Ubuntu on your computer or to try it without changing your computer
    at all.
  </p>
</div>

</body>
</html>

