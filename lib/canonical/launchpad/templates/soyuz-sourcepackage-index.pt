<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
  <!-- Plone style sheet -->
  <style type="text/css" media="screen">@import url(plone.css);</style>
  <!-- Soyuz style sheet -->
  <style type="text/css" media="screen">@import url(soyuz.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <h1><span tal:content="context/sourcepackage/shortdesc"/></h1>
    
    <table width="100%">
       <tr>
         <td valign="top" width="80%">
	   <fieldset>
	      <legend>
	         Source Package Information
	      </legend>
	      <p><h4>Description:  </h4> 
	      <tal:block tal:replace="context/sourcepackage/description" />
	      <br>
	      <br>
	      <p><b>Package name: </b> 
	      <tal:block tal:replace="context/sourcepackage/name" />
    
              <p><b>Maintainer:   </b> 
	      <a
	      tal:content="context/sourcepackage/maintainer/displayname" 
	      tal:attributes="href 
	      string:/soyuz/people/${context/sourcepackage/maintainer/id}"
	      />

	      <p><b>Originating Distribution:   </b> 
	      <a tal:content="context/sourcepackage/distro/title" 
	      tal:attributes="href string:../../../../${context/sourcepackage/distro/name}"/>

	      <p><b>Project:   </b> 
                <tal:dummy tal:define="product context/sourcepackage/product">

	        <tal:dummy tal:condition="product">
	         <tal:dummy tal:condition="product/project">
	           <a tal:attributes="href string:/doap/projects/${product/project/name}" 
	                tal:content="product/project/title" />
	         </tal:dummy>
		</tal:dummy>

		<tal:dummy tal:condition="not:product">
	         No Project for this Package Available
	        </tal:dummy>
	        </tal:dummy>

	      <p><b>Product:</b> 
                <tal:dummy tal:define="product context/sourcepackage/product">

	        <tal:dummy tal:condition="product">
	         <a tal:attributes="href string:/doap/projects/${product/project/name}/${product/name}" 
	            tal:content="product/title" />
	        </tal:dummy>
  	        <tal:dummy tal:condition="not:product">
	         No Product for this Package Available
	        </tal:dummy>

	        </tal:dummy>

	   </fieldset>

	   <fieldset>
	      <legend>
	         Available Versions
	      </legend>
	      
	      <p><b>Proposed:</b>
	      <i class="dummy">Not in dbschema anymore. Why?</i>
<!-- 	      <tal:dummy tal:define="proposed context/proposed" tal:condition="proposed"> -->
<!-- 	         <a tal:content="proposed/version" -->
<!-- 		 tal:attributes="href proposed/version" /> -->
<!-- 	      </tal:dummy> -->

<!-- 	      <tal:dummy tal:define="proposed context/proposed" tal:condition="not:proposed"> -->
<!-- 	         No Proposed Release Available -->
<!-- 	      </tal:dummy> -->

	      <p><b>Current:</b><br>
	      <tal:dummy tal:condition="context/currentversions">
	      <tal:block tal:repeat="current context/currentversions">
	         <a tal:content="current/currentversion" 
		 tal:attributes="href current/currentversion" />
		 <tal:block tal:repeat="currentbuild current/currentbuilds">
		       [<a tal:content="currentbuild"
	                   tal:attributes="href string:${current/currentversion}/${currentbuild}" />]
		  </tal:block>
		  <br>
	     </tal:block>
	     </tal:dummy>
	     <tal:dummy tal:condition="not:context/currentversions">
	        No Current Releases Available
	     </tal:dummy>
	  </fieldset>

	  <fieldset>
	    <legend>Source Files (Librarian/Lucille)</legend>
	      <div class="dummy">

	      <ul tal:define="name context/sourcepackage/name"
		  tal:condition="context/currentversions"
		  tal:repeat="current context/currentversions"> 

	      <li><a tal:content="string:${name}_${current/currentversion}.dsc"
	             href="">DSC</a></li>
	      <li><a tal:content="string:${name}_${current/currentversion}_orig.tar.gz"
	             href="">TGZ</a></li>
	      <li><a tal:content="string:${name}_${current/currentversion}.diff.gz"
	             href="">DIFF</a></li>
	      </ul>
	      
	      <ul tal:condition="not:context/currentversions">
	      <li>No Source Files Available</li>
	      </ul>
	      </div>
	  </fieldset>

          <fieldset>
          <legend>Last Packages</legend>
          <ul>
	    <li tal:condition="context/lastversions"
	        tal:repeat="lastversion context/lastversions">
              <a tal:content="lastversion/version" tal:attributes="href lastversion/version">0.0.0-0</a>
            </li>
	    <li tal:condition="not:context/lastversions">
	       No Packages Available</li>
           </ul>
          </fieldset>


       </td>
       <td valign="top">


          <fieldset>
	     <legend>Bug Count</legend>
	     <div>
	        <table>
		<tr><td>All bugs</td>
		    <td>
		      <a tal:content="python:context.bugsCounter[0]" >
			 N
		      </a>
		    </td>
		</tr>
		<tr><td>Release Critical</td>
		    <td tal:content="python:context.bugsCounter[1]">N</td>
                </tr>	
		<tr><td>Important and Normal</td>
		    <td tal:content="python:context.bugsCounter[2]">N</td>
		</tr>
		<tr><td>Minor and Wishlist</td>
		    <td tal:content="python:context.bugsCounter[3]">N</td>
		</tr>
		<tr><td>Fixed and Pending</td>
		    <td tal:content="python:context.bugsCounter[4]">N</td>
		</tr>
        <tr><td colspan="2" align="center"><a tal:attributes="href
	                 string:/malone/package/${context/sourcepackage/name}">
                View Bug List
                 </a>
            </td>
        </tr>
		</table>
	     </div>
	  </fieldset>    

          <fieldset>
          <legend>Other Links </legend> 
          <div>
           <ul>
            <li class="dummy"><a href="+buildlog">Build Log Summaries</a></li>
           </ul>
          </div>
          </fieldset>

	  <div tal:replace="structure view/translationPortlet" />


     <fieldset>
     <legend>Package Tracking System</legend>
     <div class="dummy">
     <table>
     <tr><td>
        <table>
          <tr><th>Subscribers Count</th><td>(1)</td></tr>
        </table>
     </td></tr>    
     <tr><td>
     <form name="subscribe" action="" method="POST">
        <div class="field">
        <label>Action</label>
        <div class="formHelp">
	    Select an Action.
        </div>
	<select class="listing" name="operation">
	 <option value="subscribe">Subscribe</option>
	 <option value="unsubscribe">Unsubscribe</option>
	 <option value="advanced">Advanced mode</option>
	</select>
	</div>

        <div class="field">
        <label>Email</label>
        <div class="formHelp">
	    Enter an Email.
        </div>
          <input class="listing" type="text" name="email" size="25"
	  tal:attributes="value request/email|nothing"/>
	</div>

	<div class="formControl">
          <input class="listing" type="submit" name="submit" value="Submit"> 
	</div>

     </form>

     </td></tr>
     </table>
     </div>
     </fieldset>

   </td></tr>
</table>
</div>
</body>
</html>
 
