<tal:root
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:metal="http://xml.zope.org/namespaces/metal"
   xmlns:i18n="http://xml.zope.org/namespaces/i18n"
   omit-tag="">

  <div id="portlet-associations">
    <h2>Upstream connections</h2>

    <div class="portletBody portletContent"
         tal:define="series context/productseries">
      <tal:has_series condition="series">
        <div id="upstreams" class="two-column-list">
          <dl>
            <dt>
              <a tal:replace="structure series/product/fmt:link" /> project
            </dt>

            <tal:has_pg define="project series/product/project"
                        condition="project">
              <dd title="Project group">
                Project Group:
                <a tal:replace="structure project/fmt:link" />
              </dd>
            </tal:has_pg>

            <dd title="Bug supervisor"
                tal:define="bool series/product/bug_supervisor">
              Bug supervisor:
              <metal:yes-no
                 use-macro="context/@@+base-layout-macros/yes-no" />
            </dd>

            <dd title="Bug tracker"
                tal:define="bool view/has_bugtracker">
              Bug tracker:
              <metal:yes-no
                 use-macro="context/@@+base-layout-macros/yes-no" />
            </dd>
          </dl>
          <dl>
            <dt>
              <a tal:replace="structure series/fmt:link" />
            </dt>
            <dd title="Series branch"
                tal:define="bool series/branch">
              Branch:
              <metal:yes-no
                 use-macro="context/@@+base-layout-macros/yes-no" />
            </dd>
          </dl>

        </div>

        <ul class="horizontal">
          <li>
            <a
               tal:attributes="href series/product/menu:overview/packages/fmt:url"
               >Show upstream links</a>
          </li>
        </ul>
      </tal:has_series>

      <tal:has_no_series condition="not: series">
        <div id="no-upstreams" tal:condition="view/product_suggestions">
          <p>
            Launchpad doesn&#8217;t know which project and series this
            package belongs to. Links from distribution packages to
            upstream project let distribution and upstream
            maintainers share bugs, patches, and translations
            efficiently.
          </p>

          <tal:message
             define="count python:len(view.product_suggestions);
                     singular string:Is the following project the upstream for this source package?;
                     plural string:Is one of these projects the upstream for this source package?"
             >
            <b>
            <metal:message use-macro="context/@@+base-layout-macros/plural-message"/>
            </b>
          </tal:message>

          <div metal:use-macro="context/@@launchpad_form/form">
            <div class="actions" metal:fill-slot="buttons">
              <input tal:replace="structure view/link/render"/>
              &nbsp;or&nbsp;
              <a tal:replace="structure
                              context/menu:overview/set_upstream/fmt:link" />
            </div>
          </div>
        </div>
        <div id="no-upstreams" tal:condition="not: view/product_suggestions">
          <p>
          There are no projects registered in Launchpad that are a potential
          match for this source package.  Can you help us find one?
          </p>
          <a tal:replace="structure
                          context/menu:overview/set_upstream/fmt:link" />
        </div>
      </tal:has_no_series>
    </div>
  </div>
</tal:root>
