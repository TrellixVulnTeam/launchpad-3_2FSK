= Requesting Ubuntu Server Edition CDs =

We don't have a separate hostname for people to go to when they want to
request server CDs.  Instead, they can do that at shipit.ubuntu.com by
following a separate link from the front page.

    >>> browser = setupBrowser(auth='Basic marilize@hbd.com:test')
    >>> browser.open('http://shipit.ubuntu.dev/')
    >>> print extract_text(find_tag_by_id(browser.contents, 'chooseLinks'))
    Request a CD of Ubuntu Desktop Edition
    Request a CD of Ubuntu Server Edition

    >>> browser.getLink('Request a CD of Ubuntu Server Edition').click()

Requesting server CDs is as easy as requesting any other flavour, but
in order to do that we ask Marilize to answer a small survey.

    >>> browser.title
    'ShipIt Survey'
    >>> print extract_text(
    ...     find_tags_by_class(browser.contents, 'documentDescription')[0])
    Please tell us more about your interest in Ubuntu Server Edition so that
    we can better meet your needs...

    >>> browser.getControl(name="field.environment").displayValue = ['Home']
    >>> browser.getControl(name="field.evaluated_uses").displayValue = [
    ...     'Backups', 'CRM']
    >>> browser.getControl('Continue to Complete CD Request').click()

Once Marilize answers the survey she is sent to the actual page where
she can request server CDs.

    >>> browser.url
    'http://shipit.ubuntu.dev/myrequest-server'
    >>> print extract_text(
    ...     find_tag_by_id(browser.contents, 'standard-options'))
    2 Ubuntu Server Edition CDs...
    5 Ubuntu Server Edition CDs...

    >>> browser.getControl(name='ordertype').value = ['16']
    >>> browser.getControl(name='field.recipientdisplayname').value = 'Foo'
    >>> browser.getControl(name='field.organization').value = 'Baz'
    >>> browser.getControl(name='field.addressline1').value = 'Street'
    >>> browser.getControl(name='field.city').value = 'City'
    >>> browser.getControl(name='field.province').value = 'Province'
    >>> browser.getControl(name='field.postcode').value = '123456'
    >>> browser.getControl(name='field.country').value = ['226']
    >>> browser.getControl(name='field.phone').value = '43242442'
    >>> browser.getControl('Submit Request').click()
    >>> browser.url
    'http://shipit.ubuntu.dev/myrequest-server'

    >>> for message in get_feedback_messages(browser.contents):
    ...     print message
    Request accepted. Please note that requests usually take from 4 to 6 weeks
    to deliver, depending on the country of shipping.

And after that is done we can even add some Ubuntu CDs to our request.

    >>> browser.open('http://shipit.ubuntu.dev/myrequest')
    >>> browser.getControl(name='ordertype').value = ['3']
    >>> browser.getControl('Request More CDs').click()
    >>> browser.url
    'http://shipit.ubuntu.dev/myrequest'
    >>> for message in get_feedback_messages(browser.contents):
    ...     print message
    Request changed successfully.

If we want to request more CDs (to a conference or something), we have
to follow the "special request" link in that page.

    >>> browser.open('http://shipit.ubuntu.dev/myrequest-server')
    >>> browser.getLink('special request').click()
    >>> browser.url
    'http://shipit.ubuntu.dev/specialrequest-server'

    >>> browser.getControl(name='field.ubuntu_quantityx86').value = '90'
    >>> browser.getControl(name='field.reason').value = 'I want!'
    >>> browser.getControl('Change Request').click()
    >>> for message in get_feedback_messages(browser.contents):
    ...     print message
    Request changed successfully.
    ...

Now the request is considered special, so when we come back to shipit
we'll be sent to the specialrequest-server page.

    >>> browser.open('http://shipit.ubuntu.dev/')
    >>> browser.getLink('Request a CD of Ubuntu Server Edition').click()
    >>> browser.url
    'http://shipit.ubuntu.dev/specialrequest-server'
