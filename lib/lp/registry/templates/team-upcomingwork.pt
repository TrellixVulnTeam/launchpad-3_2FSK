<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad">
<body>

<div metal:fill-slot="main">
  <h2>Upcoming work for <span tal:replace="structure context/displayname"
      /></h2>

  <p>This team has <span tal:replace="view/upcoming_bp_count" /> upcoming
    Blueprints with a total of <span tal:replace="view/upcoming_wi_count" /> work items.

  <div tal:repeat="pair view/work_item_containers">
  <div tal:define="date python: pair[0]; containers python: pair[1]">
    <h3 tal:content="date/fmt:date" />
    <table class="listing">
      <thead>
      <tr>
	<!-- XXX: Do something else to keep the columns equally wide between tables. -->
        <th width="15%">Blueprint</th>
        <th width="10%">Target</th>
        <th width="5%">Priority</th>
        <th width="10%">Assignee</th>
        <th width="10%">Progress</th>
      </tr>
      </thead>
      <div tal:repeat="container containers">
        <tbody>
        <tr>
          <td tal:content="structure container/html_link" />
          <td tal:content="structure container/target_link" />
          <td tal:content="container/priority_title" />
          <td tal:content="structure container/assignee_link" />
          <td tal:content="structure container/progress_bar" />
        </tr>
        <tr tal:repeat="workitem container/items">
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="workitem/title" /></td>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="structure workitem/target/fmt:link" /></td>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="workitem/priority/name" /></td>
          <td><a tal:replace="structure workitem/assignee/fmt:link" />
          </td>
	  <td><span tal:replace="workitem/status/name" /></td>
        </tr>
        </tbody>
      </div>
    </table>
  </div>
  </div>
</div>

</body>
</html>
