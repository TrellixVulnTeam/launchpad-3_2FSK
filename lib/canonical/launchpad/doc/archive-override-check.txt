Testing archive-override-check behaviour:
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

XXX cprov 20060714: we need better populate archive/"publishing
history" in the sampledata to test those tools properly.

Defining path to the script:

  >>> import os
  >>> import subprocess
  >>> import sys
  >>> from canonical.config import config

  >>> script = os.path.join(config.root, "scripts", "ftpmaster-tools",
  ...                       "archive-override-check.py")

  >>> process = subprocess.Popen([sys.executable, script, "-vv",
  ...                             "-d", "ubuntu",
  ...                             "-s", "warty"],
  ...                            stdout=subprocess.PIPE,
  ...                            stderr=subprocess.PIPE,)
  >>> stdout, stderr = process.communicate()
  >>> process.returncode
  0
  >>> print stderr
  DEBUG   Acquiring lock
  DEBUG   Initialising connection.
  DEBUG   Considering: ubuntu/warty/RELEASE/CURRENT.
  DEBUG   4 published sources
  DEBUG   Rolling back any remaining transactions.
  DEBUG   Releasing lock
  <BLANKLINE>


Since it's data is sane, empty STDOUT is okay.

  >>> print stdout
