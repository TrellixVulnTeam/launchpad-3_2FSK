= Linking a CVE to a Bug With a Modified Target =

We shouldn't get an OOPS when linking a CVE report to a bug that's been
modified.

    >>> import transaction
    >>> user_browser.open(
    ...     'http://bugs.launchpad.dev/firefox/+bug/4/+linkcve')
    >>> admin_browser.open(
    ...     'http://bugs.launchpad.dev/firefox/+bug/4/')
    >>> admin_browser.getControl('Project').value = "jokosher"
    >>> admin_browser.getControl(name='firefox.actions.save').click()

    >>> user_browser.getControl('CVE Sequence Number').value = '2005-2737'
    >>> user_browser.getControl('Continue').click()

    >>> print user_browser.contents
    >>> for tag in find_tags_by_class(user_browser.contents, 'cve'):
    ...     print extract_text(tag)
    2005-2737

Similarly, unlinking the CVE from the bug shouldn't cause an OOPS when
the bugtask has been retargeted.

    >>> user_browser.getLink('Remove CVE link').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/jokosher/+bug/4/+unlinkcve'

    >>> admin_browser.getControl('Project').value = "firefox"
    >>> admin_browser.getControl(name='jokosher.actions.save').click()

    >>> user_browser.getControl('CVE Sequence Number').value = '2005-2737'
    >>> user_browser.getControl('Continue').click()

There should now be no CVE links on the bugtask page:

    >>> len(find_tags_by_class(user_browser.contents, 'cve'))
    0

    >>> transaction.abort()
