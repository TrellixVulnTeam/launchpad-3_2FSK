<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">

<div class="portlet" id="contact-details">

  <h2 tal:condition="context/is_team">Contact details</h2>

  <div class="portletContent portletBody">

    <table>
      <tbody>

        <tr>

          <th>Email:</th>

          <td
            tal:attributes="title view/visible_email_address_description">
            <tal:not_logged_in
              condition="view/email_address_visibility/is_login_required">
              <a href="+login">Log in</a> for email information.
            </tal:not_logged_in>

            <tal:no_preferredemail
              condition="view/email_address_visibility/are_none_available">
              <tal:is-team condition="context/isTeam">
                No contact address <br /><small>(Launchpad notifications are
                sent to all team members)</small>
              </tal:is-team>
              <tal:not-team condition="not:context/isTeam">
                <tal:comment replace="nothing">
                BarryWarsaw 06-Nov-2008 this code does not appear to be
                touched in our current test suite.  Is it ever possible in
                production?  Because I don't know, I'm not removing it, but I
                am making it DTRT if it ever gets hit.
                </tal:comment>
                No public address provided.
                (<a href="+contactuser"
                    tal:attributes="title view/contactuser_link_title"
                    >Contact this user</a>)
              </tal:not-team>
            </tal:no_preferredemail>

            <tal:cant-view-hidden-emails
              condition="view/email_address_visibility/are_hidden">
              No public address provided.
              (<a href="+contactuser"
                  tal:attributes="title view/contactuser_link_title"
                  >Contact this user</a>)
            </tal:cant-view-hidden-emails>

            <tal:emails
              repeat="email view/visible_email_addresses">
              <span style="white-space: nowrap">
                <img src="/@@/private" alt=""
                  tal:condition="view/email_address_visibility/are_allowed"/>
                <img src="/@@/mail" alt=""
                  tal:condition="view/email_address_visibility/are_public"/>
                <tal:email replace="email">foo2@bar.com</tal:email>
                <tal:contact condition="repeat/email/start">
                  (<a href="+contactuser"
                      tal:attributes="title view/contactuser_link_title"
                      >Contact this user</a>)
                </tal:contact>
                <br tal:omit-tag="repeat/email/end" />
              </span>
            </tal:emails>
          </td>
        </tr>

        <tr tal:condition="view/team_has_mailing_list">
            <th>Mailing&nbsp;list:</th>
            <td id="mailing-list-posting-address">
                <tal:email replace="context/mailing_list/address"
                >team@example.com</tal:email></td>
        </tr>

        <tr tal:condition="context/icon">
          <th>Icon:</th>
          <td><tal:icon replace="structure context/image:icon" /></td>
        </tr>
        <tr tal:condition="context/allwikis">
          <th>Wiki:</th>
          <td>
            <span tal:repeat="wiki context/allwikis">
              <a tal:content="wiki/url"
                 tal:attributes="href wiki/url"
               >WikiName</a><tal:block condition="not: repeat/wiki/end">,
               </tal:block>
            </span>
          </td>
        </tr>
        <tr tal:repeat="ircnick context/ircnicknames">
          <th>IRC:</th>
          <td><code style="font-size: 120%"
                    tal:content="ircnick/nickname"/>
              on network <code style="font-size: 120%"
                               tal:content="ircnick/network" />
          </td>
        </tr>
        <tr tal:condition="context/jabberids">
          <th>Jabber:</th>
          <td>
            <tal:block repeat="jabberid view/htmlJabberIDs">
              <span tal:replace="structure jabberid"
                /><span tal:condition="not: repeat/jabberid/end">,</span>
            </tal:block>
          </td>
        </tr>
        <tr tal:condition="context/gpgkeys">
          <th>OpenPGP keys:</th>
          <td>
            <tal:block repeat="key context/gpgkeys">
              <a tal:attributes="href key/keyserverURL">
                <span tal:replace="key/keyid"
                  /></a><span tal:condition="not: repeat/key/end">,</span>
            </tal:block>
          </td>
        </tr>

        <tal:keys repeat="sshkey context/sshkeys">
          <tr>
            <th tal:condition="repeat/sshkey/start">
              SSH Keys:</th>
            <th tal:condition="not: repeat/sshkey/start">
            </th>
            <td tal:content="sshkey/comment" />
          </tr>
          <tr tal:condition="repeat/sshkey/end">
            <td>&nbsp;</td>
            <td><small><a href="+sshkeys">(view key text)</a></small></td>
          </tr>
        </tal:keys>

        <tal:can-view-openid-login
          condition="context/required:launchpad.Edit">
          <tr tal:condition="context/is_openid_enabled">
            <th>OpenID login:</th>
            <td title="This URL is not disclosed to others.">
              <img src="/@@/private" alt="" />
              <tal:openid-login content="view/openid_identity_url" />
              <span class="help"
                  ><a href="https://help.launchpad.net/OpenID"
                     >(What&rsquo;s&nbsp;this?)</a></span>
            </td>
          </tr>
        </tal:can-view-openid-login>

      </tbody>
    </table>

  </div>

</div>

</tal:root>
