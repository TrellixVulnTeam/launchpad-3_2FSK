<p class="portalMessage" tal:define="message view/performQueueAction"
   tal:condition="message" tal:content="structure message" />

<div class="queue_list" tal:condition="not: view/setupQueueList">

  <tal:batch define="batch view/batchnav/currentBatch">

     <table>
       <tr>
         <th><label>Queue state and name:</label></th>
         <td>
          <form name="queue_items_state" action="" method="GET">

          <select title="Queue state" name="queue_state" size="1">

            <option tal:attributes="selected python: view.state == 'new'"
                    value="new">New</option>

            <option tal:attributes="selected python: view.state == 'unapproved'"
                    value="unapproved">Unapproved</option>

            <option tal:attributes="selected python: view.state == 'accepted'"
                    value="accepted">Accepted</option>

            <option tal:attributes="selected python: view.state == 'rejected'"
                    value="rejected">Rejected</option>

            <option tal:attributes="selected python: view.state == 'done'"
                    value="done">Done</option>

          </select>

	  <input title="Package Name" size="20" type="text" name="queue_text"
                 tal:attributes="value view/text"
           />

          <input title="Search" type="submit" value="Search" />

          </form>
         </td>
       </tr>
     </table>

     <tal:navigation
          tal:condition="batch"
          replace="structure view/batchnav/@@+navigation-links" />

     <form name="queue_items_action" action="" method="POST">
     <table class="listing" tal:condition="batch">
       <tbody>
         <tal:batch repeat="queue batch">
           <tr>
              <td class="icon left">
                 <input type="checkbox" name="QUEUE_ID"
                        tal:attributes="value queue/id"/>
              </td>
  	      <td> <span tal:replace="queue/displayname"/>
                 <img tal:condition="queue/isSource"
                      alt="[Source]" src="/@@/package-source" title="Source"/>
                 <img tal:condition="queue/isBuild"
                      alt="[Build]" src="/@@/package-binary" title="Binary"/>
                 <img tal:condition="queue/isInstaller"
                      alt="[Installer]" src="/@@/ubuntu.gif"
                      title="Installer"/>
                 <img tal:condition="queue/isTranslation"
                      alt="[Translation]" src="/@@/translations"
                      title="Translation"/>
                 <img tal:condition="queue/isUpgrader"
                      alt="[Build]" src="/@@/topic_icon.gif"
                      title="Upgrader"/>
              </td>
           </tr>
           <tr class="secondary discreet">
              <td></td>
              <td>Version: <span tal:replace="queue/sourceversion" />
                  Age: <span tal:replace="queue/age" /> </td>
           </tr>
         </tal:batch>
       </tbody>
       <tfoot>
         <tr>
           <td colspan="2">
               <select title="Action" name="queue_action" size="1">
                 <option value="">--</option>
                 <option value="accept">Accept</option>
                 <option value="reject">Reject</option>
               </select>
               <input title="Update" type="submit" value="Update" />
           </td>
         </tr>
       </tfoot>
     </table>
     </form>

     <div tal:condition="not: batch">
       <img src="/@@/alert" />
       No <span tal:replace="view/state" /> queue items for
       <span tal:replace="context/title" />.
     </div>

     <tal:navigation
          tal:condition="batch"
          replace="structure view/batchnav/@@+navigation-links" />

  </tal:batch>
</div>
