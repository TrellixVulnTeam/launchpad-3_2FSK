<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad">

  <body onload="document.forms[0].submit();">
    <div class="top-portlet" metal:fill-slot="main">
      <h1>OpenID transaction in progress</h1>

      <form tal:attributes="action view/params/starting_url"
            id="discharge-form"
            method="post"
            enctype="application/x-www-form-urlencoded"
            accept-charset="UTF-8">
        <input type="hidden"
               tal:condition="view/params/discharge_macaroon_action"
               tal:attributes="name view/params/discharge_macaroon_action"
               value="1" />
        <input type="hidden"
               tal:attributes="name view/params/discharge_macaroon_field;
                               value view/discharge_macaroon_raw" />
      </form>
    </div>

    <script>
      var elements = document.forms[0].elements;
      for (var i = 0; i < elements.length; i++) {
        elements[i].style.display = "none";
      }
    </script>
  </body>

</html>
