<div
  tal:omit-tag=""
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  tal:define="
    bug context/bug|context;
    from_dupes_subscriptions view/sorted_subscriptions_from_dupes;
  ">
  <div
    tal:condition="from_dupes_subscriptions"
    id="subscribers-from-duplicates"
    class="section"
  >
    <h2>From duplicates</h2>
    <div
      tal:repeat="subscription from_dupes_subscriptions"
      tal:attributes="
        class subscription/css_name;
        id string:dupe-${subscription/css_name};
      "
    >

            <a
               tal:condition="subscription/person/name|nothing"
               tal:attributes="
                 href subscription/person/fmt:url;
                 title subscription/display_duplicate_subscribed_by;
                 name subscription/person/fmt:displayname
               "
            >
              <tal:block replace="structure subscription/person/fmt:icon" />
              <tal:block replace="subscription/person/fmt:displayname/fmt:shorten/20" />
            </a>

            <a tal:condition="python: subscription.canBeUnsubscribedByUser(view.user)"
               href="+subscribe"
               tal:attributes="
                 title string:Unsubscribe ${subscription/person/fmt:displayname};
                 id string:unsubscribe-${subscription/css_name};
                 class python: view.getSubscriptionClassForUser(subscription.person)
               "
            >
              <img class="unsub-icon" src="/@@/remove"
                tal:attributes="id string:unsubscribe-icon-${subscription/css_name}" />
            </a>
    </div>
  </div>
</div>
