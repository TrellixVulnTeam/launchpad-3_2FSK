= Joining a restricted team =

  # Make 'myemail' a restricted team first.
  >>> from canonical.launchpad.database import PersonSet
  >>> from canonical.lp.dbschema import TeamSubscriptionPolicy
  >>> PersonSet().getByName('myemail').subscriptionpolicy = (
  ...     TeamSubscriptionPolicy.RESTRICTED)
  >>> from canonical.database.sqlbase import flush_database_updates
  >>> flush_database_updates()

'salgado' tries to join 'myemail', but now it's a RESTRICTED team, and
because of that, nobody can ask to join.

  >>> print http(r"""
  ... GET /~myemail/+join HTTP/1.1
  ... Authorization: Basic Z3VpbGhlcm1lLnNhbGdhZG9AY2Fub25pY2FsLmNvbTp6ZWNh
  ... """)
  HTTP/1.1 200 Ok
  Content-Length: ...
  Content-Type: text/html;charset=utf-8
  ...
  ...Only a team administrator can add new members...
  ...


  >>> from canonical.launchpad.database import Person
  >>> salgado = Person.byName('salgado')
  >>> team = Person.byName('myemail')
  >>> salgado.hasMembershipEntryFor(team)
  False
