It should be possible to register yourself to attend the sprint:

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')

  >>> browser.open('http://launchpad.dev/sprints/ubz/')

  >>> browser.getLink('Register Yourself').click()
  >>> browser.url
  'http://launchpad.dev/sprints/ubz/+attend'

  >>> browser.title
  'Register your attendance at Ubuntu Below Zero'

Invalid dates, for instance entering a starting date after the ending date,
are reported as errors to the users. (See also the tests in
lib/canonical/launchpad/doc/sprintattendance-pages.txt)

  >>> browser.getControl('Starting At').value = '2006-01-10 10:30:00'
  >>> browser.getControl('Finishing At').value = '2005-02-04 20:11:00'
  >>> browser.getControl('Register').click()

  >>> for tag in find_tags_by_class(browser.contents, 'message'):
  ...     print tag.renderContents()
  There is 1 error.
  <BLANKLINE>
  The end time must be after the start time.

With the dates fixed, Sample person can attend the sprint.

  >>> browser.getControl('Starting At').value = '2006-01-10 10:30:00'
  >>> browser.getControl('Finishing At').value = '2006-02-04 20:11:00'
  >>> browser.getControl('Register').click()
  >>> browser.url
  'http://launchpad.dev/sprints/ubz'

Now, Sample Person should be listed as an attendee.

  >>> from BeautifulSoup import BeautifulSoup
  >>> def print_attendees(sprint_page):
  ...     """Print the attendees listed in the attendees portlet."""
  ...     soup = BeautifulSoup(sprint_page)
  ...     attendees_portlet_headers = soup.fetchText('Attendees')
  ...     assert len(attendees_portlet_headers) == 1
  ...     attendees_portlet = attendees_portlet_headers[0].parent.parent
  ...     for li in attendees_portlet.fetch('ul')[0].fetch('li'):
  ...         print li.a.string.encode('ascii', 'xmlcharrefreplace')

  >>> print_attendees(browser.contents)
  Sample Person

Also, it should be possible to register someone else. Let's register Carlos.

  >>> browser.getLink('Register Someone').click()
  >>> browser.url
  'http://launchpad.dev/sprints/ubz/+register'

  >>> browser.getControl('Attendee').value = 'carlos@canonical.com'
  >>> browser.getControl('Starting At').value = '2006-01-10 18:30:00'
  >>> browser.getControl('Finishing At').value = '2006-02-12 15:11:00'
  >>> browser.getControl('Register').click()

  >>> browser.url
  'http://launchpad.dev/sprints/ubz'

And lets ensure Carlos is now listed:

  >>> print_attendees(browser.contents)
  Carlos Perell&#243; Mar&#237;n
  Sample Person

