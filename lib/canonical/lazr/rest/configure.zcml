<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    i18n_domain="lazr">

    <class class="canonical.lazr.rest.CollectionResource">
        <allow interface='canonical.lazr.interfaces.ICollectionResource' />
    </class>

    <class class="canonical.lazr.rest.EntryResource">
        <allow interface='canonical.lazr.interfaces.IEntryResource' />
        <allow interface='canonical.lazr.interfaces.IJSONPublishable' />
    </class>

    <!-- Generic adapter for scoped collection -->
    <adapter
        for="* *"
        provides="canonical.lazr.interfaces.IScopedCollection"
        factory="canonical.lazr.rest.ScopedCollection"
        />

    <adapter
        for="canonical.lazr.enum.BaseItem"
        provides="canonical.lazr.interfaces.IJSONPublishable"
        factory="canonical.lazr.rest.JSONItem"
        />

    <!-- IFieldDeserializer adapters -->
    <adapter
        for="zope.schema.interfaces.IField
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.SimpleFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IDatetime
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.DateTimeFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.Int
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.IntFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IChoice
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.VocabularyLookupFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IChoice
             canonical.lazr.interfaces.rest.WebServiceLayer
             canonical.lazr.enum.IEnumeratedType"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.SimpleVocabularyLookupFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IChoice
             canonical.lazr.interfaces.rest.WebServiceLayer
             canonical.lazr.interfaces.timezone.ITimezoneNameVocabulary"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.TimezoneFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IChoice
             canonical.lazr.interfaces.rest.WebServiceLayer
             canonical.launchpad.webapp.vocabulary.SQLObjectVocabularyBase"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.ObjectLookupFieldDeserializer"
        />

    <adapter
        for="zope.schema.interfaces.IObject
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.ObjectLookupFieldDeserializer"
        />

    <adapter
        for="canonical.lazr.interfaces.ICollectionField
             canonical.lazr.interfaces.rest.WebServiceLayer"
        provides="canonical.lazr.interfaces.IFieldDeserializer"
        factory="canonical.lazr.rest.SimpleFieldDeserializer"
        />

</configure>
