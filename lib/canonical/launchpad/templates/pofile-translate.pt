<tal:block replace="view/processTranslations" /><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

  <body>

<metal:leftportlets fill-slot="portlets_one">
      <div tal:replace="structure context/@@+portlet-about" />
      <div tal:replace="structure context/@@+portlet-details" />
      <div tal:replace="structure context/@@+portlet-quickhelp" />
      <div tal:replace="structure context/@@+portlet-stats" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
      <div tal:replace="structure context/@@+portlet-translators" />
      <div tal:replace="structure context/@@+portlet-contributors" />
</metal:rightportlets>


    <div metal:fill-slot="main">

      <tal:block condition="nothing">
      <metal:suggestions define-macro="translation-suggestions">
        <tal:block condition="submissions">
          <tr class="secondary">
            <th colspan="2" style="border: inherit;"
            >
              <label><metal:title define-slot="suggestion-title" />:</label>
            </th>
            <td class="icon left right" />
            <td>

          <tal:block condition="not:messageSet/isMultiline">
            <tal:submission repeat="submission submissions">
              <div
                tal:define="submissionlang submission/pomsgset/pofile/language"
                tal:attributes="
                  lang submissionlang/dashedcode;
                  dir submissionlang/abbreviated_text_dir
                "
                tal:content="submission/potranslation/translation"
              >suggestion</div>
              <div class="discreet">
                &mdash;
                <span tal:replace="submission/person/browsername">Foo Bar</span>
              </div>
            </tal:submission>
          </tal:block>
          <tal:block
            condition="messageSet/isMultiline"
            define="submission python:submissions[0]">
            <pre
              tal:define="submissionlang submission/pomsgset/pofile/language"
              tal:attributes="
                lang submissionlang/dashedcode;
                dir submissionlang/abbreviated_text_dir
              "
              tal:content="submission/potranslation/translation"
            >suggestion</pre>
            <div class="discreet">
              &mdash;
              <span tal:replace="submission/person/browsername">Foo Bar</span>
              <tal:block
                define="submissions_remaining python:len(submissions)-1"
                condition="submissions_remaining"
              >
                (<span tal:replace="submissions_remaining">3</span> more)
              </tal:block>
            </div>
          </tal:block>
          </td>
          </tr>
        </tal:block>
      </metal:suggestions>
      </tal:block>

      <div>You are translating</div>
      <h1>
        <tal:productseries
          condition="exists:context/potemplate/productseries/displayname"
          tal:replace="context/potemplate/productseries/displayname"
        />
        <tal:sourcepackage
          condition="exists:context/potemplate/sourcepackagename"
          replace="context/potemplate/sourcepackagename"
        />
        into
        <tal:language replace="context/language/englishname" />
      </h1>
      <div class="discreet">
        Template: <tal:template replace="context/title" />
      </div>

      <p class="portalMessage" tal:condition="not: view/is_editor">
        You are not an official translator for this file. You can still make
        suggestions, and your translations will be stored and reviewed for
        acceptance later by the designated translators.
      </p>

    <div
      tal:condition="view/lacksPluralFormInformation"
      class="portalMessage"
    >
        <p>
          Rosetta can&#8217;t handle the plural items in this file, because it doesn&#8217;t yet know how plural forms work for
          <span tal:replace="context/language/englishname">language</span>.
        </p>
        <p>
          To fix this, please e-mail the <a
          href="mailto:rosetta-users@lists.ubuntu.com">Rosetta users
          mailing list</a> with this information, preferably in the
          format described in the
          <a href="https://wiki.ubuntu.com/RosettaFAQ">Rosetta FAQ</a>.
        </p>
        <p>
          This only needs to be done once per language.
          Thanks for helping Rosetta.
        </p>

    </div>


    <tal:havepluralforms condition="not: view/lacksPluralFormInformation">

      <!-- If we have errors, say so -->
      <p class="portalMessage" tal:condition="view/errorcount">
        There are <span tal:replace="view/errorcount">4</span> errors in the
        translations you provided. Please correct them before continuing.
      </p>

    <!-- Display settings. -->

      <p><form method="post"
              style="text-align: right;"
              action="./+translate"
        >
          <input type="hidden" name="offset" value=""
                 tal:attributes="value view/offset" />
          <input type="hidden" name="count" value=""
                 tal:attributes="value view/count" />
          <label>Alt:</label>
          <tal:comment replace="nothing">
            Suggestions from this alternative language will be displayed as
            well as suggestions from the translation language. In the case
            where two languages are very similar it will often be useful to
            show the second language as a source of suggestions when
            translating into the first.
          </tal:comment>
          
          <tal:block replace="structure view/lang_selector" />

          <label>Show:</label>

          <tal:comment tal:replace="nothing">
            The 'selected' attribute value in next select means basically
            the following:

            if request.form['show'] == literalvalue:
                return 'selected'
            else:
                return None

            Where 'literalvalue' is 'all', 'untranslated' 'fuzzy' or
            'translated'.
          </tal:comment>

          <select name="show" title="Choose which items to show">
            <option value="all"
              tal:attributes="selected
              request/htmlform:show/selected/all"
              >
              all
            </option>
            <option value="untranslated"
              tal:attributes="selected
              request/htmlform:show/selected/untranslated"
              >
              untranslated
            </option>
            <option value="fuzzy"
              tal:attributes="selected
              request/htmlform:show/selected/fuzzy"
              >
              need review
            </option>
            <option value="translated"
              tal:attributes="selected
              request/htmlform:show/selected/translated"
              >
              translated
            </option>
          </select>
          <input type="submit" value="Change" />
        </form></p>

        <!-- The translation form. -->
        <form method="post"
              action="./+translate">
          <!-- the hidden elements -->
          <input type="hidden" name="count"
                 tal:attributes="value view/count" />
          <input type="hidden" name="alt"
                 tal:condition="view/second_lang_code"
                 tal:attributes="value view/second_lang_code" />
          <input type="hidden" name="offset"
                 tal:condition="not: view/atEnd"
                 tal:attributes="value view/offset" />
          <input type="hidden" name="show"
                 tal:condition="view/show"
                 tal:attributes="value view/show" />
          <p tal:repeat="alert view/alerts"
             class="error alert"
             tal:content="alert">
             Error Message
          </p>
          <table class="listing" style="margin-top: 0.5em;">
            <thead>
              <tr class="results">
                <td colspan="4">

                  <!-- Show which messages are displayed. -->
                  <div style="width: 50%; float: left;">
                    <tal:block tal:condition="view/onlyOneForm">
                      All
                      <strong tal:content="view/shown_count">23</strong>
                      items
                    </tal:block>
                    <tal:block tal:condition="not:view/onlyOneForm">
                    Items
                    <strong tal:content="view/getFirstMessageShown">5</strong>
                    &rarr;
                    <strong tal:content="view/getLastMessageShown">10</strong>
                    of
                    <strong tal:content="view/shown_count">23</strong>
                    </tal:block>
                  </div>

                  <!-- Paging doodads. -->
                  <div style="width: 50%; float: right; text-align: right;">

                    <tal:comment tal:replace="nothing">
                      Link to previous page and beginning, if this is not
                      the beginning page.
                    </tal:comment>

                    <span class="previous" tal:condition="not:view/atBeginning">
                      <a tal:attributes="href view/beginningURL">First</a>
                      &ndash;
                      <a tal:attributes="href view/previousURL">Previous
                        <span tal:replace="view/count">5</span></a>
                      <span tal:condition="not:view/atEnd">&ndash;</span>
                    </span>

                    <tal:comment tal:replace="nothing">
                      Link to next page and end, if tis is not the end page.
                    </tal:comment>

                    <span class="next" tal:condition="not:view/atEnd">
                      <a tal:attributes="href view/nextURL">Next
                        <span tal:replace="view/count">5</span></a>
                      &ndash;
                      <a tal:attributes="href view/endURL">Last</a>
                    </span>
                  </div>
                </td>
              </tr>
            </thead>
            <tbody>
              <tal:messageset repeat="messageSet view/messageSets">
                <tr>
                  <td style="text-align: right;">
                  <span tal:replace="messageSet/getSequence">1</span>.
                  <input type="hidden"
                    tal:attributes="
                    name string:set_${messageSet/id}_msgid"
                  />
                  </td>
                      <th style="border-style: dotted; border-width: 1px 0 0;">
                        <label class="language-code"
                               tal:condition="not:messageSet/isPlural">
                          English:
                        </label>
                        <label class="language-code"
                               tal:condition="messageSet/isPlural">
                          English singular:
                        </label>
                      </th>
                      <td class="icon left right">
                      </td>
                      <td tal:content="structure messageSet/getMsgID">
                        The original text.
                      </td>
                    </tr>
                    <tr class="secondary" tal:condition="messageSet/isPlural">
                      <th colspan="2">
                        <label>English plural:</label>
                      </th>
                      <td class="icon left right"></td>
                      <td tal:content="structure messageSet/getMsgIDPlural">
                        plural source
                      </td>
                    </tr>
                    <tr class="discreet secondary"
                        tal:condition="messageSet/msgidHasTab"
                    >
                        <td colspan="3" />
                        <td>
                            <img
                              alt="Note:"
                              src="/@@/info_icon.gif"
                              title="This is a note to translators"
                            />
                            <code>[tab]</code> represents a tab character.
                            Please enter it as <code>[tab]</code> in your
                            translation too.
                        </td>
                    </tr>
                    <tr
                      class="discreet secondary"
                      tal:condition="messageSet/getSourceComment"
                    >
                      <td colspan="3" />
                      <td>
                        <img
                          alt="Developer note:"
                          src="/@@/info_icon.gif"
                          title="This note was provided by the software developer."
                        />
                        <span
                          tal:content="messageSet/getSourceComment"
                          tal:omit-tag="">
                          This refers to the content type.
                        </span>
                      </td>
                    </tr>
                    <tal:block
                      tal:define="language_code context/language/code"
                      repeat="index messageSet/getTranslationRange"
                    >
                    <tr
                      class="secondary"
                    >
                      <th colspan="2">
                        <label class="language-code">
                          <span tal:replace="context/language/englishname">
                            Welsh
                          </span>:
                        </label>
                      </th>
                      <td>
                        <!-- will eventually contain copy buttons -->
                      </td>
                      <td>
                        <div tal:condition="messageSet/getError" class="error">
                          <strong>Error in Translation:</strong>
                          <span tal:replace="messageSet/getError" />
                        </div>
                          <tal:comment tal:replace="nothing">
                            XXX: Carlos Perello Marin 2005-05-05
                            This 'python:' expression should be fixed by SteveA.
                          </tal:comment>
                          <input
                            type="text"
                            tal:condition="not:messageSet/isMultiline"
                            tal:attributes="
                              name string:set_${messageSet/id}_translation_${language_code}_${index};
                              value python:messageSet.getTranslation(index);
                              tabindex view/makeTabIndex;
                              lang context/language/dashedcode;
                              dir context/language/abbreviated_text_dir;
                              " />
                          <tal:block condition="messageSet/isMultiline">
                            <tal:comment tal:replace="nothing">
                              XXX: Carlos Perello Marin 2005-05-05
                              This 'python:' expression should be fixed by SteveA.
                            </tal:comment>
                            <tal:with-content
                              condition="python:messageSet.getTranslation(index)">
                              <tal:comment tal:replace="nothing">
                                The lack of indentation for
                                tal:content is deliberate or we would add extra
                                whitespaces to the textarea, which causes us to
                                potentially corrupt translations.
                                https://bugzilla.mozilla.org/show_bug.cgi?id=299009
                              </tal:comment>
                              <textarea
                                tal:attributes="
                                  name string:set_${messageSet/id}_translation_${language_code}_${index};
                                  rows messageSet/getMaxLinesCount;
                                  tabindex view/makeTabIndex;
                                  lang context/language/dashedcode;
                                  dir context/language/abbreviated_text_dir;
                                ">
<tal:content replace="structure python:messageSet.getTranslation(index)" /></textarea>
                            </tal:with-content>
                            <tal:without-content
                              condition="python:not messageSet.getTranslation(index)">
                              <tal:comment tal:replace="nothing">
                                XXX: Carlos Perello Marin 2005-05-05
                                This 'python:' expression should be fixed by SteveA.

                                We are using an special case if we don't have
                                any content for this textarea because tal
                                expressions leave empty lines behind so we get new
                                lines added to the textarea for free and that causes
                                erroneous translations.
                              </tal:comment>
                              <textarea
                                tal:attributes="
                                  name string:set_${messageSet/id}_translation_${language_code}_${index};
                                  rows messageSet/getMaxLinesCount;
                                  tabindex view/makeTabIndex;
                                  lang context/language/dashedcode;
                                  dir context/language/abbreviated_text_dir;
                                "></textarea>
                            </tal:without-content>
                          </tal:block>
                        </td>
                      </tr>
                      <tr class="secondary">
                        <td colspan="3" />
                        <td>
                          <div>
                            <label class="fuzzy-checkbox">
                              <input
                                type="checkbox"
                                value="fuzzy"
                                tal:attributes="
                                  checked messageSet/isFuzzy;
                                  name string:set_${messageSet/id}_fuzzy_${language_code};
                                  tabindex: view/makeTabIndex
                              " />
                              <tal:block condition="not:messageSet/isPlural">
                                Someone should review this translation
                              </tal:block>
                              <tal:block condition="messageSet/isPlural">
                                Someone should review these translations
                              </tal:block>
                            </label>
                          </div>
                        </td>
                      </tr>

                          <tal:block define="submissions python:messageSet.getSuggestedSubmissions(index)">
                            <metal:use
                              metal:use-macro="template/macros/translation-suggestions">
                              <metal:fill metal:fill-slot="suggestion-title"><tal:block
                                condition="not:messageSet/isMultiline"
                                >Suggestions</tal:block><tal:block
                                condition="messageSet/isMultiline"
                                >Suggestion</tal:block></metal:fill>
                            </metal:use>
                          </tal:block>
                          <tal:block define="submissions python:messageSet.getCurrentSubmissions(index)">
                            <metal:use
                              metal:use-macro="template/macros/translation-suggestions">
                              <metal:fill metal:fill-slot="suggestion-title"><tal:block
                                condition="not:messageSet/isMultiline"
                                >Used elsewhere</tal:block><tal:block
                                condition="messageSet/isMultiline"
                                >Used elsewhere</tal:block></metal:fill>
                            </metal:use>
                          </tal:block>
                          <tal:block define="submissions python:messageSet.getWikiSubmissions(index)">
                            <metal:use
                              metal:use-macro="template/macros/translation-suggestions">
                              <metal:fill metal:fill-slot="suggestion-title"><tal:block
                                condition="not:messageSet/isMultiline"
                                >Suggested elsewhere</tal:block><tal:block
                                condition="messageSet/isMultiline"
                                >Suggested elsewhere</tal:block></metal:fill>
                            </metal:use>
                          </tal:block>
                          <tal:block define="submissions python:messageSet.getAlternateLanguageSubmissions(index)">
                            <metal:use
                              metal:use-macro="template/macros/translation-suggestions">
                              <metal:fill metal:fill-slot="suggestion-title"><tal:block
                                condition="not:messageSet/isMultiline"
                                ><span tal:replace="view/second_lang_pofile/language/englishname"
                                /> (Alternate Language)</tal:block><tal:block
                                condition="messageSet/isMultiline"
                                ><span tal:replace="view/second_lang_pofile/language/englishname"
                                /> (Alternate Language)</tal:block></metal:fill>
                            </metal:use>
                          </tal:block>

                    </tal:block>
                    <tr tal:condition="messageSet/getComment" class="secondary">
                      <th colspan="2"><label>Translator note:</label></th>
                      <td />
                      <td tal:content="messageSet/getComment">
                        Translator comment.
                      </td>
                    </tr>
                    <tr class="discreet secondary">
                      <th colspan="2" style="padding-bottom: 1em;">
                        Located in:
                      </th>
                      <td class="icon left right">
                      </td>
                      <td style="overflow: auto;"
                        tal:content="messageSet/getFileReferences"
                        >
                        ./plone_forms/discussion_reply_form.pt
                      </td>
                </tr>
              </tal:messageset>
            </tbody>
            <tfoot>
              <tr>
                <th colspan="4">
                  <input type="submit" name="SUBMIT" value="Save &amp; Continue" style="text-align: right;"
                      tal:attributes="tabindex: view/makeTabIndex" />
                </th>
              </tr>
            </tfoot>
          </table>

        <!-- Offset of next page, if not at end. -->
        </form>
        <p class="discreet">
          Translation status:
          <span class="language-code"
            tal:content="context/language/englishname"
            tal:omit-tag=""
          >Spanish</span>
          <span tal:replace="view/completeness" tal:omit-tag="">0 %</span>
        </p>
      </tal:havepluralforms>
    </div>

  </body>
</html>
