<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Your e-mail addresses</h1>
    </metal:heading>

<div metal:fill-slot="main">
  <div metal:use-macro="context/@@launchpad_form/form">
    <metal:extra-info fill-slot="extra_info">
      <tal:block condition="context/preferredemail">
        <p>Your preferred contact address for all Launchpad e-mail is:</p>
        <ul id="preferred-email">
          <li class="mail"><b tal:content="context/preferredemail/email" /></li>
        </ul>
      </tal:block>

      <tal:block tal:condition="not: context/preferredemail">
        <p>Currently you don't have a contact address in
        Launchpad. Please choose one from the list of confirmed
        addresses.</p>
      </tal:block>
    </metal:extra-info>

    <metal:widgets fill-slot="widgets">

      <table class="form">
        <tal:widget define="widget nocall:view/widgets/VALIDATED_SELECTED">
          <metal:block use-macro="context/@@launchpad_form/widget_row" />
        </tal:widget>
        <tr>
          <td></td>
          <td>
            <input tal:replace="structure view/action_set_preferred/render" />
            <input tal:replace="structure
                                view/action_remove_validated/render" />
          </td>
        </tr>


        <tal:block tal:condition="view/unvalidated_addresses">
          <tal:widget define="widget nocall:view/widgets/UNVALIDATED_SELECTED">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
          <tr>
            <td></td>
            <td>
              <input tal:replace="structure view/action_confirm/render" />
              <input tal:replace="structure
                                  view/action_remove_unvalidated/render" />
            </td>
          </tr>
        </tal:block>

        <tal:widget define="widget nocall:view/widgets/newemail">
          <metal:block use-macro="context/@@launchpad_form/widget_row" />
          <tr>
            <td></td>
            <td>
              <input tal:replace="structure view/action_add_email/render" />
            </td>
          </tr>
        </tal:widget>

      <tal:block tal:condition="view/mailing_list_widgets">
        <tr>
          <td colspan="2">
            <h1>Mailing list subscriptions</h1>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <p>You're a member of one or more teams with active
            mailing lists. You can subscribe to a team's mailing list
            using any of your verified email addresses.</p>
          </td>
        </tr>
        <tr>
          <th><b>For this mailing list...</b></th>
          <td><b>Subscribe with this address</b></td>
        </tr>
        <metal:block tal:repeat="widget view/mailing_list_widgets">
          <metal:block use-macro="context/@@launchpad_form/widget_row" />
        </metal:block>
          <tr>
            <td></td>
            <td>
              <input tal:replace="structure
                     view/action_update_subscriptions/render" />
            </td>
          </tr>
      </tal:block>

      </table>
    </metal:widgets>
    <metal:widgets fill-slot="buttons" />

  </div>
</div>

<div metal:fill-slot="help">
  <p>
    This page displays all the email addresses associated with your
    Launchpad account. Some of these addresses are verified (known to
    be associated with you), but some may need confirmation before you
    can use them in Launchpad.
  </p>

  <p>
    When you confirm that an address is yours, Launchpad will send a
    verification email to that address. To complete the verification
    process, simply visit the URL contained in the email.
  </p>

  <p>
    You may choose one of your verified addresses to be your
    preferred email address. Email from Launchpad will be sent to
    this address.
  </p>
</div>

</body>
</html>
