<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad">
<body>

<div metal:fill-slot="main">

  <div tal:repeat="pair view/work_item_containers">
  <div tal:define="date python: pair[0]; containers python: pair[1]">
    <h2 tal:content="date/fmt:date" />

    <p>
      There are <span tal:replace="python: view.workitem_counts[date]" />
      Blueprint work items and
      <span tal:replace="python: view.bugtask_counts[date]" /> Bugs due
      in <span tal:content="date/fmt:date" /> which are assigned to members
      of this team.
    </p>

    <ul>
      <li tal:repeat="container containers" style="margin-left: 1em" >
        <tal:bp_workitems condition="container/spec">
          <h3>Work items from Blueprint
            <a tal:replace="structure container/html_link" /> of 
            <a tal:replace="structure container/target/fmt:link" />
          </h3>
	  <p style="margin-left: 3em">
	    This blueprint is assigned to
	    <span tal:replace="structure container/assignee_link" />
	    and is given
	    <span tal:replace="structure container/priority_title" /> priority.

	    <span tal:replace="container/percent_done" />
	    % of the work is completed.
	  </p> 
          <table class="listing" style="margin-left: 3em">
            <thead>
              <tr>
                <th>Description</th>
                <th>Assignee</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr tal:repeat="item container/items">
                <td tal:content="item/title" />
                <td tal:content="structure item/assignee/fmt:link" />
                <td tal:content="item/status/name" />
              </tr>
            </tbody>
          </table>
        </tal:bp_workitems>

        <tal:bugtasks condition="not: container/spec">
          <h3 tal:content="container/html_link" />
	  <p style="margin-left: 3em">
	    <span tal:replace="container/percent_done" />
	    % of the bugs are resolved.
	  </p> 
          <table class="listing" width="70%" style="margin-left: 3em">
            <thead>
              <tr>
                <th>Description</th>
                <th>Target</th>
                <th>Priority</th>
                <th>Assignee</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr tal:repeat="item container/items">
                <td tal:content="item/title" />
                <td tal:content="structure item/target/fmt:link" />
                <td tal:content="item/priority/name" />
                <td tal:content="structure item/assignee/fmt:link" />
                <td tal:content="item/status/name" />
              </tr>
            </tbody>
          </table>
        </tal:bugtasks>
      </li>
    </ul>
    <!--
    <table class="listing">
      <thead>
      <tr>
        <th width="15%">Blueprint</th>
        <th width="10%">Target</th>
        <th width="5%">Priority</th>
        <th width="10%">Assignee</th>
        <th width="10%">Progress</th>
      </tr>
      </thead>
      <tbody>
        <div tal:repeat="container containers">
        <tr>
          <td tal:content="structure container/html_link" />
          <td tal:content="structure container/target_link" />
          <td tal:content="container/priority_title" />
          <td tal:content="structure container/assignee_link" />
          <td tal:content="structure container/progress_bar" />
        </tr>
        <tr tal:repeat="workitem container/items">
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="workitem/title" /></td>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="structure workitem/target/fmt:link" /></td>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;<span tal:replace="workitem/priority/name" /></td>
          <td><a tal:replace="structure workitem/assignee/fmt:link" />
          </td>
          <td><span tal:replace="workitem/status/name" /></td>
        </tr>
        </div>
      </tbody>
    </table>
    -->
  </div>
  </div>
</div>

</body>
</html>
