Non-Personal Subscriptions
==========================

In addition to subscribing / unsubscribing yourself, it is possible to add a
person as a subscriber to the bug. You would use this feature to subscribe
someone else to the bug.

You have to be logged in to subscribe someone else.

    >>> test_url = 'http://bugs.launchpad.dev/firefox/+bug/1/+addsubscriber'
    >>> bug_url = 'http://bugs.launchpad.dev/firefox/+bug/1'
    
    >>> anon_browser.handleErrors = True
    >>> anon_browser.open(bug_url)
    >>> link = anon_browser.getLink('Subscribe someone else')
    >>> link.click()
    >>> anon_browser.url == test_url
    False
    
    >>> user_browser.open(bug_url)
    >>> link = user_browser.getLink('Subscribe someone else')
    >>> link.click()
    >>> user_browser.url == test_url
    True

Lets make sure our subscribee isn't already subscribed.

    >>> subscribee = 'no-priv'
    >>> subscribee_name = 'No Privileges Person'

    >>> from canonical.launchpad.ftests.test_pages import find_portlet
    >>> user_browser.open(bug_url)
    >>> subs = find_portlet(user_browser.contents, 'Subscribers to bug 1')
    >>> subscribee_name not in subs('ul')[0].renderContents()
    True

Now, we'll subscribe our subscribee to the bug.

    >>> user_browser.open(test_url)
    >>> user_browser.getControl("Person").value = subscribee
    >>> user_browser.getControl("Add").click()
    >>> user_browser.url == bug_url
    True

We should be notified that our subscribee was subscribed, and we should be
able to see them in the list of subscribers to this bug.

    >>> for tag in find_tags_by_class(user_browser.contents, "informational message"):
    ...     print tag.renderContents()
    'No Privileges Person' has been subscribed to this bug.

    >>> subs = find_portlet(user_browser.contents, 'Subscribers to bug 1')
    >>> subscribee_name in subs('ul')[0].renderContents()
    True
