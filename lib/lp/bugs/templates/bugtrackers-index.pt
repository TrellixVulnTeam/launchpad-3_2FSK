<bug-trackers-index
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only">

  <div metal:fill-slot="main">
    <div class="yui-u">
      <div class="top-portlet">
        <p>
          A bug report in Launchpad can be linked to a bug report in any
          of these bug trackers. The status of the external bug report is
          shown in Launchpad, and Launchpad subscribers are notified when
          the external status changes.
        </p>
        <p tal:define="link context/menu:context/newbugtracker"
           tal:content="structure link/render"
           tal:condition="link/enabled">
          Add a new bug tracker
        </p>
        <table class="sortable listing" id="trackers">
          <thead>
            <tr>
              <th>Title</th>
              <th>Location</th>
              <th>Linked Projects</th>
              <th class="type">Type</th>
              <th class="amount">Watches</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="bugtracker view/active_bug_trackers">
              <td>
                <a tal:replace="structure bugtracker/fmt:link" />
              </td>
              <td>
                <a tal:replace="structure bugtracker/fmt:external-link" />
              </td>
              <td tal:define="pillar_data python:view.getPillarData(bugtracker)">
                <tal:pillars condition="pillar_data">
                  <tal:pillar-entry repeat="pillar pillar_data/pillars">
                    <a tal:attributes="href pillar/fmt:url"
                       tal:content="pillar/displayname"
                       ></a><tal:comma condition="not: repeat/pillar/end">, </tal:comma>
                  </tal:pillar-entry>
                  <tal:many-pillars
                      condition="pillar_data/has_more_pillars">
                    &hellip;
                  </tal:many-pillars>
                </tal:pillars>
                <tal:no-pillars condition="not: pillar_data">
                  &mdash;
                </tal:no-pillars>
              </td>
              <td class="type"
                  tal:content="bugtracker/bugtrackertype/title">bugtrackertype</td>
              <td class="amount" tal:content="bugtracker/watches/count">bugcount</td>
            </tr>
          </tbody>
        </table>
        <p style="margin-top: 1em"
           tal:define="link context/menu:context/newbugtracker"
           tal:content="structure link/render"
           tal:condition="link/enabled">
          Add a new bug tracker
        </p>
      </div>
    </div>
    <div class="yui-u" condition="view/inactive_bug_trackers">
      <div class="portlet">
        <h2>Inactive bug trackers</h2>
        <table class="sortable listing" id="inactive-trackers">
          <thead>
            <tr>
              <th>Title</th>
              <th>Location</th>
              <th>Linked Projects</th>
              <th class="type">Type</th>
              <th class="amount">Watches</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="bugtracker view/inactive_bug_trackers">
              <td>
                <a tal:replace="structure bugtracker/fmt:link" />
              </td>
              <td>
                <a tal:replace="structure bugtracker/fmt:external-link" />
              </td>
              <td tal:define="pillar_data python:view.getPillarData(bugtracker)">
                <tal:pillars condition="pillar_data">
                  <tal:pillar-entry repeat="pillar pillar_data/pillars">
                    <a tal:attributes="href pillar/fmt:url"
                       tal:content="pillar/displayname"
                       ></a><tal:comma condition="not: repeat/pillar/end">, </tal:comma>
                  </tal:pillar-entry>
                  <tal:many-pillars
                      condition="pillar_data/has_more_pillars">
                    &hellip;
                  </tal:many-pillars>
                </tal:pillars>
                <tal:no-pillars condition="not: pillar_data">
                  &mdash;
                </tal:no-pillars>
              </td>
              <td class="type"
                  tal:content="bugtracker/bugtrackertype/title">bugtrackertype</td>
              <td class="amount" tal:content="bugtracker/watches/count">bugcount</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</bug-trackers-index>
