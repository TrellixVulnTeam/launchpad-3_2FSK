<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
  >
<body>

  <div metal:fill-slot="main">

    <h1 tal:content="CONTEXTS/fmt:pagetitle">
      Private archive subscriptions for Joe Smith
    </h1>
  <tal:has_subscriptions condition="view/has_subscriptions">
    <div id="pending_subscriptions" tal:condition="view/has_pending_subscriptions">
      <h2>Pending subscriptions</h2>
      <p>You have been added as a subscriber of the following Private PPAs.
         If you wish to download software from these PPAs, please activate
         your subscription.
      </p>
      <table summary="CONTEXTS/fmt:pagetitle" id="pending-archive-subscriptions">
        <thead>
          <tr class="pending-archive-subscription-row">
            <th>Archive</th><th>Subscription description</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="subscription view/pending_subscriptions"
              class="pending-archive-subscription-row">
            <td tal:content="subscription/archive/title">Private PPA for Celso
            </td>
            <td tal:content="subscription/description">Allow Team X access.
            </td>
            <td tal:define="archive_id subscription/archive/id">
              <form method="post" action="">
                <input type="hidden" name="archive_id"
                    tal:attributes="value string:${archive_id}"/>
                <input type="submit" value="Activate"
                    tal:attributes="name string:field.actions.activate_archive_${archive_id}"/>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div id="sources_list" tal:condition="view/has_active_subscriptions">
      <h2>Custom sources.list entries</h2>
      <p>The following sources.list entries will enable you to download
         software from the private PPAs for which you have activated
         your subscription.</p>
      <p>You are recommended to copy these into a file such as:
         /etc/apt/sources.list.d/private_ppa_sources.list . See
         <a href="https://help.launchpad.net/Packaging/PPA#Adding%20a%20Private%20PPA%20to%20your%20Ubuntu%20repositories"
          >adding a private PPA to your Ubuntu repositories</a> for more details.
      </p>
      <tal:comment condition="nothing">
        No extra spacing is important in the 'pre' content below
        to avoid lots of blank lines as well as allow users to
        copy'n'paste it.
      </tal:comment>
      <pre id="sources-list-entries">
# Personal subscriptions for private PPAs
<tal:subscriptions repeat="subs_with_token view/active_subscriptions_with_tokens"><tal:defines define="subscription subs_with_token/subscription;token subs_with_token/token;archive_url token/archive_url;series_name token/archive/distribution/currentseries/name">
# <tal:repo-comment content="token/archive/title"/>
deb <tal:repo-url content="archive_url" /> <tal:distroseries content="series_name" /> main
deb-src <tal:repo-url content="archive_url" /> <tal:distroseries content="series_name" /> main</tal:defines></tal:subscriptions>
      </pre>
    </div>
    <div id="current_subscriptions">
      <h2>Subscriptions</h2>
      <p>All the private archives for which you have
         a subscription are displayed below.
      </p>
      <table summary="CONTEXTS/fmt:pagetitle" id="archive-subscriptions">
        <thead>
          <tr class="archive-subscription-row">
            <th>Archive</th><th>Subscription description</th><th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="subscription_with_token view/subscriptions_with_tokens"
              class="archive-subscription-row">
            <tal:subscription_and_token
                define="subscription subscription_with_token/subscription;
                        token subscription_with_token/token">
            <td tal:content="subscription/archive/title">Private PPA for Celso
            </td>
            <td tal:content="subscription/description">Allow Team X access.
            </td>
            <td>
                <tal:active condition="token">Active</tal:active>
                <tal:pending condition="not: token">Pending</tal:pending>
            </td>
            </tal:subscription_and_token>
          </tr>
        </tbody>
      </table>
    </div>
  </tal:has_subscriptions>
  <tal:has_no_subscriptions condition="not: view/has_subscriptions">
    <p>You do not have any current subscriptions to private archives.
    </p>
  </tal:has_no_subscriptions>
  </div>
</body>
</html>
