<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
>
<body>
  <tal:heading metal:fill-slot="heading">
    <h1><tal:name replace="view/heading" /> for <tal:context replace="context/title" /></h1>
  </tal:heading>

<tal:main metal:fill-slot="main">

  <p tal:condition="view/description"
     tal:content="view/description" style="margin-top: 0.5em;"/>
  <p tal:condition="view/mirror_count">
    There are <tal:total_number replace="view/mirror_count" />
    mirror(s) registered for <tal:context replace="context/title" />.
  </p>

  <div class="top-portlet" style="margin-top: 0.5em;">
  <tal:block define="mirrors_by_country view/getMirrorsGroupedByCountry">

    <div tal:condition="not: mirrors_by_country">
      <p>
        We don't know of any <span tal:replace="view/heading">Archive
        Mirrors</span> for this distribution.
        <span tal:condition="context/full_functionality">
          If you know of one, please
          <a tal:attributes="href
          string:${context/fmt:url}/+newmirror">register it</a>.
          </span>
      </p>
    </div>

    <div tal:condition="mirrors_by_country"
         tal:define="show_freshness view/show_freshness;
                     total_mirror_count view/mirror_count;
                     total_throughput view/total_throughput">
      <metal:mirror-list
        use-macro="context/@@+distributionmirror-macros/mirrors-table" />
    </div>

  </tal:block>
  </div>
</tal:main>

<tal:side metal:fill-slot="side">
  <tal:menu replace="structure view/@@+global-actions" />
  <div class="portlet" id="register"
       tal:condition="view/menu:overview/newmirror/enabled">
      <a tal:replace="structure view/menu:overview/newmirror/fmt:link" />
  </div>
</tal:side>

</body>
</html>
