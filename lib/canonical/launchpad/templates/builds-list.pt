<div class="builds_list" tal:condition="not: view/setupBuildList">
    
     <table>
       <tr>
         <th><label>Build State:</label></th>
         <td>
          <form name="build_records_state" action="" method="GET">       

          <select name="build_state" size="1">

            <option tal:attributes="selected python: view.state == ''"
                    value="">All</option>

            <option tal:condition="view/showBuilderInfo"
                    tal:attributes="selected python: view.state == 'pending'"
                    value="pending">Pending Build</option>

            <option tal:attributes="selected python: view.state == 'built'"
                    value="built">Successfully Built</option>

            <option tal:attributes="selected python: view.state == 'failed'"
                    value="failed">Failed Build</option>

            <option tal:attributes="selected python: view.state == 'depwait'"
                    value="depwait">Waiting Dependency</option>

            <option tal:attributes="selected python: view.state == 'chrootwait'"
                    value="chrootwait">Waiting Chroot</option>

          </select>

          <input type="submit" value="Update" />  

          </form>
         </td>
       </tr>
     </table>

     <tal:navigation
          replace="structure view/batchnav/@@+navigation-links"
          tal:condition="view/batch"/>

     <table class="listing" tal:condition="view/batch">
        <tr class="thead">
            <th>Build</th>
            <th>Requested</th>
            <th>Built</th>
            <th tal:condition="view/showBuilderInfo">Builder</th>
            <th>State</th>
            <th>Build log</th>
            <th>Duration</th>
        </tr>
        <tr tal:repeat="build view/batch">
            <td>
              <a tal:attributes="href build/fmt:url">
                 <img alt="[package]" src="/++resource++package-binary" />
                 <span tal:replace="build/title">NAME</span>
              </a>
            </td>
            <td tal:content="build/datecreated/fmt:datetime">REQUESTED</td>

	    <tal:pending condition="not: build/datebuilt">
            <td colspan="5" align="center">PENDING</td>
            </tal:pending>

            <tal:built condition="build/datebuilt">
            <td tal:content="build/datebuilt/fmt:datetime">BUILT</td>
            <td tal:condition="view/showBuilderInfo">
              <tal:block condition="build/builder">
                <a tal:content="build/builder/title"
                   tal:attributes="href build/builder/fmt:url"
                   title="To show the Builder, click here."/>
              </tal:block>
              <tal:block condition="not:build/builder">
                <img alt="[Unavailable Info]" src="/++resource++stop" />
              </tal:block>
            </td>
            <td>
              <img tal:attributes="alt build/buildstate/name; 
                                   src build/build_icon" />
            </td>
            <td>
              <tal:block condition="build/buildlog">
                <a tal:attributes="href build/buildlog/url">
                  <img alt="[Build log]" src="/++resource++info" />
                </a>
              </tal:block>
              <tal:block condition="not:build/buildlog">
                 <img alt="[Unavailable Info]" src="/++resource++stop" />
              </tal:block>
            </td>
            <td>
              <span tal:replace="build/buildduration/fmt:approximateduration"
              >4 minutes</span>
            </td>
            </tal:built>
        </tr>
      </table>

      <div tal:condition="not: view/batch">
        <img src="/++resource++alert" />
        No <span tal:replace="view/state"/> builds for
        <span tal:replace="context/title"/>.
      </div>

      <tal:navigation
           replace="structure view/batchnav/@@+navigation-links"
           tal:condition="view/batch"/>

     
</div>
