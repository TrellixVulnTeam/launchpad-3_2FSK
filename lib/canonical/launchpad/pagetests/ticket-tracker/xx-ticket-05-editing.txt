Editing Tickets
===============

We should be able to edit the title and description of a ticket.

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> browser.open('http://localhost:9000/products/firefox/+ticket/2/+edit')

When we post the form, we should be redirected back to the ticket page.

  >>> description = (
  ...   "Hi! I'm trying to learn about SVG but I can't get it to work at "
  ...   "all in firefox. Maybe there is a plugin? Help! Thanks. Mark")
  >>> browser.getControl('Description').value = description 
  >>> summary = "Problem showing the SVG demo on W3C web site"
  >>> browser.getControl('Summary').value = summary
  >>> browser.getControl('Change').click()

  >>> browser.url
  'http://localhost:9000/products/firefox/+ticket/2'

And viewing that page should show the updated information.

  >>> description in browser.contents
  True
  >>> summary in browser.contents
  True

We should also be able to edit the priority, assignee and status whiteboard.

  >>> browser.getLink('Change Priority/Assignee').click()
  >>> browser.url
  'http://localhost:9000/products/firefox/+ticket/2/+priority'

POSTing the form should redirect to the ticket page.

  >>> browser.getControl('Priority').value = ['High']
  >>> browser.getControl('Assignee').value = 'sabdfl'
  >>> browser.getControl('Status Whiteboard').value = 'bling=t'
  >>> browser.getControl('Change').click()

  >>> browser.url
  'http://localhost:9000/products/firefox/+ticket/2'

And looking at that page should show the new details.

  >>> 'bling=t' in browser.contents
  True
  >>> 'High' in browser.contents
  True
  >>> 'Mark Shuttleworth' in browser.contents
  True

There should be a +admin page for the ticket. it should only be visible to
Foo Bar as an administrator.

  # XXX matsubara 2006-05-26 Workaround for bug
  # https://launchpad.net/bugs/45226
  >>> from zope.testbrowser import Browser
  >>> browser = Browser()
  >>> browser.handleErrors = False

  >>> browser.addHeader('Authorization', 'Basic foo.bar@canonical.com:test')
  >>> browser.open('http://localhost:9000/products/firefox/+ticket/2')
  >>> browser.getLink('Administer').click()

And the page should be visible too.

  >>> browser.url
  'http://localhost:9000/products/firefox/+ticket/2/+admin'

  >>> 'Administer request' in browser.contents
  True
