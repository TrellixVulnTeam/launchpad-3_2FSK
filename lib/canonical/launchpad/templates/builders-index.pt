<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>

<metal:block fill-slot="head_epilogue">
    <meta http-equiv="refresh" content="300" />
</metal:block>

    <div metal:fill-slot="main">
      <h1>Launchpad build machines</h1>

    <div id="ppa-builders" tal:define="category view/ppa_builders">
      <div metal:use-macro="template/macros/builder-category" />
    </div>

    <div id="other-builders" tal:define="category view/other_builders">
      <div metal:use-macro="template/macros/builder-category" />
    </div>

    <p class="discreet">Generated at <span tal:replace="view/now"/></p>

  </div>

<metal:macros fill-slot="bogus">
<metal:macro define-macro="builder-category">
  <tal:comment replace="nothing">
    This macro expects the following variables defined:
    :category: A BuilderCategory object
  </tal:comment>

   <h2 tal:content="category/title" />

   <table class="listing">
     <tal:group repeat="builder_group category/groups">
       <tr class="category">
         <th
           style="text-align: left"
           tal:content="builder_group/processor_name"
         />
         <th>
             <tal:queue-size replace="builder_group/queue_size"
               >2</tal:queue-size> waiting
         </th>
       </tr>
       <tr>
         <td colspan="2">
           <table width="100%">
            <tr class="builder-row" tal:repeat="builder builder_group/builders">
            <td>
              <a tal:attributes="href builder/fmt:url"
                 tal:content="builder/title">Bob</a>
            </td>
            <td tal:content="builder/status">OK</td>
            </tr>
           </table>
        </td>
       </tr>
    </tal:group>
  </table>

</metal:macro>

</metal:macros>


</body>
</html>

