<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
>

  <div class="boardComment attachment diff"
       tal:define="attachment view/preview_diff/diff_text">
    <tal:real-diff condition="attachment">
      <div class="boardCommentDetails filename">
        <ul class="horizontal">
          <li>
            <a tal:attributes="href attachment/getURL">
              <img src="/@@/download"/>
              Download diff
            </a>
          </li>
        </ul>
      </div>
      <div class="boardCommentBody attachmentBody">
        <tal:diff replace="structure view/preview_diff_text/fmt:diff" />
      </div>
      <div class="boardCommentFooter"
           tal:condition="view/diff_oversized">
        The diff has been truncated for viewing.
      </div>
    </tal:real-diff>
    <tal:empty-diff condition="not: attachment">
      <div class="boardCommentBody attachmentBody">
        <em>Empty</em>
      </div>
    </tal:empty-diff>
  </div>

</tal:root>