<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
<body>

  <div metal:fill-slot="main">

    <h1><span tal:replace="context/displayname" /> Timeline</h1>

    <div id="timeline-loading" style="display: none">
      <img src="/@@/spinner" /> Loading graph...
    </div>
    <iframe id="timeline-iframe" name='timeline-iframe'
            style="display: none; overflow: hidden"
            src="+timeline-graph?resize_frame=timeline-iframe"
            width="100%" height="0px"></iframe>
    <script>
      YUI().use('node', function(Y) {
          if (Y.UA.ie) {
              return;
          }
          var loading_el = Y.get('#timeline-loading');
          loading_el.setStyle('display', 'block');
          var iframe = Y.get('#timeline-iframe');
          Y.on('load', function(e) {
              loading_el.setStyle('display', 'none');
              iframe.setStyle('display', 'block');
          }, iframe);
      });
    </script>
    <div tal:repeat="series view/sorted_series_list">
      <div style="margin-top: 1em;
                  border-bottom: 1px solid #ccc; max-width: 60em;"
        tal:define="is_focus series/is_development_focus"
        tal:attributes="class series/css_class;
                        id series/name/fmt:css-id/series-;">
        <tal:status replace="structure series/series/@@+status" />
      </div>
    </div>

  </div>
</body>
</html>
