<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    xml:lang="en"
    lang="en"
    dir="ltr"
    metal:use-macro="view/macro:page/default2.0"
    i18n:domain="malone"
    >
  <body>
    <metal:portlets fill-slot="portlets">

      <div tal:replace="structure context/bug/@@+portlet-duplicates" />
      <div tal:replace="structure context/bug/@@+portlet-subscribers" />
      <div tal:replace="structure context/bug/@@+portlet-questions" />
      <div tal:replace="structure context/bug/@@+portlet-specs" />
      <div tal:replace="structure context/bug/@@+portlet-attachments" />
      <div tal:replace="structure context/bug/@@+portlet-watch" />
      <div tal:replace="structure context/@@+portlet-search" />
    </metal:portlets>

    <div metal:fill-slot="main" tal:define="context_menu context/menu:context">
      <div style="clear: both">
        <div style="float: right; width: 65%; text-align: right">
          <tal:activitylog
              define="link context_menu/activitylog"
              condition="link/enabled"
              replace="structure link/render" />
          &mdash;
          reported
          <span
              tal:attributes="title context/bug/datecreated/fmt:datetime"
              tal:content="context/bug/datecreated/fmt:displaydate" />
          by <tal:reporter replace="structure context/bug/owner/fmt:link" />
        </div>
        <div style="float: left; width: 25%;">
          <tal:icon replace="structure context/image:icon" />
          Bug #<tal:bug replace="context/bug/id">3252543</tal:bug><tal:nickname
          condition="context/bug/name">
          (<tal:nicknametext replace="context/bug/name" />)</tal:nickname>
        </div>
      </div>
      <h1 style="clear: both;">
        <tal:summary replace="context/bug/title" />
        <a href="+edit">
          <img src="/@@/edit" alt="[edit]" title="Edit this summary" />
        </a>
      </h1>

      <tal:block condition="view/reportBugInContext" />

      <p class="informational message"
         tal:condition="view/notices"
         tal:repeat="notice view/notices"
         tal:content="notice">
        Reported this bug as also occurring in upstream firefox
      </p>

      <p class="informational message"
         id="can-expire"
         tal:condition="context/bug/can_expire"
         >
        <tal:expiration_message replace="view/expiration_message" />
        (<a href="https://help.launchpad.net/BugExpiry">find out why</a>)
      </p>

      <p class="informational message"
         id="number_of_dupes"
         tal:condition="context/bug/duplicates"
         tal:define="number_of_dupes context/bug/duplicates/count"
         >This bug has
      <tal:num-dupes condition="python:number_of_dupes == 1">1 duplicate</tal:num-dupes>
      <tal:num-dupes condition="python:number_of_dupes > 1" content="string:${number_of_dupes} duplicates"
                     >2 duplicates</tal:num-dupes>
      </p>

      <tal:duplicate-of define="duplicateof context/bug/duplicateof"
                        condition="duplicateof">
        <p class="informational message">
          This report is a duplicate of
          <a tal:condition="duplicateof/required:launchpad.View"
             tal:attributes="href duplicateof/fmt:url; title duplicateof/title"
             tal:content="string:bug #${duplicateof/id}">bug #42</a>
          <span tal:condition="not:duplicateof/required:launchpad.View"
                tal:replace="string:bug #${duplicateof/id}" />
        </p>
      </tal:duplicate-of>


      <p id="bug-is-question" class="informational message"
         tal:condition="context/bug/getQuestionCreatedFromBug"
         tal:define="question context/bug/getQuestionCreatedFromBug">
        This bug report was converted into a question:
        question #<tal:question-id replace="question/id" />:
        <a href=""
           tal:attributes="href question/fmt:url"
           tal:content="question/title">%s</a>.
      </p>
      <form
          tal:condition="not:view/isReportedInContext"
          class="error message"
          name="alsooccursin"
          method="POST"
          >

        This bug is not recorded as needing to be fixed in
        <a tal:attributes="href string:${context/target/fmt:url}/+bugs"
           tal:content="context/bugtargetdisplayname">Mozilla Firefox</a>.

        <tal:loggedin condition="request/lp:person">

          <input
              type="submit"
              name="reportbug"
              value="Also Needs Fixing Here"
              />
        </tal:loggedin>
        <tal:notloggedin condition="not:request/lp:person">
          If you want to report it in <tal:block
          content="context/bugtargetdisplayname" />,
          you must <a href="+login">log in</a> first.
        </tal:notloggedin>

      </form>

      <table style="width: 100%; margin-bottom: 0.33em;">
        <tr>
          <td style="text-align: left; width: 33%;">
            <tal:markduplicate
                define="link context_menu/markduplicate"
                condition="link/enabled"
                replace="structure link/render" />
          </td>

          <td style="text-align: center; width: 34%;">
            <tal:visibility
                define="link context_menu/visibility"
                condition="link/enabled"
                replace="structure link/render" />
          </td>

          <td style="text-align: right; width: 33%;">
            <tal:createquestion
                define="link context_menu/createquestion"
                condition="link/enabled"
                replace="structure link/render" />

            <tal:removequestion
                define="link context_menu/removequestion"
                condition="link/enabled"
                replace="structure link/render" />
          </td>
        </tr>
      </table>

      <div tal:replace="structure context/bug/@@+bugtasks-and-nominations-table" />

      <div class="report">
        <tal:user condition="view/user">
          <tal:description
              define="global description context/bug/description/fmt:text-to-html" />
        </tal:user>
        <tal:not-user condition="not:view/user">
          <tal:description
              define="global description context/bug/description/fmt:obfuscate-email/fmt:text-to-html" />
        </tal:not-user>

        <div id="bug-description"
             tal:content="structure description" />

        <div style="margin-bottom: 1em; text-align: center; clear: both">
          <span tal:condition="view/wasDescriptionModified">
          This description was updated. <a href="comments/0">View original description</a>.</span>
        </div>

        <div style="width: 100%; clear: both;">
          <div id="bug-tags" tal:define="tags context/bug/tags" tal:condition="tags"
               style="width: 45%: text-align: left; float: left;">
            Tags:
            <a tal:repeat="tag tags"
               tal:content="tag"
               tal:attributes="href string:${context/target/fmt:url}/+bugs?field.tag=${tag}">tag</a>
          </div>

          <div style="width: 45%: text-align: right; float: right;">
            <tal:editdescription
                define="link context_menu/editdescription"
                condition="link/enabled"
                replace="structure link/render" />
          </div>
        </div>
        <div style="clear:both; height: 1em;"></div>
      </div>

      <tal:branches define="bug_branches view/bug_branches"
                    condition="bug_branches">

        <h2>Related branches</h2>

        <tal:bug-branches repeat="bug_branch bug_branches">
          <div tal:define="show_edit bug_branch/required:launchpad.Edit"
               tal:condition="bug_branch/branch/required:launchpad.View">
            <div class="bug-branch-summary">
              <tal:branch-ref replace="structure bug_branch/branch/fmt:link"/>
              (<span tal:content="bug_branch/branch/lifecycle_status/title"
              tal:attributes="class string:branchstatus${bug_branch/branch/lifecycle_status/name}"
              >Experimental</span>) -
              <tal:bug_branch_status condition="not: show_edit|nothing"
                                     replace="bug_branch/status/title"/>
              <a tal:condition="show_edit"
                 tal:attributes="href string:${bug_branch/branch/fmt:url}/+bug/${bug_branch/bug/id}/+edit;
                                 onclick string:return switchBugBranchFormAndWhiteboard('${bug_branch/id}')">
                <tal:bug_branch_status replace="bug_branch/status/title"/>
                <img src="/@@/expand"/>
              </a>
              <dl tal:condition="bug_branch/whiteboard"
                  tal:attributes="id string:bugbranch${bug_branch/id}-wb">
                <dd>
                  <tal:whiteboard content="structure bug_branch/whiteboard/fmt:text-to-html">
                    The whiteboard.
                  </tal:whiteboard>
                </dd>
              </dl>
            </div>
            <div tal:condition="show_edit|nothing"
                 tal:attributes="id string:bugbranch${bug_branch/id}"
                 style="display: none"
                 >
              <dl><dd>
                <tal:edit-form replace="structure bug_branch/@@+bug-edit"/>
              </dd></dl>
            </div>
          </div>
        </tal:bug-branches>
      </tal:branches>

      <p>
        <tal:addbranch
            define="link context_menu/addbranch"
            condition="link/enabled"
            replace="structure link/render" />
      </p>

      <div condition="context/bug/cves">
        <h2>CVE References</h2>
        <ul>
          <li class="cve" tal:repeat="cve context/bug/cves">
            <a tal:attributes="href cve/fmt:url;
                               title cve/description/fmt:shorten/40"
               tal:content="cve/sequence"
               >2002-1342</a>
          </li>
        </ul>
      </div>

      <p>
        <tal:linktocve
            define="link context_menu/linktocve"
            condition="link/enabled"
            replace="structure link/render" />
        <tal:unlinkcve
            define="link context_menu/unlinkcve"
            condition="link/enabled"
            replace="structure link/render" />
      </p>

      <tal:mentors define="mentoring_offers context/bug/mentoring_offers"
                   condition="mentoring_offers">
        <p>
          <img src="/@@/mentoring" alt="Mentoring"
               title="People have offered to mentor this work" />
          <b>Mentors:</b>
          <tal:block repeat="mentoring_offer mentoring_offers">
            <a tal:replace="structure mentoring_offer/owner/fmt:link">foobar</a>
          </tal:block>
        </p>
        <tal:block condition="not: context/bug/is_complete">
          <div tal:condition="view/userIsMentor"
               class="action">
            <img class="inlineLinkIcon" src="/@@/remove" alt=""/><a href="+retractmentoring">Retract my offer of mentorship</a>
          </div>
        </tal:block>
      </tal:mentors>
      <div tal:define="link context_menu/offermentoring"
           tal:condition="link/enabled"
           class="action">
        <img class="inlineLinkIcon" src="/@@/add" alt=""/><a tal:attributes="href link/url">Offer to mentor someone fixing this bug</a>
      </div>
      <tal:comment repeat="comment view/getBugCommentsForDisplay">
        <tal:comment-box condition="comment/can_be_shown">
          <metal:comment-box
              metal:use-macro="context/@@bugcomment-macros/comment-box" />
        </tal:comment-box>
      </tal:comment>

      <div style="clear:both; height: 1em;">&nbsp;</div>

      <tal:logged-in condition="view/user">
        <fieldset class="collapsible collapsed">
          <legend>Add a comment/attachment</legend>
          <div tal:content="structure context/@@+addcomment-form" />
        </fieldset>
      </tal:logged-in>
      <tal:not-logged-in condition="not: view/user">
        <div align="center">
          To post a comment you must <a href="+login">log in</a>.
        </div>
      </tal:not-logged-in>

      <div class="related">
        <h2>What next?</h2>
        <ul>
          <li>
            <a
                tal:attributes="href string:${context/target/fmt:url}/+filebug"
                >Report another bug</a>
            about <tal:context replace="context/target/displayname" />
          </li>
          <li>
            <a
                tal:attributes="href string:${context/target/fmt:url}/+bugs"
                >List open bugs</a>
            for <tal:context replace="context/target/displayname" />
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
