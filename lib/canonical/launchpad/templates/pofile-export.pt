<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
>

  <body>
    <metal:block fill-slot="head_epilogue">
    <style>
    .disabled, .disabled a {
        color: lightgray;
    }
    </style>
    <script type="text/javascript">
    YUI().use('node', function(Y){
        Y.on('event:ready', function(){
            // The pochanged option is only available for the PO format.
            var formatlist = Y.get('#div_format select');
            var checkbox = Y.get('#div_pochanged input');
            var changedtext = Y.get('#div_pochanged span');
            function toggle_pochanged() {
                if (formatlist.get('value') == 'PO') {
                    changedtext.removeClass('disabled');
                    checkbox.set('disabled', false);
                }
                else {
                    changedtext.addClass('disabled');
                    checkbox.set('disabled', true);
                }
            }
            formatlist.on('change', toggle_pochanged);
            // Initialise the state of the controls.
            toggle_pochanged();
        });
    });
    </script>
    </metal:block>
    <div metal:fill-slot="main">
      <div>
        <a tal:attributes="href context/potemplate/fmt:url"
           tal:content="context/potemplate/title">
          evolution 2.10 template
        </a>
      </div>
      <h1>
        Download
        <tal:language replace="context/language/englishname">
          Spanish
        </tal:language>
        translation
      </h1>
      <form action="" method="post">
        <div id="div_format" class="field" style="clear: left">
            <label>
            Format:
                <select name="format">
                    <option
                        tal:repeat="format view/formats"
                        tal:content="format/title"
                        tal:attributes="
                            value format/value;
                            selected format/is_default"
                        >PO format</option>
                </select>
            </label>
        </div>
        <div id="div_pochanged" class="field" style="margin-top: 10px">
          <label>
            <input type="checkbox" name="pochanged"
                   value="POCHANGED" disabled="disabled"/>
            <span>Only strings that differ from packaged versions
            (<a href="https://help.launchpad.net/Translations/PartialPOExport"
                target="_blank">What's this?</a>).</span>
          </label>
        </div>
        <p>
          Once the file is ready for download, Launchpad will e-mail
          <code tal:content="view/user/preferredemail/email">user@domain</code>
          with a link to the file.
        </p>
        <div class="actions">
          <input type="submit" value="Confirm Download" />
        </div>
      </form>
    </div>
  </body>
</html>
