  <form action="#"
      tal:attributes="action string:${context/fmt:url}/+addcomment"
      method="post"
      enctype="multipart/form-data">

      <tal:process condition="view/process_form" />
      <div tal:define="errors view/errors|nothing"
         tal:condition="errors"
         tal:repeat="error errors"
         tal:content="error/doc"
         class="error message">Individual error.</div>

      <div tal:define="widget nocall:view/subject_widget">
        <metal:block use-macro="view/subject_widget/@@launchpad_widget_macros/launchpad_widget_row" />
      </div>
      <div tal:define="widget nocall:view/comment_widget">
        <metal:block use-macro="view/comment_widget/@@launchpad_widget_macros/launchpad_widget_row" />
      </div>
      <fieldset style="margin: 1em 0;">
        <legend>
          <span tal:content="structure view/include_attachment_widget" />
          <label tal:attributes="for view/include_attachment_widget/name"
                 tal:content="view/include_attachment_widget/label">
            Include attachment
          </label>
        </legend>
        <table>
          <tbody>
            <tr>
              <td style="text-align: right">
                <label tal:attributes="for view/filecontent_widget/name">
                  File
                </label>
              </td>
              <td>
                <input type="file"
                       tal:attributes="name view/filecontent_widget/name;
                                       id view/filecontent_widget/name"
                       size="30"
                       onChange="selectWidget('field.include_attachment', event)" />
              </td>
            </tr>
            <tr>
              <td></td>
              <td>
                <span tal:content="structure view/patch_widget" />
                <label style="font-weight: normal"
                       tal:content="view/patch_widget/label"
                       tal:attributes="for view/patch_widget/name">
                  patch
                </label>
              </td>
            </tr>
            <tr>
              <td style="text-align: right">
                <label tal:attributes="for view/attachment_description_widget/name">
                  Description
                </label>
              </td>
              <td>
                <span tal:content="structure view/attachment_description_widget" />
              </td>
            </tr>
          </tbody>
        </table>
      </fieldset>
      <div tal:condition="view/shouldShowEmailMeWidget">
        <span tal:content="structure view/email_me_widget" />
        <label style="font-weight: normal"
               tal:content="view/email_me_widget/label"
               tal:attributes="for view/email_me_widget/name">
            E-mail me about changes to this bug report
        </label>
      </div>
      <br />
      <div class="field">
        <input type="submit" name="FORM_SUBMIT" value="Save Changes" />
      </div>
  </form>
