= Openid.launchpad.dev Home Page =

When visiting the openid.launchpad.dev home page anonymously, the user
is presented with a login form:

    >>> browser.open('http://openid.launchpad.dev')
    >>> print browser.title
    Launchpad Login Service
    >>> print extract_text(find_tag_by_id(browser.contents, 'maincontent'))
    This is the Launchpad login service
    ...
    If you want to change any of your account's details, you can do so
    by logging in using the form beside.
    ...

However, if the user is logged in, they are presented with some
information about their account.

    >>> browser.getControl(name='field.email').value = 'mark@hbd.com'
    >>> browser.getControl(name='field.password').value = 'test'
    >>> browser.getControl('Continue').click()

    >>> print browser.title
    Welcome Mark Shuttleworth


== Previously Visited Sites ==

When the person is logged in and points his browser to openid.launchpad.dev,
he will also see a list containing up to 10 sites in which he authenticated
recently, using the OpenID service.

    >>> from zope.component import getUtility
    >>> from canonical.launchpad.interfaces.person import IPersonSet
    >>> from canonical.launchpad.interfaces.openidserver import (
    ...     IOpenIDRPSummarySet)
    >>> login(ANONYMOUS)
    >>> summary = getUtility(IOpenIDRPSummarySet).record(
    ...     getUtility(IPersonSet).getByName('sabdfl').account,
    ...     'http://example.com/')
    >>> logout()

    >>> browser.reload()
    >>> print extract_text(find_tag_by_id(browser.contents, 'visited-sites'))
    Sites you last authenticated to
    Site                 First authenticated  Last authenticated
    http://example.com/  2009-03-02           2009-03-02     


== Editing User Details ==

The user can edit their details from this page:

    >>> browser.getLink("edit").click()
    >>> browser.getControl("Display Name").value = "sabdfl"
    >>> browser.getControl("Change").click()
    >>> print browser.url
    http://openid.launchpad.dev/
    >>> print browser.title
    Welcome sabdfl


== Logging Out ==

From the Home page, the user can also log out:

    >>> browser.open('http://openid.launchpad.dev')
    >>> browser.getControl('Log Out').click()
    >>> print browser.url
    http://openid.launchpad.dev/
    >>> print browser.title
    Launchpad Login Service
