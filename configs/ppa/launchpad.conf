# identify the component configuration used to define the site:
site-definition site.zcml

# Turn off Zope3 developer mode.
devmode off

# number of bytecode instructions to execute between checks for
# interruptions (SIGINTR, thread switches):
interrupt-check-interval 200

<server>
  type HTTP
  address 9020
</server>

# non-persistent in-memory storage
<zodb>
  <mappingstorage/>
</zodb>

<accesslog>
  <logfile>
    path /srv/launchpad.net/logs/launchpad-access.log
  </logfile>
</accesslog>

<eventlog>
  <logfile>
    path /srv/launchpad.net/logs/launchpad.log
  </logfile>
</eventlog>

<canonical default>
    dbname launchpad_prod
    dbhost jubany.ubuntu.com
    show_tracebacks false
    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.net
        db_statement_timeout 8000
        <launchpad_session>
            dbuser session
            dbname session_prod
        </launchpad_session>
        <launchpad_errorreports>
            errordir /srv/launchpad.net/logs
            oops_prefix P
            copy_to_zlog false
        </launchpad_errorreports>
        <virtual_hosts>
            use_https yes
            <mainsite>
                hostname launchpad.net
                althostnames localhost, www.launchpad.net
            </mainsite>
            <blueprints>
                hostname blueprints.launchpad.net
            </blueprints>
            <code>
                hostname code.launchpad.net
            </code>
            <translations>
                hostname translations.launchpad.net
            </translations>
            <bugs>
                hostname bugs.launchpad.net
            </bugs>
            <answers>
                hostname answers.launchpad.net
            </answers>
            <openid>
                hostname login.launchpad.net
            </openid>
            <shipitubuntu>
                hostname shipit.ubuntu.com
            </shipitubuntu>
            <shipitkubuntu>
                hostname shipit.kubuntu.org
            </shipitkubuntu>
            <shipitedubuntu>
                hostname shipit.edubuntu.org
            </shipitedubuntu>
            <xmlrpc>
                hostname xmlrpc.launchpad.net
                rooturl https://launchpad.net/
            </xmlrpc>
        </virtual_hosts>
    </launchpad>

    <librarian>
        dbuser librarian
        upload_host mizuho.ubuntu.com
        upload_port 9090
        download_host mizuho.ubuntu.com
        download_port 8000
        download_url http://launchpadlibrarian.net/
        buildd_download_url http://launchpadlibrarian.net/
        <librarian_server>
            logfile /srv/launchpad.net/logs/librarian.log
            root /tmp/fatsam
            launch no
            spew no
        </librarian_server>
        <librarian_gc>
            dbuser librariangc
        </librarian_gc>
    </librarian>

    <zopeless>
        send_email true
        smtp_host localhost
        smtp_port 25
    </zopeless>

    <gpghandler>
        host keyserver.internal
        public_host keyserver.ubuntu.com
        port 11371
    </gpghandler>

    <buildsequencer>
        mailproblemsto launchpad-error-reports@lists.canonical.com
        launch no
        logfile -
        <buildsequencer_job slave_scanner>
            command cronscripts/buildd-slave-scanner.py
            mindelay 20
        </buildsequencer_job>
        <buildsequencer_job queue_builder>
            command cronscripts/buildd-queue-builder.py
            mindelay 900
        </buildsequencer_job>
    </buildsequencer>

    <uploader>
        dbuser uploader
        default_recipient_name Launchpad PPA
        default_recipient_address launchpad@localhost
        default_sender_name Launchpad PPA
        default_sender_address no_reply@launchpad.net
    </uploader>

    <uploadqueue>
        dbuser queued
    </uploadqueue>

    <builddmaster>
        dbuser fiera
        # Suppressing binary upload notifications.
        uploader scripts/process-upload.py -Mvv -C buildd
        root /srv/launchpad.net/builddmaster/
        socket_timeout 600
        # Allowing build notifications
        send_build_notification yes
        notify_owner yes
    </builddmaster>

    <personalpackagearchive>
        root /srv/launchpad.net/ppa-archive/
        base_url http://ppa.launchpad.net/
    </personalpackagearchive>


# Unused but required sections

    <malone>
        bugmail_error_from_address noreply@bugs.launchpad.ubuntu.com
    </malone>

    <shipit>
    </shipit>

    <distributionmirrorprober>
        dbuser distributionmirror
    </distributionmirrorprober>

    <zeca>
        root /var/tmp/zeca
    </zeca>

    <statistician>
        dbuser statistician
    </statistician>

    <gina>
        dbuser gina
    </gina>

    <rosetta>
        <rosettaadmin>
        </rosettaadmin>
    </rosetta>

    <supermirror>
        dbuser supermirror
    </supermirror>

    <branchscanner>
        dbuser branchscanner
    </branchscanner>

    <codehosting>
        authserver http://macquarie.warthogs.hbd.com:8999/v2/
    </codehosting>

    <mailman>
        <mailman-build>
        </mailman-build>
    </mailman>

</canonical>

