# identify the component configuration used to define the site:
site-definition site.zcml

# number of bytecode instructions to execute between checks for
# interruptions (SIGINTR, thread switches):
interrupt-check-interval 200

<server>
  type HTTP
  address 11030
</server>

# non-persistent in-memory storage
<zodb>
  <mappingstorage/>
</zodb>

<accesslog>
  <logfile>
    path /srv/beta.launchpad.net/launchpad/logs/launchpad-access.log
  </logfile>
</accesslog>

<eventlog>
  <logfile>
    path /srv/beta.launchpad.net/launchpad/logs/launchpad.log
  </logfile>
</eventlog>

<canonical default>
    dbname launchpad_staging
    dbhost asuka.ubuntu.com
    # Might want this on, but for now test what will be seen in production
    show_tracebacks false
    bounce_address bounces@canonical.com

    <launchpad>
        restrict_to_team launchpad
        dbuser launchpad
        root_url https://beta.launchpad.net/
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.beta.launchpad.net
        main_hostname beta.launchpad.net
        blueprint_hostname blueprints.beta.launchpad.net
        blueprint_root_url https://blueprints.beta.launchpad.net/
        shipitubuntu_hostname ubuntu.shipit.beta.launchpad.net,shipit.beta.launchpad.net
        shipitubuntu_root_url https://ubuntu.shipit.betea.launchpad.net/
        shipitkubuntu_hostname kubuntu.shipit.beta.launchpad.net
        shipitkubuntu_root_url https://kubuntu.shipit.beta.launchpad.net/
        shipitedubuntu_hostname edubuntu.shipit.beta.launchpad.net
        shipitedubuntu_root_url https://edubuntu.shipit.beta.launchpad.net/
        xmlrpc_hostname xmlrpc.beta.launchpad.net
        db_statement_timeout 18000
        <launchpad_session>
            dbuser session
            dbname session_staging
            cookie staging
        </launchpad_session>
        <launchpad_errorreports>
            errordir /srv/beta.launchpad.net/launchpad/logs
            oops_prefix B
            copy_to_zlog false
        </launchpad_errorreports>
    </launchpad>

    <productreleasefinder>
        dbuser productreleasefinder
    </productreleasefinder>

    <librarian>
        dbuser librarian
        upload_host asuka.ubuntu.com
        upload_port 58090
        download_host asuka.ubuntu.com
        download_port 9040
        download_url http://librarian.staging.launchpad.net/
        buildd_download_url http://librarian.staging.launchpad.net/
        <librarian_server>
            logfile /srv/launchpad.ubuntu.com/staging-logs/librarian.log
            root /srv/launchpad.ubuntu.com/staging/librarian
            launch no
            spew no
            upstream_host librarian.ubuntu.com
            upstream_port 80
        </librarian_server>
        <librarian_gc>
            dbuser librariangc
        </librarian_gc>
    </librarian>

    <malone>
        # The From address for Malone email interface errors
        bugmail_error_from_address noreply@bugs.staging.launchpad.net
        buglist_batch_size 50
    </malone>

    <shipit>
        # XXX: Even though this is empty, it must be kept so that the default
        # values are used. See https://launchpad.net/bugs/50033 for details.
        # Guilherme Salgado, 2006-06-16
        switch_to_edgy true
    </shipit>

    <rosetta>
        <poimport>
            dbuser poimport
        </poimport>
        <rosettaadmin>
            dbuser rosettaadmin
        </rosettaadmin>
    </rosetta>

    <distributionmirrorprober>
        dbuser distributionmirror
        releases_file_list_url http://releases.ubuntu.com/.manifest
        timeout 30
    </distributionmirrorprober>

    <buildsequencer>
        launch no
    </buildsequencer>

    <cveupdater>
        dbuser cve
    </cveupdater>

    <zopeless>
        send_email no
        smtp_host localhost
        smtp_port 25
    </zopeless>

    <gpghandler>
        host keyserver.ubuntu.com 
        port 11371
    </gpghandler>

    <statistician>
        dbuser statistician
    </statistician>

    <tickettracker>
        dbuser tickettracker
    </tickettracker>

    <uploadqueue>
        dbuser queued
    </uploadqueue>

    <karmacacheupdater>
        # Configuration used to run the karmacache updater.
        dbuser karma
    </karmacacheupdater>

    <targetnamecacheupdater>
        # Configuration used to run the bugtask targetnamecache updater.
        dbuser targetnamecacheupdater
    </targetnamecacheupdater>

    <expiredmembershipsflagger>
        dbuser teammembership
    </expiredmembershipsflagger>

</canonical>


# This is the config used by the test runner.
<canonical testrunner>
    dbname launchpad_ftest
    show_tracebacks true
    # chunkydiff may be turned off temporarily to help diagnose test
    # failures, but please don't commit this setting to rocketfuel.
    chunkydiff on

    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        root_url http://launchpad.dev/
        main_hostname launchpad.dev,localhost
        blueprint_hostname features.launchpad.dev
        blueprint_root_url http://features.launchpad.dev/
        xmlrpc_hostname xmlrpc.staging.launchpad.net
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.net
        <launchpad_errorreports>
            errordir /var/tmp/lperr.test
            oops_prefix T
            copy_to_zlog false
        </launchpad_errorreports>
        <launchpad_session>
            dbuser session
            dbname launchpad_ftest
        </launchpad_session>
    </launchpad>
    <librarian>
        dbuser librarian
        upload_host localhost
        upload_port 59090
        download_host localhost
        download_port 58000
        download_url http://localhost:58000/
        buildd_download_url http://localhost:58000/
        <librarian_server>
            launch no
            root /var/tmp/fatsam.test
        </librarian_server>
    </librarian>
    <zopeless>
        send_email false
    </zopeless>

    <supermirror>
        dbuser supermirror
        branchesdest /srv/sm-ng/mirrors
        masterlock /srv/sm-ng/masterlock
        branchlistsource http://gangotri.ubuntu.com:9000/supermirror-pull-list.txt
    </supermirror>
</canonical>
