# identify the component configuration used to define the site:
site-definition site.zcml

# number of bytecode instructions to execute between checks for
# interruptions (SIGINTR, thread switches):
interrupt-check-interval 200

<server>
  type HTTP
  address 8085
</server>

# For debugging purposes, you can use this publisher instead/as well
# (obviously if it's as well, use a different port number). If there's
# an exception, Zope will drop into pdb at the point of the exception.
<server>
  type PostmortemDebuggingHTTP
  address 8089
</server>

<server>
  type DebugLayerHTTP
  address 8086
</server>

##<server>
##  type FTP
##  address 8021
##</server>

# non-persistent in-memory storage
<zodb>
  <mappingstorage/>
</zodb>

<accesslog>
  # This sets up logging to both a file (access.log) and to standard
  # output (STDOUT).  The "path" setting can be a relative or absolute
  # filesystem path or the tokens STDOUT or STDERR.

  <logfile>
    path launchpad-access.log
  </logfile>

  <logfile>
    path STDOUT
  </logfile>
</accesslog>

<eventlog>
  # This sets up logging to both a file (z3.log) and to standard
  # output (STDOUT).  The "path" setting can be a relative or absolute
  # filesystem path or the tokens STDOUT or STDERR.

  <logfile>
    path launchpad.log
  </logfile>

  <logfile>
    path STDOUT
  </logfile>
</eventlog>

# Launchpad configuration. Note that we can specify multiple configurations
# in here. Currently, we have configurations named 'testrunner' (used
# by the testrunner), and 'default' (used by everything else)
#
# The section that is used can be specified by setting the LPCONFIG
# environment variable
#
<canonical default>
    # DB settings must still match launchpad-sql-configure-normal.zcml
    dbname launchpad_dev
    #dbhost localhost

    # Display tracebacks on error pages.
    # IMPORTANT: Set to false on production servers!
    show_tracebacks true

    # This is the email address used for the Errors-To: header on
    # all outgoing emails. At somepoint a bounce handler will be
    # installed here to detect failing email addresses and flag them
    # in the database.
    bounce_address bounces@canonical.com

    # PID files for various processes get created in this directory.
    # The format of filenames is %(lpconfig)s-%(service)s.pid, such as
    # default-librarian.pid
    pid_dir /tmp

    <launchpad>
        # PostgreSQL user the launchpad Zope3 instance connects as.
        dbuser launchpad

        # Root URL to a launchpad instance, used for generating URLs
        # inside of launchpad by urlparse.urljoin
        root_url http://localhost:8086/

        # Email address, to which all error reports are sent.
        # Messages should have distinct Subject: or Keywords: headers
        # so they can be filtered easily. Whenever code starts using this,
        # we probably need to setup a new Mailman topic in the
        # launchpad-error-reports mailing list or the error reports will be
        # lost.
        errors_address launchpad-error-reports@lists.canonical.com

        # Domain part of the bugs' email addresses. All email addresses in
        # this domain should get redirected to the MailIntoLaunchpad handler.
        bugs_domain bugs.launchpad.ubuntu.com
    </launchpad>

    <librarian>
        # Librarian configuration information for both client and server
        dbuser librarian
        upload_host localhost
        upload_port 58090
        download_host localhost
        download_port 58080
        <librarian_server>
            # Configuration used if we are running a librarian server.
            logfile -
            root /var/tmp/fatsam
            # If true, a Librarian server will be launched by the startup
            # script
            launch yes
            # Should Librarian twistd be run with --spew for debugging
            spew no
        </librarian_server>
    </librarian>

    <zopeless>
        # Configuration specific for code that is running in the Zopeless
        # environment. Hopefully this section will disappear when the
        # Zope and Zopeless environments grow closer.
        send_email no
        smtp_host localhost
        smtp_port 25
    </zopeless>

    <gpghandler>
        # home is the the current GNUPGHOME, it does not
        # require backup, the content must be rebuilt in runtime,
        # every time it's needed.
        home /var/tmp/gpg_home
        # host and port points to a reliable keyserver (aka ours
        # public one)
        host keyserver.ubuntu.com
        port 11371
    </gpghandler>

    <zeca>
        # Not needed for normal operation 
    </zeca>

    <trebuchet>
	dbuser trebuchet
	port 4280
        <trebuchet_server>
            # Configuration used if we are running a trebuchet server.
            # TODO: Does trebuchet actually need a root?
            root /var/tmp/trebuchet
            # If true, a Trebuchet server will be launched by the startup
            # script
            launch yes
            # Should Trebuchet twistd be run with --spew for debugging
            spew no
            # Path to the log file, or '-' for stdout.
            logfile -
        </trebuchet_server>
    </trebuchet>

</canonical>

# This is the config used by the test runner.
<canonical testrunner>
    dbname launchpad_ftest
    show_tracebacks true
    # chunkydiff may be turned off temporarily to help diagnose test
    # failures, but please don't commit this setting to rocketfuel.
    chunkydiff off

    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        root_url http://localhost:8086/
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.ubuntu.com
    </launchpad>
    <librarian>
        dbuser librarian
        upload_host localhost
        upload_port 59090
        download_host localhost
        download_port 58000
        <librarian_server>
            launch no
            root /var/tmp/fatsam.test
        </librarian_server>
    </librarian>
    <zopeless>
        send_email false
    </zopeless>
    <gpghandler>
        home /var/tmp/gpg_home
        host localhost 
        port 11371
    </gpghandler>
    <zeca>
        # where the pre-installed key-files will be copied to (every
        # initialization, see lib/zeca/ftest/harness.py)
        root /var/tmp/zeca
    </zeca>
</canonical>
