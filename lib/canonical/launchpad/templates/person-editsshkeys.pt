<tal:do-this-first condition="view/form_action" />
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
    i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>SSH keys</h1> 
    </metal:heading>

  <metal:leftportlets fill-slot="portlets_one">
  </metal:leftportlets>

  <metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure context/@@+portlet-details" />
  </metal:rightportlets>

  <div metal:fill-slot="main">

    <p>You need to register an SSH key with Launchpad to be able to publish
    your Bazaar code branches in the Bazaar supermirror. For more
    information, read about <a href="/+code/">The Bazaar</a>.
    </p>

    <p tal:condition="view/error_message" tal:content="view/error_message"
      class="error message">Error message.</p>
    
    <p tal:condition="view/info_message" tal:content="view/info_message"
      class="informational message">Informational message.</p>
    
    <div tal:repeat="sshkey context/sshkeys"> 
    <form name="remove" action="" method="POST">
    <input type="hidden" name="action" value="remove_ssh" />
    <input type="hidden" name="key" tal:attributes="value sshkey/id" />
    <dl>
    <dt>Key type</dt>
        <dd tal:content="sshkey/keytype/title">DSA</dd>
    <dt>Key text</dt>
        <dd style="overflow: auto;" tal:content="sshkey/keytext">aaaaAAAA...</dd>
    <dt>Comment</dt>
        <dd tal:content="sshkey/comment">foo@bar</dd>
    </dl>
    <input type="submit" value="Remove" />
    </form>
    </div>

    <div>
    <form name="add" action="" method="POST">
    <input type="hidden" name="action" value="add_ssh" />
    <h2>Add an SSH key</h2>
    <div>
        <label>Public key line</label>
        <div class="formHelp">
            Insert the contents of <code>~/.ssh/id_dsa.pub</code> or
            <code>~/.ssh/id_rsa.pub</code>.  Only SSH v2 keys are supported.
        </div>
        <textarea name="sshkey" width="30" height="6"></textarea>
        <input type="submit" value="Import Public Key">
    </form>
    </div>
    
  </div>
</body>
</html>
