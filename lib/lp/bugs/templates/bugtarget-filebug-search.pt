<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
>
<body>

  <metal:block fill-slot="head_epilogue">
    <tal:devmode condition="devmode">
      <script type="text/javascript"
              tal:define="lp_js string:${icingroot}/build"
              tal:attributes="src string:${lp_js}/bugs/filebug-dupefinder.js">
      </script>
    </tal:devmode>
  </metal:block>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-latestbugs|nothing" />
</metal:leftportlets>

<div metal:fill-slot="main">

  <tal:dupefinder-js condition="view/bugtarget">
    <tal:comment replace="nothing">
      We don't include this JavaScript on the front page yet, since it
      can't handle the front page's bugtarget-free-ness.
    </tal:comment>
    <script type="text/javascript" tal:condition="view/contextUsesMalone">
    </script>
  </tal:dupefinder-js>

      <div tal:condition="view/isPrivate" id="privacy" class="aside private"
      >This report will be private, though you can disclose it later.</div>
      <h1 id="page-title">Report a bug</h1>

<metal:not_uses_malone
    use-macro="context/@@+filebug-macros/not_uses_malone" />

<tal:uses_malone tal:condition="view/contextUsesMalone">
  <div metal:use-macro="context/@@launchpad_form/form">
    <table metal:fill-slot="widgets">

      <tal:product_widget
          tal:define="widget nocall:view/widgets/product|nothing"
          tal:condition="widget">
        <metal:widget metal:use-macro="context/@@launchpad_form/widget_row" />
      </tal:product_widget>

      <tal:bugtarget
          tal:define="widget nocall:view/widgets/bugtarget|nothing"
          tal:condition="widget">
        <metal:widget metal:use-macro="context/@@launchpad_form/widget_row" />
      </tal:bugtarget>

      <tal:hidden_tags tal:replace="structure view/widgets/tags/hidden" />

      <tr>
        <td colspan="2">
          <p>
            Please describe the bug in a few words, for example, "weather
            applet crashes on logout":
          </p>
        </td>
      </tr>
      <tal:title_widget tal:define="widget nocall:view/widgets/title">
        <tal:comment replace="nothing">
          The desire to have more control over the styling of this widget
          prevents us from using the widget_row macro here.
        </tal:comment>
        <td tal:define="field_name widget/context/__name__;
                        error python:view.getFieldError(field_name);
                        error_class python:error and 'error' or None;"
            tal:attributes="class error_class"
            style="text-align: left; padding-left: 5em;">
          <div>
            <input tal:replace="structure widget" />
          </div>
          <div class="message" tal:condition="error"
               tal:content="structure error">Error message</div>
          <p class="formHelp"
             tal:condition="widget/hint"
             tal:content="widget/hint">Some Help Text
          </p>
        </td>
        <td style="text-align: left;">
          <input tal:replace="structure view/actions/field.actions.search/render" />
          <span id="spinner" style="text-align: center; display: none;">
            <img src="/@@/spinner" />
          </span>
        </td>
      </tal:title_widget>
    </table>

    <div metal:fill-slot="buttons">
      <tal:comment replace="nothing">
        We add this to hide the standard action buttons.
      </tal:comment>
    </div>
  </div>

  <div id="possible-duplicates" style="text-align: left;">
  </div>
  <div id="filebug-form-container" style="display: none;">
  </div>

  <p>
    &#187;
    <a tal:attributes="href view/advanced_filebug_url"
    >Advanced reporting options</a>
    <a id="filebug-form-url"
        tal:attributes="href view/inline_filebug_form_url"
        style="display: none;"></a>
    <a id="duplicate-search-url"
        tal:attributes="href view/duplicate_search_url"
        style="display: none;"></a>
  </p>

  <tal:most-common-bugs condition="view/most_common_bugs">
    <h2>Most Frequently Reported Bugs</h2>

    <table class="listing" id="most-common-bugs">
      <thead>
        <tr><th colspan="2">Summary</th></tr>
      </thead>
      <tbody>
        <tr tal:repeat="bug view/most_common_bugs"
            tal:attributes="title bug/description/fmt:shorten/150"
            title="bug description goes here">
          <td class="amount" tal:content="bug/id" width="10%">1</td>
          <td>
            <a href="#"
               tal:content="bug/title"
               tal:attributes="href bug/fmt:url">
              Firefox doesn't work
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </tal:most-common-bugs>
</tal:uses_malone>


    </div>
  </body>
</html>
