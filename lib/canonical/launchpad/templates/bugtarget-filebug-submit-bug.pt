<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad">

<body>

<metal:heading fill-slot="pageheading">
  <h1>Has your bug already been reported?</h1>
</metal:heading>

<div metal:fill-slot="main">

  <div metal:use-macro="context/@@launchpad_form/form">

    <div metal:fill-slot="extra_info">

      <p class="informational message"
         tal:condition="not: view/similar_bugs">
        No similar bugs were found.
      </p>

      <tal:similar-bugs condition="view/similar_bugs">
        <h2 style="clear: both">
          <label><input type="radio" name="foobar" checked="checked" />
          Yes, it's one of the following:</label></h2>

        <div style="padding-left: 30px">
        <table class="listing" id="similar-bugs" style="clear: both">
          <thead>
            <tr><th colspan="4">Summary</th></tr>
          </thead>
          <tbody>
            <tr tal:repeat="bug view/similar_bugs"
                tal:attributes="title bug/description/fmt:shorten/500"
                title="bug description goes here">
              <td><input type="radio" name="this_is_my_bug"
                         tal:attributes="value string:${bug/id}; id string:this-is-my-bug-${bug/id}" /></td>
              <td class="amount">
                <label tal:content="bug/id" style="font-weight: normal"
                       tal:attributes="for string:this-is-my-bug-${bug/id}">1</label></td>
              <td width="100%">
                <label tal:content="bug/title" style="font-weight: normal"
                       tal:attributes="for string:this-is-my-bug-${bug/id}">
                  Bug title
                </label>
              </td>
              <td>
                <a href="#" tal:attributes="href bug/fmt:url">
                   <nobr>View details...</nobr>
                </a>
              </td>
            </tr>
          </tbody>
        </table>

        <script type="text/javascript">
        //alert(getFirstParentByTagAndClassName);
        </script>

        <div class="actions">
          <input tal:replace="structure view/actions/field.actions.this_is_my_bug/render" />
        </div>
        </div>

      </tal:similar-bugs>

    </div>

    <metal:widgets metal:fill-slot="widgets">

      <h2 style="clear: both">
        <label><input type="radio" name="foobar" />
        No, I'd like to report a new bug</label></h2>

      <div style="padding-left: 30px">
      <table class="form">

        <metal:basic_filebug_widgets
            metal:use-macro="context/@@+filebug-macros/basic_filebug_widgets" />

      </table>

      <div class="actions">
        <input tal:replace="structure view/actions/field.actions.submit_bug/render" />
      </div>
      </div>

    </metal:widgets>

    <div class="actions" metal:fill-slot="buttons">
    </div>

  </div>

</div>

</body>
</html>
