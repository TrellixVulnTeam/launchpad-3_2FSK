<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Products with Code</h1>
    </metal:heading>

<div metal:fill-slot="main"
     tal:define="batch_navigator view/listing">

  <tal:navigation replace="structure batch_navigator/@@+navigation-links-upper" />

  <table class="listing" id="products">
    <thead>
      <tr>
        <th>Product</th>
        <th>Branches</th>
        <th>Development Branch</th>
        <th>Last commit</th>
      </tr>
    </thead>
    <tbody>
      <tr tal:repeat="item batch_navigator/getViewableItems">
        <td><a tal:attributes="href item/product/fmt:url"
               tal:content="item/product/displayname">
          A Product
        </a></td>
        <td><span tal:replace="item/branch_count">1</span></td>
        <td>
          <tal:has_dev_branch condition="item/dev_branch|nothing">
          <a tal:attributes="href item/dev_branch/fmt:url;
                             title item/dev_branch/displayname"
             tal:content="item/dev_branch/name">
          name</a>
          <span tal:condition="item/imported">(imported)</span>
          </tal:has_dev_branch>
        </td>
        <td>
          <tal:has_commit condition="item/last_commit">
            <span tal:attributes="title item/last_commit/fmt:datetime"
                  tal:content="item/elapsed_time/fmt:approximateduration">
              sometime
              </span> ago
          </tal:has_commit>
        </td>
      </tr>
    </tbody>
  </table>

  <tal:navigation replace="structure batch_navigator/@@+navigation-links-lower" />

</div>

  </body>
</html>
