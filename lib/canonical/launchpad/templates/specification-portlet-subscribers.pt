<tal:subs define="subscriptions context/subscriptions">
  <div tal:condition="subscriptions" class="portlet">
    <h2>Subscribers</h2>
    <div class="portletBody">
      <tal:comment replace="nothing">
        This is messy, but the portlet has to convey both subscribers and
        whether or not they are essential. Also, in the case where a person
        can say if the subscription is essential, that subscription
        essentiality indicator needs to be clickable to edit, otherwise not.
        Hence all the duplication.
      </tal:comment>
      <div tal:repeat="subscription subscriptions">
        <a tal:condition="subscription/required:launchpad.Edit"
           tal:attributes="href subscription/fmt:url">
           <img tal:condition="subscription/essential"
             src="/@@/subscriber-essential" />
           <img tal:condition="not: subscription/essential"
             src="/@@/subscriber-inessential" />
        </a>
        <tal:no_edit condition="not: subscription/required:launchpad.Edit">
           <img tal:condition="subscription/essential"
             src="/@@/subscriber-essential" />
           <img tal:condition="not: subscription/essential"
             src="/@@/subscriber-inessential" />
        </tal:no_edit>
        <a tal:replace="structure subscription/person/fmt:link"/>
      </div>
    </div>
  </div>
</tal:subs>
