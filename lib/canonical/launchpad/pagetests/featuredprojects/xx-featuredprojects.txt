
= Featured Projects =

We maintain a list of featured projects, which are displayed on the home
page and managed via a special admin-only page.

   >>> MANAGELINK = "Manage featured project list"

== The home page listing ==

Featured projects are visible to everyone on the home page:

    >>> anon_browser.open('http://launchpad.dev/')
    >>> featured = find_tag_by_id(anon_browser.contents, 'featured-projects')
    >>> 'Featured projects' in extract_text(featured)
    True

Based on some sample data, we show that Ubuntu is a featured project:

    >>> featured = find_tag_by_id(anon_browser.contents, 'featured-projects')
    >>> anon_browser.getLink('Applets').url
    'http://launchpad.dev/applets'

== Adding a featured project ==

The people who do not have admin cannot see the link to administer featured
projects:

    >>> anon_browser.getLink(MANAGELINK)
    Traceback (most recent call last):
    ...
    LinkNotFoundError

People without privileges cannot either:

    >>> nopriv_browser = setupBrowser(auth="Basic no-priv@canonical.com:test")
    >>> nopriv_browser.open('http://launchpad.dev/')
    >>> nopriv_browser.getLink(MANAGELINK)
    Traceback (most recent call last):
    ...
    LinkNotFoundError

But administrators can:

    >>> admin_browser.open('http://launchpad.dev/')
    >>> admin_browser.getLink(MANAGELINK).click()
    >>> admin_browser.url
    'http://launchpad.dev/+featuredprojects'

People without privileges cannot visit this page:

    >>> nopriv_browser.open('http://launchpad.dev/+featuredprojects')
    Traceback (most recent call last):
    ...
    Unauthorized: ...

Administrators can add a project:

    >>> admin_browser.getControl('Add project').value = 'apache'
    >>> admin_browser.getControl('Update').click()
    >>> admin_browser.url
    'http://launchpad.dev/'
    >>> featured = find_tag_by_id(admin_browser.contents, 'featured-projects')
    >>> 'Apache' in extract_text(featured)
    True


== Removing a project ==

    >>> admin_browser.getLink(MANAGELINK).click()
    >>> admin_browser.getControl('Apache').click()
    >>> admin_browser.getControl('Update').click()
    >>> admin_browser.url
    'http://launchpad.dev/'
    >>> featured = find_tag_by_id(admin_browser.contents, 'featured-projects')
    >>> 'Apache' in extract_text(featured)
    False

