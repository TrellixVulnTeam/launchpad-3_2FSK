Advanced structural subscriptions
---------------------------------

There are advanced features for structural bug subscriptions.
These require a feature flag to be turned on for them to be accessible.

    >>> from lp.services.features.model import FeatureFlag, getFeatureStore
    >>> feature_store = getFeatureStore()
    >>> ignore = feature_store.add(FeatureFlag(
    ...     scope=u'default',
    ...     flag=u'malone.advanced-structural-subscriptions.enabled',
    ...     value=u'on', priority=1))
    >>> feature_store.flush()

Now when a user visits the +subscriptions page of a product they are given the
option to subscribe to add a new subscription

    >>> from canonical.launchpad.webapp import canonical_url
    >>> from lp.testing.sampledata import USER_EMAIL
    >>> login(USER_EMAIL)
    >>> product = factory.makeProduct()
    >>> logout()
    >>> user_browser.open(
    ...     canonical_url(product, view_name='+subscriptions'))
    >>> user_browser.getLink("Add a subscription")
    <Link text='Add a subscription' url='.../+subscriptions#'>
