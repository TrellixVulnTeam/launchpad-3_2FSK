<script type="text/javascript">
  function toggleFormVisibility(row_id) {
    row = document.getElementById(row_id)
    edit_icon = document.getElementById(row_id + "-edit")
    if (row.style.display=="none") {
      row.style.display = "table-row";
      edit_icon.setAttribute("src","/@@/treeExpanded")
    } else {
      row.style.display = "none";
      edit_icon.setAttribute("src", "/@@/treeCollapsed")
    }
    return false;
  }
</script>

<table tal:attributes="class python: context.duplicateof and 'duplicate listing' or 'listing'">
  <thead>
    <tr>
      <th>Affects</th>
      <th>Status</th>
      <th>Importance</th>
      <th>Assigned To</th>
    </tr>
  </thead>

  <tbody>
    <tal:bugtask-or-nomination repeat="task_or_nom view/getBugTasksAndNominations">
      <tal:block content="structure task_or_nom/@@+bugtasks-and-nominations-table-row" />
    </tal:bugtask-or-nomination>
  </tbody>

</table>

<div style="text-align: right; margin-bottom: 1em;"
     tal:define="current_bugtask view/currentBugTask">

  Also affects:
  <span style="white-space: nowrap">
      <img src="/@@/add" alt="+" />
      <a tal:attributes="href string:${current_bugtask/fmt:url}/+choose-affected-product"
         title="Mark this bug as occurring upstream">
        Upstream&hellip;
      </a>
  </span>

  <span style="white-space: nowrap">
      <img src="/@@/add" alt="+" />
      <a tal:attributes="href string:${current_bugtask/fmt:url}/+distrotask"
         title="Mark this bug as occurring in a distro package">
        Distribution&hellip;
      </a>
  </span>

</div>
