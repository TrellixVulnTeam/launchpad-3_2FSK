<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
  >
<body>
    <tal:heading metal:fill-slot="heading">
      <h1 tal:condition="context/enabled"
          tal:replace="structure view/displayname_edit_widget">
        PPA for user
      </h1>
      <h1 tal:condition="not: context/enabled"
          tal:content="CONTEXTS/fmt:pagetitle"
          class="disabled">
        PPA for user
      </h1>
    </tal:heading>
    <tal:main metal:fill-slot="main"
         tal:define="archive_active view/has_sources;
                     archive_label  view/archive_label;"
         tal:attributes="class string:archive">

      <div class="top-portlet" style="padding-top:0.5em;">

        <p tal:condition="not: context/enabled"
           style="clear: right;" class="warning message">
          This archive has been disabled.
        </p>

        <div id="edit-description"
          tal:content="structure view/archive_description_html"
          />
      </div>

      <div class="portlet" id="upload-hint"
           tal:condition="context/required:launchpad.Append">
        <h2>Uploading packages to this PPA</h2>
        <p>You can upload packages to this PPA using:</p>
        <p><tt>dput <tal:ppa-ref replace="view/ppa_reference"
                      >ppa:cprov/ppa</tal:ppa-ref> &lt;source.changes&gt;</tt>
              (<a href="https://help.launchpad.net/Packaging/PPA/Uploading"
                 >Read about uploading</a>)</p>
      </div>

      <div class="yui-gc">

        <div class="yui-u first">
          <tal:ppa-install tal:condition="context/is_ppa">
            <metal:ppa-install
              use-macro="context/@@+macros/ppa-install-portlet" />
          </tal:ppa-install>
          <tal:package-copy-request-list tal:condition="context/is_copy">
            <metal:package-copy-request-list
              use-macro="context/@@+macros/package-copy-request-list" />
          </tal:package-copy-request-list>
        </div>

        <div class="yui-u"><div class="portlet">
          <h2><tal:archive_label replace="archive_label" /> statistics</h2>
          <dl tal:define="num_updates view/num_updates_over_last_days;
                          pkg_build_counts view/num_pkgs_building">
            <dt>Activity</dt>
            <dd><span tal:replace="num_updates">10</span>
              update<tal:plural content="string:s"
                                condition="python:num_updates!=1"/>
              added during the past month.</dd>
            <dd tal:condition="pkg_build_counts/total">
              Currently
              <a tal:attributes="href context/menu:overview/builds_building/fmt:url"
                 tal:omit-tag="not:pkg_build_counts/building">
              <span tal:replace="pkg_build_counts/building">2</span>
              package<tal:plural content="string:s"
                                 condition="python:pkg_build_counts['building']!=1"
                       /> building</a> and
              <a tal:attributes="href context/menu:overview/builds_pending/fmt:url"
                 tal:omit-tag="not:pkg_build_counts/waiting">
              <span tal:replace="pkg_build_counts/waiting">2</span>
              package<tal:plural content="string:s"
                                 condition="python:pkg_build_counts['waiting']!=1"
                       />
              waiting to build</a>.</dd>
          </dl>
        </div></div>

      </div><!-- yui-gc -->

      <div class="portlet" tal:condition="archive_active">
        <h2>Overview of all packages published in
          <form class="package-search-filter" action="" method="GET"
                style="display:inline;font-size:90%">
            <tal:series_filter
              replace="structure view/plain_series_filter_widget" />
            <input type="submit" value="Filter" />
          </form>
        </h2>

        <div style="padding-top: 1em;" tal:define="batch view/batched_sources">

          <tal:navigation_top
            replace="structure view/batchnav/@@+navigation-links-upper" />

          <table class="listing sortable" id="packages_list"
                 tal:condition="batch">
            <thead>
              <tr>
                <th>Package</th>
                <th>Version</th>
                <th>Uploaded by</th>
              </tr>
            </thead>
            <tbody>
              <tr tal:repeat="publishing batch">
                <td>
                  <img src="/@@/package-source" />
                  <tal:source_name replace="publishing/sourcepackagerelease/name">
                    foo
                  </tal:source_name>
                </td>
                <td tal:define="
                  version_name publishing/meta_distroseriessourcepackagerelease/version;"
                    tal:content="version_name">
                  2.0.39</td>
                <td tal:define="spr publishing/sourcepackagerelease;
                                signer spr/dscsigningkey/owner/fmt:link|string:no signer">
                    <span tal:replace="structure signer">Joe Bloggs</span>
                    <tal:date_published
                      condition="publishing/datepublished">
                    (<span 
                      tal:replace="publishing/datepublished/fmt:approximatedate">
                       2007-08-01</span>)
                    </tal:date_published>
                </td>

              </tr>
            </tbody>
          </table>

          <tal:navigation_bottom
            replace="structure view/batchnav/@@+navigation-links-lower" />

          <div id="empty-result"
               tal:define="name_filter view/specified_name_filter|nothing"
               tal:condition="not: batch">
            No matching package for '<tal:name_filter replace="name_filter" />'.
          </div>

        </div>
      </div>

    </tal:main>

    <tal:side metal:fill-slot="side">
      <tal:menu replace="structure view/@@+global-actions" />
      <metal:build-status-summary
        use-macro="context/@@+macros/latest-updates-portlet" />
    </tal:side>

  </body>
</html>
