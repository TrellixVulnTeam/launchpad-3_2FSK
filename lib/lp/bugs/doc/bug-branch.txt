= Bugs and Branches =

Branches can be linked to Bugs, to track work in progress on branches,
and when fixes are committed.

    >>> from lp.bugs.interfaces.bugbranch import IBugBranchSet


== BugBranch ==

BugBranch links a bug and a branch.

    >>> from lp.bugs.interfaces.bug import IBugSet
    >>> from lp.registry.interfaces.person import IPersonSet
    >>> from lp.code.interfaces.branchlookup import IBranchLookup

    >>> login("no-priv@canonical.com")

    >>> bugset = getUtility(IBugSet)
    >>> bug = bugset.get(1)
    >>> branch = getUtility(IBranchLookup).get(10)


== Getting bug branches associated with multiple bugs ==

Sometimes we want to get the associated bug branch links for a set of bugs.
The getBugBranchesForBugs method can do this.

Firstly we need to get the branches.  We'll look up the relationships
for bugs 1, 2, 3 and 4.

    >>> bugtasks = list(getUtility(IBugSet).get(1).bugtasks)
    >>> bugtasks.extend(getUtility(IBugSet).get(2).bugtasks)
    >>> bugtasks.extend(getUtility(IBugSet).get(3).bugtasks)
    >>> bugtasks.extend(getUtility(IBugSet).get(4).bugtasks)
    >>> bugbranches2 = getUtility(IBugBranchSet).getBugBranchesForBugTasks(
    ...     bugtasks)
    >>> for bugbranch2 in sorted(bugbranches2,
    ...                         key=lambda b: (b.branch.id, b.bug.id)):
    ...     print "%s <-> %s" % (bugbranch2.branch.unique_name, bugbranch2.bug.id)
    ~name12/firefox/main <-> 1
    ~name12/firefox/main <-> 4
    ~mark/firefox/release-0.9.2 <-> 1
    ~mark/firefox/release-0.9.2 <-> 4

