<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>


<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-actions" />
</metal:rightportlets>

  <div metal:fill-slot="main">

    <tal:block condition="view/setUpAssignedBugTasksToShow" />

    <h1>Bugs Assigned to <span tal:replace="context/browsername" /></h1>

    <p tal:condition="not: view/assignedBugsToShow">No bugs have been 
    assigned to <span tal:replace="context/browsername" /> or to any 
    package/product (s)he maintains.</p>

    <tal:block tal:condition="view/assignedBugsToShow">

    <div class="formHelp">This page is a summary of the most recent bugs
      assigned to <span tal:replace="context/displayname" />.
      You can also see the
      <a tal:attributes="href string:/malone/assigned/?name=${context/name}">
        whole list</a> of bugs assigned to him(her) if you want to.
    </div>
    <br />

    <div tal:condition="view/assignedTasks">The most recent bugs assigned
      directly to <span tal:replace="context/browsername" />.
    </div>

    <table tal:condition="view/assignedTasks"
           class="listing lpListing rowNavigation" width="90%">
      <thead>
        <tr>
          <th>#</th>
          <th>title</th>
          <th>upstream / package</th>
          <th>status</th>
          <th>priority</th>
          <th>severity</th>
        </tr>
      </thead>

      <tr tal:repeat="bugtask view/assignedTasks" class="rowLinkified">
        <tal:block tal:define="url bugtask/bug/fmt:url">
        <td><a tal:attributes="href url"><span tal:replace="bugtask/bug/id" /></a></td>
        <td tal:attributes="title bugtask/bug/summary">
          <a tal:attributes="href url"><span tal:replace="bugtask/bug/title" /></a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/product/displayname|default">-</a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/status/title">status</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/priority/title|default">-</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/severity/title|default">-</a></td>
        </tal:block>
      </tr>
    </table>
    <br />

    <div tal:condition="view/recentBugTasks">The most recent bugs assigned
      to one of the packages/products maintained by
      <span tal:replace="context/browsername" />.
    </div>

    <table tal:condition="view/recentBugTasks"
           class="listing lpListing rowNavigation" width="90%">
      <thead>
        <tr>
          <th>#</th>
          <th>title</th>
          <th>upstream / package</th>
          <th>status</th>
          <th>priority</th>
          <th>severity</th>
        </tr>
      </thead>

      <tr tal:repeat="bugtask view/recentBugTasks" class="rowLinkified">
        <tal:block tal:define="url bugtask/bug/fmt:url">
        <td><a tal:attributes="href url"><span tal:replace="bugtask/bug/id" /></a></td>
        <td tal:attributes="title bugtask/bug/summary">
          <a tal:attributes="href url"><span tal:replace="bugtask/bug/title" /></a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/product/displayname|default">-</a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/status/title">status</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/priority/title|default">-</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/severity/title|default">-</a></td>
        </tal:block>
      </tr>
    </table>
    <br />

    <tal:block tal:condition="request/lp:person">
    <tal:block tal:define="bugTasksWithSharedInterest view/bugTasksWithSharedInterest"
               tal:condition="bugTasksWithSharedInterest">

    <div>These are the most recent bugs that you and 
      <span tal:replace="context/browsername" /> probably share some
      interest.
    </div>

    <table class="listing lpListing rowNavigation" width="90%">
      <tr>
        <th>#</th>
        <th>title</th>
        <th>upstream / package</th>
        <th>status</th>
        <th>priority</th>
        <th>severity</th>
      </tr>

      <tr tal:repeat="bugtask bugTasksWithSharedInterest" class="rowLinkified">
        <tal:block tal:define="url bugtask/bug/fmt:url">
        <td><a tal:attributes="href url"><span tal:replace="bugtask/bug/id" /></a></td>
        <td tal:attributes="title bugtask/bug/summary">
          <a tal:attributes="href url"><span tal:replace="bugtask/bug/title" /></a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/product/displayname|default">-</a></td>
        <td><a tal:attributes="href url" 
               tal:content="bugtask/status/title">status</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/priority/title|default">-</a></td>
        <td><a tal:attributes="href url"
               tal:content="bugtask/severity/title|default">-</a></td>
        </tal:block>
      </tr>
    </table>
    </tal:block>
    </tal:block>

    </tal:block>

  </div>

</body>
</html>
