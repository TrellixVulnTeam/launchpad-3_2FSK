<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
    <title metal:fill-slot="title">Package Search</title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Launchpad style sheet -->
    <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <h1>Package search</h1>

    <form method="POST" action=".">
    <input type="text" name="text">
    <input type="submit">
    </form>

    <div tal:condition="view/searchrequested"
         tal:omit-tag>

      <div tal:define="binpkgs view/searchresults">
        <span tal:repeat="package binpkgs" tal:omit-tag>
            
            <h2 tal:content="package/name" />

            <div style="margin-left: 100px;"> 
            <p tal:content="package/summary"
               class="documentDescription" />

            <p tal:content="package/description" />
            <table>
               <tr tal:repeat="release package/distroreleases">
                   <td tal:content="release/distroreleasename" />
                   <td>
                   <table>
                       <tr tal:repeat="version release/versions">
                           <td tal:content="version/version" /> 
                           <td>
                               <span tal:repeat="build version/builds"
                               tal:omit-tag>
				   <!-- If searching from distribution context -->
				   <a
				   tal:condition="not:view/launchbag/distrorelease"
                                   tal:content="build/processorfamilyname"
                                   tal:attributes="href
				   string:../${release/distroreleasename}/${build/distroarchrelease/architecturetag}/${package/name}"
                                   />,
				   <!-- If searching from distrorelease context -->
                                   <a
				   tal:condition="view/launchbag/distrorelease"
                                   tal:content="build/processorfamilyname"
                                   tal:attributes="href
				   string:../${build/distroarchrelease/architecturetag}/${package/name}"
                                   />,
				   <!-- Daniel Debonzi 20050105-->
				   <!-- Old link. Changed by me until we discuss if  -->
				   <!-- its gonna be used like this. -->
				   <!-- string:/soyuz/packages/${build/id}" -->
                                </span>
                           </td>
                        </tr>
                    </table>
                    </td>
                </tr>
            </table>

            </div>


        </span>
      </div>

    </div>

</div>
</body>
</html>
