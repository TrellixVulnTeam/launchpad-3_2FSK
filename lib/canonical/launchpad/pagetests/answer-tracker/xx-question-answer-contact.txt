= Answer Contacts =

Each product and distros can have answer contacts. Answer contacts
receive notifications for new questions as well as changes to existing
ones.

The list of answer contacts is displayed in the 'Answer Contact'
portlet which is available on the 'Answers' facet of the product or
distro.

    >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
    >>> browser.open('http://launchpad.dev/ubuntu/+questions')
    >>> from BeautifulSoup import BeautifulSoup
    >>> soup = BeautifulSoup(browser.contents)
    >>> portlet = soup.first('div', id='portlet-answer-contacts')
    >>> portlet.first('h2')
    <h2>Answer contacts for Ubuntu</h2>
    >>> portlet.first('p')
    <p>
      <i>There are no answer contacts.</i>
    </p>

Anybody can become an answer contact. To register as an answer contact,
the user clicks on the 'Set answer Contact' link:

    >>> browser.getLink('Set answer contact').click()
    >>> soup = BeautifulSoup(browser.contents)
    >>> soup.first('h1')
    <h1>Manage answer contacts</h1>

That page displays a series of checkboxes. One for the user and one for
each team that user is a member of. Both direct and implicit team
memberships are listed.

    >>> browser.getControl(
    ...     name='field.answer_contact_teams').options
    ['landscape-developers', 'name18', 'name20']

The user can select any of these checkboxes to register himself or one
of his team as an answer contact. In our case, the user decides to
register himself, the Landscape Developers team and the Ubuntu Gnome Team
(which he is only implicitely subscribed).

    >>> browser.getControl(
    ...     "I want to be an answer contact for Ubuntu").selected = True
    >>> browser.getControl("Landscape Developers").selected = True
    >>> browser.getControl("Ubuntu Gnome Team").selected = True
    >>> browser.getControl('Continue').click()

Confirmation of the answer contact registrations are displayed and the
new answer contacts appear in the 'Answer Contacts' portlet:

    >>> soup = BeautifulSoup(browser.contents)
    >>> for tag in soup.fetch('div', 'informational message'):
    ...     print tag.renderContents()
    You have been added as an answer contact for Ubuntu.
    Landscape Developers has been added as an answer contact for Ubuntu.
    Ubuntu Gnome Team has been added as an answer contact for Ubuntu.

    >>> soup.first('div', id='portlet-answer-contacts').first('ul')
     <ul class="person">
      <li>
        <a href=".../~landscape-developers">Landscape Developers</a>
      </li>
      <li>
        <a href=".../~name12">Sample Person</a>
      </li>
      <li>
        <a href=".../~name18">Ubuntu Gnome Team</a>
      </li>
    </ul>

To remove oneself from the answer contacts, the user uses the same
'Set answer contact' link and uncheck himself or the team he want to remove
from the answer contact list.

    >>> browser.getLink('Set answer contact').click()
    >>> browser.getControl(
    ...     "I want to be an answer contact for Ubuntu").selected
    True
    >>> browser.getControl("Landscape Developers").selected
    True
    >>> browser.getControl("Landscape Developers").selected = False
    >>> browser.getControl("Ubuntu Gnome Team").selected
    True
    >>> browser.getControl("Ubuntu Gnome Team").selected = False
    >>> browser.getControl('Continue').click()

A confirmation message is displayed:

    >>> soup = BeautifulSoup(browser.contents)
    >>> for tag in soup.fetch('div', 'informational message'):
    ...     print tag.renderContents()
    Landscape Developers has been removed as an answer contact for Ubuntu.
    Ubuntu Gnome Team has been removed as an answer contact for Ubuntu.

Since answer contacts are notified of changes to questions, they are also
listed in the 'Also notified' list in the 'Subscribers' portlet on a
question.

    >>> browser.open(
    ...     'http://launchpad.dev/ubuntu/+question/7')
    >>> soup = BeautifulSoup(browser.contents)
    >>> portlet = soup.first('div', id='question-subscribers')
    >>> also_notified = portlet.first('b')
    >>> also_notified
    <b>Also notified:</b>
    >>> also_notified.findNextSibling('ul')
    <ul class="person">
      <li>
        <a href=".../~name12">Sample Person</a>
      </li>
    </ul>
