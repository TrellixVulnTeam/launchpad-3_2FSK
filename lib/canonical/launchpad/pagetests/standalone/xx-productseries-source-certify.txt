Check that we can approve an import for sync without having to review
the Product.

We use the david.allouche@canonical.com user for this test, because it is
member of vcs-imports and not a member of admins.

Check the the +source form loads and that the import status is the
expected value.

  >>> browser.addHeader('Authorization',
  ...     'Basic david.allouche@canonical.com:test')
  >>> browser.open('http://launchpad.dev/products/a52dec/trunk/+source')
  >>> print find_main_content(browser.contents)
  <...
  <h2>Import Status</h2>
  <p>The current import status is: <b>Testing</b>. </p>
  ...

Since we are a VCS imports tema member, there is an extra action
button to allow us to approve imports.

  >>> browser.getControl('Approve import for production and publication')
  <SubmitControl ...>

If we remove the RCS details, we will get an error when trying to
certify the import:

  >>> browser.getControl('No revision control system, or Bazaar').click()
  >>> browser.getControl(
  ...     'Approve import for production and publication').click()
  >>> print browser.url
  http://launchpad.dev/products/a52dec/trunk/+source
  >>> for tag in find_tags_by_class(browser.contents, 'error'):
  ...     print tag
  <p class="error message">There is 1 error.</p>
  <p class="error message">Can not certify import without RCS details.</p>


If we have correct details, we can approve the build for production:

  >>> browser.getControl('CVS').click()
  >>> browser.getControl('Repository root').value = (
  ...     ':pserver:anonymous@cvs.sourceforge.net:/cvsroot/liba52')
  >>> browser.getControl('Module').value = 'a52dec'
  >>> browser.getControl('Branch name').value = 'MAIN'
  >>> browser.getControl(
  ...     'Approve import for production and publication').click()
  >>> print browser.url
  http://launchpad.dev/products/a52dec/trunk

Check that that import status was indeed updated.

  >>> print find_main_content(browser.contents)
  <...
  <td><b>Bazaar Status:</b></td>
  <td>Processing</td>
  ...

