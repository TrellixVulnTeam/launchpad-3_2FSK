<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main">

  <h1>Applications and packages translated</h1>

  <tal:block define="history view/batchnav/currentBatch">

    <tal:block condition="history">

      <div class="lesser" id="top-navigation">
        <tal:navigation content="structure view/batchnav/@@+navigation-links-upper" />
      </div>

      <table class="listing">
        <thead>
          <tr>
            <th>Translation file</th>
            <th>Untranslated</th>
            <th>Needs review</th>
            <th>Latest translation</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="record history">
            <tal:block define="translationmessage record/latest_message">
            <td><a tal:content="record/pofile/title"
                   tal:attributes="href string:${record/pofile/fmt:url}/+filter?${view/person_filter_querystring}">foo bar in package bla</a>
            </td>
            <td><a tal:content="record/pofile/untranslatedCount"
                   tal:attributes="href string:${record/pofile/fmt:url}/+translate?show=untranslated"
                   class="untranslated-count"
                   >17</a>
            </td>
            <td><a tal:content="record/pofile/unreviewedCount"
                   tal:attributes="href string:${record/pofile/fmt:url}/+translate?show=new_suggestions"
                   class="unreviewed-count"
                   >17</a>
            </td>
            <td style="padding-left: 2em;">
              <em
                tal:attributes="title record/date_last_touched/fmt:datetime"
                tal:content="record/date_last_touched/fmt:approximatedate"
                style="margin-left: -2em;" />
              <div tal:content="translationmessage/potmsgset/singular_text" />
              <div
                tal:condition="python:not(view.should_display_message(translationmessage))">
                <strong>For privacy reasons this translation is not visible to
                 anonymous visitors.  To see it,
                <a href="+login">log in</a> first.</strong></div>
              <div
                tal:condition="python:view.should_display_message(translationmessage)">
                <tal:block
                  tal:condition="translationmessage/msgstr0"
                  tal:content="translationmessage/msgstr0/translation" />
              </div>
            </td>
            </tal:block>
          </tr>
        </tbody>
      </table>

      <div class="lesser">
        <tal:navigation content="structure view/batchnav/@@+navigation-links-lower" />
      </div>

    </tal:block>

    <tal:block condition="not: history">
      <p><i>No translations recorded from
      <span tal:replace="context/browsername">Foo Bar</span>.</i></p>
    </tal:block>
  </tal:block>

  <tal:block condition="view/translation_groups">

    <h2>Translation Groups</h2>

    <span tal:replace="context/browsername">Mark Shuttleworth</span> is
    a member of the following translation groups:

      <table class="listing">
        <thead>
          <tr>
            <th>Translation group</th>
            <th>Language</th>
            <th>Translation guidelines</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="translator view/translators">
            <td><a tal:attributes="href translator/translationgroup/fmt:url"
           tal:content="translator/translationgroup/title"></a></td>
           <td tal:content="translator/language/englishname">Esperanto</td>
           <td><a tal:condition="translator/style_guide_url"
                  tal:content="translator/style_guide_url"
                  tal:attributes="href translator/style_guide_url"
                >Documentation URL</a>
           <a tal:attributes="href string:${translator/translationgroup/fmt:url}/${translator/language/code}/+edit"
           ><img src="/@@/edit" /></a></td>
      </tr>
      </tbody>
    </table>

  </tal:block>

</div>


</body>
</html>
