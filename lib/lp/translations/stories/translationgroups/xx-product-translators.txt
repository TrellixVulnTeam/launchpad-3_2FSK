Product and projects translations settings
==========================================

A product owner and Rosetta expert browser is created.

    >>> login('admin@canonical.com')
    >>> product_owner = factory.makePerson(
    ...     email="po@ex.com", password="test")
    >>> chestii = factory.makeProduct(
    ...     name='chestii', owner=product_owner, official_rosetta=True)
    >>> logout()
    >>> re_browser = setupRosettaExpertBrowser()
    >>> po_browser = setupBrowser("Basic po@ex.com:test")

Visiting the main product's translations page, product and Rosetta
administrators sees the "Change permissions" link, leading to the
translations settings page.

    >>> re_browser.open(
    ...     'http://translations.launchpad.dev/chestii')
    >>> re_browser.getLink('Change permissions').click()
    >>> print re_browser.url
    http://translations.launchpad.dev/chestii/+settings

    >>> po_browser.open(
    ...     'http://translations.launchpad.dev/chestii')
    >>> po_browser.getLink('Change permissions').click()
    >>> print po_browser.url
    http://translations.launchpad.dev/chestii/+settings

Other persons will not see the link to settigs page.

    >>> browser.open(
    ...     'http://translations.launchpad.dev/chestii')
    >>> browser.getLink('Change permissions')
    Traceback (most recent call last):
    ...
    LinkNotFoundError...

An attempt to access the settins url will not be authorized.

    >>> browser.open(
    ...     'http://translations.launchpad.dev/chestii/+settings')
    Traceback (most recent call last):
    ...
    Unauthorized...

From the settings page, translations group and translation permissions
can be changed.

    >>> hint = find_tag_by_id(re_browser.contents, 'form_extra_info')
    >>> print extract_text(hint)
    Select the translation group that will be managing...

    >>> re_browser.getControl('Translation permissions policy').value = ['CLOSED']
    >>> re_browser.getControl('Change').click()
    >>> print re_browser.url
    http://translations.launchpad.dev/chestii

