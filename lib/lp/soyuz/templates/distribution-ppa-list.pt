<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
>
<body>

  <div metal:fill-slot="heading">
    <h1 tal:content="CONTEXTS/fmt:pagetitle">Ubuntu Linux Personal
     Package Archives</h1>
  </div>

  <div metal:fill-slot="main"
       tal:define="registered_ppas view/number_of_registered_ppas;
                   batch view/search_results;
                   no_search python:not (view.name_filter or batch);
                   empty_results python:view.name_filter and not batch">

    <div id="ppa_search" class="top-portlet">
      <p>Personal Package Archives (PPA) allow you to upload
         Ubuntu source packages to be built and published as an
         apt repository by Launchpad. You can find out more about
         PPAs and how to use them in our
         <a href="https://help.launchpad.net/Packaging/PPA"
          >help page</a>.</p>

      <form name="ppa_search" action="" method="GET"
            tal:condition="registered_ppas">
        <p>Search user-contributed software packages published in any
           <tal:distribution replace="context/title"
            >Ubuntu</tal:distribution>PPA.</p>
        <table>
          <tbody>
            <tr>
              <th><label for="name">Show PPAs matching:</label></th>
              <td><input id="name" type="text" name="name_filter"
                         style="width: 95%;"
                         tal:attributes="value view/name_filter" /></td>
              <td><input type="submit" value="Search" /></td>
            </tr>
            <tr>
              <td></td>
              <td><input id="inactive" type="checkbox" name="show_inactive"
                  tal:attributes="checked view/show_inactive" />
                <label for="inactive">
                  Including descriptions of empty PPAs
                </label></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </form>
    </div> <!-- ppa_search -->

    <div class="yui-g" tal:condition="no_search">

      <div id="supports_virtualized_architectures" class="first yui-u">
        <div tal:replace="structure context/@@+portlet-ppa-architectures" />
      </div> <!-- supports-virtualized-archs -->

      <div id="ppa_statistics" class="yui-u">
        <div class="portlet">
         <h2>Statistics</h2>
         <tal:has_ppas condition="registered_ppas">
           <ul>
             <li><tal:ppa_registered
                   replace="registered_ppas"
               >10</tal:ppa_registered> registered PPAs</li>
             <li><tal:ppa_active
                   replace="view/number_of_active_ppas"
               >4</tal:ppa_active> active PPAs</li>
             <li><tal:ppa_sources
                   replace="view/number_of_ppa_sources"
               >20</tal:ppa_sources> published sources</li>
             <li><tal:ppa_binaries
                   replace="view/number_of_ppa_binaries"
               >20</tal:ppa_binaries> published binaries</li>
           </ul>
         </tal:has_ppas>
         <tal:has_no_ppas condition="not: registered_ppas">
            <p><tal:distribution replace="context/displayname" />
               does not have any registered PPA.</p>
         </tal:has_no_ppas>
        </div> <!-- ppa_statistics -->
      </div> <!-- yui-u -->

      <div id="ppa_latest_uploads" class="yui-u" tal:condition="registered_ppas">
        <div class="portlet">
          <h2>Latest uploads</h2>
          <ul class="source package">
            <li tal:repeat="pub view/latest_ppa_source_publications">
              <tal:source_title replace="pub/displayname">
                mozilla-firefox - 1.0 in warty
              </tal:source_title> in
              <a tal:attributes="href pub/archive/fmt:url"
                 tal:content="pub/archive/displayname"
                >PPA for Celso Providelo </a>
              <tal:datepublished replace="pub/age/fmt:approximateduration">
                3 minutes</tal:datepublished> ago
           </li>
          </ul>
        </div> <!-- portlet -->
      </div> <!-- ppa_latest_uploads -->

      <div id="ppa_most_active" class="yui-u" tal:condition="registered_ppas">
        <div class="portlet">
          <h2>Most active</h2>
          <p>PPAs with the highest number of uploads in the
             last 7 days.</p>
          <table>
            <tr tal:repeat="most_active view/most_active_ppas">
              <td>
                <a tal:attributes="href most_active/archive/fmt:url"
                   tal:content="most_active/archive/owner/fmt:displayname">
                  Celso Providelo
                </a>
              </td>
              <td align="right">
                <tal:sources replace="most_active/uploads" /> uploads
              </td>
            </tr>
          </table>
        </div> <!-- portlet -->
      </div> <!-- ppa_most_active -->

    </div> <!-- yui-g -->

    <div id="ppa_list" tal:condition="batch">
      <tal:navigation_top
           replace="structure view/batchnav/@@+navigation-links-upper" />
      <table class="listing sortable">
        <thead>
          <tr>
            <th>PPA name</th>
            <th>Description</th>
            <th>Sources</th>
            <th>Binaries</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="ppa batch"
              tal:replace="structure ppa/@@+ppa-row" />
        </tbody>
      </table>
      <tal:navigation_bottom
           replace="structure view/batchnav/@@+navigation-links-lower" />
    </div><!-- ppa_list -->

    <div id="empty_results" style="padding-top: 1em;"
         tal:condition="empty_results">
      <p>No matching Personal Package Archive
         for '<tal:name_filter replace="view/name_filter" />'.</p>
    </div> <!-- empty_results -->

  </div> <!-- main -->

</body>
</html>
