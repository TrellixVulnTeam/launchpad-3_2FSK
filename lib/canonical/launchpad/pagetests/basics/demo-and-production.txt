= Demo and production =

== Demo sites ==

Launchpad can brand instances as 'demo' instances to make it obvious to
users that they are working in a playpen and changes they make do not
affect the production systems.

This is controlled by a config variable.

    >>> from canonical.config import config
    >>> config.launchpad.is_demo
    False

(We could hard code this behavior for certain database names, as was done
in the past, but using an explicit config option future proofs us against
future changes, such as using multiple launchpad databases, and makes it
easier to test the feature and see the styling.)

When you are on a demo site, this is advertised by both the page
background, and the text "demo site" in the page footer.

    >>> config.launchpad.is_demo = True
    >>> browser.open('http://launchpad.dev/')
    >>> print browser.contents
    <...
    <style...url(/@@/demo)...</style>
    ...

    >>> print extract_text(find_tag_by_id(browser.contents, 'lp-version'))
    |...Launchpad...) devmode demo site

    >>> config.launchpad.is_demo = False
    >>> browser.open('http://launchpad.dev')
    >>> print extract_text(find_tag_by_id(browser.contents, 'lp-version'))
    |...Launchpad...) devmode
    
== Production sites ==

On non-production sites, Launchpad's version and revision numbers are
displayed in the page footer.

    >>> config.launchpad.is_production = False
    >>> browser.open('http://launchpad.dev/')
    >>> print extract_text(find_tag_by_id(browser.contents, 'lp-version'))
    |...Launchpad ... (r...)...

On production sites, however, the version and revision numbers are
presented only in an HTML comment.

    >>> config.launchpad.is_production = True
    >>> browser.open('http://launchpad.dev/')
    >>> print find_tag_by_id(browser.contents, 'lp-version')
    None
    >>> print browser.contents
    <...
    <!-- Launchpad ... (r...) -->
