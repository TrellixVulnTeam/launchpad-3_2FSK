== Leaving the team ==

Foo Bar decided to leave the 'ubuntu-team'. He visits the home page
and chooses the "Leave" link. He confirm that wants to leave the team
by choosing the 'Leave' button.

    >>> admin_browser.open('http://launchpad.dev/~ubuntu-team')
    >>> admin_browser.title
    'Ubuntu Team in Launchpad'

    >>> admin_browser.getLink('Leave').click()
    >>> admin_browser.title
    'Leave Ubuntu Team'
    >>> content = find_main_content(admin_browser.contents)
    >>> print content.p
    <p>Are you sure you want to leave this team?</p>
    >>> admin_browser.getControl('Leave').click()

Foo Bar is redirect to the team page after he leaves.

    >>> admin_browser.title
    'Ubuntu Team in Launchpad'
    >>> admin_browser.getLink('Join').url
    'http://launchpad.dev/%7Eubuntu-team/+join'


== Team overview page quick-links ==

A member of a team can quickly leave a team by using the links on the
team's overview page.

    >>> browser = setupBrowser(auth='Basic carlos@canonical.com:test')
    >>> browser.open('http://launchpad.dev/~admins')
    >>> print extract_text(
    ... 	find_portlet(browser.contents, 'Your involvement'))
    Your involvement
    You are a member of this team.
    >>> browser.getControl('Leave the Team').click()
    >>> print browser.url
    http://launchpad.dev/~admins

    # The 'Leave' link should be gone.
    >>> browser.getControl('Leave the Team')
    Traceback (most recent call last):
    ...
    LookupError: label 'Leave the Team'

    # And the 'Join' link should have returned.
    >>> browser.getLink('Join the team')
    <Link ...>

Team owners do not have the option to leave.

    >>> browser.open('http://launchpad.dev/~testing-spanish-team')
    >>> print extract_text(
    ... 	find_portlet(browser.contents, 'Your involvement'))
    Your involvement
    You are the owner of this team.
    >>> browser.getControl('Leave the Team')
    Traceback (most recent call last):
    ...
    LookupError: label 'Leave the Team'
