When indicating that a bug affects upstream, the product field is
automatically chosen if a packaging link is found.

    >>> user_browser.open(
    ...  'http://launchpad.dev/debian/+source/mozilla-firefox/+bug/8')
    >>> user_browser.getLink('Also affects distribution').click()
    >>> user_browser.getControl('Continue').click()
    >>> user_browser.getLink('Also affects project').click()
    >>> user_browser.url
    'http://.../ubuntu/+source/mozilla-firefox/+bug/8/+choose-affected-product'
    >>> user_browser.getControl(name='field.product').value
    'firefox'

If the source package has no upstream link. like pmount in Ubuntu,
then the product widget will have no initial value.

    >>> user_browser.open(
    ...     'http://launchpad.dev/ubuntu/+source/mozilla-firefox/'
    ...     '+bug/8/+distrotask')
    >>> user_browser.getControl('Distribution').value = ['ubuntu']
    >>> user_browser.getControl('Source Package').value = 'pmount'
    >>> user_browser.getControl('Continue').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/ubuntu/+source/pmount/+bug/8'

    >>> user_browser.getLink('Also affects project').click()
    >>> user_browser.getControl('Project').value
    ''

A notification will is shown, prompting the user to add packaging
information.

    >>> for notification in find_tags_by_class(user_browser.contents, 'message'):
    ...     print notification.renderContents()
    Please select the appropriate upstream project. This step...

Let's follow the link and specify the packaging information.

    >>> user_browser.getLink('updating the packaging information').click()
    >>> user_browser.getControl(name='field.product').value = 'thunderbird'
    >>> user_browser.getControl('Continue').click()
    >>> user_browser.getControl(name='field.productseries').value = ['trunk']
    >>> user_browser.getControl('Change').click()

Now the upstream product will be chosen automatically also for pmount.

    >>> user_browser.open(
    ...     'http://launchpad.dev/ubuntu/+source/pmount/+bug/8')
    >>> user_browser.getLink('Also affects project').click()
    >>> user_browser.url
    'http://.../ubuntu/+source/pmount/+bug/8/+choose-affected-product'
    >>> user_browser.getControl(name='field.product').value
    'thunderbird'
