Test to add a product series

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> browser.open('http://localhost:9000/products/firefox/+addseries')

  >>> 'Register another product series' in browser.contents
  True

After checking that the page +addseries is there, we try to add a new series.

  >>> browser.getControl('Name').value = 'stable'
  >>> browser.getControl('Summary').value = 'Product series add testing'
  >>> browser.getControl('Add').click()

Now we are redirected to the Overview page of the product series we just added

  >>> browser.url
  'http://localhost:9000/products/firefox/stable'

  >>> 'Series overview' in browser.contents
  True
  >>> 'Product series add testing' in browser.contents
  True

Now we test if we can edit the new added release series. First we check if we
can reach the +edit page.

  >>> browser.getLink('Change Series Details').click()
  >>> browser.url
  'http://localhost:9000/products/firefox/stable/+edit'

Then we edit the information about the release series. First we try to use a
name already in use.

  >>> browser.getControl('Name').value = '1.0'
  >>> browser.getControl('Summary').value = (
  ...   'Testing the edit of productseries')
  >>> browser.getControl('Change').click()

We'll get a nice error message

  >>> message = '1.0 is already in use by another series' 
  >>> message in browser.contents
  True

We now change it to a unique name

  >>> browser.getControl('Name').value = 'unstable'
  >>> browser.getControl('Change').click()

  >>> browser.url
  'http://localhost:9000/products/firefox/unstable'

We test if the edited product release is there

  >>> 'Series overview' in browser.contents
  True
  >>> 'Testing the edit of productseries' in browser.contents
  True

And if we try to add another series with the same name to same product, we
should get a nice error message.

  >>> browser.open('http://localhost:9000/products/firefox/+addseries')

  >>> browser.getControl('Name').value = 'unstable'
  >>> browser.getControl('Summary').value = 'Another series with the same name'
  >>> browser.getControl('Add').click()

  >>> message = 'unstable is already in use by another series' 
  >>> message in browser.contents
  True
