
Now, we are going to show that it is possible to retarget specs, to a
different product or distribution.

First, make sure we can see the svg-support spec on Firefox:

  >>> print http(r"""
  ... GET /products/firefox/+spec/svg-support HTTP/1.1
  ... """)
  HTTP/1.1 200 Ok
  ...

Now, let's make sure we can see the retargeting page for it, as the Foo Bar
administrator:

  >>> print http(r"""
  ... GET /products/firefox/+spec/svg-support/+retarget HTTP/1.1
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  ...

  >>> print http(r"""
  ... POST /products/firefox/+spec/svg-support/+retarget HTTP/1.1
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Length: 428
  ... Content-Type: multipart/form-data; boundary=---------------------------938091679987142812548021377
  ... 
  ... -----------------------------938091679987142812548021377
  ... Content-Disposition: form-data; name="field.product"
  ... 
  ... evolution
  ... -----------------------------938091679987142812548021377
  ... Content-Disposition: form-data; name="field.distribution"
  ... 
  ... 
  ... -----------------------------938091679987142812548021377
  ... Content-Disposition: form-data; name="FORM_SUBMIT"
  ... 
  ... Continue
  ... -----------------------------938091679987142812548021377--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: .../products/evolution/+spec/svg-support
  ...


OK. Now, it follows that we should be able to retarget it immediately from
evolution, to a distribution. Let's try redhat.

  >>> print http(r"""
  ... POST /products/evolution/+spec/svg-support/+retarget HTTP/1.1
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Length: 433
  ... Content-Type: multipart/form-data; boundary=---------------------------73372874620216216641883523378
  ... 
  ... -----------------------------73372874620216216641883523378
  ... Content-Disposition: form-data; name="field.product"
  ... 
  ... 
  ... -----------------------------73372874620216216641883523378
  ... Content-Disposition: form-data; name="field.distribution"
  ... 
  ... redhat
  ... -----------------------------73372874620216216641883523378
  ... Content-Disposition: form-data; name="FORM_SUBMIT"
  ... 
  ... Continue
  ... -----------------------------73372874620216216641883523378--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: .../distros/redhat/+spec/svg-support
  ...

And similarly, this should now be on Red Hat, and we should be able to send
it straight back to firefox. This means that the data set should finish this
test in the same state that it was when we started.

  >>> print http(r"""
  ... POST /distros/redhat/+spec/svg-support/+retarget HTTP/1.1
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Length: 430
  ... Content-Type: multipart/form-data; boundary=---------------------------4030488088664338941407918134
  ... Cookie: launchpad=Qc.v5-WHT7EgucQMiEGtj9vwGbUhNiaVW2z9GRhKPegpqV.M4BpCas
  ... Referer: http://localhost:9000/distros/redhat/+spec/svg-support/+retarget
  ... 
  ... -----------------------------4030488088664338941407918134
  ... Content-Disposition: form-data; name="field.product"
  ... 
  ... firefox
  ... -----------------------------4030488088664338941407918134
  ... Content-Disposition: form-data; name="field.distribution"
  ... 
  ... 
  ... -----------------------------4030488088664338941407918134
  ... Content-Disposition: form-data; name="FORM_SUBMIT"
  ... 
  ... Continue
  ... -----------------------------4030488088664338941407918134--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: .../products/firefox/+spec/svg-support
  ...


