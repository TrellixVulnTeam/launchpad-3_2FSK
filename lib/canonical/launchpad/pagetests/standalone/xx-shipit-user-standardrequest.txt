  Let's test the /myrequest page, where users place new requests and/or change
  existing ones.

  >>> browser.addHeader('Authorization', 'Basic foo.bar@canonical.com:test')
  >>> browser.open('http://localhost/shipit-ubuntu/myrequest')
  >>> browser.url
  'http://localhost/shipit-ubuntu/myrequest'

  First of all, we'll make sure a request is accepted only if all required 
  fields are filled.

  >>> browser.getControl(name='ordertype').value = ['1']
  >>> browser.getControl('Request CDs').click()
  >>> browser.url
  'http://localhost/shipit-ubuntu/myrequest'

  >>> print browser.contents
  <!DOCTYPE...
  ...Your ShipIt Request...
  ...
  ...Please fix the problems below and try again...
  ...
  ...Name...
  ...
  ...Required input is missing...
  ...
  ...Address...
  ...
  ...Required input is missing...
  ...
  ...City/Town/etc...
  ...
  ...Required input is missing...
  ...
  ...Country...
  ...
  ...Required input is missing...
  ...
  ...Phone...
  ...
  ...Required input is missing...
  ...


  For some countries like the US, our shipping company requires a postcode, so
  we can't accept a request from the US without a postcode.

  >>> browser.getControl(name='field.recipientdisplayname').value = 'Foo'
  >>> browser.getControl(name='field.organization').value = 'Baz'
  >>> browser.getControl(name='field.addressline1').value = 'Street'
  >>> browser.getControl(name='field.city').value = 'City'
  >>> browser.getControl(name='field.province').value = 'Province'
  >>> browser.getControl(name='field.postcode').value = ''
  >>> browser.getControl(name='field.country').value = ['226']
  >>> browser.getControl(name='field.phone').value = '43242442'
  >>> browser.getControl('Request CDs').click()
  >>> browser.url
  'http://localhost/shipit-ubuntu/myrequest'

  >>> print browser.contents
  <!DOCTYPE...
  ...Please fix the problems below and try again...
  ...Shipping to your country requires a postcode, but you didn't provide...
  ...one. Please enter one below...


  Now we fill in the last remaining required field and the request is
  accepted. The request is automatically approved because the user can
  only choose the number of CDs from a list of predefined options.

  >>> browser.getControl(name='field.postcode').value = '42423'
  >>> browser.getControl('Request CDs').click()
  >>> browser.url
  'http://localhost/shipit-ubuntu/myrequest'

  >>> print browser.contents
  <!DOCTYPE...
  ...Request accepted. Please note that requests usually take from 4 to 6...
  ...weeks to deliver, depending on the country of shipping...

  >>> from canonical.launchpad.database import Person
  >>> Person.byName('name16').currentShipItRequest().approved
  True

  If now we go to one of shipit.kubuntu or shipit.edubuntu, we'll be able to
  add more CDs to our existing request.

  >>> browser.open('http://localhost/shipit-kubuntu/myrequest')
  >>> browser.url
  'http://localhost/shipit-kubuntu/myrequest'

  >>> print browser.contents
  <!DOCTYPE...
  ...<h1>...
  ...Request more CDs...
  ...</h1>...

  >>> browser.getControl(name='ordertype').value = ['10']
  >>> browser.getControl('Request more CDs').click()
  >>> browser.url
  'http://localhost/shipit-kubuntu/myrequest'


  It's also possible to cancel an existing request.

  >>> browser.getControl('Cancel Request').click()
  >>> browser.url
  'http://localhost/shipit-kubuntu/myrequest'

  >>> print browser.contents
  <!DOCTYPE...
  ...Request Cancelled...
  ...Shipped/Cancelled requests...
  ...
  ...11 CDs requested in...
  ...

  >>> Person.byName('name16').currentShipItRequest() is None
  True

