= Subscribing to Branches =

Let us subscribe to one of the branches. First, let's make sure we can see the
link "Subscribe" from a branch's page.

  >>> print http(r"""
  ... GET /~name12/+branch/gnome-terminal/main HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  ...<a href="http://launchpad.dev/~name12/+branch/gnome-terminal/main/+subscribe">Subscribe</a>...

Clicking this link should send us to the branch subscription form. This form
should want to be posted back to the main branch page.

  >>> print http(r"""
  ... GET /~name12/+branch/gnome-terminal/main/+subscribe HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  ...<form action="." method="POST">...
  ...<input type="submit" name="subscribe" value="Subscribe" />...

Now, post the subscription form. We should see a message that we have just
subscribed.

  >>> print http(r"""
  ... POST /~name12/+branch/gnome-terminal/main/ HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... 
  ... subscribe=Subscribe""")
  HTTP/1.1 200 Ok
  ...You have subscribed to this branch...

Now the link should say "Unsubscribe" in the actions menu.

  >>> print http(r"""
  ... GET /~name12/+branch/gnome-terminal/main HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  ...<a href="http://launchpad.dev/~name12/+branch/gnome-terminal/main/+subscribe">Unsubscribe</a>...

We do not really want to be subscribed. We load the subcription page, and now
the button should say "Unsubscribe".

  >>> print http(r"""
  ... GET /~name12/+branch/gnome-terminal/main/+subscribe HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  ...<form action="." method="POST">...
  ...<input type="submit" name="subscribe" value="Unsubscribe" />...

And when we post this form, we see a message saying we are no longer a
subscriber.

  >>> print http(r"""
  ... POST /~name12/+branch/gnome-terminal/main/ HTTP/1.1
  ... Host: launchpad.dev
  ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
  ... 
  ... subscribe=Unsubscribe""")
  HTTP/1.1 200 Ok
  ...You have unsubscribed from this branch...
