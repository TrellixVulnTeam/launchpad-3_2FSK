<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:i18n="http://namespaces.zope.org/i18n"
    xmlns:zope="http://namespaces.zope.org/zope"
    i18n_domain="launchpad">

<facet facet="translations">

    <content class="canonical.launchpad.database.POTemplate">
      <allow interface="canonical.launchpad.interfaces.IPOTemplate" />
      <require
        permission="launchpad.Edit"
        set_attributes="owner priority description"
        />
      <require
        permission="launchpad.Admin"
        set_attributes="potemplatename productseries distroseries
                        sourcepackagename sourcepackageversion
                        binarypackagename languagepack path header
                        iscurrent from_sourcepackagename date_last_updated
                        source_file source_file_format"
      />
    </content>

    <adapter
        for="canonical.launchpad.interfaces.IPOTemplate"
        provides="canonical.launchpad.interfaces.ITranslationFile"
        factory="canonical.launchpad.database.POTemplateToTranslationFileAdapter" />

    <browser:navigation
        module="canonical.launchpad.browser"
        classes="POTemplateNavigation POTemplateSubsetNavigation
                 POTemplateSetNavigation"
        />

    <adapter
      provides="canonical.launchpad.interfaces.IStructuralObjectPresentation"
      for="canonical.launchpad.interfaces.IPOTemplate"
      factory="canonical.launchpad.browser.POTemplateSOP"
      permission="zope.Public"
      />

    <browser:defaultView
        for="canonical.launchpad.interfaces.IPOTemplate"
        name="+index"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:page
        name="+preferred-chart"
        for="canonical.launchpad.interfaces.IPOTemplate"
        class="canonical.launchpad.browser.POTemplateViewPreferred"
        permission="zope.Public"
        template="../templates/potemplate-chart.pt"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:pages
        for="canonical.launchpad.interfaces.IPOTemplate"
        class="canonical.launchpad.browser.POTemplateView"
        permission="zope.Public"
        layer="canonical.launchpad.layers.TranslationsLayer" >
        <browser:page
            name="+index"
            template="../templates/potemplate-index.pt" />
        <browser:page
            name="+chart"
            template="../templates/potemplate-chart.pt" />

        <!-- Potemplate Portlets -->
        <browser:page
            name="+portlet-details"
            template="../templates/potemplate-portlet-details.pt"
            />
        <browser:page
            name="+portlet-langstats"
            template="../templates/potemplate-portlet-langstats.pt"
            />
    </browser:pages>

    <browser:page
        name="+upload"
        for="canonical.launchpad.interfaces.IPOTemplate"
        permission="launchpad.Edit"
        template="../templates/potemplate-upload.pt"
        class="canonical.launchpad.browser.POTemplateView"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:editform
        name="+edit"
        schema="canonical.launchpad.interfaces.IPOTemplate"
        class="canonical.launchpad.browser.POTemplateEditView"
        label="Change PO template information"
        permission="launchpad.Edit"
        template="../templates/potemplate-edit.pt"
        fields="name description priority owner"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:editform
        name="+admin"
        schema="canonical.launchpad.interfaces.IPOTemplate"
        class="canonical.launchpad.browser.POTemplateEditView"
        label="Administer PO template"
        permission="launchpad.Admin"
        template="../templates/potemplate-edit.pt"
        fields="potemplatename name description header iscurrent owner
                productseries distroseries sourcepackagename
                from_sourcepackagename sourcepackageversion binarypackagename
                languagepack path source_file_format priority
                date_last_updated"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:page
        name="+export"
        for="canonical.launchpad.interfaces.IPOTemplate"
        permission="launchpad.AnyPerson"
        template="../templates/potemplate-export.pt"
        class="canonical.launchpad.browser.POTemplateExportView"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <!-- POTemplateSet -->
    <securedutility
        class="canonical.launchpad.database.POTemplateSet"
        provides="canonical.launchpad.interfaces.IPOTemplateSet">
        <allow interface="canonical.launchpad.interfaces.IPOTemplateSet" />
    </securedutility>

    <browser:menus
        module="canonical.launchpad.browser.potemplate"
        classes="POTemplateFacets POTemplateAppMenus"
        />

    <content class="canonical.launchpad.database.POTemplateSubset">
        <require
            permission="zope.Public"
            interface="canonical.launchpad.interfaces.IPOTemplateSubset"
            set_attributes="sourcepackagename distroseries"
            />
    </content>

    <browser:url
        for="canonical.launchpad.interfaces.IPOTemplateSubset"
        urldata="canonical.launchpad.browser.POTemplateSubsetURL"
        />

    <browser:url
        for="canonical.launchpad.interfaces.IPOTemplate"
        urldata="canonical.launchpad.browser.POTemplateURL"
        />

    <browser:defaultView
        for="canonical.launchpad.interfaces.IPOTemplateSubset"
        name="+index"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

    <browser:page
        name="+index"
        for="canonical.launchpad.interfaces.IPOTemplateSubset"
        permission="zope.Public"
        class="canonical.launchpad.browser.POTemplateSubsetView"
        attribute="__call__"
        layer="canonical.launchpad.layers.TranslationsLayer"
        />

</facet>

</configure>
