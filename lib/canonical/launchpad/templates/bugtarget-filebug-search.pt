<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="malone"
>
<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-latestbugs" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <h3 tal:content="context/title">Foo Series: main</h3>
  <h1>Report a new bug</h1>
</metal:heading>

<div metal:fill-slot="main"
     tal:define="product_or_distro view/getProductOrDistroFromContext">

  <tal:uses_malone tal:condition="product_or_distro/official_malone">
  <form action="."
        tal:attributes="action request/URL"
        method="post"
        enctype="multipart/form-data"
        accept-charset="UTF-8">


    <ol>
      <tal:filebug-step repeat="step view/getSteps">
        <li tal:condition="step/selected"
            tal:content="step/title"
            style="font-weight: bold">
            A selected step
        </li>
        <li tal:condition="not:step/selected"
            tal:content="step/title"
            class="discreet"
            style="font-size: 100%">
            An unselected step
        </li>
      </tal:filebug-step>
    </ol>

    <div style="margin-top: 1em"
         tal:define="error python:view.getWidgetError('title')">
      <p>Please describe the bug in a few words, for example,
      "weather applet crashes on logout":</p>

      <div tal:attributes="class python:error and 'error' or None">
        <tal:widget replace="structure view/widgets/title" />

        <div tal:condition="error"
             class="message"
             tal:content="structure error"
            >An error message.
        </div>
      </div>
    </div>

    <div class="actions">
      <input tal:replace="structure view/actions/field.actions.search/render" />
    </div>
  </form>
  <script type="text/javascript"
          tal:content="structure view/focusedElementScript" />

  <br />
  <span class="discreet">
    <small>
      You may prefer the
      <a href="#" tal:attributes="href string:${context/fmt:url}/+filebug-advanced">complicated bug filing form</a>.
    </small>
  </span>

  </tal:uses_malone>

  <tal:not_uses_malone tal:condition="not: product_or_distro/official_malone">
    <p class="error message">
      <span tal:replace="product_or_distro/displayname">Alsa Utils</span> does not use Malone as its bug tracker.
    </p>

    <p>
      To report a bug about <span tal:replace="product_or_distro/displayname">Alsa Utils</span>,
      please use its official bug tracker.
    </p>
  </tal:not_uses_malone>

</div>

</html>