<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
>
<body>

  <metal:block fill-slot="head_epilogue">
    <meta http-equiv="refresh" content="300" />
  </metal:block>

  <metal:heading fill-slot="heading">
    <h1 tal:content="context/title">Bob the builder</h1>
  </metal:heading>

  <div metal:fill-slot="main" tal:define="job context/currentjob">
    <div class="top-portlet">
      <span style="float:right;"
        tal:content="structure view/menu:overview/edit/fmt:icon-link" />
      <p><tal:title content="context/title">Bob the builder</tal:title>
         builds
         <tal:arch content="context/processor/title">Intel 386</tal:arch>
         binaries and is owned by
         <a tal:replace="structure context/owner/fmt:link">OWNER</a>.
       </p>
    </div>
    <div class="yui-ge">
      <div class="first yui-u">
        <div class="portlet">
          <h2>
            <span class="see-all"><a
              tal:replace="structure view/menu:overview/history/fmt:link" />
            </span> 
          Current status</h2>

          <tal:no_job condition="not: job">
            <p><tal:builder content="context/title" />
               <tal:builderok condition="context/builderok"
                 >is idle.</tal:builderok>
               <tal:buildernok condition="not: context/builderok"
                 >is deactivated.</tal:buildernok></p>
          </tal:no_job>
          <tal:job condition="job">
            <tal:icon replace="structure job/build/image:icon" />
            <a tal:attributes="href job/build/fmt:url">
              <span tal:replace="job/build/title">NAME</span>
            </a>
            <p class="sprite">Started
              <span tal:attributes="title job/buildstart/fmt:datetime"
                    tal:content="view/current_build_duration/fmt:exactduration"
                />
              ago.
            </p>
            <tal:logtail condition="job/logtail">
              <h3>Tail of the builder log at
                 <span tal:replace="view/now"/></h3>
              <div tal:content="structure job/logtail/fmt:text-to-html"
                   id="buildlog-tail">
                Things are crashing and burning all over the place.
              </div>
            </tal:logtail>
          </tal:job>
        </div><!-- portlet -->
      </div><!-- yui-u -->
      <div class="yui-u">
        <div class="portlet">
          <h2>Builder information</h2>
          <dl>
            <dt>Architecture:</dt>
            <dd>
              <span tal:replace="context/processor/title">Intel 386</span>
              <tal:virtual condition="context/virtualized">(virtual)
              </tal:virtual>
            </dd>
            <dt>Location:</dt>
            <dd tal:content="context/url" />
            <dt>Owner:</dt>
            <dd><a tal:replace="structure context/owner/fmt:link">OWNER</a>
            </dd>
            <dt>Mode:</dt>
            <dd>
              <tal:manual condition="context/manual">This builder is in
                manual-mode and not accepting jobs from the auto-build system.
              </tal:manual>
              <tal:auto condition="not: context/manual">This builder is in
                auto-mode and accepting jobs from the auto-build system.
              </tal:auto>
              <form tal:attributes="action view/menu:overview/edit/fmt:url"
                    tal:condition="view/menu:overview/mode/enabled"
                    method="post" style="display:inline">
                <input type="hidden" value="" name="field.manual.used"
                       id="field.manual.used" class="hiddenType"/>
                <input id="field.manual" name="field.manual" type="hidden"
                       value="on" tal:condition="not: context/manual" />
                <button type="submit" name="field.actions.update"
                        id="field.actions.update"
                        tal:content="view/toggle_mode_text">
                  Switch to x-mode</button>
              </form>
            </dd>
          </dl>
        </div><!-- portlet -->
      </div><!-- yui-u -->
      <tal:menu replace="structure view/@@+related-pages" />
    </div>
  </div>
</body>
</html>
