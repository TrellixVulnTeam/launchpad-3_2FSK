<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">
  <div id="working-on"
       tal:define="bugtasks view/assigned_bugs_in_progress;
                   specs view/assigned_specs_in_progress"
       tal:condition="view/has_assigned_bugs_or_specs_in_progress">
    <div class="section">
      <div class="portlet">
        <h2>Working on</h2>
        <tal:has-bugtasks condition="bugtasks">
          <table>
            <tr tal:repeat="bugtask bugtasks">
              <tal:define-vars define="hide_extra_details string:true">
                <tal:task tal:replace="structure bugtask/@@+listing-detailed" />
              </tal:define-vars>
            </tr>
          </table>
          <div>
            <a tal:attributes="href view/getURLToAssignedBugsInProgress">
              &raquo; Show all bugs in progress
            </a>
          </div>
        </tal:has-bugtasks>
      </div>
    </div>
    <div class="section" tal:condition="specs">
      <div class="portlet">
        <table>
          <tr tal:repeat="spec specs"
              tal:replace="structure spec/@@+listing-simple" />
        </table>
        <div>
          <tal:XXX condition="nothing">
            # XXX: Guilherme Salgado 2007-02-12:
            # This link should point to a list of the in-progress specs
            # assigned to this person, but we don't have a way to list that
            # right now, so we'll have to list all incomplete specs assigned
            # to the person.
          </tal:XXX>
          <a
            tal:attributes="href string:${context/fmt:url}/+specs?role=assignee">
            &raquo; Show all assigned blueprints
          </a>
        </div>
      </div>
    </div>
  </div>
</tal:root>
