<?xml version="1.0" encoding="utf-8"?>

<!-- This contains macros for RDF exporting -->
<rdf:RDF xmlns:foaf="http://xmlns.com/foaf/0.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal">
    <metal:block define-macro="owner_foaf">
            <foaf:Person tal:condition="not:context/owner/isTeam">
                <foaf:name tal:content="context/owner/displayname">
                    Display Name
                </foaf:name>
                <foaf:mbox_sha1sum
                    tal:condition="context/owner/preferredemail"
                    tal:content="context/owner/preferredemail_sha1">
                    0BEEC7B5EA3f0FDBC95D0DD47F3C5BC275DA8A33
                </foaf:mbox_sha1sum>
                <metal:block tal:define="context member"
                    metal:use-macro="context/@@rdf_macros/owner_foaf_gpg" />
            </foaf:Person>
            <foaf:Group tal:condition="context/owner/isTeam">
                <foaf:name tal:content="context/owner/displayname">
                    Team Display Name
                </foaf:name>
                <foaf:member>
                    <foaf:Person tal:repeat="member
                                             context/owner/allmembers">
                        <foaf:name tal:content="member/displayname">
                            Display Name
                        </foaf:name>
                        <foaf:mbox_sha1sum
                            tal:condition="member/preferredemail"
                            tal:content="member/preferredemail_sha1"
                            >0BEEC7B5EA3f0FDBC95D0DD47F3C5BC275DA8A33
                        </foaf:mbox_sha1sum>
                        <metal:block tal:define="owner member"
                            metal:use-macro="context/@@rdf_macros/owner_foaf_gpg" />
                    </foaf:Person>
                </foaf:member>
            </foaf:Group>
    </metal:block>

    <metal:block define-macro="owner_foaf_gpg">
        <wot:hasKey tal:condition="owner/gpgkeys">
            <wot:PubKey tal:repeat="gpgkey owner/gpgkeys">
                <wot:hex_id tal:content="gpgkey/keyid">91CFA34D</wot:hex_id>
                <wot:length tal:content="gpgkey/keysize">1024</wot:length>
                <wot:fingerprint tal:content="gpgkey/fingerprint">04FFF3AC57DF217C6D383DBC0110FB923756EA0B</wot:fingerprint>
                <wot:pubkeyAddress tal:attributes="rdf:resource
                    string:http://keyserver.ubuntu.com:11371/pks/lookup?op=get&amp;search=0x${gpgkey/fingerprint};"/>
            </wot:PubKey>
        </wot:hasKey>
    </metal:block>
</rdf:RDF>
