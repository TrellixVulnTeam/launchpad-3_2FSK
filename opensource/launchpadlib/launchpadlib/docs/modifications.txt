= Modifications =

Objects available through the web interface, such as people, have a readable
interface which is available through direct attribute access.

    >>> from launchpadlib.testing.helpers import salgado_with_full_permissions
    >>> launchpad = salgado_with_full_permissions.login()

    >>> salgado = launchpad.people.get('salgado')
    >>> salgado.display_name
    u'Guilherme Salgado'

Some of these attributes can be changed.  For example, Salgado can change his
display name.  When changing attribute values though, the changes are not
pushed to the web service until the entry is explicitly saved.  This allows
Salgado to batch the changes over the wire for efficiency.

    >>> salgado.display_name = u'Salgado'
    >>> launchpad.people.get('salgado').display_name
    u'Guilherme Salgado'

Once the changes are saved though, they are saved on the web service.

XXX BarryWarsaw 12-Jun-2008 We currently make no guarantees about the
synchronization between the local object's state and the remote object's
state.  Future development will add a "conditional PATCH" feature based on
Last-Modified/ETag headers; this will serve as a transction number, so that if
the two objects get out of sync, the .save() would fail.  Since this is not
yet implemented, we will do a .get() every time we want to guarantee that we
have the up-to-date state of the object.  The only other time we can make this
guarantee is when we change an attribute that causes a 301 'Moved permanently'
HTTP error, because we implicitly re-fetch the object's state in that case.
However, this latter condition is not exposed through the web service.

    >>> salgado.save()
    >>> launchpad.people.get('salgado').display_name
    u'Salgado'

The entry object is a normal Python object like any other.  Salgado can set
any attribute on the object, but if it doesn't correspond to a web services
object, it won't be persistent.

    >>> salgado.display_name = u'Guilherme Salgado'
    >>> salgado.is_great = True
    >>> salgado.save()
    >>> salgado = launchpad.people.get('salgado')
    >>> salgado.display_name
    u'Guilherme Salgado'
    >>> salgado.is_great
    Traceback (most recent call last):
    ...
    AttributeError: is_great

Salgado can also set more than one attribute at a time, and all will be
changed when the entry is saved.

    >>> print salgado.homepage_content
    None
    >>> salgado.hide_email_addresses
    False
    >>> print salgado.mailing_list_auto_subscribe_policy
    Ask me when I join a team
    
    >>> salgado.homepage_content = u'This is my home page.'
    >>> salgado.hide_email_addresses = True
    >>> salgado.mailing_list_auto_subscribe_policy = (
    ...     u'Never subscribe to mailing lists')
    >>> salgado.save()
    >>> salgado = launchpad.people.get('salgado')

    >>> print salgado.homepage_content
    This is my home page.
    >>> salgado.hide_email_addresses
    True
    >>> print salgado.mailing_list_auto_subscribe_policy
    Never subscribe to mailing lists

Salgado cannot set his timezone to an illegal value.

    >>> from launchpadlib.errors import HTTPError
    >>> def print_error_on_save(entry):
    ...     try:
    ...         entry.save()
    ...     except HTTPError, error:
    ...         for line in sorted(error.content.splitlines()):
    ...             print line
    ...     else:
    ...         print 'Did not get expected HTTPError!'

    >>> salgado.timezone = 'SouthPole'
    >>> print_error_on_save(salgado)
    timezone: u'SouthPole' isn't a valid token

Teams also have attributes that can be changed.  For example, Salgado creates
the most awesome team in the world.

    >>> bassists = launchpad.people.newTeam(
    ...     'bassists', 'Awesome Rock Bass Players')

Then Salgado realizes he wants to express the awesomeness of this team in its
description.  Salgado also understand that anybody can achieve awesomeoness.

    >>> print bassists.team_description
    None
    >>> bassists.subscription_policy
    u'Moderated Team'

    >>> bassists.team_description = (
    ...     u'The most important instrument in the world')
    >>> bassists.subscription_policy = u'Open Team'
    >>> bassists.save()

    >>> bassists = launchpad.people['bassists']
    >>> print bassists.team_description
    The most important instrument in the world
    >>> bassists.subscription_policy
    u'Open Team'


== Moving an entry ==

Salgado can actually rename and move his person by changing the 'name'
attribute.

    >>> salgado = launchpad.people.get('salgado')
    >>> salgado.name = u'guilherme'
    >>> salgado.save()

Once this is done, he can no longer access his data through the old name.  But
Salgado's person is available through the new name.

    >>> print launchpad.people.get('salgado')
    None
    >>> launchpad.people.get('guilherme').display_name
    u'Guilherme Salgado'

Under the covers though, a refresh of the original object has been retrieved
from Launchpad, so it's save to continue using, and changing it.

    >>> salgado.display_name = u'Salgado!'
    >>> salgado.save()
    >>> launchpad.people.get('guilherme').display_name
    u'Salgado!'

It's just as easy to move Salgado back to the old name.

    >>> salgado.name = u'salgado'
    >>> salgado.save()
    >>> print launchpad.people.get('guilherme')
    None
    >>> launchpad.people.get('salgado').display_name
    u'Salgado!'


== Read-only attributes ==

Some attributes are read-only, such as a person's karma.

    >>> salgado.karma
    0
    >>> salgado.karma = 1000000
    >>> print_error_on_save(salgado)
    karma: You tried to modify a read-only attribute.

If Salgado tries to change several read-only attributes at the same time, he
gets useful feedback about his error.

    >>> salgado.date_created = u'2003-06-06T08:59:51.596025+00:00'
    >>> salgado.is_team = True
    >>> print_error_on_save(salgado)
    date_created: You tried to modify a read-only attribute.
    is_team: You tried to modify a read-only attribute.
    karma: You tried to modify a read-only attribute.
