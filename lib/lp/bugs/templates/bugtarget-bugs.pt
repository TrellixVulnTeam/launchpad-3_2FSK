<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="malone"
>
  <metal:block fill-slot="head_epilogue">
    <script type="text/javascript" src="/+icing/FormatAndColor.js"></script>
    <script type="text/javascript" src="/+icing/PlotKit_Packed.js"></script>
  </metal:block>
  <metal:portlets fill-slot="portlets">
  </metal:portlets>
  <body>
    <tal:side metal:fill-slot="side">
      <div id="involvement" class="portlet involvement">
        <ul>
          <li style="border: none">
            <a href="+filebug" class="menu-link-filebug sprite bugs">
              Report a bug
            </a>
          </li>
          <li>
            <a href="+filebug" class="menu-link-filebug sprite answers">
              Ask a question
            </a>
          </li>
        </ul>
      </div>
      <div class="portlet">
        <ul>
          <li>
            <strong>Bug tracker:</strong>
            <tal:bugtracker replace="structure view/bugtracker" />
          </li>
          <li>
            <tal:subscribe
                replace="structure context/menu:bugs/subscribe/render" />
          </li>
          <li tal:define="bug_supervisor context/bug_supervisor">
            Bug supervisor:
            <tal:none condition="not:bug_supervisor">None set</tal:none>
            <a tal:condition="bug_supervisor"
               tal:replace="structure bug_supervisor/fmt:link">Bob Johnson</a>
            <tal:edit-bug-supervisor
                condition="context/menu:bugs/bugsupervisor|nothing">
              <a tal:define="link context/menu:bugs/bugsupervisor"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url; title link/text">
                <img tal:attributes="alt link/text" src="/@@/edit" />
              </a>
            </tal:edit-bug-supervisor>
          </li>
          <li tal:define="securitycontact context/security_contact">
            Security contact:
            <tal:none condition="not:securitycontact">None set</tal:none>
            <a tal:condition="securitycontact"
               tal:replace="structure securitycontact/fmt:link">
              Billy Anderson
            </a>
            <tal:edit-securitycontact
                condition="context/menu:bugs/securitycontact|nothing">
              <a tal:define="link context/menu:bugs/securitycontact"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url; title link/text">
                <img tal:attributes="alt link/text" src="/@@/edit" />
              </a>
            </tal:edit-securitycontact>
          </li>
          <li>
          </li>
        </ul>
      </div>
      <div class="portlet">
        <table class="bug-links">
          <tr tal:define="open_bugs_info view/open_bugs_info">
            <td class="bugs-count" tal:content="open_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href open_bugs_info/url">Open bugs</a>
            </td>
          </tr>
          <tr tal:condition="view/user"
              tal:define="my_bugs_info view/my_bugs_info">
            <td class="bugs-count" tal:content="my_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href my_bugs_info/url">Bugs assigned to me</a>
            </td>
          </tr>
          <tr tal:define="critical_bugs_info view/critical_bugs_info">
            <td class="bugs-count" tal:content="critical_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href critical_bugs_info/url">Critical bugs</a>
            </td>
          </tr>
          <tr tal:define="fixed_elsewhere view/bugs_fixed_elsewhere_info">
            <td class="bugs-count" tal:content="fixed_elsewhere/count" />
            <td class="bugs-link">
              <a tal:attributes="href fixed_elsewhere/url">
                Bugs fixed elsewhere
              </a>
            </td>
          </tr>
          <tr tal:define="new_bugs_info view/new_bugs_info">
            <td class="bugs-count" tal:content="new_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href new_bugs_info/url">New bugs</a>
            </td>
          </tr>
          <tr tal:define="cve_bugs_info view/open_cve_bugs_info">
            <td class="bugs-count" tal:content="cve_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href cve_bugs_info/url">Open CVE bugs</a>
              -
              <a href="+cve">CVE reports</a>
            </td>
          </tr>
          <tr tal:define="expirable_bugs_info view/expirable_bugs_info"
              tal:condition="expirable_bugs_info">
            <td class="bugs-count" tal:content="expirable_bugs_info/count" />
            <td class="bugs-link">
              <a tal:attributes="href expirable_bugs_info/url">
                Incomplete bugs
              </a>
              (can expire)
            </td>
          </tr>
        </table>
          <ul class="cross-reference">
            <li tal:define="pending_bugwatches view/pending_bugwatches_info"
                tal:condition="pending_bugwatches">
              <a tal:attributes="href pending_bugwatches/url">
                <strong tal:content="pending_bugwatches/count"></strong>
                <tal:label
                  tal:replace="pending_bugwatches/label">bugs</tal:label>
                <tal:need-or-needs
                    define="count pending_bugwatches/count"
                    content="python:(count == 1) and 'needs' or 'need'" />
                forwarding upstream
              </a>
            </li>
            <li tal:define="expirable_bugs view/expirable_bugs_info"
              tal:condition="expirable_bugs">
              <a tal:attributes="href expirable_bugs/url">
                <strong tal:content="expirable_bugs/count"></strong>
                incomplete
                <tal:label
                  tal:replace="expirable_bugs/label">bugs</tal:label>
                can expire
              </a>
            </li>
            <tal:review-nominations
                condition="context/menu:bugs/nominations|nothing">
              <li tal:define="link context/menu:bugs/nominations">
                <a tal:attributes="href link/url"
                   tal:content="link/text" />
              </li>
            </tal:review-nominations>
          </ul>
      </div>
      <div tal:replace="structure context/@@+portlet-bugtags" />
      <tal:releasecriticalbugs
          tal:condition="view/shouldShowReleaseCriticalPortlet"
          tal:content="structure context/@@+portlet-bugtasklist-seriesbugs" />
    </tal:side>
    <div metal:fill-slot="main" class="tab-bugs"
         tal:define="search_url string:+bugs;
                     advanced_search_url string:+bugs?advanced=1">
      <div class="search-box" style="text-align: center; clear: both;">
        <metal:search
          use-macro="context/@@+bugtarget-macros-search/simple-search-form"
        />
      </div>
      <script type="text/javascript"><!--
           $('field.searchtext').focus();
      --></script>

      <h2 style="margin-top: 1em">Hot bugs</h2>

      <table class="listing" id="hot-bugs">
        <thead>
          <tr>
            <th colspan="3">Summary</th>
            <th>Status</th>
            <th>Importance</th>
            <th>Last changed</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="bugtask view/hot_bugtasks">
            <td class="icon left">
              <img alt="" src="/@@/bug" />
            </td>
            <td style="text-align: right">
              #<span tal:replace="bugtask/id" />
            </td>
            <td>
              <a tal:attributes="href bugtask/fmt:url"
                 tal:content="bugtask/title" />
            </td>
            <td tal:attributes="class string:status${bugtask/status/name}"
                tal:content="bugtask/status/title" />
            <td tal:attributes="
                  class string:importance${bugtask/importance/name}"
                tal:content="bugtask/importance/title" />
            <td tal:content="bugtask/bug/date_last_updated/fmt:displaydate" />
          </tr>
        </tbody>
      </table>

    </div><!-- main -->
  </body>
</html>
