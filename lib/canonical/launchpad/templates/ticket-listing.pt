<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template_2col/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-supportcontacts|nothing" />
  <div tal:replace="structure context/@@+portlet-details" />
  <div tal:condition="context/distribution|nothing"
       tal:replace="structure context/distribution/@@+portlet-supportcontacts" />
</metal:leftportlets>

<metal:css fill-slot="head_epilogue">
  <style type="text/css">
    div.inlined-widget {
      display: inline;
    }

    div.inlined-widget div {
      display: inline;
    }
  </style>
</metal:css>

<metal:heading fill-slot="pageheading">
  <h1 i18n:translate="">Support requests for
    <span i18n:name="tickettarget" tal:replace="context/displayname">Ubuntu</span>
  </h1>
</metal:heading>

<div metal:fill-slot="main"
     tal:define="tickets view/searchResults">

  <div id="ticket-search-form">
    <form method="get" id="ticket-search-form" action="">
      <tal:searchbox replace="structure view/widgets/search_text" />

      <tal:sort replace="structure view/widgets/sort" />

      <input tal:replace="structure view/search_action/render" />

      <tal:status define="widget nocall:view/widgets/status">
        <metal:widget use-macro="widget/@@launchpad_widget_macros/launchpad_widget_row" />
      </tal:status>

      <label tal:attributes="for view/widgets/languages/name"
             tal:content="view/widgets/languages/label">
        Languages:
      </label>
      <tal:languages replace="structure view/widgets/languages" />
    </form>
  </div>
  <br />

  <tal:no-results
    condition="not: tickets/batch"
    define="search_text view/search_params/search_text|nothing;
            languages view/search_params/languages|nothing">
    <p tal:condition="search_text"
       i18n:translate="">
      No results for search
        <strong i18n:name="search_text"
                tal:content="search_text">Search Text</strong>.
    </p>
    <p tal:condition="not: search_text"
       i18n:translate="">
      No active support requests
      <strong tal:condition="languages">
        in
        <tal:block repeat="language languages">
          <tal:block condition="not: repeat/language/end">
            <span tal:condition="not: repeat/language/start">,</span>
          </tal:block>
          <tal:block condition="repeat/language/end">
            <span tal:condition="repeat/language/index">or</span>
          </tal:block>
          <span tal:replace="language/englishname">Portuguese</span>
        </tal:block>
      </strong>
      
      for
      <span i18n:name="tickettarget"
            tal:replace="context/displayname">Ubuntu 5.04</span>.
    </p>
  </tal:no-results>

  <tal:block condition="tickets/batch">
    <div class="lesser" tal:content="structure tickets/@@+navigation-links" />
    <table class="listing" id="ticket-listing">
      <thead>
        <tr>
          <th colspan="3" i18n:translate="">Summary</th>
          <th i18n:translate="">Created</th>
          <th i18n:translate="">Submitter</th>
          <th tal:condition="view/displaySourcePackage"
              i18n:translate="">Source Package</th>
          <th i18n:translate="">Status</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="ticket tickets/batch">
          <td class="icon right">
            <img alt="Open" title="Open" src="/@@/ticket"
                 tal:attributes="alt ticket/status/title;
                                 title ticket/status/title;" />
          </td>
          <td class="amount"
              tal:content="ticket/id"
              >42</td>
          <td class="ticket">
            <a href="#"
               tal:content="ticket/title"
               tal:attributes="href ticket/fmt:url">
              Firefox is too slow for my laptop
            </a>
          </td>
          <td tal:content="ticket/datecreated/fmt:date">2006-07-17</td>
          <td><img src="/@@/user" />
            <a tal:attributes="href string:${ticket/owner/fmt:url}/+tickets"
               tal:content="ticket/owner/browsername"
              >Foo Bar</a>
          </td>
          <td tal:condition="view/displaySourcePackage"
              tal:content="structure python:view.formatSourcePackageName(ticket)"
              >mozilla-firefox</td>
          <td class="ticketstatus"
              tal:content="ticket/status/title"
              tal:attributes="class string:ticketstatus${ticket/status/name}"
              >Open</td>
        </tr>
      </tbody>
    </table>
    <div class="lesser" tal:content="structure tickets/@@+navigation-links" />
  </tal:block>
</div>
</body>
</html>
