Test that the page to add a product release loads.

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> browser.open('http://launchpad.dev/firefox/trunk')
  >>> browser.getLink('Register a release').click()
  >>> browser.url
  'http://launchpad.dev/firefox/trunk/+addrelease'

  >>> browser.title
  'Register a new Mozilla Firefox Series: trunk release in Launchpad'

Test that the page to add a product release works.

  >>> browser.getControl('Version').value = '0.9.3'
  >>> browser.getControl('Code name').value = 'One Tree Hill the 3rd'
  >>> browser.getControl('Summary').value = 'Security fix for this version'
  >>> browser.getControl('Description').value = 'A long description'
  >>> browser.getControl('Changelog').value = 'Fix Foo'
  >>> browser.getControl('Add').click()

  >>> browser.url
  'http://launchpad.dev/firefox/trunk/0.9.3'

Now we'll add a new product release with the same version of an existing
product release from another product series

  >>> browser.getLink('Overview').click()
  >>> browser.getLink('Register a release').click()
  >>> browser.url
  'http://launchpad.dev/firefox/trunk/+addrelease'

  >>> browser.getControl('Version').value = '1.0.0'
  >>> browser.getControl('Code name').value = 'SameName'
  >>> browser.getControl('Summary').value = 'A test summary'
  >>> browser.getControl('Description').value = 'A test description'
  >>> browser.getControl('Changelog').value = 'Fix Foo'
  >>> browser.getControl('Add').click()

  >>> browser.url
  'http://launchpad.dev/firefox/trunk/1.0.0'

And we check in the product's overview page, if both links are there pointing 
to different places.

  >>> browser.getLink('Mozilla Firefox').click()
  >>> browser.url
  'http://launchpad.dev/firefox'

  >>> browser.getLink(url='trunk/1.0.0').url
  'http://launchpad.dev/firefox/trunk/1.0.0'

  >>> browser.getLink(url='1.0/1.0.0').url
  'http://launchpad.dev/firefox/1.0/1.0.0'

Now let's try to create a productrelease with a dupe version.

  >>> browser.getLink('trunk').click()
  >>> browser.getLink('Register a release').click()
  >>> browser.url
  'http://launchpad.dev/firefox/trunk/+addrelease'

  >>> browser.getControl('Version').value = '1.0.0'
  >>> browser.getControl('Code name').value = 'SameName'
  >>> browser.getControl('Summary').value = 'A test summary'
  >>> browser.getControl('Description').value = 'A test description'
  >>> browser.getControl('Changelog').value = 'Fix Foo'
  >>> browser.getControl('Add').click()

  >>> for tag in find_tags_by_class(browser.contents, 'message'):
  ...     tag.renderContents()
  'An error occurred.'
  '1.0.0 is already in use by another version in this product series.'
