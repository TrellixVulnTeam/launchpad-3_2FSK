<html metal:use-macro="view/macro:page/default" i18n:domain="malone">
  <body>
    <metal:portlets fill-slot="portlets">

    <div tal:replace="structure context/bug/@@+portlet-duplicates" />
    <div tal:replace="structure context/bug/@@+portlet-subscribers" />
    <div tal:replace="structure context/bug/@@+portlet-questions" />
    <div tal:replace="structure context/bug/@@+portlet-specs" />
    <div tal:replace="structure context/bug/@@+portlet-attachments" />
    <div tal:replace="structure context/bug/@@+portlet-cve" />
    <div tal:replace="structure context/bug/@@+portlet-reference" />
    <div tal:replace="structure context/bug/@@+portlet-watch" />
    
    </metal:portlets>

<div metal:fill-slot="main">

      <div>
        <tal:icon replace="structure context/image:icon" />
        Bug #<tal:bug replace="context/bug/id">3252543</tal:bug>,
        first reported
        <span
          tal:attributes="title context/bug/datecreated/fmt:datetime"
          tal:content="context/bug/datecreated/fmt:displaydate" />
        by
        <a tal:attributes="href context/bug/owner/fmt:url"
           tal:content="context/bug/owner/browsername">Foo Bar</a>
      </div>
      <h1 tal:content="context/bug/title">Foo doesn't work</h1>

  <tal:block condition="view/reportBugInContext" />

  <p class="informational message"
     tal:condition="view/notices"
     tal:repeat="notice view/notices"
     tal:content="notice">
     Reported this bug as also occurring in upstream firefox
  </p>

  <p class="informational message"
     id="number_of_dupes"
     tal:condition="context/bug/duplicates"
     tal:define="number_of_dupes context/bug/duplicates/count"
    >This bug has
     <tal:num-dupes condition="python:number_of_dupes == 1">1 duplicate</tal:num-dupes>
     <tal:num-dupes condition="python:number_of_dupes > 1" content="string:${number_of_dupes} duplicates"
       >2 duplicates</tal:num-dupes>
    </p>

  <p tal:condition="context/bug/duplicateof" class="informational message">
    This report is a duplicate of
    <a tal:attributes="href context/bug/duplicateof/fmt:url;
                       title context/bug/duplicateof/title"
       tal:content="string:bug #${context/bug/duplicateof/id}">bug 42</a>
  </p>

      <form
        tal:condition="not:view/isReportedInContext"
        class="error message"
        name="alsooccursin"
        method="POST"
      >

    This bug is not recorded as needing to be fixed in the
    <a tal:attributes="href string:${context/target/fmt:url}/+bugs"
       tal:content="context/targetname">upstream firefox</a>
    <tal:product condition="context/product">project.</tal:product>
    <tal:package condition="context/sourcepackagename">package.</tal:package>
    <tal:distribution
      condition="python: (not context.product) and (not context.sourcepackagename)"
    >distribution.</tal:distribution>

    <tal:loggedin condition="request/lp:person">

        <input
          type="submit"
          name="reportbug"
          value="Also Needs Fixing Here"
        />
    </tal:loggedin>
    <tal:notloggedin condition="not:request/lp:person">
      If you wish report it in <tal:block content="context/targetname" />,
      you must <a href="+login">log in</a> first.
    </tal:notloggedin>

        </form>

  <div tal:replace="structure context/bug/@@+bugtasks-and-nominations-table" />

      <tal:branches define="bug_branches context/bug/bug_branches"
                  condition="bug_branches">
        <p tal:condition="context/bug/private"
             class="warning message">
          This bug is private, so avoid adding public branches here.
        </p>
        <table class="listing">
          <thead>
            <tr>
              <th>Related Branch</th>
              <th>Developer</th>
              <th>Revision Hint</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="bug_branch bug_branches">
              <td>
                <a
                  tal:attributes="href string:${bug_branch/fmt:url}/+status"
                  tal:content="bug_branch/status/title"
                >Under Development</a>
              </td>
              <td tal:content="bug_branch/branch/owner/displayname"></td>
              <td tal:content="bug_branch/revision_hint"></td>
              </tr>
          </tbody>
        </table>
      </tal:branches>
      <div class="report">
        <h2>Bug description
          <a href="+edit"
          ><img src="/@@/edit" alt="[edit]" title="Edit this description"
          /></a></h2>

    <div id="bug-tags" tal:define="tags context/bug/tags" tal:condition="tags">
      <b>Tags:</b>
      <a tal:repeat="tag tags"
         tal:content="tag"
           tal:attributes="
             href string:${context/target/fmt:url}/+bugs?field.tag=${tag}">tag</a>
    </div>

    <div id="bug-description" style="font-family: monospace;"
         tal:content="structure context/bug/description/fmt:text-to-html" />

  </div>

  <div style="margin-bottom: 1em; text-align: center">
    <span tal:condition="view/wasDescriptionModified">
      This description was updated. <a href="comments/0">View original description</a>.</span>
  </div>

  <tal:comment repeat="comment view/getBugCommentsForDisplay">
    <metal:comment-box
        metal:use-macro="context/@@bugcomment-macros/comment-box" />
  </tal:comment>

  <tal:logged-in condition="view/user">
    <fieldset class="collapsible collapsed">
      <legend>Add a comment/attachment</legend>
      <div tal:content="structure context/@@+addcomment-form" />
    </fieldset>
  </tal:logged-in>
  <tal:not-logged-in condition="not: view/user">
    <div align="center">
      To post a comment you must <a href="+login">log in</a>.
    </div>
  </tal:not-logged-in>

      <div class="next">
        <h2>What next?</h2>
        <ul>
          <li>
            <a tal:attributes="href context/target/fmt:url">
              More bugs in
              <tal:target replace="context/target/displayname" />
            </a>
          </li>
          <li>
            <a tal:attributes="href string:${context/target/fmt:url}/+filebug">
              Report a bug about
              <tal:target replace="context/target/displayname" />
            </a>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
