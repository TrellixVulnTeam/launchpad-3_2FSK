<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@malone_template/master"
      i18n:domain="bazaar">

<head>
  <title metal:fill-slot="title">Bazaar: Upstream Revision Control
  Imports</title>
</head>

<body>

<div metal:fill-slot="main" class="visualPadding"
     tal:define="batch view/batch">

  <h1>Bazaar: Upstream Revision Control Imports</h1>

  <form action="" method="GET">
    <fieldset>
        <legend>Filter Criteria</legend>

        <div class="formControls">
            <input type="text" name="text"
                   tal:attributes="value view/text" size="25">
            <span tal:replace="structure view/sourcestateselector">
                StateSelector
            </span>
            <input type="checkbox" name="ready" id="ready"
                   tal:attributes="checked view/ready">
            <label for="ready">Ready</label>
            <input type="submit" name="search" value="search" />
            <br />
        </div>

    </fieldset>
  </form>

  <table class="listing rowNavigation" width="100%">
    <tr>
        <th>Product</th>
        <th>Series</th>
        <th>Started</th>
        <th>Finished</th>
        <th>Tested</th>
        <th>Process</th>
        <th>Sync</th>
    </tr>
    <tr tal:repeat="series batch"
        tal:attributes="onclick
            string:window.location='/products/${series/product/name}/+series/${series/name}/+sourceadmin';">
      <td tal:content="series/product/name">$Product.name</td>
      <td tal:content="series/name">$Series.name</td>
      <td tal:content="series/datestarted/fmt:date | string: -- "
          >$Series.datestarted</td>
      <td tal:content="series/datefinished/fmt:date | string: -- "
          >$Series.datefinished</td>
      <td tal:content="series/dateautotested/fmt:date | string: --"
          >$Series.dateautotested</td>
      <td tal:content="series/dateprocessapproved/fmt:date | string: -- "
          >$Series.dateprocessapproved</td>
      <td tal:content="series/datesyncapproved/fmt:date | string: -- "
          >$Series.datesyncapproved</td>
    </tr>
    <tr class="batchnav">
      <td class="batchnav" colspan="10"
          tal:define="prev_page_url view/batchnav/prevBatchURL;
                      next_page_url view/batchnav/nextBatchURL">
          <a tal:condition="prev_page_url"
             tal:attributes="href prev_page_url">&laquo; previous</a>
          <span tal:omit-tag=""
                tal:repeat="page_url view/batchnav/batchPageURLs">
            <a href=""
               tal:content="python:page_url.keys()[0]"
               tal:attributes="href python:page_url.values()[0]">[1]</a>
          </span>
          <a tal:condition="next_page_url"
             tal:attributes="href next_page_url">next &raquo;</a>
             <br />
            <small tal:content="python:'displaying sources ' + str(batch.startNumber()) + ' to ' + str(batch.endNumber()) + ' of ' + str(batch.total())"
                   style="float: center;">displaying 1 to 20 of 42</small>
      </td>
    </tr>
  </table>

</div>

</body>
</html>
