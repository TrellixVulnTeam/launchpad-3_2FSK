== Changing personal details ==

Foo Bar wants to check if his personal information is up to date in
Launchpad.

    >>> browser.addHeader('Authorization', 'Basic foo.bar@canonical.com:test')
    >>> browser.open('http://launchpad.dev/~name16')

    # XXX mars 2008-06-11
    # Use direct navigation for the LP 2.0 transition. See bug #239192.
    >>> browser.open('http://launchpad.dev/~name16/+edit2.0')

    >>> browser.getControl('Display Name').value
    'Foo Bar'
    >>> browser.getControl('Name', index=1).value
    'name16'
    >>> browser.getControl('Timezone').value
    ['Africa/Johannesburg']
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').selected
    False


He noticed that his information is out of date and will update it.
(If he leaves leading or trailing whitespace in the displayname it'll
be stripped)

    >>> browser.getControl('Name', index=1).value = 'foobar'
    >>> browser.getControl('Display Name').value = '  Foo Bar2  '
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').click()
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~foobar'

Now we check to make sure the displayname was changed and stripped.

    >>> browser.open('http://launchpad.dev/~foobar/+edit2.0')
    >>> browser.getControl('Display Name').value
    'Foo Bar2'

And the email addresses are not shown on Foo Bar's home page to any random
user.

    >>> user_browser.open('http://launchpad.dev/~foobar')
    >>> 'foo.bar@canonical.com' in user_browser.contents
    False

He will decide to make all bug notifications that are sent to him
verbose.

    >>> browser.getControl("Include bug descriptions when sending me "
    ...     "bug notifications").selected
    False

    >>> browser.getControl("Include bug descriptions when sending me "
    ...     "bug notifications").click()
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~foobar'

We now check to ensure that the verbose bug notifications option was
changed:

    >>> browser.open('http://launchpad.dev/~foobar/+edit2.0')
    >>> browser.getControl("Include bug descriptions when sending me "
    ...     "bug notifications").selected
    True

He will also change his timezone:

    >>> browser.getControl('Timezone').value = ['Africa/Dakar']
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~foobar'


    # XXX mars 2008-06-11
    # Use direct navigation for the LP 2.0 transition. See bug #239192.
    >>> browser.open('http://launchpad.dev/~foobar/+edit2.0')
    >>> browser.getControl('Timezone').value
    ['Africa/Dakar']


== Clean up ==

    >>> browser.addHeader('Authorization', 'Basic foo.bar@canonical.com:test')
    >>> browser.open('http://launchpad.dev/~foobar')

    # XXX mars 2008-06-11
    # Use direct navigation for the LP 2.0 transition. See bug #239192.
    >>> browser.open('http://launchpad.dev/~foobar/+edit2.0')

    # Change the details back
    >>> browser.getControl('Name', index=1).value = 'name16'
    >>> browser.getControl('Display Name').value = 'Foo Bar'
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').click()
    >>> browser.getControl("Include bug descriptions when sending me "
    ...     "bug notifications").click()
    >>> browser.getControl('Timezone').value = ['Africa/Johannesburg']
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~name16'

    # Verify that the data is restored.

    # XXX mars 2008-06-11
    # Use direct navigation for the LP 2.0 transition. See bug #239192.
    >>> browser.open('http://launchpad.dev/~name16/+edit2.0')
    >>> browser.getControl('Display Name').value
    'Foo Bar'
    >>> browser.getControl('Name', index=1).value
    'name16'
    >>> browser.getControl('Timezone').value
    ['Africa/Johannesburg']
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').selected
    False
