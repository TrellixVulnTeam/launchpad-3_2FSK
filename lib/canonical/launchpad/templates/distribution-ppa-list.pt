<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
<body>

  <div metal:fill-slot="main">

    <h1>Personal Package Archives for <tal:title replace="context/title" /></h1>

    <p>Personal Package Archives (PPA) allow you to upload Ubuntu source
       packages to be built and published as an apt repository by
       Launchpad. You can find out more about PPAs and how to use them in our
       <a href="https://help.launchpad.net/PPAQuickStart"
       >quick-start guide</a>.</p>

    <p>Search user-contributed software packages published in any
      <tal:distribution replace="context/title">Ubuntu</tal:distribution>
      PPA.</p>

    <form name="ppa_search" action="" method="GET">
      <label for="name">PPAs containing:</label>
      <input id="name" title="Filter" size="20"
             type="text" name="name_filter"
             tal:attributes="value view/name_filter"/>
      <label for="inactive">Include inactive PPAs</label>
      <input id="inactive" title="Include inactive PPAs"
             type="checkbox" name="show_inactive"
             tal:attributes="checked view/show_inactive"/>
      <input type="submit" value="Search" />
    </form>

    <tal:batch define="batch view/search_results">

      <div id="ppa_list" tal:condition="batch">
        <tal:navigation_top
             replace="structure view/batchnav/@@+navigation-links-upper" />

        <table class="listing sortable">
          <thead>
            <tr>
              <th>Owner</th>
              <th>Description</th>
              <th>Sources</th>
              <th>Binaries</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="ppa batch" tal:replace="structure ppa/@@+ppa-row" />
          </tbody>
        </table>

        <tal:navigation_bottom
             replace="structure view/batchnav/@@+navigation-links-lower" />
      </div>

      <div id="empty-result" tal:condition="not: batch">

        <div style="padding-top: 1em;" tal:condition="view/name_filter">
           No matching Personal Package Archive
           for '<tal:name_filter replace="view/name_filter" />'.
        </div>

        <tal:information condition="not: view/name_filter">

          <div class="left">

            <div class="section" id="ppa_statistics">
              <h2>Statistics</h2>
              <ul>
                <li><tal:ppa_registered
                      replace="view/number_of_registered_ppas"
                  >10</tal:ppa_registered> registered</li>
                <li><tal:ppa_active
                      replace="view/number_of_active_ppas"
                  >4</tal:ppa_active> active</li>
                <li><tal:ppa_sources
                      replace="view/number_of_ppa_sources"
                  >20</tal:ppa_sources> published sources</li>
                <li><tal:ppa_binaries
                      replace="view/number_of_ppa_binaries"
                  >20</tal:ppa_binaries> published binaries</li>
              </ul>
            </div>

            <div class="section" id="ppa_most_active">
              <h2>Most active</h2>

              <p>PPA with the highest number of uploads during  the
                 last 7 days.</p>

              <table>
                <tr tal:repeat="most_active view/most_active_ppas">
                  <td>
                    <a tal:attributes="href most_active/archive/fmt:url"
                       tal:content="most_active/archive/title">
                      PPA for Celso Providelo
                    </a>
                  </td>
                  <td align="right">
                    <tal:sources replace="most_active/uploads" /> uploads
                  </td>
                </tr>
              </table>
            </div>

            <div class="section" id="ppa_latest_uploads">
              <h2>Latest uploads</h2>
              <ul class="source package">
                <li tal:repeat="pub view/latest_ppa_source_publications">
                  <tal:source_title replace="pub/displayname">
                    mozilla-firefox - 1.0 in warty
                  </tal:source_title> in
                  <a tal:attributes="href pub/archive/fmt:url"
                     tal:content="pub/archive/title"
                    >PPA for Celso Providelo </a>
                  <tal:datepublished replace="pub/age/fmt:approximateduration">
                    3 minutes</tal:datepublished> ago
               </li>
              </ul>
            </div>

          </div> <!-- left div -->

          <div style="width: 49%; clear: right; float: right;">
            <div class="section" id="supports_virtualized_archs"
                 tal:content="structure context/@@+portlet-ppa-architectures" />
          </div>

        </tal:information>

      </div> <!-- empty-results -->

    </tal:batch>

  </div>

  <p metal:fill-slot="help">
     You can browse for any interesting PPA by accessing its page
     or even create your own
     <a tal:attributes="href string:${view/user/fmt:url}/+activate-ppa"
     >here</a>. Currently we only support PPAs for Ubuntu Linux.
  </p>

</body>
</html>

