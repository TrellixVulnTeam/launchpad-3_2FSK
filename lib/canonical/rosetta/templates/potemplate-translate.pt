<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="rosetta">

<head>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Rosetta style sheet -->
    <style type="text/css" media="screen">@import url(rosetta.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <div tal:content="view/submitTranslations" />
    <div tal:condition="not: view/submitted">

    <h1>Translating <span tal:replace="context/product/project/title">Project
        title</span> &mdash; <span tal:replace="context/title">POT file
        title</span></h1>

    <!--
    <div style="float:right;">
        <input type="checkbox" checked="checked" class="noborder" />
        Show String Information <br />
        <input type="checkbox" class="noborder" />
        Show only untranslated messages<br />
        <input type="checkbox" class="noborder" checked="checked" />
        Save changes when moving between pages
    </div>
    -->

    <div class="documentDescription">
    Hint: use the <code>Tab</code> key to move quickly between translation fields.
    </div>

    <!-- Navigation XXX: not dynamic yet -->
    <div class="listingBar">
        <span class="previous">
            <a href="">
            &laquo; Previous <span>5</span> messages
            </a>
        </span>

        <span class="next">
            <a href="">
            Next <span>5</span> messages &raquo;
            </a>
        </span>

        <a href="">1</a>

        [<span>2</span>]

    <!-- Pagelist with links to next pages for quick navigation -->
        <a href="">3</a>
        <a href="">4</a>
        <a href="">5</a>

    <!-- Pagelist with quantum leap links to next pages for quick navigation -->

        ...

        <a href="">226</a>

    </div>

    <form method="POST" tal:attributes="action request/URL">
    <tal:msgstring repeat="set context">
        <fieldset class="message-strings"
                tal:define="isPlural python: len(list(set.messageIDs())) > 1">
            <legend>String #<span tal:replace="set/sequence">120</span></legend>

                <!-- Simple message. -->
                <span tal:condition="not:isPlural">
                    <div class="field">
                        <label class="language-code">English</label>:
                        <span tal:content="python: set.messageIDs()[0].text">sighting</span>
                    </div>

                    <div class="field" tal:repeat="language view/languages">
                        <label class="language-code"
                            tal:content="language/englishName">pt_BR</label>:
                        <input type="text"
                               xtal:attributes="value python:sighting.currentTranslation(language).text[0]"
                               tal:attributes="name
                                   string:t_${set/id}_${language/code}" />
                    </div>
                </span>

                <!-- Plural message. -->
                <span tal:condition="isPlural">
                    <div class="field">
                        <label class="language-code">English 1</label>:
                        <span tal:content="python: set.messageIDs()[0].text">singular</span>
                    </div>

                    <div class="field">
                        <label class="language-code">English 2</label>:
                        <span tal:content="python: set.messageIDs()[1].text">plural</span>
                    </div>

                    <fieldset>
                        <legend>Plural forms translation</legend>

                        <span tal:repeat="language view/languages">

                            <div class="field">
                                <label class="language-code"
                                    tal:content="language/englishName">pt_BR[0]</label>:
                                <input type="text"
                                   xtal:attributes="value python:sighting.currentTranslation(language).text[0]"
                                   tal:attributes="name
                                       string:t_${set/id}_${language/code}_0"
                                   />
                                <img src="++resource++info.gif" title="Example: 1 dead horse." />
                            </div>

                            <div class="field">
                                <label class="language-code"
                                   tal:content="language/englishName">pt_BR[1]</label>:
                                <input type="text"
                                   xtal:attributes="value python:sighting.currentTranslation(language).text[1]"
                                   tal:attributes="name
                                       string:t_${set/id}_${language/code}_0"
                                   />
                                <img src="++resource++info.gif" title="Example: 5 dead horses." />
                            </div>

                        </span>
                    </fieldset>
                </span>

        </fieldset>

        <fieldset class="message-strings">

            <legend>String information</legend>

            <!--
            <div class="field">
                <label>Comment</label>
                <img src="++resource++arrowDown.gif" />
                <div class="discreet">This refers to the content type.</div>
            </div>
            -->

            <div class="field">
                <label>From files:</label>
                <span
                tal:content="set/fileReferences"
                    >./plone_forms/discussion_reply_form.pt</span>
            </div>

            <!--
            <div class="field">
                <label>Code reference</label>
                <img src="++resource++arrowRight.gif" />
            </div>
	    -->
        </fieldset>

        <div class="visualClear"></div>
    </tal:msgstring>

        <input type="submit" name="SUBMIT" value="Submit" />
    </form>

<!-- From here to the end are only hardcoded samples, we should move them to the dynamic part -->
<!-- Multiline example start -->

    <!--
    <p class="discreet">
    This is a static version of how multiline strings are handled:
    </p>

    <fieldset class="message-strings">
        <legend>String #121</legend>

        <div class="field">
            <label class="language-code">en</label><br />
            <span>English <br />Multiline-Blah</span>
        </div>

        <div class="field">
            <label class="language-code">pt</label><br />
            <span>Portugues <br />Multiline-Blah</span>
        </div>

        <div class="field">
            <label class="language-code">pt-br</label>
            <textarea type="text" columns="60" rows="5">Brazilian 
Multiline-Blah</textarea>
            <div class="formHelp">Fill in the Brazilian Portuguese translation.</div>
        </div>

    </fieldset>

    <fieldset class="message-strings">

        <legend>String information</legend>

        <div class="field">
            <label>Comment</label>
            <img src="++resource++arrowRight.gif" />
        </div>

        <div class="field">
            <label>From file</label>
            <span>./plone_forms/discussion_reply_form.pt</span>
        </div>

        <div class="field">
            <label>Code reference</label>
            <img src="++resource++arrowDown.gif" />
            <pre>
&lt;input class="context" 
    i18n:attributes="value" 
    name="form.button.Save" 
    tabindex="" 
    tal:attributes="tabindex tabindex/next;
                    name string:discussion_reply:method;" 
    type="submit" 
    value="Add Comment" /&gt;
            </pre>

        </div>
    </fieldset>

    <div class="visualClear"></div>
-->
<!-- Multiline example end -->

<!-- Plural example start -->
<!--
    <p class="discreet">
    Plural translation example (XXX: not dynamic yet):
    </p>    
    <fieldset class="message-strings">
        <legend>String #120</legend>

        <div class="field">
            <label class="language-code">en[0]</label>
            <span>English Singular</span>
        </div>

        <div class="field">
            <label class="language-code">en[1]</label>
            <span>English Plural</span>
        </div>

        <fieldset>
            <legend>Plural forms translation</legend>

            <div class="field">
                <label class="language-code">pt-br[0]</label>
                <img src="++resource++info.gif" title="Example: 1 dead horse." />
                <input type="text" value="Brazilian Blah" /><img src="++resource++arrowBottom.gif" title="Clone to other strings" />

            </div>
            <div class="field">
                <label class="language-code">pt-br[1]</label>
                <img src="++resource++info.gif" title="Example: 5 dead horses." />
                <input type="text" value="Brazilian Blah"/>
            </div>
        </fieldset>

    </fieldset>

    <fieldset class="message-strings">

        <legend>String information</legend>

        <div class="field">
            <label>Comment</label>
            <img src="++resource++arrowDown.gif" />
            <div class="discreet">This refers to the content type.</div>
        </div>

        <div class="field">
            <label>From file</label>
            <span>./plone_forms/discussion_reply_form.pt</span>
        </div>

        <div class="field">
            <label>Code reference</label>
            <img src="++resource++arrowRight.gif" />
        </div>
    </fieldset>

    <div class="visualClear"></div>
-->
<!-- Plural example end -->

    </div> <!-- tal:condition="not: view/submitted" -->
</div>

</body>
</html>
