<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="malone"
>
  <metal:block fill-slot="head_epilogue">
    <style type="text/css">
      p#more-hot-bugs {float:right; margin-top:7px;}
    </style>
  </metal:block>
  <body>
    <tal:side metal:fill-slot="side" condition="view/uses_launchpad_bugtracker">
      <div id="involvement" class="portlet involvement">
        <ul>
          <li style="border: none">
            <a href="+filebug" class="menu-link-filebug sprite bugs">
              Report a bug
            </a>
          </li>
          <li>
            <a tal:define="addquestion_url view/addquestion_url"
               tal:condition="addquestion_url"
               tal:attributes="href view/addquestion_url"
               class="menu-link-filebug sprite answers">
              Ask a question
            </a>
          </li>
        </ul>
      </div>
      <div class="portlet">
          <dl tal:define="bug_supervisor context/bug_supervisor">
            <dt id="bug-supervisor">Bug supervisor:</dt>
              <dd>
                <tal:none condition="not:bug_supervisor">None set</tal:none>
                <a tal:condition="bug_supervisor"
                   tal:replace="structure bug_supervisor/fmt:link">Bob Johnson</a>
                <tal:edit-bug-supervisor
                    condition="context/menu:bugs/bugsupervisor|nothing">
                  <a tal:define="link context/menu:bugs/bugsupervisor"
                     tal:condition="link/enabled"
                     tal:attributes="href link/url; title link/text">
                    <img tal:attributes="alt link/text" src="/@@/edit" />
                  </a>
                </tal:edit-bug-supervisor>
              </dd>
            </dl>
            <dl tal:define="securitycontact context/security_contact">
              <dt id="bug-security">Security contact:</dt>
              <dd>
                <tal:none condition="not:securitycontact">None set</tal:none>
                <a tal:condition="securitycontact"
                   tal:replace="structure securitycontact/fmt:link">
                  Billy Anderson
                </a>
                <tal:edit-securitycontact
                    condition="context/menu:bugs/securitycontact|nothing">
                  <a tal:define="link context/menu:bugs/securitycontact"
                     tal:condition="link/enabled"
                     tal:attributes="href link/url; title link/text">
                    <img tal:attributes="alt link/text" src="/@@/edit" />
                  </a>
                </tal:edit-securitycontact>
              </dd>
            </dl>
      </div>
      <div tal:replace="structure context/@@+portlet-bugfilters" />
      <div tal:replace="structure context/@@+portlet-bugtags" />
      <tal:releasecriticalbugs
          tal:condition="view/shouldShowReleaseCriticalPortlet"
          tal:content="structure context/@@+portlet-bugtasklist-seriesbugs" />
      <tal:milestonecriticalbugs
          tal:condition="view/shouldShowReleaseCriticalPortlet"
          tal:content="structure context/@@+portlet-bugtasklist-milestonebugs" />
    </tal:side>
    <div metal:fill-slot="main" class="tab-bugs"
         tal:define="search_url string:+bugs;
                     advanced_search_url string:+bugs?advanced=1">



      <tal:uses_malone condition="view/uses_launchpad_bugtracker">
      <tal:has_bugtasks condition="context/has_bugtasks">
        <div class="search-box">
          <metal:search
            use-macro="context/@@+bugtarget-macros-search/simple-search-form"
          />
        </div>
        <script type="text/javascript"><!--
             $('field.searchtext').focus();
        --></script>
      </tal:has_bugtasks>

      <tal:has_hot_bugs condition="view/hot_bugs_info/bugtasks">
        <h2 style="margin-top: 1em">Hot bugs</h2>

        <table class="listing" id="hot-bugs"
          tal:define="show_package python: 'packagename' in view.columns_to_show
          ">
          <thead>
            <tr>
              <th colspan="3">Summary</th>
              <th
                tal:condition="show_package">
                Package
              </th>
              <th>Status</th>
              <th>Importance</th>
              <th>Last changed</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="bugtask view/hot_bugs_info/bugtasks">
              <td class="icon left">
                <span tal:replace="structure bugtask/image:icon" />
              </td>
              <td style="text-align: right">
                #<span tal:replace="bugtask/bug/id" />
              </td>
              <td>
                <a tal:attributes="href bugtask/fmt:url"
                   tal:content="bugtask/bug/title" />
              </td>
              <td tal:content="structure bugtask/sourcepackagename/name|default"
                tal:condition="show_package"
              >&mdash;</td>
              <td tal:attributes="class string:status${bugtask/status/name}"
                  tal:content="bugtask/status/title" />
              <td tal:attributes="
                    class string:importance${bugtask/importance/name}"
                  tal:content="bugtask/importance/title" />
              <td tal:content="bugtask/bug/date_last_updated/fmt:displaydate" />
            </tr>
          </tbody>
        </table>
        <p id="more-hot-bugs"
           tal:condition="view/hot_bugs_info/has_more_bugs">
          <a tal:attributes="href string:${context/fmt:url/+bugs}?orderby=-heat&field.status%3Alist=NEW&field.status%3Alist=INCOMPLETE_WITH_RESPONSE&field.status%3Alist=INCOMPLETE_WITHOUT_RESPONSE&field.status%3Alist=CONFIRMED&field.status%3Alist=TRIAGED&field.status%3Alist=INPROGRESS&field.status%3Alist=FIXCOMMITTED&field.omit_dupes=on">See all hot bugs</a>
        </p>
      </tal:has_hot_bugs>

      <tal:no_hot_bugs condition="not: view/hot_bugs_info/bugtasks">
        <p id="no-bugs-filed"><strong>There are currently no
          <span tal:condition="context/has_bugtasks">hot</span> bugs filed
          against <tal:project_title replace="context/title" />.</strong></p>

        <p id="no-bugs-report"><a href="+filebug">Report a bug.</a></p>
      </tal:no_hot_bugs>
    </tal:uses_malone>

    <tal:not_uses_malone condition="not: view/uses_launchpad_bugtracker">
      <p id="no-malone"><strong><tal:project_title replace="context/title" /> does not use Launchpad for
        bug tracking.</strong></p>
          <ul>
            <li id="bugtracker" tal:condition="not: view/uses_launchpad_bugtracker">
              <strong>Bug tracker:</strong><br />
              <span style="margin-left: 1em">
                <tal:bugtracker replace="structure view/bugtracker" />
              </span>
            </li>
          </ul>

        <p tal:condition="context/required:launchpad.Edit"
           id="no-malone-edit"
           tal:define ="configure_bugtracker context/menu:overview/configure_bugtracker | nothing"
           >
          <a tal:condition="configure_bugtracker"
             tal:replace="structure configure_bugtracker/fmt:link"/>
          <a tal:condition="not: configure_bugtracker"
             tal:attributes="href string:${context/fmt:url/+edit}">
            Enable bug tracking.</a>
        </p>
    </tal:not_uses_malone>

    </div><!-- main -->
  </body>
</html>
