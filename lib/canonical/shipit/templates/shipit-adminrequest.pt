<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>

<body>

  <div metal:fill-slot="body">

    <h1 tal:condition="not: view/current_order">
      Make a new <span tal:replace="view/series/name/capitalize" />
      Request</h1>
    <h1 tal:condition="view/current_order">Change a Request</h1>

    <table>
    <tbody>
    <tr>
    <td width="80%" id="main-content">

      <div class="error message"
        tal:repeat="top_of_page_error view/form_wide_errors"
        tal:content="structure top_of_page_error">
        Schema validation errors.
      </div>

      <form method="post" tal:attributes="action request/URL"
            name="adminrequest">

      <h2>Quantities</h2>

      <tal:block define="widgets_matrix view/widgetsMatrixWithFlavours">
        <metal:quantity_widgets
            use-macro="context/@@+shipit-macros/quantity_widgets" />
      </tal:block>

      <br />
      <label tal:attributes="for view/widgets/highpriority/name">
        <span tal:replace="structure view/widgets/highpriority" />
        High priority
      </label>
      <br />

      <h2>Shipping Details</h2>

      <table class="headers-right-aligned">
        <tbody>
          <metal:shipping_details
            use-macro="context/@@+shipit-macros/shipping_details"
          />
        </tbody>
      </table>

      <br />
      <div style="text-align: right;">
        <input type="hidden" name="series"
               tal:attributes="value view/series/name" />
        <input tal:condition="view/current_order"
               tal:attributes="value view/current_order/id"
               type="hidden" name="order" />
        <input tal:replace="structure view/actions/field.actions.request/render" />
      </div>

      </form>

    </td>
    <td
      width="20%" id="navigation"
      style="vertical-align: top;"
      tal:content="structure context/@@+portlet-navigation"
    />
    </tr>
    </tbody>
    </table>  
  
  </div>

</body>
</html>
