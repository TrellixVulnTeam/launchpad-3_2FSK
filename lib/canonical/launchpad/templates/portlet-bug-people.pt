<div class="portlet">
    <h4>Subscriptions</h4>

    <div class="portletBody">
        <div class="portletContent even"
             tal:define="subscriptions context/subscriptions;
                         productass context/productassignments;
                         packageass context/packageassignments">

            <h5>submitted by:</h5>
            <ul class="people">
                <li><span
                tal:replace="context/owner/browsername">owner</span></li>
            </ul>

            <tal:products tal:define="products python:[p for p in productass]" >

            <h5 tal:condition="products">upstream maintainers:</h5>

            <ul class="people">
                <li tal:repeat="ass products"
                    tal:content="ass/product/owner/browsername">Product
                    Maintainer</li>
                <li tal:repeat="ass products"
                    tal:content="ass/assignee/browsername|default"></li>
            </ul>

            </tal:products>

            <tal:packages tal:define="packages python:[p for p in packageass]" >

            <h5 tal:condition="packages">package maintainers:</h5>

            <ul class="people">
                <li tal:repeat="ass packages"
                    tal:content="ass/sourcepackage/maintainer/browsername">Package
                    Maintainer</li>
                <li tal:repeat="ass packages"
                    tal:content="ass/assignee/browsername|default"></li>
            </ul>

            </tal:packages>

          <tal:subscriptions
            tal:define="ccs python:[s for s in subscriptions if s.subscription==2];
                        watches python:[s for s in subscriptions if s.subscription==1];
                        ignores python:[s for s in subscriptions if s.subscription==3]">

            <h5 tal:condition="ccs">cc:</h5>
            <ul class="people">
                <li tal:repeat="sub ccs">
                  <a href="#"
                     tal:content="sub/person/browsername"
                     tal:attributes="href python:'people/'+str(sub.id)+'/+edit'">Dafydd</a>
                </li>
            </ul>

            <h5 tal:condition="watches">watch:</h5>
            <ul class="people">
                <li tal:repeat="sub watches">
                  <a href="#"
                     tal:content="sub/person/browsername"
                     tal:attributes="href python:'people/'+str(sub.id)+'/+edit'">Vincenzo</a>
                </li>
            </ul>

            <h5 tal:condition="ignores">ignore:</h5>
            <ul class="people">
                <li tal:repeat="sub ignores">
                  <a href="#"
                     tal:content="sub/person/browsername"
                     tal:attributes="href
                     python:'people/'+str(sub.id)+'/+edit'">Jake</a>
                </li>
            </ul>

          </tal:subscriptions>
        <a href="people/+new"
            style="font-size: 85%; float: right; display: inline; clear: both; text-decoration: none;"
            title="Add a subscriber to this bug.">
            <img src="++resource++add.gif" alt="+" />
            Subscribe
        </a><br />
        </div>

    </div>
</div>
