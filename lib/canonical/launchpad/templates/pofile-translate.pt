<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="python: (modules['canonical.config'].config.devmode and
                            path('view/macro:page/defaultnomenu')) or
                           path('context/@@main_template/master')"
  i18n:domain="launchpad"
>

  <body>

    <metal:leftportlets fill-slot="portlets_one">
      <div tal:replace="structure context/@@+portlet-about" />
      <div tal:replace="structure context/@@+portlet-details" />
      <div tal:replace="structure context/@@+portlet-stats" />
    </metal:leftportlets>

    <metal:rightportlets fill-slot="portlets_two">
      <div tal:replace="structure context/@@+portlet-translators" />
      <div tal:replace="structure context/@@+portlet-contributors" />
    </metal:rightportlets>

    <div metal:fill-slot="main">

      <tal:form-not-writeable condition="not:view/form_is_writeable">
        <div>
          <a tal:attributes="href context/potemplate/fmt:url"
             tal:content="context/potemplate/title">
            evolution 2.10 template
          </a>
        </div>
        <h1>
          Browsing
          <tal:language replace="context/language/englishname">
            Spanish
          </tal:language>
          translation
        </h1>
      </tal:form-not-writeable>
      <tal:form-writeable condition="view/form_is_writeable">
        <div>
          <a tal:attributes="href context/potemplate/fmt:url"
             tal:content="context/potemplate/title">
            evolution 2.10 template
          </a>
        </div>
        <h1>
          Translating into
          <tal:language replace="context/language/englishname">
            Spanish
          </tal:language>
        </h1>
      </tal:form-writeable>

      <tal:havepluralforms condition="view/has_plural_form_information">

        <tal:is_beta condition="view/isBetaUser">
        <!-- Search box -->
          <form id="search_form" method="get" style="float: right;"
                action="+translate">
            <!-- the hidden elements -->
            <input tal:condition="view/second_lang_code"
                   tal:replace="structure view/alternative_language_widget/hidden" />
            <input type="hidden" name="batch" value=""
                   tal:attributes="value view/size" />
            <input type="hidden" name="show" value="all" />
            <label for="search_box">Search:</label>
            <input id="search_box" type="text" name="search"
                   title="Enter English string to search for"
                   tal:attributes="value view/search_text" />
          </form>
        </tal:is_beta>

        <!-- Alternative suggestions. -->
        <div metal:define-macro="editform">
          <form method="get" style="text-align: left;" action="+translate">
            <!-- the hidden elements -->
            <input type="hidden" name="show" value=""
                   tal:attributes="value view/show" />
            <input type="hidden" name="start" value=""
                   tal:attributes="value view/start" />
            <input type="hidden" name="batch" value=""
                   tal:attributes="value view/size" />
            <tal:comment replace="nothing">
              Suggestions from this alternative language will be displayed as
              well as suggestions from the translation language. In the case
              where two languages are very similar it will often be useful to
              show the second language as a source of suggestions when
              translating into the first.
            </tal:comment>
            <label>Make suggestions from:</label>
            <tal:language-widget content="structure view/alternative_language_widget" />
            <input type="submit" name="select_alternate_language" value="Change" />
          </form>
        </div>
        <form method="get" style="text-align: left;" action="+translate">
          <!-- the hidden elements -->
          <input tal:condition="view/second_lang_code"
                 tal:replace="structure view/alternative_language_widget/hidden" />
          <input type="hidden" name="batch" value=""
                 tal:attributes="value view/size" />
          <label for="show_selector">Show:</label>

          <tal:comment tal:replace="nothing">
            The 'selected' attribute value in next select means basically
            the following:

            if request.form['show'] == literalvalue:
                return 'selected'
            else:
                return None

            Where 'literalvalue' is 'all', 'untranslated' 'fuzzy' or
            'translated'.
          </tal:comment>

          <select id="show_selector" name="show"
                  title="Choose which items to show">
            <option value="all"
              tal:attributes="selected
              request/htmlform:show/selected/all"
              >
              all
            </option>
            <option value="untranslated"
              tal:attributes="selected
              request/htmlform:show/selected/untranslated"
              >
              untranslated
            </option>
            <option value="need_review"
              tal:attributes="selected
              request/htmlform:show/selected/need_review"
              >
              need review
            </option>
            <option value="translated"
              tal:attributes="selected
              request/htmlform:show/selected/translated"
              >
              translated
            </option>
            <option value="new_suggestions"
              tal:attributes="selected
              request/htmlform:show/selected/new_suggestions"
              >
              with new suggestions
            </option>
            <option value="changed_in_launchpad"
              tal:attributes="selected
              request/htmlform:show/selected/changed_in_launchpad"
              >
              changed in Launchpad
            </option>
          </select>
          <input
            type="submit" value="Filter" />
        </form>

        <!-- The translation form. -->
        <tal:block condition="not:view/batchnav/currentBatch">
          <div class="documentDescription">
            There are no messages that match this filtering.
          </div>
        </tal:block>

        <tal:block condition="view/batchnav/currentBatch">
          <form method="POST" action="">
            <!-- the hidden elements -->
            <input type="hidden" name="show" value=""
                   tal:attributes="value view/show" />
            <input type="hidden" name="start" value=""
                   tal:attributes="value view/start" />
            <input type="hidden" name="batch" value=""
                   tal:attributes="value view/size" />
            <input type="hidden" name="lock_timestamp" value=""
                   tal:condition="view/form_is_writeable"
                   tal:attributes="value view/lock_timestamp/isoformat" />
            <table class="listing" style="margin-top: 0.5em;">
              <thead>
                <tr class="results">
                  <td colspan="5">
                    <!-- Paging doodads. -->
                    <tal:navigation replace="structure view/batchnav/@@+navigation-links-upper" />
                  </td>
                </tr>
              </thead>
              <tbody class="greater" id="messages_to_translate">
                <tal:loop repeat="translationmessage_view view/translationmessage_views">
                  <div tal:replace="structure translationmessage_view" />
                </tal:loop>
              </tbody>
              <tfoot>
                <tr tal:condition="view/form_is_writeable">
                  <th colspan="5">
                    <tal:review
                      condition="not: view/user_is_official_translator"
                    >
                      Your translations will be held for review by the
                      official translators for this file.
                    </tal:review>
                    <input type="submit"
                           name="submit_translations"
                           value="Save &amp; Continue"
                           style="text-align: right;"/>
                  </th>
                </tr>
              </tfoot>
            </table>

          </form>
          <!-- Paging doodads. -->
          <tal:navigation replace="structure view/batchnav/@@+navigation-links-lower" />
        </tal:block>
        <p class="discreet">
          Translation status:
          <span class="language-code"
                tal:replace="context/language/englishname">Spanish</span>
          <span tal:replace="view/completeness">0 %</span>
        </p>
      </tal:havepluralforms>
    </div>

  </body>
</html>
