<html
    xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    lang="en"
    metal:use-macro="context/@@main_template/master"
    i18n:domain="launchpad">

<head>
    <title metal:fill-slot="title">Edit Details for 
      <span
      tal:replace="context/product/displayname">$Product.displayname</span>
      <span
      tal:replace="context/version">$ProductRelease.version</span>
    </title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <!-- This tal:dummy block never turns into HTML, but it triggers the
    edit method on the ProductReleaseView class. This checks to see if a
    form has been submitted to it, and if so updates the product.  -->

    <tal:dummy condition="view/edit" />

    <h1>Edit Release:
        <span tal:replace="context/product/displayname">Product</span>
        <span tal:content="context/version">$ProductRelease.version
        </span></h1>

    <div class="documentDescription">
    Please edit the release details for <span
    tal:replace="context/product/displayname">Product</span> <span
    tal:content="context/version">Version</span> below. You cannot change
    the version, but almost everything else is editable.
    </div>

    <fieldset>

        <legend><span
            tal:replace="context/product/displayname">Product</span> <span
                tal:content="context/version">Version</span> Details</legend>

        <form action="+edit" method="post">

        <div class="field">

            <label>Release Codename / Title</label>

            <span class="fieldRequired" title="Required">(Required)</span>

                  <div class="formHelp">
                    Many open source releases have a nickname, or title,
                    like "Wishing On A Warthog" or "Return To Camp Vader".
                    Put that here.
                  </div>

                <input type="text" name="title" size="50"
                       value="" tal:attributes="value context/title" />
        </div>

        <div class="field">

            <label>Short Description</label>

                  <div class="formHelp">
                    A single paragraph introduction or overview of this
                    release. For example: <i>Version 1.7.0 introduces a new
                    layout engine with support for CSS2 and parts of CSS3,
                    as well as improving performance significantly.</i>
                  </div>

                <textarea cols="40" rows="3" name="shortdesc" 
                          tal:content="context/shortdesc">
                </textarea>
        </div>
        
        <div class="field">

            <label>Release Notes</label>

                  <div class="formHelp">
                  Use this space for a more detailed set of release notes
                  than the summary above. Could also include a URL to the
                  actual official release notes.
                  </div>

                <textarea cols="40" rows="7" name="description"
                          tal:content="context/description">
                </textarea>
        </div>

        <div class="field">

            <label>Changelog</label>

                  <div class="formHelp">
                    Paste the formal changelog in here. This will always be
                    displayed in plain text with fixed-width font
                    formatting.
                  </div>

                <textarea cols="40" rows="20" name="changelog"
                          tal:content="context/changelog">
                </textarea>
        </div>

        <div class="formControls">

            <!--
            NB the name and value of the submit field below are essential to
            clue the ProductView.edit() method in that the form has been
            submitted.
            -->
            <input class="context" type="submit"
                   name="Update"
                   value="Update Release Details" />

        </div>
        </form>


    </fieldset>

</div>

</body>
</html>
