When a bug is marked as a duplicate of another bug, the duplicate bug's
page shows this prominently, and the comment field is accompanied by an extra
warning that it's a duplicate.

    >>> user_browser.open(
    ... 'http://bugs.launchpad.dev/debian/+source/mozilla-firefox/+bug/2')
    >>> print find_tag_by_id(
    ...     user_browser.contents, 'duplicate-of').renderContents()
    bug #1...
    >>> for message in find_tags_by_class(user_browser.contents, 'message'):
    ...     print extract_text(message)
    Remember...Comment here only if...

The "Affects" lines are also not expandable, preventing people from changing
the bug's status to no effect.

    >>> affects_table = find_tags_by_class(user_browser.contents, 'listing')[0]
    >>> "toggleFormVisibility('task" in affects_table
    False

If the bug is no longer marked as a duplicate,

    >>> user_browser.getLink(id="change_duplicate_bug").click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/debian/+source/mozilla-firefox/+bug/2/+duplicate'
    >>> user_browser.getControl(name='field.duplicateof').value = ''
    >>> user_browser.getControl('Change').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/debian/+source/mozilla-firefox/+bug/2'

the duplicate notifications disappear,

    >>> find_tags_by_class(user_browser.contents, 'message')
    []

and the "Affects" lines become expandable once more.

    >>> affects_table = find_tags_by_class(user_browser.contents, 'listing')[0]
    >>> print affects_table
    <...
    ...toggleFormVisibility('task...
