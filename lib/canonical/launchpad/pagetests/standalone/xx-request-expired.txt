
/+soft-timeout provides a way of testing if hard timeouts work in addition
to how it works in the xx-soft-timeout.txt test.

If we set soft_request_timeout to some value, the page will take
slightly longer then the soft_request_timeout value to generate, thus
causing a soft timeout to be logged.

    >>> from textwrap import dedent
    >>> from canonical.config import config
    >>> from canonical.launchpad.webapp.errorlog import globalErrorUtility
    >>> old_lastid = globalErrorUtility.lastid
    >>> test_data = dedent("""
    ...     [database]
    ...     db_statement_timeout: 1
    ...     soft_request_timeout: 2
    ...     """)
    >>> config.push('base_test_data', test_data)
    >>> print http(r"""
    ... GET /+soft-timeout HTTP/1.1
    ... Authorization: Basic Zm9vLmJhckBjYW5vbmljYWwuY29tOnRlc3Q=
    ... """)
    HTTP/1.1 503 Service Unavailable
    ...
    Retry-After: 900
    ...
    <title>Error: Timeout</title>
    ...

We can now see that an error was logged since lastid has changed:

    >>> old_lastid != globalErrorUtility.lastid
    True

Let's reset the config value we changed:

    >>> base_test_data = config.pop('base_test_data')

