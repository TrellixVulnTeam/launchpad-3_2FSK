<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-actions" />
</metal:rightportlets>

<div metal:fill-slot="main"> 
<tal:dummy tal:condition="view/processForm" />

  <h1>Contact Email Address</h1>

  <form autocomplete="off" name="email" action="" method="POST">

    <tal:block tal:condition="not: context/preferredemail">
      <p>This team has no contact email address. This means that Launchpad
      notifications directed to this team will be sent to each one of its
      members.  If you prefer, you can add a contact email address and that
      will be used for notifications sent to this team.</p>

      <p tal:condition="view/errormessage" tal:content="view/errormessage"
           class="portalMessage" />

      <p tal:condition="view/feedback" tal:content="view/feedback"
           class="portalMessage" />

      <table>
        <tr>
          <td align="right">New contact email:</td>
          <td><input type="text" size="30" name="newcontactemail" 
                     tal:attributes="value view/wrongemail|nothing" /></td>
          <td><input type="submit" name="ADD_EMAIL" value="Add" /></td>
        </tr>
      </table>
    </tal:block>

    <tal:block tal:condition="context/preferredemail">
      <p>All notifications directed to this team will go to its contact email
      address.</p>

      <p tal:condition="view/errormessage" tal:content="view/errormessage"
           class="portalMessage" />

      <p tal:condition="view/feedback" tal:content="view/feedback"
           class="portalMessage" />

      <table>
        <tr>
          <td align="right">Contact email:</td>
          <td><b tal:content="context/preferredemail/email" /></td>
          <td align="left"><input type="submit" name="REMOVE_EMAIL" value="Remove" /></td>
        </tr>

        <tr>
          <td colspan="3">&nbsp;</td>
        </tr>

        <tr>
          <td align="right">New contact email:</td>
          <td><input type="text" size="30" name="newcontactemail" /></td>
          <td align="left">
            <input type="submit" name="CHANGE_EMAIL" style="padding: 0em 0.7em" 
                   value="Change" />
          </td>
        </tr>
      </table>
    </tal:block>

    <tal:block tal:condition="context/unvalidatedemails">
      <br /><br />
      Any of these addresses need to be confirmed before you can use it as 
      the contact address of this team.

      <div style="padding: 0.7em 0em">
        <div tal:repeat="email context/unvalidatedemails">
          <label tal:attributes="for email">
            <input type="radio" name="UNVALIDATED_SELECTED"
                   tal:attributes="value email; id email" />
            <b tal:content="email" />
          </label>
        </div>
      </div>
      <input type="submit" value="Remove" name="REMOVE_UNVALIDATED" />
      <input type="submit" value="Confirm" name="VALIDATE" />
    </tal:block>

  </form>
</div>
</body>
</html>
