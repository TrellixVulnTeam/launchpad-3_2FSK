<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>

    <metal:portlets fill-slot="portlets">
      <div tal:replace="structure context/@@+portlet-lifecycle" />

  <div tal:replace="structure context/@@+portlet-subscribers" />

  <div tal:replace="structure context/@@+portlet-bugs" />

  <div tal:replace="structure context/@@+portlet-branches" />
    </metal:portlets>


<div metal:fill-slot="main">

  <div style="float: right;">
    <img id="mentoring-available-icon"
	 src="/@@/mentoring-large" title="Mentoring available"
         tal:condition="context/mentoring_offers/count" />
    <img id="branch-available-icon"
	 src="/@@/branch-large" title="Branch available"
         tal:condition="context/branch_links/count" />
    <img id="informational-icon"
	 src="/@@/info-large"
         title="Informational blueprint, no implementation necessary"
         tal:condition="context/informational" />
  </div>
  <h1>Blueprint overview</h1>

  <p tal:repeat="notice view/notices" tal:content="notice"
     class="informational message">
    notice goes here
  </p>

  <p tal:condition="context/superseded_by" class="warning message">
    This blueprint has been superseded. See the newer blueprint
    "<b><a tal:content="context/superseded_by/title"
           tal:attributes="href context/superseded_by/fmt:url">new blueprint
    title</a></b>" for updated plans.
  </p>


    <table class="summary">
      <tbody>
        <tr>
          <th>Priority:</th>
          <td tal:content="context/priority/title">High</td>
        </tr>
        <tr>
          <th>Definition:</th>
          <td>
            <tal:definition replace="context/definition_status/title" />
            <tal:guidance condition="not: context/direction_approved"
            >(Needs guidance)</tal:guidance>
          </td>
        </tr>
        <tr>
          <th>Implementation:</th>
          <td>
            <img tal:condition="context/informational"
                 src="/@@/info" alt="Informational"
                 title="Informational blueprint, no implementation necessary"
                 />
            <tal:impl content="context/implementation_status/title">Unknown</tal:impl>
          </td>
        </tr>
        <tr tal:condition="context/goal">
          <th>Series goal:</th>
          <td>
            <a
              tal:condition="context/goal/required:launchpad.Driver"
              tal:attributes="href string:${context/fmt:url}/+decide"
              tal:content="context/goalstatus/title"
            >Approved</a>
            <tal:cannotchange
              tal:condition="not: context/goal/required:launchpad.Driver"
              tal:replace="context/goalstatus/title"
            >Approved</tal:cannotchange>
            for
            <a tal:condition="context/productseries"
               tal:attributes="href context/productseries/fmt:url"
               tal:content="context/productseries/name">1.2</a>
            <a  tal:condition="context/distroseries"
                tal:attributes="href context/distroseries/fmt:url"
                tal:content="context/distroseries/name">hoary</a>
          </td>
        </tr>
        <tr>
          <th>Assignee:</th>
          <td>
            <a tal:condition="context/assignee"
               tal:replace="structure context/assignee/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/assignee">None</tal:none>
          </td>
        </tr>
        <tr>
          <th>Drafter:</th>
          <td>
            <a tal:condition="context/drafter"
               tal:replace="structure context/drafter/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/drafter">None</tal:none>
          </td>
        </tr>
        <tr>
          <th>Approver:</th>
          <td>
            <a tal:condition="context/approver"
               tal:replace="structure context/approver/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/approver">None</tal:none>
          </td>
        </tr>
        <tr
          tal:define="sprint_links context/sprint_links"
          tal:condition="sprint_links"
        >
          <th>Sprints:</th>
          <td>
            <tal:per_sprint tal:repeat="sprint_link sprint_links">
                <tal:approval replace="structure sprint_link/@@+icon-status" />
                <a
                  tal:attributes="href sprint_link/sprint/fmt:url"
                  tal:content="sprint_link/sprint/name"
                /><br />
            </tal:per_sprint>
          </td>
        </tr>
      </tbody>
    </table>
    <tal:desc replace="structure context/summary/fmt:text-to-html">
      The blueprint summary will go here.
    </tal:desc>
    <ul class="menu">
      <li class="link">
        <a
          tal:condition="context/specurl"
          tal:attributes="href context/specurl"
        ><strong>Read the full specification &raquo;</strong></a>
        <a tal:condition="not:context/specurl" href="+edit"
        >Set the URL for this specification</a>
      </li>
    </ul>
    <tal:has_milestone condition="context/milestone">
      Milestone target:
      <img alt="" src="/@@/milestone" />
      <a tal:attributes="href context/milestone/fmt:url">
        <span tal:replace="context/milestone/name">1.0</span>.</a>
    </tal:has_milestone>

  <tal:mentors define="mentoring_offers context/mentoring_offers"
               condition="mentoring_offers">
    <p>
      <img src="/@@/mentoring" alt="Mentoring"
           title="People have offered to mentor this work" />
      <b>Mentors:</b>
      <tal:block repeat="mentoring_offer mentoring_offers">
        <a tal:replace="structure mentoring_offer/owner/fmt:link">foobar</a>
      </tal:block>
    </p>
    <tal:block condition="not: context/is_complete">
      <p tal:condition="view/userIsMentor">
        &raquo;
        <a href="+retractmentoring">Retract my offer of mentorship</a>
      </p>
    </tal:block>
  </tal:mentors>

  <p tal:condition="view/userCanMentor">
    &raquo; <a href="+mentor">Offer to mentor someone implementing
    this blueprint</a>
  </p>

  <tal:whiteboard condition="context/whiteboard">
    <h2>Whiteboard</h2>
    <div tal:content="structure context/whiteboard/fmt:text-to-html"
    >Whiteboard text goes here.</div>
  </tal:whiteboard>

  <tal:deptree condition="view/has_dep_tree">

      <h2>Dependency tree</h2>

    <tal:block tal:replace="structure context/@@+deptreeimgtag" />

    <p class="discreet">
      * Blueprints in grey have been implemented.
    </p>

  </tal:deptree>

      <div tal:replace="structure context/@@+portlet-feedbackqueue" />
      <div tal:condition="context/goal" class="related">
        <h2>Nearby</h2>
        <ul>

        <li>
          <a tal:attributes="href context/goal/fmt:url">
            Other <tal:goal replace="context/goal/displayname" /> blueprints
          </a>
        </li>
      </ul>

      </div>
    </div>
  </body>
</html>
<!-- 1-0 inprogress Needs "Related Questions" portlet -->
