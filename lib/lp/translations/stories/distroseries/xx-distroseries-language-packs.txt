= Distribution series language packs admin =

For each distribution series, we can select several special language packs:

 - The one that has a full export use as the base export to get updates from.
 - The one that has translation updates based on the base export.
 - The one that is being tested which will become either a base one or an
   update one, depending of its type.


From this page, we are able to select which one of all the exported objects
availables will be set as the base, update or proposed/testing.

To reach that page we go to the distro series page and follow the link to
the language pack admin page.

    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary')
    >>> admin_browser.getLink('See all language packs').click()

Initially, there is no package selected.

    >>> base = admin_browser.getControl('Language pack base')
    >>> print base.displayValue
    ['(no value)']
    >>> delta = admin_browser.getControl('Language pack delta')
    >>> print delta.displayValue
    ['(no value)']
    >>> proposed = admin_browser.getControl('Proposed language pack update')
    >>> print proposed.displayValue
    ['(no value)']


    >>> base.displayOptions
    ['(no value)', '2007-09-10 19:16:01 UTC', '2007-09-10 19:14:26 UTC']

Let's select a base one:

    >>> base.displayValue = ['2007-09-10 19:16:01 UTC']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+language-packs

Now the admin page will show us that language pack selected.

    >>> base = admin_browser.getControl('Language pack base')
    >>> print base.displayValue
    ['2007-09-10 19:16:01 UTC']

Also, that change is shown in the public language pack listing web page:

    >>> browser.open('http://translations.launchpad.dev/ubuntu/hoary')
    >>> browser.getLink('See all language packs').click()
    >>> print extract_text(find_tag_by_id(browser.contents, "language_packs"))
    A language pack...
    Active language packs
    Base pack: 2007-09-10 19:16:01 UTC
    A complete set of translations for the OS.
    Delta pack:
    none yet
    Translation updates, applied on top of the base pack.
    Language pack being tested
    No pack is being tested right now.
    Currently unused language packs
    Delta language pack: 2007-09-10 19:15:19 UTC
    Delta language pack: 2007-09-10 19:15:01 UTC
    Full language pack: 2007-09-10 19:14:26 UTC

There is also an option to set/unset whether next language pack generation is
a full export:

    >>> admin_browser.getControl(
    ...     'Request a full language pack export').selected
    False
    >>> admin_browser.getControl(
    ...     'Request a full language pack export').selected = True
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+language-packs
    >>> print "\n".join(get_feedback_messages(admin_browser.contents))
    Your request has been noted. Next language pack export will include
    all available translations...

Once the system accepts the submission, we can see such change applied.

    >>> admin_browser.getControl(
    ...     'Request a full language pack export').selected
    True

There are no visible user interface changes once this flag is changed. It
just changes the behaviour of the language pack export, which is executed by cron,
it will do a full export of translations for this distro series.

