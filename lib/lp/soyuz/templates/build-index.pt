<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
>

  <body>

    <div metal:fill-slot="heading">
      <div style="float: left;">
      <h1 tal:content="CONTEXTS/fmt:pagetitle">i386 build of
        alsa-utils 1.0.9a-4ubuntu1 in ubuntu hoary RELEASE</h1>
      </div>
      <div style="float: right;">
      <p class="discreet">
        Created <span
          tal:attributes="title context/datecreated/fmt:datetime"
          tal:content="context/datecreated/fmt:displaydate"
          >2005-10-05 5:45</span>
      </p>
      </div>
    </div> <!-- heading -->

    <div metal:fill-slot="main">

      <div class="yui-g">

        <div id="status" class="yui-u first">
	  <div class="portlet">
            <div metal:use-macro="template/macros/status" />
          </div>
        </div>

        <div id="details" class="yui-u">
	  <div class="portlet">
            <div metal:use-macro="template/macros/details" />
          </div>
        </div>

      </div> <!-- yui-g  -->

      <div class="yui-g">

        <div id="binaries" class="yui-u first"
             tal:condition="context/binarypackages">
          <div class="portlet">
            <div metal:use-macro="template/macros/binaries" />
          </div>
        </div>

        <div id="files" class="yui-u"
             tal:condition="context/binarypackages">
          <div class="portlet">
            <div metal:use-macro="template/macros/files" />
          </div>
        </div>

      </div> <!-- yui-g  -->

      <div id="buildlog" class="portlet"
           tal:condition="context/buildstate/enumvalue:BUILDING">
        <div metal:use-macro="template/macros/buildlog" />
      </div>

   </div> <!-- main -->


<metal:macros fill-slot="bogus">

  <metal:macro define-macro="details">
    <tal:comment replace="nothing">
      Details section.
    </tal:comment>
    <h2>Build details</h2>
    <div class="two-column-list">
      <dl>
        <dt>Source:</dt>
          <dd>
            <span class="sprite package-source"
                  tal:condition="view/is_ppa"
                  tal:content="context/sourcepackagerelease/title"
             >firefox - 1.0</span>
            <a class="sprite package-source"
               tal:condition="not: view/is_ppa"
               tal:define="dspr context/distributionsourcepackagerelease"
               tal:content="dspr/sourcepackagerelease/title"
               tal:attributes="href dspr/fmt:url">firefox - 1.0</a>
          </dd>
      </dl>
      <dl>
        <dt>Archive:</dt>
          <dd>
            <span tal:condition="view/is_ppa"
                  tal:replace="structure context/archive/fmt:link"
             >Celso PPA</span>
            <a class="sprite distribution"
               tal:condition="not: view/is_ppa"
      	     tal:attributes="href context/archive/fmt:url"
               tal:content="context/archive/displayname"
             >Ubuntu Primary Archive</a>
          </dd>
      </dl>
      <dl>
        <dt>Series:</dt>
          <dd><a class="sprite distribution"
                 tal:define="series context/distroarchseries/distroseries"
                 tal:attributes="href series/fmt:url"
                 tal:content="series/displayname">Breezy Badger</a>
          </dd>
      </dl>
      <dl>
        <dt>Architecture:</dt>
          <dd><a class="sprite distribution"
                 tal:define="archseries context/distroarchseries"
                 tal:attributes="href archseries/fmt:url"
                 tal:content="archseries/architecturetag">i386</a>
          </dd>
      </dl>
      <dl>
        <dt>Pocket:</dt>
          <dd><span tal:replace="context/pocket/title">Release</span></dd>
      </dl>
      <dl>
        <dt>Component:</dt>
          <dd><span tal:replace="view/component/name">main</span></dd>
      </dl>
    </div>
  </metal:macro>

  <metal:macro define-macro="status">
    <tal:comment replace="nothing">
      Status section.
    </tal:comment>
    <h2>Build status</h2>
    <p>
      <span tal:replace="structure context/image:icon" />
      <span tal:attributes="
            class string:buildstatus${context/buildstate/name};"
            tal:content="context/buildstate/title">Fully built</span>
      <tal:retry
        define="link context/menu:context/retry"
        condition="link/enabled"
        replace="structure link/fmt:icon" />
      <tal:building condition="context/buildstate/enumvalue:BUILDING">
        on <a tal:content="view/buildqueue/builder/title"
              tal:attributes="href view/buildqueue/builder/fmt:url"/>
      </tal:building>
      <tal:built condition="context/builder">
        on <a tal:content="context/builder/title"
              tal:attributes="href context/builder/fmt:url"/>
      </tal:built>
    </p>

    <ul>
      <li tal:condition="context/dependencies">
        Missing build dependencies: <em
         tal:content="context/dependencies">x, y, z</em>
      </li>
      <tal:pending condition="context/buildstate/enumvalue:NEEDSBUILD">
        <li tal:define="eta context/getEstimatedBuildStartTime;">
          Start <tal:eta
            replace="eta/fmt:approximatedate">in 3 hours</tal:eta>
            (<span tal:replace="view/buildqueue/lastscore"/>)
            <tal:rescore define="link context/menu:context/rescore"
                         condition="link/enabled"
                         replace="structure link/fmt:icon" />
            <a href="https://help.launchpad.net/Packaging/BuildScores"
               target="_blank">What's this?</a>
        </li>
      </tal:pending>
      <tal:building condition="context/buildstate/enumvalue:BUILDING">
        <li>
          Started
          <span tal:attributes="title view/buildqueue/buildstart/fmt:datetime"
                tal:content="view/buildqueue/buildstart/fmt:approximatedate"
            >5 minutes ago</span>
        </li>
      </tal:building>
      <tal:built condition="context/was_built">
        <li tal:condition="context/buildduration">
          Started <span
           tal:define="start context/calculated_buildstart"
           tal:attributes="title start/fmt:datetime"
           tal:content="start/fmt:displaydate">2008-01-01</span>
        </li>
      </tal:built>
      <li tal:condition="context/datebuilt">
        Finished <span
          tal:attributes="title context/datebuilt/fmt:datetime"
          tal:content="context/datebuilt/fmt:displaydate">2008-01-01</span>
        <tal:duration condition="context/buildduration">
          (took <span tal:replace="context/buildduration/fmt:exactduration"/>)
        </tal:duration>
      </li>
      <li tal:define="file context/buildlog"
          tal:condition="file">
        <a class="sprite download"
           tal:attributes="href context/build_log_url"
           tal:content="string: buildlog">BUILDLOG</a>
        (<span tal:replace="file/content/filesize/fmt:bytes" />)
      </li>
      <li tal:define="file context/upload_log"
          tal:condition="file">
        <a class="sprite download"
           tal:attributes="href context/upload_log_url"
           tal:content="string: uploadlog">UPLOADLOG</a>
        (<span tal:replace="file/content/filesize/fmt:bytes" />)
      </li>
      <li tal:define="changesfile view/changesfile;"
          tal:condition="changesfile">
        <a class="sprite download"
           tal:attributes="href changesfile/http_url"
           tal:content="changesfile/filename">CHANGESFILE</a>
        (<span tal:replace="changesfile/content/filesize/fmt:bytes" />)
      </li>
    </ul>
  </metal:macro>

  <metal:macro define-macro="binaries">
    <tal:comment replace="nothing">
      Binaries section.
    </tal:comment>
    <h2>Binary packages</h2>
    <tal:non_ppa condition="not: view/is_ppa">
      <tal:upload_done condition="view/has_done_upload">
        <p class="discreet">Binary packages produced by this build:</p>
        <ul>
          <li tal:repeat="binpkg context/distroarchseriesbinarypackages">
            <a class="sprite package-binary"
               tal:attributes="href binpkg/fmt:url"
               tal:content="binpkg/displayname">
             foopkg 1.2-3
            </a>
          </li>
        </ul>
      </tal:upload_done>
      <tal:upload_not_done
        condition="not: view/has_done_upload"
        define="upload_status view/package_upload/status">
        <p class="discreet"
           tal:condition="upload_status/enumvalue:ACCEPTED"
          >Binary packages awaiting publication:</p>
        <p class="discreet"
           tal:condition="not: upload_status/enumvalue:ACCEPTED"
          >Binary packages awaiting approval
           in <span tal:replace="upload_status/name">NEW</span> queue:</p>
        <ul>
          <li tal:repeat="binpkg context/distroarchseriesbinarypackages">
            <span class="sprite package-binary"
                  tal:content="binpkg/displayname">foopkg 1.2-3</span>
          </li>
        </ul>
      </tal:upload_not_done>
    </tal:non_ppa>
    <tal:ppa condition="view/is_ppa">
    <p class="discreet">Binary packages produced by this build:</p>
    <ul>
      <li tal:repeat="binpkg context/binarypackages">
        <span class="sprite package-binary"
              tal:content="binpkg/title">foopkg - 1.2-3</span>
      </li>
    </ul>
    </tal:ppa>
  </metal:macro>

  <metal:macro define-macro="files">
    <tal:comment replace="nothing">
      Files section.
    </tal:comment>
    <h2>Built files</h2>
    <p class="discreet">Files resulting from this build:</p>
    <ul>
      <li tal:repeat="file view/files">
        <a class="sprite download"
           tal:content="file/filename"
           tal:attributes="href file/http_url"></a>
        (<span tal:replace="file/content/filesize/fmt:bytes" />)
      </li>
    </ul>
  </metal:macro>

  <metal:macro define-macro="buildlog">
    <tal:comment replace="nothing">
      Buildlog section.
    </tal:comment>
    <h2>Buildlog</h2>
    <div id="buildlog-tail" class="logtail"
         tal:define="logtail context/buildqueue_record/logtail"
         tal:content="structure logtail/fmt:text-to-html">
      <p>Things are crashing and burning all over the place.</p>
    </div>
    <p class="discreet" tal:condition="view/user">
      Updated on <span tal:replace="structure view/user/fmt:local-time"/>
    </p>
  </metal:macro>

</metal:macros>


  </body>
</html>
