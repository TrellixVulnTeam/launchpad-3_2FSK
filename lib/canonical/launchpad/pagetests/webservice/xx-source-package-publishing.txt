= Source Package Publishing =

Source package publishing details are available via a custom operation on
archives, getPublishedSources().

    >>> cprov_archive = webservice.get("/~cprov/+archive").jsonBody()
    >>> pubs = webservice.named_get(
    ...     cprov_archive['self_link'], 'getPublishedSources').jsonBody()

    >>> def print_publications(pubs):
    ...     for entry in sorted(pubs['entries']):
    ...         print entry['displayname']

    >>> print_publications(pubs)
    iceweasel 1.0 in warty
    pmount 0.1-1 in warty
    cdrkit 1.0 in breezy-autotest

getPublishedSources() can accept some optional filtering paramters to reduce
the number of returned publications.

Search by name and version using an exact match:

    >>> pubs = webservice.named_get(
    ...     cprov_archive['self_link'], 'getPublishedSources',
    ...     source_name="iceweasel", version="1.0", exact_match=True).jsonBody()
    >>> print_publications(pubs)
    iceweasel 1.0 in warty

Search by publishing status:

    >>> pubs = webservice.named_get(
    ...     cprov_archive['self_link'], 'getPublishedSources',
    ...     status=2).jsonBody()
    >>> print_publications(pubs)
    iceweasel 1.0 in warty
    pmount 0.1-1 in warty
    cdrkit 1.0 in breezy-autotest

Search by distroseries and pocket:

    >>> distros = webservice.get("/distros").jsonBody()
    >>> ubuntu = distros['entries'][0]
    >>> warty = webservice.named_get(
    ...     ubuntu['self_link'], 'getSeries',
    ...     name_or_version='warty').jsonBody()

    >>> pubs = webservice.named_get(
    ...     cprov_archive['self_link'], 'getPublishedSources',
    ...     distro_series=warty['self_link'], pocket=0).jsonBody()
    >>> print_publications(pubs)
    iceweasel 1.0 in warty
    pmount 0.1-1 in warty

Each source publication exposes a number of properties:

    >>> from canonical.lazr.testing.webservice import pprint_entry
    >>> pprint_entry(pubs['entries'][0])
    archive_link: u'http://.../~cprov/+archive'            
    component_name: u'main'                                                   
    datecreated: u'2007-07-09T12:00:00+00:00'                                 
    datemadepending: None                                                     
    datepublished: u'2007-07-09T12:00:01+00:00'                               
    dateremoved: None                                                         
    datesuperseded: None                                                      
    displayname: u'iceweasel 1.0 in warty'                                    
    distroseries_link: u'http://.../ubuntu/warty'          
    pocket: u'Release'                                                        
    removal_comment: None                                                     
    removed_by_link: None                                                     
    resource_type_link: u'http://.../#source_package_publishing_history'
    scheduleddeletiondate: None                                               
    section_name: u'editors'                                                  
    self_link: u'http://.../~cprov/+archive/+sourcepub/28' 
    source_package_name: u'iceweasel'                                         
    source_package_version: u'1.0'
    status: u'Published'

