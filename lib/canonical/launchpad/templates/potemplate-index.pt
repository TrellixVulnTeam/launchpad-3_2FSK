<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="rosetta">

<head>
    <title metal:fill-slot="title">Rosetta:
        <span tal:replace="context/product/displayname">product
        displayname</span>:
        <span tal:replace="context/title">template title</span></title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Rosetta style sheet -->
    <style type="text/css" media="screen">@import url(rosetta.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <h1>Translating: <span tal:replace="context/product/title">Product Title</span></h1>

    <p class="documentDescription">Template: <span tal:replace="context/title">
        Potemplate Title</span></p>

    <p>
    This file contains <span tal:replace="view/num_messages">N
    messages</span>.
    </p>

    <p><a href="+upload">Update this template's data</a>.</p>

    <p><a href="+edit">Edit this template.</a></p>

    <p><a href="translate">Translate into all selected languages.</a></p>

    <h2>Translations</h2>

    <table class="listing rowNavigation" width="100%">
        <thead>
            <th>Language</th>
            <th>Done</th>
            <th>Todo</th>
            <th>Graph</th>
            <th>Lastest Contributor</th>
            <th>Last Edited</th>
        </thead>

        <tbody>
            <tr tal:repeat="language view/languages"
                tal:attributes="onclick
                string:window.location='${language/code}'">
                <a tal:attributes="href
                    string:${language/code}">
                    <td>
                        <a tal:attributes="href
                        string:${language/code}"
                        tal:content="language/name">Language
                        Name</a></td>
                    <td tal:content="language/poTranslated">0</td>
                    <td tal:content="language/poUntranslated">0</td>
                    <td>
                        <!-- Show an mdash if there is no graph -->
                        <span tal:condition="not: language/poLen">&mdash;</span>

                        <img src="/++resource++green-bar.png"
                             height="10"
                             style="margin-top: 2px;"
                             alt="Translated Messages"
                             tal:condition="language/poNonUpdatesCount"
                             tal:attributes="width language/poNonUpdatesPercent;
                                             title string: Translated: ${language/poNonUpdatesPercent}%"
                        /><img src="/++resource++blue-bar.png"
                               height="10"
                               style="margin-top: 2px;"
                               alt="Improved Message Translations"
                               tal:condition="language/poUpdatesCount"
                               tal:attributes="width language/poUpdatesPercent;
                                               title string: Improved In Rosetta : ${language/poUpdatesPercent}%"
                        /><img src="/++resource++purple-bar.png"
                               height="10"
                               style="margin-top: 2px;"
                               alt="Newly Translated Messages"
                               tal:condition="language/poRosettaCount"
                               tal:attributes="width language/poRosettaPercent;
                                               title string: New In Rosetta: ${language/poRosettaPercent}%"
                        /><img src="/++resource++red-bar.png"
                               height="10"
                               style="margin-top: 2px;"
                               alt="Untranslated Messages"
                               tal:condition="language/poUntranslated"
                               tal:attributes="width language/poUntranslatedPercent;
                                               title string: Untranslated: ${language/poUntranslatedPercent}%" />
                    </td>
                    <td>
                        <tal:block condition="language/lastChangedSighting">
                            <span tal:content="language/lastChangedSighting/person/displayname" />
                        </tal:block>
                        <tal:block condition="not: language/lastChangedSighting">
                            &mdash;
                        </tal:block>
                    </td>
                    <td>
                        <tal:block condition="language/lastChangedSighting">
                            <span
                                tal:content="language/lastChangedSighting/datelastactive/fmt:date" /> GMT
                        </tal:block>
                        <tal:block condition="not: language/lastChangedSighting">
                            &mdash;
                        </tal:block>
                    </td>
                </a>
            </tr>
        </tbody>
    </table>
</div>

</body>
</html>
