<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
  >
<body>

<metal:portlets fill-slot="portlets">
   <tal:portlet replace="structure context/distribution/@@+portlet-ppa-architectures" />
</metal:portlets>

<div metal:fill-slot="main" tal:define="ppa_active view/is_active">

  <h2>Delete packages from <tal:title replace="context/title" /></h2>

  <div metal:use-macro="context/@@launchpad_form/form">

    <div metal:fill-slot="extra_info">

      <tal:active_ppa_header condition="ppa_active">
        <p>Search for published packages you want to delete.</p>
      </tal:active_ppa_header>

      <tal:inactive_ppa_header condition="not: ppa_active">
        <p>This PPA does not contain any packages yet.</p>
      </tal:inactive_ppa_header>

    </div> <!--extra_info -->

    <div class="form" tal:condition="ppa_active" metal:fill-slot="widgets">

      <tal:search define="name_widget nocall:view/widgets/name_filter">
         <label tal:attributes="for name_widget/name"
         >Source name matching:</label>
         <input tal:replace="structure name_widget"/>
         <input
             tal:replace="structure view/actions/field.actions.search/render" />
      </tal:search>

      <tal:no_sources tal:condition="not:view/available_sources_size">
        <div id="empty-result" style="border: 1px solid;">
          <p>No matching package for '<tal:name_filter
             tal:replace="request/field.name_filter" />'.</p>
        </div>
      </tal:no_sources>

      <tal:sources define="widget nocall:view/widgets/selected_sources"
                   condition="view/available_sources_size">
        <div style="padding: 1em;">
          <table class="listing">
            <thead>
            <tr class="ppa_package_row">
              <th colspan="2">Source</th>
              <th tal:condition="context/owner/isTeam">Uploader</th>
              <th>Published</th>
              <th>Status</th>
              <th>Series</th>
              <th>Section</th>
            </tr>
            </thead>
            <tbody>
            <tal:terms tal:repeat="term widget/vocabulary">
              <tal:block
                define="pub term/value"
                replace="structure pub/@@+listing-ppa-detailed-selectable" />
            </tal:terms>
            </tbody>
            <tfoot tal:condition="view/has_undisplayed_sources">
               <tr>
                 <td colspan="7" tal:condition="context/owner/isTeam">
                   <p class="message">Presenting only <tal:presented replace="
                     view/max_sources_presented"/> of <tal:available replace="
                     view/available_sources_size" /> available sources.</p>
                 </td>
                 <td colspan="6" tal:condition="not: context/owner/isTeam">
                   <p class="message">Presenting only <tal:presented replace="
                     view/max_sources_presented"/> of <tal:available replace="
                     view/available_sources_size" /> available sources.</p>
                 </td>
               </tr>
            </tfoot>
          </table>
        </div>
        <input tal:attributes="name string:${widget/name}-empty-marker"
               type="hidden" value="1" />
      </tal:sources>

      <tal:actions condition="view/available_sources_size">
        <fieldset style="border: 1px solid; padding: 1em">
          <legend>Delete packages</legend>
          <tal:comment_field
            define="widget nocall:view/widgets/comment">
            <label tal:attributes="for widget/name"
                   tal:content="widget/label">Label</label>
            <input tal:replace="structure widget" />
          </tal:comment_field>
          <input tal:replace="structure
             view/actions/field.actions.delete/render" />
        </fieldset>
      </tal:actions>

   </div> <!-- widgets -->

   <div class="actions" metal:fill-slot="buttons">
   </div> <!--empties buttons section -->

  </div> <!-- launchpad_form -->
</div> <!--main -->

<p metal:fill-slot="help">
   Search for the wanted packages, then select one of more of them for
   deletion. Not all packages matching the queried text will be
   presented, only the first 10, if you see a message pointing that
   there were found more than 10 results and the package you are
   interested is not listed, please refine your search. A deleted
   package will disappear from the archive indexes within 20 minutes
   and the related files will be gone once they are not required in
   the archive anymore.
</p>

</body>
</html>
