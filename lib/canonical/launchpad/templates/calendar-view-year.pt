<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en" lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

  <body>

    <metal:leftportlets fill-slot="portlets_one">
      <div tal:replace="structure context/calendar/@@+portlet-subscriptions|nothing" />
    </metal:leftportlets>

    <metal:rightportlets fill-slot="portlets_two">
      <div tal:replace="structure context/calendar/@@+portlet-actions" />
    </metal:rightportlets>

    <div metal:fill-slot="titleheader"
         tal:replace="context/calendar/title">Calendar Title</div>

    <div metal:fill-slot="main">
      <h1 tal:content="view/datestring">Time</h1>

      <table class="cal-navigation">
        <tr>
          <td width="30%" align="left">
            <a tal:attributes="href context/prevRange/fmt:url">&#8592; Previous</a>
          </td>
          <td width="30%" align="center">
            <a href="../this-year">Today</a>
          </td>
          <td width="30%" align="right">
            <a tal:attributes="href context/nextRange/fmt:url">Next &#8594;</a>
          </td>
        </tr>
      </table>

      <table width="100%">
        <tr tal:repeat="row view/layout" valign="top">
          <td tal:repeat="monthnum row" width="30%">
            <div tal:define="month python:view.months[monthnum-1]">

            <h2><a tal:attributes="href month/monthURL"
                   tal:content="month/monthname">Month</a></h2>

            <table class="cal-table">
              <tr>
                <th tal:repeat="day view/daynames"
                    tal:content="day">Day of Week</th>
              </tr>
              <tr tal:repeat="row month/layout">
                <tal:block tal:repeat="daynum row">
                  <td tal:condition="daynum"
                      tal:define="day python:month.days[daynum-1]"
                      class="cal-daycell">
                  <a tal:attributes="href day/dayURL;
                                     class python:day.hasEvents and 'cal-busyday' or 'cal-freeday'"
                     tal:content="day/date/day">1</a>
                  </td>
                  <td tal:condition="not:daynum"></td>
                </tal:block>
              </tr>
            </table>
            </div>
          </td>
        </tr>
      </table>
    </div>

  </body>
</html>
