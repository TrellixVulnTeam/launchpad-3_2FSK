<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main">

  <h1>Pending proposals for <tal:displayname replace="context/displayname"/></h1>

  <tal:has-proposals condition="view/proposal_count"
                     define = "to_do view/review_groups/to_do|nothing;
                               are_doing view/review_groups/are_doing|nothing;
                               can_do view/review_groups/can_do|nothing;
                               mine  view/review_groups/mine|nothing;
                               other view/review_groups/other|nothing;
                               show_diffs view/show_diffs;
                               col_count python: view.show_diffs and 4 or 3">

  <table id="proposals" class="listing">

    <tal:to-do condition="to_do"
               define="proposals to_do;
                       heading string:Reviews I need to do;">
      <metal:to-do use-macro="context/@@+bmp-macros/active-reviews"/>
    </tal:to-do>

    <tal:to-do condition="can_do"
               define="proposals can_do;
                       heading string:Reviews I can do;">
      <metal:to-do use-macro="context/@@+bmp-macros/active-reviews"/>
    </tal:to-do>

    <tal:to-do condition="mine"
               define="proposals mine;
                       heading string:Reviews I am waiting on;">
      <metal:to-do use-macro="context/@@+bmp-macros/active-reviews"/>
    </tal:to-do>

    <tal:to-do condition="are_doing"
               define="proposals are_doing;
                       heading string:Reviews I have done;">
      <metal:to-do use-macro="context/@@+bmp-macros/active-reviews"/>
    </tal:to-do>

    <tal:to-do condition="other"
               define="proposals other;
                       heading view/other_heading">
      <metal:to-do use-macro="context/@@+bmp-macros/active-reviews"/>
    </tal:to-do>

  </table>

  </tal:has-proposals>

  <em id="no-proposals"
     tal:condition="not: view/proposal_count"
     tal:content="view/no_proposal_message">
     No reviews
  </em>

</div>

</body>
</html>
