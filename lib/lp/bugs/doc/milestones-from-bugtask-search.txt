= Discover the assigned milestones from a BugTask search =

The IBugTaskSet method getAssignedMilestonesFromSearch() accepts a
result set that yields BugTasks. It attempt to efficiently find all
the distinct milestones assigned to those BugTasks. Typically this
should be called with the results from calling IHasBugs.searchTasks()
or IBugTaskSet.search().

    >>> from lp.bugs.interfaces.bugtask import (
    ...     BugTaskSearchParams, IBugTaskSet)

    >>> person = factory.makePerson()
    >>> login(person.preferredemail.email)

    >>> milestone = factory.makeMilestone()

    >>> bugtask = factory.makeBugTask(target=milestone.product)
    >>> bugtask.milestone = milestone
    >>> bugtask.subscribe(person, person)
    <BugSubscription ...>

The results of a search for all bug tasks related to a person can be
passed to getAssignedMilestonesFromSearch() to discover all the
milestones used.

    >>> bugtask_set = getUtility(IBugTaskSet)

    >>> bugtasks = bugtask_set.search(
    ...     BugTaskSearchParams(person, assignee=person),
    ...     BugTaskSearchParams(person, subscriber=person),
    ...     BugTaskSearchParams(person, owner=person, bug_reporter=person),
    ...     BugTaskSearchParams(person, bug_commenter=person))

    >>> milestones = bugtask_set.getAssignedMilestonesFromSearch(
    ...     bugtasks)

    >>> milestones
    [<Milestone ...>]
    >>> len(milestones)
    1
    >>> milestone in milestones
    True

Because get_assigned_milestones_from_bugtasks() attempts to be
efficient, by customising the result set passed in, it rejects
attempts to pass in lists of bug tasks.

    >>> milestones = bugtask_set.getAssignedMilestonesFromSearch(
    ...     list(bugtasks))
    Traceback (most recent call last):
    ...
    AssertionError: search_results must provide
      IResultSet or ISQLObjectResultSet
