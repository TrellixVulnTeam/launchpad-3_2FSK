In the bug page, you could request a fix for an upstream or
distribution.

    >>> browser.addHeader("Authorization", "Basic foo.bar@canonical.com:test")
    >>> browser.open(
    ...     "http://localhost:9000/products/firefox/+bug/6/+distrotask")
    >>> browser.getControl("Distribution").value = ["ubuntu"]
    >>> browser.getControl("Continue").click()

The ubuntu task is in the task list.

    >>> print http(r"""
    ... GET /distros/ubuntu/+bug/6 HTTP/1.1
    ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
    ... """)
    HTTP/1.1 200 Ok
    ...
    ...>Ubuntu</a>...
    ...

It should not be possible to add the same distrotask again.

    >>> browser.open(
    ...     "http://localhost:9000/products/firefox/+bug/6/+distrotask")
    >>> browser.getControl("Distribution").value = ["ubuntu"]
    >>> browser.getControl("Continue").click()
    >>> print browser.contents
    <!DOCTYPE...
    ...
    ...Please fix the problems below and try again...
    ...
    ...This bug is already open on Ubuntu or packages in Ubuntu...
    ...

You also can't add another task on a distro source package, when there's
already a distro task open. (Instead, you should target the existing
distro task to an appropriate source package.)

    >>> browser.open(
    ...     "http://localhost:9000/products/firefox/+bug/6/+distrotask")
    >>> browser.getControl("Distribution").value = ["ubuntu"]
    >>> browser.getControl("Source Package Name").value = "mozilla-firefox"
    >>> browser.getControl("Continue").click()
    >>> print browser.contents
    <!DOCTYPE...
    ...
    ...Please fix the problems below and try again...
    ...
    ...This bug is already open on Ubuntu with no package specified...
    ...

Let's assign the existing Ubuntu task to mozilla-firefox, then add
another task on Ubuntu evolution.

    >>> browser.open(
    ...     "http://localhost:9000/distros/ubuntu/+bug/6/+editstatus")
    >>> browser.getControl("Package").value = "mozilla-firefox"
    >>> browser.getControl("Save Changes").click()

    >>> browser.open(
    ...     "http://localhost:9000/products/firefox/+bug/6/+distrotask")
    >>> browser.getControl("Distribution").value = ["ubuntu"]
    >>> browser.getControl("Source Package Name").value = "evolution"
    >>> browser.getControl("Continue").click()

It's not possible to change the Ubuntu mozilla-firefox task to be on
Ubuntu evolution, because there already is an evolution task open.

    >>> browser.open(
    ...     "http://localhost:9000/distros/ubuntu/+source/mozilla-firefox/+bug/6/+editstatus")
    >>> browser.getControl("Package").value = "evolution"
    >>> browser.getControl("Save Changes").click()
    >>> print browser.contents
    <!DOCTYPE...
    ...
    ...This bug has already been reported on evolution (ubuntu)...
    ...

At the same time we add a distribution task we can add a bug watch.

    >>> browser.open(
    ...     "http://localhost:9000/products/ubuntu/+bug/2/+distrotask")
    >>> browser.getControl("Distribution").value = ["debian"]
    >>> browser.getControl("Source Package Name").value = "evolution"
    >>> browser.getControl("Remote Bug Tracker").value = ['2']
    >>> browser.getControl(name="field.remotebug").value = '12345'
    >>> browser.getControl("Continue").click()
