

A person is adaptable to ICrowd.

  >>> from canonical.launchpad.interfaces import IPersonSet, ICrowd
  >>> from zope.component import getUtility
  >>> personset = getUtility(IPersonSet)
  >>> sabdfl = personset.getByName('sabdfl')
  >>> print sabdfl.name
  sabdfl
  >>> sabdfl_crowd = ICrowd(sabdfl)

The person is in that crowd.

  >>> sabdfl in sabdfl_crowd
  True


A team is adaptable to ICrowd, but it gets a different adapter than that used
for a person.

  >>> vcs_imports = personset.getByName('vcs-imports')
  >>> print vcs_imports.name
  vcs-imports
  >>> vcs_imports_crowd = ICrowd(vcs_imports)

The team is in that crowd.

  >>> vcs_imports in vcs_imports_crowd
  True

sabdfl is not in that crowd, because he is not in the vcs-imports team.

  >>> sabdfl in vcs_imports_crowd
  False

lifeless is in the vcs-imports team.  So, lifeless is in that crowd.

  >>> lifeless = personset.getByName('lifeless')
  >>> print lifeless.name
  lifeless
  >>> lifeless in vcs_imports_crowd
  True

Adding sabdfl_crowd to the vcs_imports_crowd gives us a crowd that contains
sabdfl and the vcs-imports team and lifeless, but not stevea.
This tests ICrowd(team).__add__.

  >>> combined_crowd = vcs_imports_crowd + sabdfl_crowd
  >>> stevea = personset.getByName('stevea')
  >>> stevea not in combined_crowd
  True
  >>> lifeless in combined_crowd
  True
  >>> sabdfl in combined_crowd
  True
  >>> vcs_imports in combined_crowd
  True

Now, to try it the other way around: adding vcs_imports_crowd to sabdfl_crowd.
This tests ICrowd(person).__add__.

  >>> combined_crowd = sabdfl_crowd + vcs_imports_crowd
  >>> lifeless in combined_crowd
  True
  >>> sabdfl in combined_crowd
  True
  >>> vcs_imports in combined_crowd
  True

There is an AnyPersonCrowd that contains any person or team.

  >>> from canonical.launchpad.components.crowd import AnyPersonCrowd
  >>> sabdfl in AnyPersonCrowd()
  True
  >>> vcs_imports in AnyPersonCrowd()
  True
  >>> vcs_imports_crowd in AnyPersonCrowd()
  False

Adding an AnyPersonCrowd to some other crowd works as expected.

  >>> combined_crowd = sabdfl_crowd + AnyPersonCrowd()
  >>> sabdfl in combined_crowd
  True
  >>> stevea in combined_crowd
  True

Same goes for the other way around.

  >>> combined_crowd = AnyPersonCrowd() + sabdfl_crowd
  >>> sabdfl in combined_crowd
  True
  >>> stevea in combined_crowd
  True


The EmptyCrowd doens't contain anything.

  >>> from canonical.launchpad.components.crowd import EmptyCrowd
  >>> sabdfl in EmptyCrowd()
  False
  >>> vcs_imports_crowd in EmptyCrowd()
  False

Adding a crowd to EmptyCrowd, and vice versa, gives you essentially that crowd.

  >>> combined_crowd = EmptyCrowd() + vcs_imports_crowd
  >>> vcs_imports in combined_crowd
  True
  >>> sabdfl in combined_crowd
  False
  >>> lifeless in combined_crowd
  True

  >>> combined_crowd = vcs_imports_crowd + EmptyCrowd()
  >>> vcs_imports in combined_crowd
  True
  >>> sabdfl in combined_crowd
  False
  >>> lifeless in combined_crowd
  True


