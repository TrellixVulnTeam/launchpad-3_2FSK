<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
  <body>
    <div metal:fill-slot="head_epilogue">
    <style>
    .dismissed, .dismissed a {
        color: lightgray;
    }
    </style>
    <script type="text/javascript">

      YUI().use('node', 'cookie', 'anim', function(Y) {

          var setupSuggestionDismissal = function(e) {
              Y.all('.dismiss_action').each(function(checkbox) {
                  var classbase = checkbox.get('id');
                  var current_class = classbase.replace(/dismiss/, 'current')
                  var current_radios = Y.all('.'+current_class)
                  var dismissables = Y.all('.'+classbase+'able');
                  // The button and textarea cannot be fetched beforehand
                  // because they are or may be created dynamically.
                  var dismissable_inputs_class = 
                      '.'+classbase+'able_button input, '+
                      '.'+classbase+'able_button button, '+
                      '.'+classbase+'able_button textarea';
                  checkbox.on('click', function(e) {
                      if(checkbox.get('checked')) {
                          dismissables.addClass('dismissed');
                          Y.all(dismissable_inputs_class).set(
                              'disabled', true);
                          current_radios.set('checked', true);
                      }
                      else
                      {
                          dismissables.removeClass('dismissed');
                          Y.all(dismissable_inputs_class).set(
                                  'disabled', false);
                      }
                  });
              });
          };

          Y.on('domready', setupSuggestionDismissal);
      });

    </script>
    </div>

    <div metal:fill-slot="main">


      <div>
        <a tal:attributes="href context/pofile/potemplate/fmt:url"
           tal:content="context/pofile/potemplate/title">
          evolution 2.10 template
        </a>
      </div>

      <tal:form-not-writeable condition="not:view/form_is_writeable">
        <h1>
          Browsing
          <tal:language replace="context/pofile/language/englishname">
            Spanish
          </tal:language>
          translation
        </h1>
      </tal:form-not-writeable>
      <tal:form-writeable condition="view/form_is_writeable">
        <h1>
          Translating into
          <tal:language replace="context/pofile/language/englishname">
            Spanish
          </tal:language>
        </h1>
      </tal:form-writeable>

      <tal:havepluralforms condition="view/has_plural_form_information">

        <!-- Alternative suggestions. -->
        <div metal:define-macro="editform">
          <form method="get" action="+translate">
            <tal:comment replace="nothing">
              Suggestions from this alternative language will be displayed as
              well as suggestions from the translation language. In the case
              where two languages are very similar it will often be useful to
              show the second language as a source of suggestions when
              translating into the first.
            </tal:comment>
            <label>Using
              <tal:language-widget
                content="structure view/alternative_language_widget" />
              as a guide</label>
            <input type="submit" value="Change" />
          </form>
        </div>

        <!-- The translation form. -->
        <form method="post" accept-charset="UTF-8" action="">
          <!-- the hidden elements -->
          <input type="hidden" name="lock_timestamp" value=""
                 tal:condition="view/form_is_writeable"
                 tal:attributes="value view/lock_timestamp/isoformat" />
          <table class="listing" style="margin-top: 0.5em;">
            <thead>
              <tr class="results">
                <td colspan="5">
                  <!-- Paging doodads. -->
                  <tal:navigation
                    replace="structure view/batchnav/@@+navigation-links-upper"
                    />
                </td>
              </tr>
            </thead>
            <tbody id="messages_to_translate">
              <div tal:replace="structure view/translationmessage_view" />
            </tbody>
            <tfoot>
              <tr tal:condition="view/form_is_writeable">
                <th colspan="5" style="text-align: right;">
                  <input type="submit"
                         name="submit_translations"
                         value="Save &amp; Continue" />
                </th>
              </tr>
            </tfoot>
          </table>

        </form>

        <!-- Paging doodads. -->
        <tal:navigation
          replace="structure view/batchnav/@@+navigation-links-lower" />
      <tal:status replace="structure context/pofile/@@+access" />
      </tal:havepluralforms>
    </div>

  </body>

</html>
