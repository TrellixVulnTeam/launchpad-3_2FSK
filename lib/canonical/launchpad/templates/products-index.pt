<tal:layout define="contextless default">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>

<body>

<metal:rightportlets fill-slot="portlets_two">
  <div class="portlet">
    <h2>Product statistics in Launchpad</h2>
    <div class="portletBody portletContent">
      <img src="/@@/info" />
      There are <span tal:replace="context/count_all">5</span>
      products registered in Launchpad, of which
      <span tal:replace="context/count_buggy">5</span> have bugs reported,
      <span tal:replace="context/count_translatable">5</span> 
      have translations,
      <span tal:replace="context/count_featureful">5</span> have
      feature specifications registered,
      and <span tal:replace="context/count_reviewed">5</span>
      have been reviewed.
    </div>
  </div>
</metal:rightportlets>

<div metal:fill-slot="main">

      <h1>Registered products</h1>

  <tal:notsearching condition="not:view/searchrequested">
    <p id="application-summary">
      In Launchpad, <dfn>products</dfn> are individual computer programs,
      applications, libraries, and documents that are developed as software.
    </p>
  </tal:notsearching>

  <form method="get">
  
          <input name="text" tal:attributes="value view/text" />
          <input tal:condition="view/searchrequested"
            type="submit"
            value="Search Again"
            />
          <input tal:condition="not: view/searchrequested"
            type="submit"
            value="Search Products"
            />

  </form>

  <tal:searching condition="view/searchrequested">

    <table
      tal:condition="view/matches"
      tal:define="results view/searchresults"
    >
      <thead>
        <tr class="results">
          <td>
            <span tal:replace="view/matches">3</span>
            <span tal:condition="python: view.matches == 1">result</span>
            <span tal:condition="python: view.matches != 1">results</span>
          </td>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="product results">
          <td tal:content="structure product/@@+listing-detailed" />
        </tr>
      </tbody>
    </table>
        <p tal:condition="not: view/matches">
          No products matching
          &#8220;<span tal:replace="view/text">moz</span>&#8221;
          were found.
        </p>

  </tal:searching>
  <tal:no_search condition="not: view/searchrequested">

    <h2>Most recently registered</h2>

        <ul tal:condition="context/latest" class="product">
          <li tal:repeat="product context/latest">
            <a
              tal:attributes="href product/fmt:url"
              tal:content="product/displayname"
            />
          </li>
        </ul>
      </tal:no_search>
    </div>
  </body>
</html>
</tal:layout>
