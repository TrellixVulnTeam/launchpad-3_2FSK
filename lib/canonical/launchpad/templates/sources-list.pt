<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/applicationhome"
  i18n:domain="bazaar">

<body>

  <h1 metal:fill-slot="heading">Available code imports</h1>

<div metal:fill-slot="main" class="visualPadding"
     tal:define="batch view/batchnav/currentBatch">

  <form action="" method="GET">
    <fieldset>
        <label for="text">List projects matching:</label>

        <div class="formControls">
            <input type="text" name="text"
                   tal:attributes="value view/text" size="25" />
            <input type="submit" name="search" value="Search" />
            <br />
        </div>

    </fieldset>
  </form>

  <tal:no-results condition="not:batch">
    <p>No imports found matching criteria.</p>
  </tal:no-results>

  <tal:results condition="batch">
    <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-upper" />
    <table class="listing" width="100%">
      <thead>
        <tr>
          <th>Project</th>
          <th>Branch Name</th>
          <th>Source Details</th>
          <th>Last Updated</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="code_import batch">
          <td>
            <a tal:attributes="href code_import/product/fmt:url"
               tal:content="code_import/product/displayname"
              >$Product.name</a>
          </td>
          <td><a tal:attributes="href code_import/branch/fmt:url"
                 tal:content="code_import/branch/name"
              >$Branch.name</a></td>
          <td tal:content="code_import/getImportDetailsForDisplay">
            :pserver:user@host:/cvsroot module
          </td>
          <td>
            <span
              tal:attributes="title code_import/date_last_successful/fmt:datetime"
              tal:content="code_import/date_last_successful/fmt:approximatedate"
              >$code_import.datelastsynced</span>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-lower" />
  </tal:results>

</div>

</body>
</html>
