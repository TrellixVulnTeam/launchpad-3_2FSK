<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" /> 
  <div tal:replace="structure context/distrorelease/distribution/@@+portlet-details" /> <br />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/distrorelease/@@+portlet-details" /> 
</metal:rightportlets>

<div metal:fill-slot="main">

  <h1>Binary Package Search</h1>

  <p class="documentDescription">
    Use this form to search through the
    binary packages in <span tal:replace="context/displayname" />. This search
    will include package summaries and descriptions.
  </p>

  <form name="search" method="GET">
    
    <input type="text" name="text" size="35"
           tal:attributes="value request/text|nothing" />

    <input type="submit" value="Search"/>

    <p class="discreet">
      Enter search words here. For best results, keep the number of search
      terms short. Try with only the most important word or two
      first.
    </p>

  </form>

  <tal:searching condition="view/searchrequested">

    <tal:has_matches condition="view/searchresults">

      <tal:per_match repeat="darbpr view/searchresults">
        <img src="/++resource++package-binary" />
        <a tal:content="darbpr/name"
           tal:attributes="href darbpr/fmt:url">foobar</a>:
        <div style="margin-left: 30px; font-size: 80%;"
             tal:content="darbpr/summary">
          Gee whiz special package.
          <span tal:replace="darbpr/description"
                tal:condition="view/detailed">
            Gee whiz special package description goes here if there are
            fewer than 5 matches.
          </span>
        </div>
      </tal:per_match>

    </tal:has_matches>

    <tal:no_matches condition="not: view/matches">

      <img src="/++resource++alert" />
      <i>No packages matching "<span tal:replace="view/text">amarok</span>"
      are published in
      <span tal:replace="context/displayname">hoary</span>.</i>

    </tal:no_matches>

  </tal:searching>


  <tal:block tal:replace="nothing"
             tal:define="bn view/binaryPackagesBatchNavigator;
                         prev_url bn/prevBatchURL;
			 next_url bn/nextBatchURL;"
             tal:condition="request/text|nothing">
    <!-- sabdfl 24/10/2005 this is the old searching, largely disabled in
         favour of the new FTQ based approach, but i've left this stuff here
         in case we want to revert -->
			 
  <table width="100%" 
         tal:define="currentBatch python:list(bn.currentBatch())"> 
    <tr>
      <th tal:condition="currentBatch">
         Packages found
      </th>
      <th tal:condition="not:currentBatch">
         <i>No Packages found</i>
      </th>
    </tr>
    <tr tal:repeat="release currentBatch">      
      <tal:dummy tal:define="package release">
      <td><a tal:content="package/name"
             tal:attributes="href package/name">PACKAGENAME
          </a>:
	  <span tal:replace="package/summary">SHORTDESC</span>
      </td>
      </tal:dummy>
    </tr>    
    <tr>
    <td align="center">
    <fieldset tal:condition="python:prev_url or next_url">
    <div>
    	  <table>
	  <tr>
	  <!-- <th condition="not: prev_url"><< prev</th> -->
          <th tal:condition="prev_url">
	       <a tal:attributes="href prev_url"><b><< Prev</b></a>
	  </th>
          <th tal:repeat="page_link bn/batchPageURLs">
	     <a tal:attributes="href python:page_link.values()[0]"
                tal:content="python:page_link.keys()[0]"></a>
	  </th>
          <th tal:condition="next_url" >
	     <a tal:attributes="href next_url"><b>Next >></b></a>
          </th>
          <!-- <th condition="not: next_url">next >></th> -->
          </tr>
	  </table>
     </div>
     </fieldset>
    </td>
    </tr>
  </table>
  </tal:block>

</div>

</body>

</html>
