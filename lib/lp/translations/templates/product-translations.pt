<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="view/macro:page/main_only"
>

  <body>
    <div metal:fill-slot="main"
         tal:define="uses_translations view/uses_translations;
                     admin_user context/required:launchpad.TranslationsAdmin">
      <div class="translation-help-links">
        <a href="https://help.launchpad.net/Translations"
           id="link-to-translations-help"
           >Help for translations
        </a>
        <div></div><!-- to clear-up all floats -->
      </div>
      <tal:uses-translations condition="uses_translations">
        <tal:translatable define="target context/primary_translatable">

          <div class="yui-g">
            <div class="yui-u first">
              <div class="portlet">
                <h3>Translation details</h3>
                <p>
                  Launchpad currently recommends translating
                  <tal:target replace="structure target/fmt:link"
                              >trunk</tal:target>.
                  <span id="downloadupload"
                       tal:condition="context/required:launchpad.AnyPerson">
                    You can also
                    <a tal:attributes="href target/fmt:url/+export"
                       >download</a>
                    <tal:owner-or-admin condition="admin_user">
                      or
                      <a tal:attributes="
                          href target/fmt:url/+translations-upload"
                       >upload</a>
                    </tal:owner-or-admin>
                    translations for
                    <tal:target replace="structure target/name"
                                >trunk</tal:target>.
                  </span>
                </p>
                <p>To see all the translation files that are waiting to be
                  imported, please look at
                  <a tal:attributes="href context/fmt:url/+imports"
                     tal:content="string:${context/displayname} import queue">
                    import queue</a>.
                </p>
              </div>
              <div class="portlet">
                <h3>Permissions</h3>
                <p>
                  <tal:permissions replace="
                     structure
                     context/@@+portlet-translation-groups-and-permission"/>
                </p>
              </div>
            </div>
            <div class="yui-u">
              <div>
                <tal:registrant-or-admin
                   condition="admin_user">
                  <tal:has-obsolete-entries
                     condition="context/obsolete_translatable_series">
                    <div tal:replace="
                        structure
                        context/@@+portlet-obsolete-translatables" />
                  </tal:has-obsolete-entries>
                </tal:registrant-or-admin>
              </div>
              <div tal:replace="structure context/@@+portlet-translatables" />
            </div>
          </div>

          <div class="yui-b">
            <h2>Translation for
              <span tal:replace="target/displayname">main</span></h2>
            <div tal:replace="structure target/@@+languages" />
            <div style="height:1em;"></div>
            <div tal:replace="structure context/@@+rosetta-status-legend" />
          </div>
        </tal:translatable>
      </tal:uses-translations>
      <tal:not-uses-translations condition="not: uses_translations">
        <p>
          <strong>
            This project is not configured to use Launchpad for translations.
          </strong>
          <tal:admin_or_owner condition="context/required:launchpad.Edit">
            You can change this in the
            <a tal:attributes="href string:+edit">project settings</a>. (<a href="/+help/getting-started-for-your-project.html" target="help">Getting started with translating your project in Launchpad</a>)
          </tal:admin_or_owner>
        </p>
        <tal:registrantoradmin
          condition="admin_user">
          <p>
            To set up <tal:product replace="context/displayname" /> for
            translation in Launchpad, you need to upload a translation
            template for one of its release series.
          </p>
          <ul>
            <li tal:repeat="series context/series">
              <a tal:attributes="
                   href string:${series/fmt:url}/+translations-upload"
                 tal:content="series/title">main</a>
            </li>
          </ul>
          <p>
            Or you may want to
            <a tal:attributes="href string:${context/fmt:url}/+packages">
              link the project to a distribution package
            </a> set up for translation, if there is one, so their
            translations can be shared.
          </p>
        </tal:registrantoradmin>
        <tal:other
          condition="not: admin_user">
          <p>
            The <tal:product replace="context/displayname" /> project is not
            set up for translation in Launchpad.
          </p>
          <tal:not-logged-in condition="not:request/lp:person">
            <p>
              If you are
              <tal:person replace="context/owner/fmt:displayname" />,
              <a href="+login">log in</a> to begin the setup process.
            </p>
            <p>
              Otherwise, you might want to talk with
              <a tal:replace="structure context/owner/fmt:link">
                Foo Bar
              </a>, the project registrant, about using Launchpad for
              translations.
            </p>
          </tal:not-logged-in>
          <p tal:condition="request/lp:person">
            You might want to talk with
            <a tal:replace="structure context/owner/fmt:link">
              Foo Bar
            </a>, the project registrant, about using Launchpad for
            translations.
          </p>
        </tal:other>
      </tal:not-uses-translations>
    </div>
  </body>
</html>
