<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:lp="http://launchpad.canonical.com"
    xmlns:i18n="http://namespaces.zope.org/i18n"
    i18n_domain="launchpad">

  <content class="canonical.launchpad.database.DistroRelease">
    <allow interface="canonical.launchpad.interfaces.IDistroRelease"/>
    <allow interface="canonical.launchpad.interfaces.IHasBuildRecords"/>
    <require
        permission="launchpad.Edit"
        set_attributes="displayname title summary description version
                        releasestatus owner datelastlangpack 
                        nominatedarchindep"
        />
  </content>

  <securedutility
    class="canonical.launchpad.database.DistroReleaseSet"
    provides="canonical.launchpad.interfaces.IDistroReleaseSet">
    <allow interface="canonical.launchpad.interfaces.IDistroReleaseSet" />
  </securedutility>

  <browser:navigation
    module="canonical.launchpad.browser"
    classes="DistroReleaseNavigation"
    />

  <browser:url
    for="canonical.launchpad.interfaces.IDistroRelease"
    path_expression="name"
    attribute_to_parent="distribution"
    />

  <browser:menus
    module="canonical.launchpad.browser.distrorelease"
    classes="DistroReleaseFacets DistroReleaseOverviewMenu
             DistroReleaseBugsMenu DistroReleaseSpecificationsMenu"
    />

  <browser:defaultView
    for="canonical.launchpad.interfaces.IDistroRelease"
    name="+index" />

  <browser:defaultView
    for="canonical.launchpad.interfaces.IDistroRelease"
    layer="canonical.launchpad.layers.MaloneLayer"
    name="+bugs" />

  <browser:pages
    for="canonical.launchpad.interfaces.IDistroRelease"
    class="canonical.launchpad.browser.BugTaskSearchListingView"
    facet="bugs"
    permission="zope.Public">
    <browser:page
      name="+portlet-bugtasklist-releasebugs"
      template="../templates/bugtask-portlet-releasebugs.pt"
      lp:url="/distros/$DistroRelease.name/+portlet-bugtasklist-releasebugs"
      />
    <browser:page
      name="+portlet-aboutcve"
      template="../templates/distribution-portlet-aboutcve.pt"
      lp:url="/distros/$DistroRelease.name/+portlet-aboutcve"
      />
  </browser:pages>

  <browser:pages
    for="canonical.launchpad.interfaces.IDistroRelease"
    class="canonical.launchpad.browser.DistroReleaseView"
    permission="zope.Public">
    <browser:page
      name="+filebug"
      facet="bugs"
      attribute="redirectToDistroFileBug" />
    <browser:page
      name="+cve"
      template="../templates/distrorelease-cvereport.pt" />
    <browser:page
      name="+index"
      facet="overview"
      template="../templates/distrorelease-index.pt" />
    <browser:page
      name="+translations"
      facet="translations"
      template="../templates/distrorelease-translations.pt" />
    <browser:page
      name="+langchart"
      template="../templates/distrorelease-langchart.pt" />
    <browser:page
      name="+packaging"
      facet="overview"
      template="../templates/distrorelease-packaging.pt" />
    <browser:page
      name="+potlist"
      facet="translations"
      template="../templates/object-pots.pt" />
    <browser:page
      name="+builds"
      facet="overview"
      template="../templates/distrorelease-builds.pt"
      lp:url="/distros/$distribution/$distrorelease/+builds"
      />
    <browser:page
      name="+search"
      facet="overview"
      template="../templates/distrorelease-search.pt"
      />
    <browser:page
      name="+builds-list"
      template="../templates/builds-list.pt"
      lp:url="/distros/$distribution/$distrorelease/+builds-list"
      />
    <browser:page
      name="+portlet-details"
      facet="overview"
      template="../templates/distrorelease-portlet-details.pt"
      />
    <browser:page
      name="+portlet-translations"
      facet="translations"
      template="../templates/distrorelease-portlet-translations.pt"
      />
    <browser:page
      name="+portlet-langstats"
      facet="translations"
      template="../templates/distrorelease-portlet-langstats.pt"
      />
    <browser:page
      name="+portlet-aboutlangs"
      facet="translations"
      template="../templates/distrorelease-portlet-aboutlangs.pt" />
  </browser:pages>

  <browser:pages
    for="canonical.launchpad.interfaces.IDistroRelease"
    permission="launchpad.Edit"
    facet="overview"
    class="canonical.launchpad.browser.ObjectReassignmentView">
    <browser:page
      name="+reassign"
      template="../templates/object-reassignment.pt"
      lp:url="/distros/$distro.id/$release.id/+reassign" />
  </browser:pages>

  <browser:editform
    for="canonical.launchpad.interfaces.IDistroRelease"
    permission="launchpad.Edit"
    name="+edit"
    schema="canonical.launchpad.interfaces.IDistroRelease"
    facet="overview"
    fields="displayname title summary description"
    template="../templates/launchpad-editform.pt"
    lp:url="/distros/$Distribution.name/$DistroRelease.name/+edit"
    />

  <browser:editform
    for="canonical.launchpad.interfaces.IDistroRelease"
    permission="launchpad.Admin"
    name="+admin"
    schema="canonical.launchpad.interfaces.IDistroRelease"
    facet="overview"
    fields="name releasestatus version"
    template="../templates/launchpad-editform.pt"
    lp:url="/distros/$Distribution.name/$DistroRelease.name/+admin"
    />

  <browser:addform
    name="+addport"
    for="canonical.launchpad.interfaces.IDistroRelease"
    schema="canonical.launchpad.interfaces.IDistroArchRelease"
    label="Create a new port"
    fields="architecturetag processorfamily official owner"
    arguments="architecturetag processorfamily official owner"
    class="canonical.launchpad.browser.DistroArchReleaseAddView"
    facet="overview"
    permission="launchpad.Admin"
    template="../templates/distrorelease-addport.pt"
    >
    <browser:widget
      field="owner"
      class="canonical.widgets.HiddenUserWidget" />
  </browser:addform>

</configure>
