<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="malone"
>
<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-latestbugs" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <h3 tal:content="context/title">Foo Series: main</h3>
  <h1>Report a new bug</h1>
</metal:heading>

<div metal:fill-slot="main">

  <tal:uses_malone tal:condition="view/contextUsesMalone">

    <div metal:use-macro="context/@@launchpad_form/form">

      <table class="form" metal:fill-slot="widgets">

        <metal:basic_filebug_widgets
            metal:use-macro="context/@@+filebug-macros/basic_filebug_widgets" />

        <tr tal:define="product_or_distro view/getProductOrDistroFromContext">
          <td colspan="2" width="100%"
              tal:define="widget nocall: view/widgets/security_related">
            <input type="checkbox" tal:replace="structure widget" />
            <label tal:attributes="for widget/name">
              This bug is a security vulnerability
            </label>
            <div tal:define="security_contact product_or_distro/security_contact">
              <i tal:condition="security_contact">
                The security contact for
                <span tal:content="product_or_distro/displayname" />,
                <a href="#"
                    tal:content="security_contact/displayname"
                    tal:attributes="href security_contact/fmt:url" />,
                will be notified.
              </i>
              <i tal:condition="not:security_contact"
                 tal:define="maintainer product_or_distro/owner">
                The maintainer of
                <span tal:content="product_or_distro/displayname">Mozilla Firefox</span>,
                <a href="" tal:attributes="href maintainer/fmt:url"
                           tal:content="maintainer/displayname">Sample Person</a>,
                will be notified.
              </i>
            </div>

          </td>
        </tr>

      </table>

      <div class="actions" metal:fill-slot="buttons">
        <input tal:replace="structure view/actions/field.actions.submit_bug/render" />
      </div>

    </div>

  </tal:uses_malone>

  <tal:not_uses_malone tal:condition="not: view/contextUsesMalone"
                       tal:define="product_or_distro view/getProductOrDistroFromContext">
    <p class="error message">
      <span tal:replace="product_or_distro/displayname">Alsa Utils</span> does not use Malone as its bug tracker.
    </p>

    <p>
      To report a bug about <span tal:replace="product_or_distro/displayname">Alsa Utils</span>,
      please use its official bug tracker.
    </p>
  </tal:not_uses_malone>

</div>

</html>

