Karma Context
=============

Now that we track the Product/Distribution in which a given karma-giving
action was performed, we're able to find out who contributes the most to a
given product.  We can have this on a per-category (Bug Management,
Translations, etc) basis or in general, across all categories.

    >>> import operator
    >>> from zope.component import getUtility
    >>> from zope.interface.verify import verifyObject
    >>> from canonical.launchpad.interfaces import (
    ...     IPersonSet, IPerson, IKarma, IKarmaCache, IProductSet,
    ...     ISourcePackageNameSet, IDistributionSet)
    >>> salgado = getUtility(IPersonSet).getByName('salgado')
    >>> firefox = getUtility(IProductSet).getByName('firefox')
    >>> ubuntu = getUtility(IDistributionSet).getByName('ubuntu')

    >>> [(person.name, karmavalue)
    ...  for person, karmavalue in firefox.getTopContributors(limit=3)]
    [(u'name12', 105L), (u'sabdfl', 61L), (u'name16', 17L)]

    >>> from canonical.launchpad.database.karma import KarmaCategory
    >>> bugs = KarmaCategory.byName('bugs')
    >>> top_bugmasters = firefox.getTopContributors(category=bugs, limit=2)
    >>> [(person.name, karmavalue) for person, karmavalue in top_bugmasters]
    [(u'name12', 105L), (u'name16', 17L)]

    >>> specs = KarmaCategory.byName('specs')
    >>> top_speccers = firefox.getTopContributors(category=specs, limit=1)
    >>> [(person.name, karmavalue) for person, karmavalue in top_speccers]
    [(u'sabdfl', 61L)]

We also have a way of retrieving the top contributors of a given
product/distribution grouped by categories.

    >>> contributors = ubuntu.getTopContributorsGroupedByCategory(limit=2)
    >>> sorted_categories = sorted(contributors.keys(),
    ...                            key=operator.attrgetter('title'))
    >>> for category in sorted_categories:
    ...     people = [(person.name, karmavalue) 
    ...               for person, karmavalue in contributors[category]]
    ...     print "%s: %s" % (category.title, people)
    Bug Management: [(u'name16', 39L), (u'name12', 35L)]
    Specification Tracking: [(u'sabdfl', 49L)]

