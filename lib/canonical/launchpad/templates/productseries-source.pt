<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/default"
  i18n:domain="bazaar"
>
<body>

    <metal:portlets fill-slot="portlets">
      <div tal:replace="structure context/@@+portlet-details" />
    </metal:portlets>

<metal:heading fill-slot="pageheading">
  <h1>Upstream source details</h1>
</metal:heading>

<div metal:fill-slot="main">

  <div metal:use-macro="context/@@launchpad_form/form">
    <p metal:fill-slot="extra_info" tal:condition="not:view/errors">
      For more details on importing source code into Launchpad,
      see the help wiki page
      <a href="https://help.launchpad.net/VcsImports">
          VcsImports</a>.
    </p>

    <metal:formbody fill-slot="widgets">

      <div class="formHelp">
        Enter details below for only the selected Repository type.
      </div>

      <fieldset>
        <legend>
          <label>
            <input tal:replace="structure view/rcstype_bzr" />
            Bazaar
          </label>
        </legend>
        <table class="form">
          <tal:widget define="widget nocall:view/widgets/user_branch">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
        </table>
      </fieldset>

      <fieldset>
        <legend>
          <label>
            <input tal:replace="structure view/rcstype_cvs" />
            CVS
          </label>
        </legend>
        <table class="form">
          <tal:widget define="widget nocall:view/widgets/cvsroot">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
          <tal:widget define="widget nocall:view/widgets/cvsmodule">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
          <tal:widget define="widget nocall:view/widgets/cvsbranch">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
        </table>
      </fieldset>

      <fieldset>
        <legend>
          <label>
            <input tal:replace="structure view/rcstype_svn" />
            Subversion
          </label>
        </legend>

        <table class="form">
          <tal:widget define="widget nocall:view/widgets/svnrepository">
            <metal:block use-macro="context/@@launchpad_form/widget_row" />
          </tal:widget>
        </table>
      </fieldset>

      <fieldset>
        <legend>
          <label>
            <input tal:replace="structure view/rcstype_none" />
            No revision control system or not specifed here
          </label>
        </legend>
      </fieldset>

      <input tal:replace="structure view/rcstype_emptymarker" />

      <tal:has-import-status condition="context/importstatus">
        <h2>Import Status</h2>
        <p>The current import status is:
          <b tal:content="context/importstatus/title">$title</b>. </p>
      </tal:has-import-status>

      <script type="text/javascript">
        //<![CDATA[
        function updateWidgets() {
          /* which rcs type radio button has been selected? */
          var rcstypes = document.getElementsByName('field.rcstype');
          var form = rcstypes[0].form;
          var rcstype = 'None';
          for (var i = 0; i < rcstypes.length; i++) {
            if (rcstypes[i].checked) {
              rcstype = rcstypes[i].value;
              break;
            }
          }
          // BZR
          updateField(form['field.user_branch'], rcstype == 'BZR');
          // CVS
          updateField(form['field.cvsroot'], rcstype == 'CVS');
          updateField(form['field.cvsbranch'], rcstype == 'CVS');
          updateField(form['field.cvsmodule'], rcstype == 'CVS');
          // SVN
          updateField(form['field.svnrepository'], rcstype == 'SVN');
        }
        updateWidgets();
        //]]>
      </script>

    </metal:formbody>
  </div>

</div>
</body>
</html>
<!-- 1-0 in-progress -->
