<tal:process condition="view/processNominations" />
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <div>
    <img alt="" src="/@@/bug" />
    <a tal:attributes="href context/fmt:url"
       >Bug #<tal:bug replace="context/id">3252543</tal:bug></a>:
    <tal:title replace="context/title">Foo doesn't work</tal:title>
  </div>
  <h1>Nominate this bug for a release</h1>
</metal:heading>

<div metal:fill-slot="main">
<style type="text/css">
  label {font-weight: normal}
</style>

<p>
Bug nominations will be evaluated by release managers to determine whether the
bug should be targeted to a given release.
</p>

<div tal:define="current_nominations view/getCurrentNominations">
<h3>Current Nominees</h3>
<form method="post" action="" name="decide">
<table class="listing" tal:condition="current_nominations">
  <thead>
    <tr>
      <th tal:condition="view/userCanDoReleaseManagement"></th>
      <th>Target</th>
      <th>Status</th>
      <th>Proposed By</th>
    </tr>
  </thead>
  <tbody>
    <tr tal:repeat="nomination current_nominations">
      <td tal:condition="view/userCanDoReleaseManagement">
        <input type="checkbox"
               name="nomination:list"
               tal:condition="nomination/should_show_checkbox"
               tal:attributes="value nomination/value" />
      </td>
      <td tal:content="nomination/displayname">Ubuntu (Hoary)</td>
      <td tal:content="nomination/status">Pending</td>
      <td><a href=""
             tal:content="nomination/owner/displayname"
             tal:attributes="href nomination/owner/fmt:url">
             Sample Person</a>
      </td>
    </tr>
  </tbody>
</table>
<div tal:condition="python:view.userCanDoReleaseManagement() and current_nominations">
  <input type="submit" name="approve" value="Approve" />
  <input type="submit" name="decline" value="Decline" />
</div>
</form>
<div tal:condition="not:current_nominations">None.</div>
</div>

<h3>Nominate</h3>
<div tal:define="releases view/getReleasesToDisplay;
                 should_show_more_releases view/shouldShowMoreReleases">

<p tal:condition="releases">
In which release(s) would you like to see this bug get fixed?
</p>

<p tal:condition="not:releases">
  No releases to nominate.
</p>

<form method="post" action="" name="nominate">
<ul style="list-style: none"
    tal:condition="releases">
  <li tal:repeat="release releases">
    <label>
      <input type="checkbox" name="release:list"
             tal:attributes="value release/name">
      <span tal:content="release/displayname">
        Ubuntu
      </span>
      <span tal:condition="release/status">
        (<span tal:content="release/status">Edgy</span>)
      </span>
    </label>
  </li>
</ul>
<div tal:condition="view/shouldShowMoreLink"
     style="margin-top: 0.5em">
  <small>
  (<a href="#"
      tal:attributes="href string:${request/URL}?show_more_releases=1">more</a>)
  </small></div>
<div >
</div>

<div tal:condition="view/shouldShowLessLink"
     style="margin-top: 0.5em"><small>(<a href="#"
        tal:attributes="href request/URL">less</a>)</small></div>
<div style="margin-top: 10px">
  <input type="submit" name="nominate" value="Submit Nominations" />
  <input type="submit" name="cancel" value="Cancel" />
</form>
</div>
</div>
</body>
</html>
