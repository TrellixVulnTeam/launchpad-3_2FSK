<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad"
>

<metal:block fill-slot="head_epilogue">
  <style type="text/css">
    .logtail {
      padding-left: 2em;
    }
    #merge-summary {
      margin: 1em 0;
    }
  </style>
  <script type="text/javascript"
      tal:condition="devmode"
      tal:define="lp_js string:${icingroot}/build"
      tal:attributes="src string:${lp_js}/code/branchsubscription.js">
  </script>
  <script type="text/javascript"
      tal:condition="devmode"
      tal:define="lp_js string:${icingroot}/build"
      tal:attributes="src string:${lp_js}/code/branchlinks.js">
  </script>
</metal:block>

<body>

<metal:side fill-slot="side">
  <tal:public condition="not: context/private">
    <div id="privacy" class="portlet public">
      This branch is public
    </div>
  </tal:public>
  <tal:public condition="context/private">
    <div id="privacy" class="portlet private">
      This branch is private
    </div>
  </tal:public>

  <tal:subscribers replace="structure context/@@+portlet-subscribers" />

</metal:side>

<div metal:fill-slot="main"
     tal:define="context_menu context/menu:context">

    <h1>
      <tal:branch replace="context/bzr_identity" />
      <a tal:define="link context_menu/delete_branch"
         tal:condition="link/enabled"
         tal:attributes="href link/url"
         ><img tal:attributes="alt link/text;title link/text" src="/@@/trash-icon" /></a>
      <a tal:define="link context_menu/edit"
         tal:condition="link/enabled"
         tal:attributes="href link/url"
         ><img tal:attributes="alt link/text;title link/text" src="/@@/edit" /></a>
    </h1>

  <tal:comment condition="nothing">
      <div class="top-portlet">
        <p id="project-inactive" class="warning message"
          tal:condition="not: context/active">
          This project is currently inactive
          <a tal:replace="structure overview_menu/review_license/fmt:icon"/>
        </p>

        <div class="summary" tal:content="context/summary">
          $Product.summary goes here. This should be quite short,
          just a single paragraph of text really, giving the project
          highlights.
        </div>

        <div class="description"
          tal:content="structure context/description/fmt:text-to-html"
          tal:condition="context/description">
          $Product.description goes here. This should be a longer piece of
          text, up to three paragraphs in length, which gives much more
          detailed information about the open source project in question.
        </div>

        <ul id="external-links" class="horizontal"
          tal:condition="view/has_external_links">
          <li tal:condition="view/should_display_homepage">
            <a id="homepageurl-link" class="sprite external-link"
              rel="nofollow"
              tal:attributes="href context/homepageurl">Home page</a>
          </li>
          <li tal:repeat="link view/external_links">
            <a tal:replace="structure link/fmt:link" />
          </li>
        </ul>
      </div>

      <div class="yui-g">
        <div class="yui-u first">
          <div id="project-info" class="portlet">
            <h2>Project information</h2>

            <div class="two-column-list">
              <dl id="partof" tal:condition="context/project">
                <dt>Part of:</dt>
                <dd><a tal:replace="structure context/project/fmt:link" /></dd>
              </dl>

              <dl id="owner" tal:condition="context/owner">
                <dt>Maintainer:</dt>
                <dd><a tal:replace="structure context/owner/fmt:link" /></dd>
              </dl>

              <dl id="aliases" tal:condition="context/aliases">
                <dt>Also known as:</dt>
                <dd><tal:aliases repeat="alias context/aliases">
                  <tal:alias replace="alias">something</tal:alias
                    ><tal:comma condition="not:repeat/alias/end">,</tal:comma>
                </tal:aliases></dd>
              </dl>

              <dl id="driver">
                <dt>Driver:</dt>
                <dd tal:condition="view/effective_driver">
                  <a tal:replace="structure view/effective_driver/fmt:link" /></dd>
                <dd tal:condition="not: view/effective_driver">
                  Not yet appointed.</dd>
              </dl>

              <dl id="uses" tal:define="uses_launchpad view/uses_launchpad_for">
                <tal:uses_launchpad condition="uses_launchpad">
                  <dt>Uses Launchpad for:</dt>
                  <dd><tal:uses content="structure uses_launchpad" />.</dd>
                </tal:uses_launchpad>
                <tal:no_launchpad condition="not: uses_launchpad">
                  <dt>Does not use Launchpad for development.</dt>
                  <dd></dd>
                </tal:no_launchpad>
              </dl>

              <dl id="product-languages"
                tal:condition="view/show_programming_languages">
                <dt>Programming Languages:</dt>
                <dd tal:content="structure view/languages_edit_widget" />
              </dl>

              <dl id="licences">
                <dt>Licenses:</dt>
                <dd>
                  <tal:licenses repeat="license context/licenses">
                    <tal:license replace="license/title">GPL</tal:license><tal:comma
                        condition="not:repeat/license/end">,</tal:comma>
                  </tal:licenses>
                  <tal:none condition="not:context/licenses">None specified</tal:none>
                  <tal:has_description condition="context/license_info">
                    (<tal:description replace="context/license_info" />)
                  </tal:has_description>
                </dd>
                <dd id="commercial_subscription"
                  tal:condition="context/commercial_subscription">
                  Commercial subscription expires
                  <tal:expiry content="context/commercial_subscription/date_expires/fmt:date" />
                </dd>
                <dd id="license-status" tal:condition="view/show_license_status">
                  <strong tal:content="structure context/license_status/description" />
                </dd>
              </dl>
            </div>

            <p id="registrant">
              Registered
              <tal:created replace="context/datecreated/fmt:approximatedate" />
              by
              <tal:registrant replace="structure context/registrant/fmt:link" />
            </p>

            <div id="project-admin-whiteboard" class="whiteboard"
              tal:condition="context/required:launchpad.ProjectReview">
              <div>
                <strong>Whiteboard</strong>
                <a tal:replace="structure overview_menu/review_license/fmt:icon"/>
              </div>
              <tal:whiteboard replace="structure context/reviewer_whiteboard/fmt:text-to-html" />
            </div>
          </div>
        </div>

        <div class="yui-u">
          <div class="portlet">
            <h2>
              <span class="see-all"><a
                tal:replace="structure overview_menu/series/fmt:link" /></span>
              Series and milestones
            </h2>

            <iframe style="width: 90%"
              metal:use-macro="context/@@+timeline-macros/timeline-iframe" />

            <ul class="horizontal"
              tal:condition="overview_menu/series_add/enabled">
              <li>
                <a tal:replace="structure overview_menu/series_add/fmt:link" />
              </li>
            </ul>
          </div>
        </div>
      </div>

      <tal:warning-for-owner
        condition="view/show_commercial_subscription_info">
        <div
          tal:condition="view/requires_commercial_subscription"
          tal:content="structure context/@@+portlet-requires-subscription"/>
        <div
          tal:condition="not: context/licenses"
          tal:content="structure context/@@+portlet-license-missing" />
      </tal:warning-for-owner>

      <div class="yui-g">
        <div class="yui-u first">
          <div tal:content="structure context/@@+portlet-listfaqs"
            tal:condition="context/official_answers" />

          <div tal:content="structure context/@@+portlet-latestbugs"
            tal:condition="context/official_malone" />

          <div tal:content="structure context/@@+portlet-top-contributors" />

          <div tal:content="structure context/@@+portlet-packages" />
        </div>

        <div class="yui-u">
          <div tal:content="structure context/@@+portlet-latestquestions"
            tal:condition="context/official_answers" />

          <div tal:content="structure context/@@+portlet-latestspecs"
            tal:condition="context/official_blueprints" />

          <div tal:content="structure context/@@+portlet-coming-sprints" />
        </div>
      </div>

  </tal:comment>


  <div class="top-portlet">
    <tal:branch-errors tal:replace="structure context/@@+messages" />
    <div class="description"
         tal:condition="context/description"
         tal:content="structure context/description/fmt:text-to-html">
      The description of the branch usually goes here, but will be used so
      rarely that it only shows if there is a description set.  To set a
      description, one must do so through the "Edit details" navigation link.
    </div>
    <div id="related-bugs-and-blueprints">
      <h2>Related bugs and blueprints</h2>
      <tal:related-bugs-specs
          replace="structure context/@@++branch-related-bugs-specs" />
    </div>
  </div>


  <div class="yui-g">

    <div class="yui-u first">
      <div id="branch-info" class="portlet">
        <h2>Branch information</h2>
        <tal:branch-info replace="structure context/@@++branch-information" />
      </div>
    </div>

    <div id="branch-management" class="yui-u">
      <h2>Branch management</h2>
      <tal:branch-management replace="structure context/@@++branch-management" />
    </div>

  </div>


  <div id="branch-merges" class="yui-g">
    <h2>Branch Pending Merges</h2>
    <tal:branch-pending-merges
        replace="structure context/@@++branch-pending-merges" />
  </div>

  <div id="whiteboard" class="yui-g" tal:condition="view/show_whiteboard">
    <div>
      <h2>Whiteboard</h2>
      <div id="branch-whiteboard-value"
        tal:condition="context/whiteboard"
        tal:content="structure context/whiteboard/fmt:text-to-html">
        Whiteboard text goes here.
      </div>
    </div>

    <div
      tal:define="link context/menu:context/edit_whiteboard"
      tal:condition="link/enabled"
      tal:content="structure link/render">
      Edit whiteboard
    </div>
  </div>

  <div class="yui-g">
    <div class="yui-u first">
      <h2>Recent revisions</h2>
      <tal:branch-revisions replace="structure context/@@++branch-revisions" />
    </div>

    <div class="yui-u">
      <h2>Branch metadata</h2>
      <tal:branch-metadata replace="structure context/@@++branch-metadata" />
    </div>
  </div>

  <tal:imported-branch tal:condition="context/branch_type/enumvalue:IMPORTED">
    <h2>Import details</h2>
    <div id="import-details" tal:define="branch context">
      <tal:no-codeimport condition="not: branch/code_import">
        <p>This branch is updated by the Launchpad import system.</p>
      </tal:no-codeimport>

      <tal:has-codeimport condition="branch/code_import"
                          define="code_import branch/code_import">

        <div><strong>Import Status:</strong>
          <span tal:attributes="class string:codeimport${code_import/review_status/name}"
                tal:content="code_import/review_status/title"/>
            <form tal:attributes="action string:${context/fmt:url}/@@+try-again"
                  tal:condition="python:view.user and code_import.review_status.name == 'FAILING'"
                  style="display: inline; padding-left: 1em"
                  name="tryagain"
                  method="post"
                  enctype="multipart/form-data" accept-charset="UTF-8">
              <noscript>
                <img src="/@@/retry" />
                <input id="tryagain.actions.tryagain" name="tryagain.actions.tryagain" value="Try Again" class="button" type="submit" />
              </noscript>
              <input
                 type="hidden"
                 name="tryagain.actions.tryagain"
                 value="" />
              <a href="javascript:document.tryagain.submit()" style="display: none" id="tryagainlink">
                <img src="/@@/retry" />
                Try again
              </a>
              <script type="text/javascript">
                  YUI().use('event', 'node', function(Y) {
                    Y.on("domready", function () { Y.get('#tryagainlink').setStyle('display', 'inline') });
                  });
              </script>
            </form>
        </div>

        <tal:git-import condition="code_import/rcs_type/enumvalue:GIT">
          <p>This branch is an import of the MASTER branch from the Git repo at
            <span tal:replace="code_import/git_repo_url" />.
          </p>
        </tal:git-import>

        <tal:svn-import condition="code_import/rcs_type/enumvalue:SVN">
          <p>This branch is an import of the Subversion branch from
          <tal:is-web-url condition="view/svn_url_is_web">
            <a tal:attributes="href code_import/svn_branch_url"
                    tal:content="code_import/svn_branch_url" />.
          </tal:is-web-url>
          <tal:not-web-url condition="not: view/svn_url_is_web">
              <span tal:replace="code_import/svn_branch_url" />.
          </tal:not-web-url>
          </p>
        </tal:svn-import>

        <tal:cvs-import condition="code_import/rcs_type/enumvalue:CVS">
          <p>This branch is an import of the CVS module
          <strong tal:content="code_import/cvs_module"/> from
          <strong tal:content="code_import/cvs_root"/>.
          </p>
        </tal:cvs-import>

        <tal:has-job define="job code_import/import_job"
                     condition="job">
          <div>
          <tal:is-running condition="job/state/enumvalue:RUNNING">
            An import is currently running on
            <tal:machine content="structure job/machine/fmt:link" />,
            and was started
            <tal:date-started replace="job/date_started/fmt:displaydate">
              2 hours ago
            </tal:date-started>.
            <tal:is-logtail condition="job/logtail">
              The last few lines of the job's output were:
              <div class="logtail">
                <tal:logtail content="structure job/logtail/fmt:nice_pre" />
              </div>
            </tal:is-logtail>
          </tal:is-running>
          <tal:not-running condition="not: job/state/enumvalue:RUNNING">
            The next import is scheduled to run
            <tal:overdue condition="job/isOverdue">
              as soon as possible<tal:requested-by
                condition="job/requesting_user">
                (requested by
                <tal:requested-by-user
                   replace="structure job/requesting_user/fmt:link">
                  Some user.
                </tal:requested-by-user>)</tal:requested-by>.
            </tal:overdue>
            <tal:not-overdue condition="not: job/isOverdue">
              <tal:date-started replace="job/date_due/fmt:displaydate">
                in 2 hours
              </tal:date-started>.
              <tal:button
                 condition="view/user"
                 replace="structure view/context/@@+request-import" />
            </tal:not-overdue>
          </tal:not-running>
          </div>
        </tal:has-job>

        <tal:failing condition="code_import/review_status/enumvalue:FAILING">
          <div id="failing-try-again" class="message warning">
            The import has been suspended because it failed
            <tal:failure-limit content="modules/canonical.config/config/codeimport/consecutive_failure_limit"/>
            or more times in succession.
          </div>
        </tal:failing>

        <tal:last-successful condition="code_import/date_last_successful">
          <p>
            Last successful import was
            <tal:last-successful replace="code_import/date_last_successful/fmt:displaydate">
              2 hours ago
            </tal:last-successful>.
          </p>
        </tal:last-successful>

        <div id="import-results" tal:condition="view/latest_code_import_results">
          <tal:result repeat="result view/latest_code_import_results">
            <metal:result use-macro="code_import/@@+macros/show_result"/>
          </tal:result>
        </div>

        <tal:can-edit condition="code_import/required:launchpad.Edit">
          <p>
            <a tal:define="link context_menu/edit_import"
               tal:condition="link/enabled"
               tal:attributes="href link/url"
               tal:content="structure link/render">
               Edit import source or review import</a>
          </p>
        </tal:can-edit>
      </tal:has-codeimport>
    </div>
  </tal:imported-branch>


  <div
    id="translations-sources"
    tal:define="translations_sources view/translations_sources"
    tal:condition="translations_sources">
    <h2>Automatic translations commits</h2>
    <ul>
      <tal:sources-list repeat="source translations_sources">
        <li tal:content="structure source/fmt:link">~foo/example/branch</li>
      </tal:sources-list>
    </ul>
  </div>

      <div class="related">

  <h2>Nearby</h2>
  <ul>
    <li tal:condition="context/product">
      <a tal:attributes="href context/product/fmt:url">
        Other <tal:product replace="context/product/displayname" /> branches
      </a>
    </li>
    <li tal:condition="context/sourcepackage">
      <a tal:attributes="href context/sourcepackage/fmt:url">
        Other <tal:product replace="context/sourcepackage/displayname" /> branches
      </a>
    </li>
    <li>
      <a tal:attributes="href context/owner/fmt:url">
        Other branches owned by <tal:person
        replace="context/owner/fmt:displayname">Owner</tal:person>
      </a>
    </li>
    <li tal:condition="not:view/owner_is_registrant">
      <a tal:attributes="href string:${context/registrant/fmt:url}/+registeredbranches">
        Other branches registered by <tal:person
        replace="context/registrant/fmt:displayname">Registrant</tal:person>
      </a>
    </li>
  </ul>

      </div>

</div>

</body>
</html>
<!-- 1-0 done -->
