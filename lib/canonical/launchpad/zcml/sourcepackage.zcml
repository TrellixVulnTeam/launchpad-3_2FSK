<configure
  xmlns="http://namespaces.zope.org/zope"
  xmlns:browser="http://namespaces.zope.org/browser"
  xmlns:i18n="http://namespaces.zope.org/i18n"
  i18n_domain="launchpad">

  <!-- SourcePackage -->
  <content class="canonical.launchpad.database.SourcePackage">
    <allow interface="canonical.launchpad.interfaces.ISourcePackage" />
    <allow interface="canonical.launchpad.interfaces.IHasBuildRecords"/>
    <!-- IQuestionTarget -->
    <allow attributes="getQuestion searchQuestions findSimilarQuestions
      answer_contacts direct_answer_contacts getSupportedLanguages
      getQuestionLanguages"
	  />
    <require 
      permission="launchpad.AnyPerson"
      attributes="newQuestion addAnswerContact removeAnswerContact" 
      />
  </content>

  <browser:defaultView
    for="canonical.launchpad.interfaces.ISourcePackage"
    name="+index" 
    />

  <browser:defaultView
    for="canonical.launchpad.interfaces.ISourcePackage"
    layer="canonical.launchpad.layers.BugsLayer"
    name="+bugs" 
    />
  <browser:defaultView
    for="canonical.launchpad.interfaces.ISourcePackage"
    layer="canonical.launchpad.layers.AnswersLayer"
    name="+tickets"
    />
  <browser:defaultView
    for="canonical.launchpad.interfaces.ISourcePackage"
    name="+translations"
    layer="canonical.launchpad.layers.TranslationsLayer"
    />

  <browser:navigation
    module="canonical.launchpad.browser"
    classes="SourcePackageNavigation"
    />

  <adapter
    provides="canonical.launchpad.interfaces.IStructuralObjectPresentation"
    for="canonical.launchpad.interfaces.ISourcePackage"
    factory="canonical.launchpad.browser.SourcePackageSOP"
    permission="zope.Public"
    />

  <browser:url
    for="canonical.launchpad.interfaces.ISourcePackage"
    path_expression="string:+source/${name}"
    attribute_to_parent="distroseries"
    />

   <browser:menus
    module="canonical.launchpad.browser.sourcepackage"
    classes="
      SourcePackageFacets SourcePackageOverviewMenu SourcePackageBugsMenu
      SourcePackageAnswersMenu SourcePackageTranslationsMenu"
    />

  <browser:pages
    for="canonical.launchpad.interfaces.ISourcePackage"
    facet="overview"
    permission="zope.Public">
    <browser:page
      name="+portlet-upstream"
      template="../templates/sourcepackage-portlet-upstream.pt"
      />
    <browser:page
      name="+portlet-releases"
      template="../templates/sourcepackage-portlet-releases.pt"
      />
  </browser:pages>

  <browser:pages
    for="canonical.launchpad.interfaces.ISourcePackage"
    permission="zope.Public"
    class="canonical.launchpad.browser.sourcepackage.SourcePackageView">
    <browser:page
      name="+index"
      facet="overview"
      template="../templates/sourcepackage-index.pt"
      />
    <browser:page
      name="+gethelp"
      facet="answers"
      template="../templates/sourcepackage-gethelp.pt"
      />
    <browser:page
      name="+translate"
      facet="translations"
      template="../templates/sourcepackage-translate.pt"
      />
    <browser:page
      name="+changelog"
      facet="overview"
      template="../templates/sourcepackage-changelog.pt"
      />
    <browser:page
      name="+packaging"
      facet="overview"
      template="../templates/sourcepackage-packaging.pt"
      />
    <browser:page
      name="+translations"
      facet="translations"
      template="../templates/object-translations.pt"
      />
    <browser:page
      name="+builds"
      facet="overview"
      template="../templates/sourcepackage-builds.pt"
      />
    <browser:page
      name="+builds-list"
      template="../templates/builds-list.pt"
      />
    <browser:page
      name="+potlist"
      facet="translations"
      template="../templates/object-pots.pt"
      />

    <!-- SourcePackage Portlets -->
    <browser:page
      name="+portlet-details"
      facet="overview"
      template="../templates/sourcepackage-portlet-details.pt"
      />
    />
  </browser:pages>

  <browser:pages
    for="canonical.launchpad.interfaces.ISourcePackage"
    permission="launchpad.Admin"
    class="canonical.launchpad.browser.sourcepackage.SourcePackageView">
    <browser:page
      name="+potemplatenames"
      facet="translations"
      template="../templates/object-potemplatenames.pt"
      />
  </browser:pages>

  <browser:pages
    for="canonical.launchpad.interfaces.ISourcePackage"
    permission="launchpad.AnyPerson"
    class="canonical.launchpad.browser.sourcepackage.SourcePackageView">
    <browser:page
      name="+edit-packaging"
      facet="overview"
      template="../templates/sourcepackage-edit-packaging.pt"
      />
  </browser:pages>

</configure>
