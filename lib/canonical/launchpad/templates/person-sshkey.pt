<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
  <title metal:fill-slot="title">
    <span tal:replace="context/displayname">Name</span>
    SSH Keys</title>
  <!-- Plone style sheet -->
  <style type="text/css" media="screen">@import url(plone.css);</style>
  <!-- Launchpad style sheet -->
  <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

  <metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure view/actionsPortlet" />
  </metal:rightportlets>

  <div metal:fill-slot="main">

    <h1>SSH Key Management</h1> 

    <p>You need to register an SSH key with Launchpad to be able to publish
    your Bazaar code branches in the Bazaar supermirror. This is a more
    efficient way to share code than the traditional CVS system, as anybody
    can branch and merge code without needing access to a central server.</p>

    <div tal:define="msg view/form_action" tal:condition="msg">
      <p class="portalMessage" tal:content="msg">Something happened.</p>
    </div>
  
    
    <div tal:repeat="sshkey context/sshkeys"> 
    <form name="remove" action="" method="POST">
    <input type="hidden" name="action" value="remove" />
    <input type="hidden" name="key" tal:attributes="value sshkey/id" />
    <fieldset> 
    <legend>SSH Key Information </legend>
    <dl>
    <dt>Key type</dt>
        <dd tal:content="sshkey/keytype/lp:SSHKeyType">DSA</dd>
    <dt>Key text</dt>
        <dd style="overflow: auto;" tal:content="sshkey/keytext">aaaaAAAA...</dd>
    <dt>Comment</dt>
        <dd tal:content="sshkey/comment">foo@bar</dd>
    </dl>
    <input type="submit" value="Remove" />
    </fieldset>
    </form>
    </div>

    <div>
    <form name="add" action="" method="POST">
    <input type="hidden" name="action" value="add" />
    <fieldset>
    <legend>Add SSH Key</legend>
    <div>
        <label>Public key line</label>
        <div class="formHelp">
            Insert the contents of <tt>~/.ssh/id_dsa.pub</tt> or
            <tt>~/.ssh/id_rsa.pub</tt>.  Only SSH v2 keys are supported.
        </div>
        <textarea name="sshkey" width="60" height="6">
        </textarea>
        <input type="submit" value="Import public key">
    </fieldset>
    </form>
    </div>
    
  </div>
</body>
</html>
