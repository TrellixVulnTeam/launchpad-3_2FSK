== Setting Upstream Bug Contacts ==

Setting the bug contact for an upstream requires launchpad.Edit
permission on the product.

    >>> browser.addHeader("Authorization", "Basic mark@hbd.com:test")

    >>> browser.open("http://localhost:9000/firefox/+bugcontact")
    >>> browser.getControl(name="field.bugcontact").value = (
    ...     "robertc@robertcollins.net")
    >>> browser.getControl("Change").click()

Another example, this time with a team that has no "preferred email" set.

    >>> browser.open("http://localhost:9000/firefox/+bugcontact")
    >>> browser.getControl(name="field.bugcontact").value = "guadamen"
    >>> browser.getControl("Change").click()


= Teams as Bug Contacts =

First, some setup. We create a new product owned by "Sample Person", using a
separate browser instance to avoid breaking the other page tests.

    >>> sample_browser = setupBrowser()
    >>> sample_browser.addHeader("Authorization",
    ...                          "Basic test@canonical.com:test")
    >>> sample_browser.open('http://launchpad.dev/projects/+new')
    >>> sample_browser.getControl(name='field.name').value = 'testy'
    >>> sample_browser.getControl('Display Name:').value = 'Test Product'
    >>> sample_browser.getControl('Title:').value = 'A product for testing '
    ...                                             'things'
    >>> sample_browser.getControl('Summary:').value = 'Testing team bug '
    ...                                               'contacts'
    >>> sample_browser.getControl('Description:').value = 'See bug 109652'
    >>> sample_browser.getControl('Add').click()
    >>> sample_browser.url
    'http://launchpad.dev/testy'

Sample Person is a member of "Warty Security Team". He however should not be
able to set Warty Security Team as a bug contact for Test Project as he's not
an admin of that team.

    >>> sample_browser.getLink('Bugs').click()
    >>> sample_browser.getLink('Change bug contact').click()
    >>> sample_browser.url
    'http://bugs.launchpad.dev/testy/+bugcontact'

    >>> sample_browser.getControl('Bug Contact').value = 'name20'
    >>> sample_browser.getControl('Change').click()
    >>> 'Successfully changed the bug contact' not in sample_browser.contents
    True

    >>> print sample_browser.contents
    <!DOCTYPE...
    ...You cannot set Warty Security Team as the bug contact...
    ...you are not an administrator of that team...

In the warning, the user will be pointed to the Warty Security Team's
membership page and advised to contact an administrator if she believes that
the team should be a bug contact.

    >>> sample_browser.getLink('Warty Security Team administrators').click()
    >>> sample_browser.url
    'http://launchpad.dev/~name20/+members'

