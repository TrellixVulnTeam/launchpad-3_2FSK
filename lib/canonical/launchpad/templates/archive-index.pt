<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
  >
<body>

    <metal:portlets fill-slot="portlets">
       <tal:portlet replace="structure context/distribution/@@+portlet-ppa-architectures" />
    </metal:portlets>

    <div metal:fill-slot="main"
         tal:define="ppa_active view/is_active">

      <tal:privacy-icon replace="structure context/@@+privacy-icon"/>

      <h1 tal:content="CONTEXTS/fmt:pagetitle">PPA for user</h1>

      <h2 style="margin-top: 0">URL: <a tal:attributes="href context/archive_url"
       tal:content="context/archive_url">url</a></h2>

      <tal:whiteboard condition="context/required:launchpad.Edit">
         <div id="whiteboard" class="informational"
              tal:condition="context/whiteboard">
           <p>PPA whiteboard:</p>
           <tal:archive-whiteboard
              replace="structure context/whiteboard/fmt:text-to-html" />
         </div>
      </tal:whiteboard>

      <div id="description">
         <tal:archive-description condition="context/description"
            replace="structure context/description/fmt:text-to-html" />
      </div>

      <h2>apt sources.list entries</h2>

      <tal:entries replace="structure view/sources_list_entries" />

      <div id="ppa-dependencies" tal:condition="context/dependencies">

        <h3>PPA dependencies</h3>

        <p class="warning message">When installing packages from
          this PPA you may need to enable one or more of the following
          PPAs, which have been considered for building packages in
          this context.</p>

        <ul>
           <li tal:repeat="dependency context/dependencies">
             <a tal:attributes="href dependency/dependency/fmt:url"
                tal:content="dependency/dependency/title" />
             (included <span
               tal:replace="dependency/date_created/fmt:displaydate" />)
           </li>
        </ul>

      </div> <!-- ppa-dependencies -->

      <h2>Packages</h2>

      <p tal:condition="not: ppa_active">
        This PPA does not contain any packages yet.
      </p>

      <tal:active_ppa condition="ppa_active">

      <div>
        <ul id="package_counters">
          <li id="source_counter">
             <tal:source_count_text replace="view/source_count_text" />
             (<tal:sources_size
                replace="context/sources_size/fmt:bytes" />)</li>
          <li id="binary_counter">
             <tal:binary_count_text replace="view/binary_count_text" />
             (<tal:binaries_size
                replace="context/binaries_size/fmt:bytes" />)</li>
          <li id="total_size">
             Estimated archive size:
             <tal:estimated_size
               replace="context/estimated_size/fmt:bytes" /></li>
        </ul>
      </div>

      <div>
        <form name="package_search" action="" method="GET">
           <label for="name">Package name contains:</label>
           <input id="field.name_filter" title="Package Name" size="20"
                  type="text" name="field.name_filter"
                  tal:attributes="value request/field.name_filter|nothing"/>
           <tal:status_filter
             replace="structure view/plain_status_filter_widget" />
           <input type="submit" value="Search" />
        </form>
      </div>

      <div style="padding-top: 1em;" tal:define="batch view/search_results">

      <tal:navigation_top
           condition="view/search_requested"
           replace="structure view/batchnav/@@+navigation-links-upper" />

      <table class="listing" id="packages_list" tal:condition="batch">
        <thead>
          <tr class="ppa_package_row">
            <th colspan="2">Source</th>
            <th tal:condition="context/owner/isTeam">Uploader</th>
            <th>Published</th>
            <th>Status</th>
            <th>Series</th>
            <th>Section</th>
            <th>Built</th>
          </tr>
        </thead>
        <tbody>
          <tal:block repeat="publishing batch"
                     replace="structure publishing/@@+listing-ppa-detailed">
          </tal:block>
        </tbody>
      </table>

      <tal:navigation_bottom
           condition="view/search_requested"
           replace="structure view/batchnav/@@+navigation-links-lower" />

        <div id="empty-result"
             tal:define="name_filter request/field.name_filter|nothing"
             tal:condition="not: batch">
           No matching package for '<tal:name_filter replace="name_filter" />'.
        </div>

      </div>

      </tal:active_ppa>

    </div> <!--main -->

    <p metal:fill-slot="help">
      You can view the current
      <a href="https://help.launchpad.net/PPATermsofUse"
      >Terms of Use</a> for the Launchpad PPA service.

      <br />
      <br />
      For more information about how to configure your system to
      use packages from this PPA see
      <a href="https://help.launchpad.net/PPAQuickStart"
      >quick-start guide</a>.

    </p>

  </body>
</html>
