<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="malone"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>
        <tal:tracker replace="context/title">Gnome Bugzilla</tal:tracker>
        overview
      </h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
    <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure context/@@+portlet-projects" />
</metal:rightportlets>

<metal:macros fill-slot="bogus">
  <metal:macro define-macro="watchlisting">
    <table class="sortable listing" id="latestwatches">
      <thead>
        <tr>
          <th>Malone bug</th>
          <th>Remote #</th>
          <th>Status</th>
        </tr>
      </thead>

      <tbody>
        <tr tal:repeat="watch watches">
          <td>
            <img alt="" src="/++resource++bug" />
            <a href="#" tal:attributes="href watch/bug/fmt:url">
              #<span tal:replace="watch/bug/id">34</span>:
               <span tal:replace="watch/bug/title">Malone Bug Title</span>
            </a>
          </td>
          <td><a tal:content="watch/remotebug"
                 tal:attributes="href watch/url">53656
              </a>
          </td>
          <td tal:content="watch/remotestatus" />
        </tr>
      </tbody>
    </table>
  </metal:macro>
</metal:macros>

<div metal:fill-slot="main">

  <p tal:content="context/summary">
    $BugTracker.summary goes here. This should be quite short,
    just a single paragraph of text really, giving the BugTracker
    highlights.
  </p>

  <h2>Contact details</h2>

  <div tal:condition="not: context/contactdetails">
    None provided.
  </div>
  <div tal:condition="context/contactdetails"
       tal:content="context/contactdetails" >
    The contact details for the admins of this bug tracker go here, so we
    can get to them in an emergency.
  </div>

  <tal:block condition="context/watches">

    <tal:block condition="request/display-all-watches|nothing"
               define="watches context/watches">
      <h2>All active bug watches</h2>
      <metal:watches use-macro="template/macros/watchlisting" />
    </tal:block>

    <tal:block condition="not: request/display-all-watches|nothing"
               define="watches context/latestwatches">
      <h2>Latest bug watches</h2>
      <metal:watches use-macro="template/macros/watchlisting" />
      <ul>
        <li class="list"><a href="?display-all-watches=1">Show all bug
        watches</a></li>
      </ul>
    </tal:block>

  </tal:block>

</div>

</body>
</html>
