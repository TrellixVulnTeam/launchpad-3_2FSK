<div
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  i18n:domain="launchpad"
>
  <div id="timeline-container"
       style="border: 1px solid #000; position: relative">
  </div>
  <script type="text/javascript">
    YUI().use('registry.timeline', 'node', function(Y) {
        Y.on('domready', function(e) {
          if (Y.UA.ie) {
              return;
          }

          var display_graph = function(result) {
              var timeline = result;
              var container = Y.get('#timeline-container');
              graph = new Y.registry.timeline.TimelineGraph({
                  timeline: timeline,
                  boundingBox: container
              });
              try {
                  graph.render();
              }
              catch (e) {
                  alert('Error rendering series graph: ' + e);
              }
          }

          var client = new LP.client.Launchpad();
          var timeline = client.named_get(
              LP.client.cache['context']['self_link'],
              'get_timeline', {
                  parameters: {},
                  on: {
                      success: display_graph,
                      failure: function(ignore, response, args) {
                          alert(
                              response.status +
                              ' Error retrieving series data.\n' +
                              response.responseText);
                      }
                  }
              });
        });
    });
  </script>

</div>
