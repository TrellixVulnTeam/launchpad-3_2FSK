<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<head>
  <title metal:fill-slot="title">Members of 
    <span tal:replace="context/team/browsername" /></title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Soyuz style sheet -->
    <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <tal:block tal:define="activeMembersCount view/activeMembersCount;
                           inactiveMembersCount view/inactiveMembersCount;
                           proposedMembersCount view/proposedMembersCount">

      <h1>Members of <span tal:replace="context/team/browsername" /></h1>

      <br />

      <p tal:condition="view/allMembersCount">These are all members of this team.
        You can add new ones in the <a href="+add">Add Members</a> page of this team.</p>

      <p tal:condition="not: view/allMembersCount">This team currently have no
        members. You can add new ones in the <a href="+add">Add Members</a> 
        page of this team.</p>

      <fieldset tal:condition="activeMembersCount">
        <legend>Active members</legend>

        <p>Active members are comprised of <em>approved members</em> and 
        <em>administrators</em> of a team. These members can be promoted 
        to administrators, demoted to normal members, deactivated or can
        have their expiration date changed.</p>

        <table width="100%" class="listing lpListing rowNavigation"> 
          <tr>
            <th>Name</th>
            <th>Member since</th>
            <th>Expires</th>
            <th>Status</th>
          </tr>
          <tr tal:repeat="membership view/activeMemberships"
              class="rowLinkified">
            <tal:block tal:define="member membership/person">
            <td>
              <a tal:attributes="href member/name"
                 tal:content="member/browsername"
                 title="Edit this membership" />
            </td>

            <td>
              <a tal:attributes="href member/name"
                 tal:content="membership/datejoined/date"
                 title="Edit this membership" />
            </td>

            <td tal:condition="membership/dateexpires">
              <a tal:attributes="href member/name" 
                 tal:content="membership/dateexpires/date"
                 title="Edit this membership" />
            </td>

            <td tal:condition="not: membership/dateexpires">
              <a tal:attributes="href member/name"
                 title="Edit this membership">Never</a>
            </td>

            <td>
              <a tal:attributes="href member/name" 
                 tal:content="membership/statusname"
                 title="Edit this membership" />
            </td>
            </tal:block>
          </tr>
        </table>

      </fieldset>

      <fieldset tal:condition="proposedMembersCount">
        <legend>Proposed members</legend>

        <p>Proposed members are the ones who wish to join this team, but in
        order for them to become real members a team administrator must 
        approve it's subscription. A team administrator can also decline
        proposed subscriptions if they think a member should not join this
        team.</p>

        <table width="100%" class="listing lpListing rowNavigation"> 
          <tr>
            <th>Name</th>
            <th>Join requested in</th>
          </tr>
          <tr tal:repeat="membership view/proposedMemberships"
              class="rowLinkified">
            <tal:block tal:define="member membership/person">
            <td>
              <a tal:attributes="href member/name"
                 tal:content="member/browsername"
                 title="Approve/Decline this membership" />
            </td>
            <td>
              <a tal:attributes="href member/name"
                 tal:content="membership/datejoined/date"
                 title="Approve/Decline this membership" />
            </td>
            </tal:block>
          </tr>
        </table>

        <div style="float:right">
          <a href="+editproposed">Edit All Proposed Members</a>
        </div>
      </fieldset>

      <fieldset tal:condition="inactiveMembersCount">
        <legend>Inactive members</legend>

        <p>These are members who, at some point were active members for this
        team but are not any longer. Either their subscriptions have
        <em>expired</em> or were <em>deactivated</em> by themselves or any
        administrator of this team. Inactive members can become active members
        again only if a team administrator renew their subscriptions (in case 
        of <em>expired</em> ones) or reactivate it (for <em>deactivated</em>
        ones).</p>

        <table width="100%" class="listing lpListing rowNavigation"> 
          <tr>
            <th>Name</th>
            <th>Joined in</th>
            <th>Status</th>
          </tr>
          <tr tal:repeat="membership view/inactiveMemberships"
              class="rowLinkified">
            <tal:block tal:define="member membership/person">
            <td>
              <a tal:attributes="href member/name"
                 tal:content="member/browsername"
                 title="Renew/Reactivate this membership" />
            </td>
            <td>
              <a tal:attributes="href member/name"
                 tal:content="membership/datejoined/date"
                 title="Renew/Reactivate this membership" />
            </td>

            <td tal:condition="membership/isExpired">
              <a tal:attributes="href member/name"
                 title="Renew/Reactivate this membership">
                Membership expired in <span tal:replace="membership/dateexpires/date" />
              </a>
            </td>
            <td tal:condition="not: membership/isExpired">
              <a tal:attributes="href member/name"
                 tal:content="membership/statusname"
                 title="Renew/Reactivate this membership" />
            </td>
            </tal:block>
          </tr>
        </table>

      </fieldset>

    </tal:block>

</div>

</body>
</html>
