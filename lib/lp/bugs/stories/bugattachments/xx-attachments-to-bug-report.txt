= File Attachments of the Bug Report =

File attachments of the bug report itself are displayed in the list of
comments. Since the text of this comment is already displayed as the
bug report itself (or is accessible via the link "show original bug
report"), no text content is displayed for this comment.

Without an attachment to the bug report, the first displayed comment
of bug #11 is:

    >>> browser.open("http://bugs.launchpad.dev/redfish/+bug/11")
    >>> comment_1 = find_tags_by_class(browser.contents, 'boardComment')[0]
    >>> print extract_text(comment_1)
    Valentina Commissari
    wrote
    on 2007-03-15:
    #1
    The solution to this is to make Jokosher use autoaudiosink...

If we add an attachment to the bug report...

    >>> import StringIO
    >>> from zope.component import getUtility
    >>> from canonical.launchpad.ftests import login, logout, syncUpdate
    >>> from lp.bugs.interfaces.bug import IBugSet
    >>> login("test@canonical.com")
    >>> bug_11 =  getUtility(IBugSet).get(11)
    >>> attachment = bug_11.addAttachment(
    ...     owner=None, data=StringIO.StringIO('whatever'),
    ...     comment=bug_11.initial_message, filename='test.txt',
    ...     is_patch=False, content_type='text/plain',
    ...     description='sample data')
    >>> syncUpdate(attachment)
    >>> syncUpdate(bug_11)
    >>> logout()

...the first displayed comment shows a link to the attachment, but it
does not display a text message (which would be the same as the text
displayed as the bug report).

    >>> browser.open("http://bugs.launchpad.dev/redfish/+bug/11")
    >>> comment_0 = find_tags_by_class(browser.contents, 'boardComment')[0]
    >>> print extract_text(comment_0)
    Daniel Silverstone
    wrote
    on 2007-03-15:
    #0
    sample data
    (8 bytes,
    text/plain)
    >>> link = browser.getLink('sample data')
    >>> print link.url
    http://localhost:58000/.../test.txt
