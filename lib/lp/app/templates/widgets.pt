 <tal:root
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:metal="http://xml.zope.org/namespaces/metal"
   omit-tag="">

<metal:add-picker-widget define-macro="add-picker-widget">

  <tal:comment condition="nothing">
    This macro requires the following defined variables:
      picker_context - this is the field that is being changed
      allow_edit - should the picker enable the edit button
      outer_span_id - this is the id for the outer span (surprise!)

    NOTE: this will need to be changed if for the simple display
      we need to do more than just /fmt:link.
  </tal:comment>

  <span tal:attributes="id outer_span_id">
    <span class="yui3-activator-data-box">
      <tal:owner replace="structure picker_context/fmt:link" />
    </span>
    <button class="lazr-btn yui3-activator-act yui3-activator-hidden"
            tal:condition="allow_edit">
      Edit
    </button>
    <div class="yui3-activator-message-box yui3-activator-hidden" />
  </span>

</metal:add-picker-widget>

</tal:root>
