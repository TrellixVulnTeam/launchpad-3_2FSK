<tal:layout define="columns1 default">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template_2col/master"
  i18n:domain="rosetta"
>
<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
  <div tal:replace="structure context/product/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <h3 tal:content="context/title">Foo Series: main</h3>
  <h1>Upstream source import</h1>
</metal:heading>

<div metal:fill-slot="main">

  <p tal:condition="not:view/has_errors">
    Once you enter the details of the <abbr title="revision control
    system">RCS</abbr> you use for this product series, Launchpad can
    attempt to import that code and publish it as a Bazaar branch.  This
    lets distributors share code with you more efficiently, and also allows
    distributed upstream development.
  </p>

  <form method="post" name="mf">

    <h2>Source import details</h2>

    <fieldset>
      <legend>Revision control repository</legend>

      <div class="formHelp">
        Enter details below for only the selected Repository type.
      </div>

      <fieldset>
        <legend>
          <input type="radio" name="rcstype" value="cvs" id="cvs_selector"
                 onClick="javascript:updateWidgets()"
                 tal:attributes="checked not:view/svnrepository" />
          <label for="cvs_selector">CVS</label>
        </legend>
        
        <table>
          <tbody>
            <tr>
              <th><label>Repository root:</label></th>
              <td>
                <input type="text" name="cvsroot" size="30"
                       tal:attributes="value view/cvsroot" />
                <span class="fieldRequired">(Required)</span>
              </td>
            </tr>
            <tr class="formHelp">
              <th>Example:</th>
              <td><code>:pserver:anonymous@anoncvs.gnome.org:/cvs/gnome</code>
              </td>
            </tr>
            <tr>
              <th><label>Module:</label></th>
              <td>
                <input type="text" name="cvsmodule" size="30"
                       tal:attributes="value view/cvsmodule" />
                <span class="fieldRequired">(Required)</span>
              </td>
            </tr>
            <tr>
              <th><label>Branch name:</label></th>
                <td>
                  <div>
                    <input type="text" name="cvsbranch" size="30"
                           tal:attributes="value view/cvsbranch" />
                    <span class="fieldRequired">(Required)</span>
                  </div>
                  <div class="formHelp">
                    The branch representing the upstream codebase
                    for this product series.
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </fieldset>

        <fieldset>
          <legend>
            <input type="radio" name="rcstype" value="svn" id="svn_selector"
                   onClick="javascript: updateWidgets()" 
                   tal:attributes="checked view/svnrepository" />
            <label for="svn_selector">SVN</label>
          </legend>

          <table>
            <tbody>
              <tr>
                <th><label>Repository:</label></th>
                <td>
                  <div>
                    <input type="text" name="svnrepository" size="30"
                           tal:attributes="value view/svnrepository" />
                    <span class="fieldRequired">(Required)</span>
                  </div>
                  <div class="formHelp">
                    The <abbr>URL</abbr> (Internet address) of the
                    repository and branch to be imported, in
                    <code>svn://</code> or
                    <code>http</code>(<code>s</code>)<code>://</code>
                    format. This must be the correct upstream branch
                    for the <tal:x replace="context/displayname" /> series
                    of <tal:x replace="context/product/displayname" />.
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </fieldset>
      </fieldset>


      <fieldset>
        <legend>FTP Details</legend>
        <table>
          <tbody>
            <tr>
              <th><label>Root directory URL:</label></th>
              <td>
                <input name="releaseroot" size=40
                       tal:attributes="value context/releaseroot" />
              </td>
            </tr>
            <tr class="formHelp">
              <th>Example:</th>
              <td><code>ftp://www.mozilla.org/pub/firefox/1.1/</code></td>
            </tr>
            <tr class="formHelp">
              <th />
              <td>
                The directory containing releases that are part of this
                series.  Launchpad automatically scans this directory
                regularly to import new releases.
              </td>
            </tr>
            <tr>
              <th><label>Filename pattern:</label></th>
              <td>
                <input name="releasefileglob" size=40
                       tal:attributes="value context/releasefileglob" />
              </td>
            </tr>
            <tr class="formHelp">
               <th>Example:</th>
               <td><code>firefox-1.1.*.src.tgz</code></td>
            </tr>
            <tr class="formHelp">
              <th />
              <td>
                Launchpad uses this pattern to find new releases of
                <span tal:replace="context/product/displayname" />
                when they are uploaded to the root directory.
              </td>
            </tr>
          </tbody>
        </table>
      </fieldset>

      <script type="text/javascript">
        function updateWidgets() {
          var form = document.forms['mf'];
          state = (form.rcstype[0].checked == false);
          form.cvsroot.disabled =  state;
          form.cvsbranch.disabled =  state;
          form.cvsmodule.disabled =  state;
          form.svnrepository.disabled = ! state;
        }
      updateWidgets();
      </script>

      <div class="actions">
        <tal:x condition="nothing">
          DO NOT CHANGE THE VALUE OF THIS.
          It is used to verify that the correct form was posted.
        </tal:x>
        <input type="submit" name="edit_productseries_source"
               value="Update RCS Details" />
      </div>
    </form>
  </div>
</body>
</html>
</tal:layout>
