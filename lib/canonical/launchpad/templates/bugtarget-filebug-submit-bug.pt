<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template_2col/master"
  i18n:domain="launchpad">

<body>

<metal:heading fill-slot="pageheading">
  <h3 tal:condition="context/title|nothing"
      tal:content="context/title">Foo Series: main</h3>
  <h1>Report a new bug</h1>
</metal:heading>

<div metal:fill-slot="main">

  <div metal:use-macro="context/@@launchpad_form/form">

    <div metal:fill-slot="extra_info">

      <p tal:condition="view/found_possible_duplicates">
      <strong>Your bug may have already been reported.</strong>
      Please take a few moments to look through the bugs below
      to see if your bug has already been reported.
      </p>
      <p class="informational message"
         tal:condition="not: view/found_possible_duplicates">
        No similar bugs were found.
      </p>

      <tal:similar-bugs condition="view/similar_bugs">
        <table class="listing" id="similar-bugs" style="clear: both">
          <thead>
            <tr><th colspan="2">Summary</th></tr>
          </thead>
          <tbody>
            <tr tal:repeat="bug view/similar_bugs"
                tal:attributes="title bug/description/fmt:shorten/500"
                title="bug description goes here">
              <td tal:content="bug/id" class="amount" width="10%">1</td>
              <td>
                <a href="#"
                   tal:content="bug/title"
                   tal:attributes="href bug/fmt:url">
                   Firefox doesn't work
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </tal:similar-bugs>

      <tal:most-common-bugs condition="view/most_common_bugs">
        <h2 style="clear: both">Most Frequently Reported Bugs</h2>

        <table class="listing" id="most-common-bugs">
          <thead>
            <tr><th colspan="2">Summary</th></tr>
          </thead>
          <tbody>
            <tr tal:repeat="bug view/most_common_bugs"
                tal:attributes="title bug/description/fmt:shorten/500"
                title="bug description goes here">
              <td class="amount" tal:content="bug/id" width="10%">1</td>
              <td>
                <a href="#"
                   tal:content="bug/title"
                   tal:attributes="href bug/fmt:url">
                   Firefox doesn't work
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </tal:most-common-bugs>

    </div>

    <metal:widgets metal:fill-slot="widgets">

      <p tal:condition="view/found_possible_duplicates">
        If your bug hasn't been reported before, please describe your
        problem more in detail.
      </p>

    <table class="form">

      <tr tal:condition="view/widgets/packagename|nothing">
        <th colspan="2" style="text-align: left"><label
            tal:attributes="for view/widgets/packagename/name"
            >In what package did you find this bug?</label>
        </th>
      </tr>

      <tr tal:condition="view/widgets/packagename|nothing">
        <td style="padding-bottom: 1.5em" colspan="2" tal:attributes="class python:view.widget_errors.get('packagename') and 'error' or ''">
          <ul style="list-style: none"
              tal:define="select_packagename view/shouldSelectPackageName">
            <li>
              <input type="radio" name="packagename_option" value="none"
                     id="no-package"
                     tal:attributes="checked not:select_packagename"/>
              <label style="font-weight: normal" for="no-package">
                I don't know
              </label>
            </li>
            <li style="margin-top: 4px">
              <input type="radio" name="packagename_option" value="choose"
                     id="choose"
                     tal:attributes="checked select_packagename"/>
              <span tal:content="structure view/widgets/packagename" />
            </li>
          </ul>
          <div
            tal:condition="view/widget_errors/packagename|nothing"
            class="message"
            tal:content="view/widget_errors/packagename"
          >An error on package name.</div>
        </td>
      </tr>

      <metal:summary tal:define="widget nocall:view/widgets/title">
        <metal:row use-macro="context/@@launchpad_form/widget_row" />
      </metal:summary>

      <metal:description tal:define="widget nocall:view/widgets/comment">
        <metal:row use-macro="context/@@launchpad_form/widget_row" />
      </metal:description>

    </table>

  <!--div style="margin-top: 1em">
    <label tal:attributes="for view/widgets/comment/name">
      Further information, steps to reproduce, version information, etc.
    </label>
    <div tal:content="structure view/widgets/comment" />
  </div-->

  </metal:widgets>

  <div class="actions" metal:fill-slot="buttons">
    <input tal:replace="structure view/actions/field.actions.submit_bug/render" />
  </div>

</div>

</div>

</body>
</html>
