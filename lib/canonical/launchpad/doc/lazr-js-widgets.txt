LAZR JS Wrappers
================

The canonical.widgets.lazrjswidgets module contains a bunch of wrapper
for widgets defined in Lazr-JS.

InlineTextLineEditorWidget
--------------------------

We have a convenient wrapper for the inlineedit/editor JS widget in
InlineTextLineEditorWidget.

    >>> from canonical.launchpad.webapp.publisher import canonical_url
    >>> from canonical.widgets.lazrjswidgets import InlineTextLineEditorWidget
    >>> bug = factory.makeBug(title='My bug is > important')

The wrapper takes as arguments the object and the attribute of the
object that is being edited, as well as the URL to use for editing when
the user isn't logged in or when JS is turned off.

    >>> widget = InlineTextLineEditorWidget(
    ...     bug, 'title', canonical_url(bug.bugtasks[0], view_name='+edit'))

The widget is rendered by executing it, it prints out the attribute
content along a link to the edit view where this attribute can be
changed when JS is turned off.

    >>> print widget()
    <h1 id="..."><span class="yui-editable_text-text">My bug is &gt;
        important</span>
        <a href="http://bugs.launchpad.dev/.../+edit"
           class="yui-editable_text-trigger"
        ><img src="/@@/edit" alt="[edit]" title="Edit" /></a>
    </h1>

Note that there is no <script> tag to hook on the inline editor because AJAX
controls like this are only available to logged in user.

    >>> login('no-priv@canonical.com')
    >>> print widget()
    <h1 id="..."><span class="yui-editable_text-text">My bug is &gt;
        important</span>
        <a href="http://bugs.launchpad.dev/.../+edit"
           class="yui-editable_text-trigger"
        ><img src="/@@/edit" alt="[edit]" title="Edit" /></a>
    </h1>
    <script>
    ...
    </script>

The id and title attribute to use can be passed via parameters to the
constructor:

    >>> widget = InlineTextLineEditorWidget(
    ...     bug, 'title', canonical_url(bug.bugtasks[0], view_name='+edit'),
    ...     id="bug-title", title="Edit this summary")
    >>> print widget()
    <h1 id="bug-title">...
        ><img src="/@@/edit" alt="[edit]" title="Edit this summary" />...

