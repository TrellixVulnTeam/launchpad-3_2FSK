<metal:license-matrix define-macro="license_matrix">
  <tal:comment replace="nothing">
    This macro expects the widget variables defined:

    :licenses: A matrix of licenses.
    :license_info: A textarea for the license description.
  </tal:comment>
  
  <table class="form"
    tal:define="
      matrix_name licenses/context/__name__;
      matrix_error python:view.getWidgetError(matrix_name);
      matrix_error_class python:matrix_error and 'error' or None;
      textbox_name license_info/context/__name__;
      textbox_error python:view.getWidgetError(textbox_name);
      textbox_error_class python:textbox_error and 'error' or None;">
    <tr>
      <!-- Checkbox matrix -->
      <th style="text-align: left">
        <label tal:attributes="for matrix_name">
            This project consists of code licensed under:
        </label>
      </th>
    </tr>
    <tr>
      <td tal:attributes="class matrix_error_class">
        <div class="message" tal:condition="matrix_error"
            tal:content="structure matrix_error">
            Error message
        </div>
        <div style="color: black">
          <input tal:replace="structure licenses" />
          Launchpad.net is free to use for software projects 
          that comply with 
          <a href="http://www.ubuntu.com/community/ubuntustory/licensing">
          these licensing policies.</a>
        </div>
      </td>
    </tr>
    <tr> 
      <th style="text-align: left">
      <!-- Textarea -->
        <label tal:attributes="for textbox_name">
          Description of other licenses:
        </label>
      </th>
    </tr>
    <tr>
      <td tal:attributes="class textbox_error_class">
        <div class="message" tal:condition="textbox_error"
            tal:content="structure textbox_error">
          Error message
        </div>
        <input tal:replace="structure license_info" />
      </td>
    </tr>
  </table>
</metal:license-matrix>

