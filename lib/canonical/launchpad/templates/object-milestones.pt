<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main">

  <h1>Milestones</h1>

  <tal:milestones define="milestones context/all_milestones">
    <table tal:condition="milestones" class="listing">
      <thead>
        <th colspan="2">Milestone</th>
        <th>Date Targeted</th>
        <th>Series Target</th>
        <th>Summary</th>
      </thead>
      <tbody>
        <tr tal:attributes="id string:milestone-${milestone/name}"
            tal:repeat="milestone context/all_milestones">
          <td><img src="/@@/milestone" alt="" /></td>
          <td class="milestone">
            <strong tal:condition="milestone/visible">
              <a tal:content="milestone/name"
                 tal:attributes="href milestone/fmt:url"
                 title="Active">
                milestone name
              </a>
            </strong>
            <a tal:condition="not: milestone/visible"
              tal:content="milestone/name"
              tal:attributes="href milestone/fmt:url"
              title="Inactive">
                milestone name
            </a>
          </td>
          <td>
            <tal:date condition="milestone/dateexpected"
                      replace="milestone/dateexpected/fmt:date" />
            <tal:empty-date condition="not: milestone/dateexpected">
              <a tal:condition="milestone/required:launchpad.Edit"
                 tal:attributes="href milestone/fmt:url/+edit">
                 <img src="/@@/edit"/>
                 Set date
              </a>
              <tal:cannot-edit
                condition="not: milestone/required:launchpad.Edit">
                None
              </tal:cannot-edit>
            </tal:empty-date>
          </td>
          <td>
            <a tal:condition="milestone/series_target"
              tal:attributes="href milestone/series_target/fmt:url"
              tal:replace="milestone/series_target/displayname">Feisty</a>
          </td>
          <td>
            <span
              tal:replace="structure milestone/description/fmt:shorten/80"/>
            <a tal:condition="python: milestone.description and len(milestone.description) > 80"
               tal:attributes="href milestone/fmt:url">(See more)</a>
          </td>
        </tr>
      </tbody>
    </table>

    <tal:no-milestones condition="not: milestones">
      <p>There are no milestones associated with
        <span tal:replace="context/title" />
      </p>
    </tal:no-milestones>
  </tal:milestones>

</div>
</body>
</html>
