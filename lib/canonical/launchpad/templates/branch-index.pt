<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <div style="float: right">
        <img src="/@@/locked-large" title="Private"
             tal:condition="context/private" />
      </div>
      <h1>&#8220;<tal:branch replace="context/displayname" />&#8221; branch</h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
  <div tal:replace="structure context/@@+portlet-subscribers" />
  <div tal:replace="structure context/@@+portlet-specifications" />
</metal:leftportlets>

<div metal:fill-slot="main">

  <p tal:repeat="notice view/notices" tal:content="notice"
     class="informational message">
    notice goes here
  </p>

  <table tal:condition="context/url">
    <tal:comment condition="nothing">
      <!-- This is a mirror branch, display two URLs -->
    </tal:comment>
    <caption style="margin-top:1ex" class="discreet">
      These URLs are intended for use with the
      <a href="http://www.bazaar-vcs.org/">Bazaar</a> version control system.
    </caption>
    <tbody>
      <tr><th>Location:</th><td tal:content="context/url" /></tr>
      <tr><th>Mirror:</th><td tal:content="view/supermirror_url" /></tr>
    </tbody>
  </table>

  <table tal:condition="not:context/url">
    <tal:comment condition="nothing">
      <!-- This is a hosted or import branch, one URL -->
    </tal:comment>
    <caption style="margin-top:1ex" class="discreet">
      This URL is intended for use with the
      <a href="http://www.bazaar-vcs.org/">Bazaar</a> version control system.
    </caption>
    <tbody>
      <tr>
	<th>Hosted on Launchpad:</th>
	<td tal:content="view/supermirror_url" />
      </tr>
    </tbody>
  </table>

  <p tal:condition="context/summary" tal:content="context/summary">
    $Branch.summary goes here. This should be quite short, just a single
    paragraph of text really, giving the branch highlights.
  </p>

  <tal:hosted-branch condition="view/is_hosted_branch">
    <tal:comment condition="nothing">
      <!-- This is a hosted branch, display upload directions -->
    </tal:comment>
    <tal:not-logged-in condition="not:view/user">
      <tal:comment condition="nothing">
        <!-- The user is not logged in -->
      </tal:comment>
      <p id="upload-directions" tal:condition="not:context/owner/isTeam">
        Only
        <a tal:attributes="href context/owner/fmt:url"
           tal:content="context/owner/browsername">Person</a>
        can upload to this branch. If this is you,
        <a href="+login">log in</a> for directions.
      </p>
      <p id="upload-directions" tal:condition="context/owner/isTeam">
        Members of
        <a tal:attributes="href context/owner/fmt:url"
           tal:content="context/owner/browsername">Team</a>
        can upload to this branch. <a href="+login">Log in</a> for directions.
      </p>
    </tal:not-logged-in>

    <tal:logged-in condition="view/user">
      <tal:cannot-upload condition="not:view/user_can_upload">
        <tal:comment condition="nothing">
          <!-- The user is logged in but cannot upload to the branch -->
        </tal:comment>
        <p id="upload-directions" tal:condition="not:context/owner/isTeam">
          You cannot upload to this branch. Only
          <a tal:attributes="href context/owner/fmt:url"
             tal:content="context/owner/browsername">Person</a>
          can upload to this branch.
        </p>
        <p id="upload-directions" tal:condition="context/owner/isTeam">
          You cannot upload to this branch. Members of
          <a tal:attributes="href context/owner/fmt:url"
             tal:content="context/owner/browsername">Team</a>
          can upload to this branch.
          <a tal:attributes="href string:${context/owner/fmt:url}/+join">Join
            the team</a>.
        </p>
      </tal:cannot-upload>

      <tal:can-upload condition="view/user_can_upload">
        <tal:comment condition="nothing">
          <!-- The user is logged in and can upload to the branch -->
        </tal:comment>
        <p id="upload-directions">
          You can <b>upload</b> to this branch at:
          <span tal:content="view/upload_url">
            sftp://name12@bazaar.launchpad.net/~name12/gnome-terminal/pushed
          </span>
        </p>
        <tal:comment condition="nothing">
          <!-- Directions to set the SSH key -->
        </tal:comment>
        <p tal:condition="not:view/user/sshkeys" id="ssh-key-directions">
          To authenticate with the Launchpad branch upload service, you need
          to <a tal:attributes="href string:${view/user/fmt:url}/+editsshkeys">
            register a SSH key </a>.
        </p>
      </tal:can-upload>
    </tal:logged-in>
    <tal:comment condition="nothing">
      <!-- End of upload directions -->
    </tal:comment>
  </tal:hosted-branch>

  <tal:comment condition="nothing">
    <!-- XXX This style attribute is evil, but bold text makes the mirror error
    difficult to read. Checked with mpt about that.
    - David Allouche 2006-04-09 -->
  </tal:comment>
  <p tal:condition="view/mirror_of_ssh" id="mirror-of-ssh"
       class="warning message" style="font-weight: normal">
    Launchpad cannot mirror this branch because its URL uses sftp or bzr+ssh.
  </p>
  <p tal:condition="view/show_mirror_failure" id="mirror-failure"
       class="warning message" style="font-weight: normal">
    Launchpad could not mirror this branch
    <span
      tal:attributes="title context/last_mirror_attempt/fmt:datetime"
      tal:content="context/last_mirror_attempt/fmt:displaydate" />.
    <span tal:condition="context/mirror_status_message">
      The error was:
      <span tal:replace="view/mirror_status_message">Error 1</span>
    </span>
    <span tal:condition="not:context/mirror_status_message">
      No error message was recorded.
    </span>
  </p>

  <tal:whiteboard condition="context/whiteboard">
    <h2>Whiteboard</h2>
    <div id="branch-whiteboard-value"
      tal:content="structure context/whiteboard/fmt:text-to-html">
      Whiteboard text goes here.
    </div>
  </tal:whiteboard>

  <h2 style="clear: both;">Recent revisions</h2>

  <p tal:condition="not:context/revision_count">
    <tal:not-mirrored condition="not:context/last_mirrored">
      <tal:mirror condition="context/url">
        This branch has not been mirrored yet.
      </tal:mirror>
      <tal:no-mirror condition="not:context/url">
        This branch has not been published yet.
      </tal:no-mirror>
    </tal:not-mirrored>
    <tal:mirrored condition="context/last_mirrored">
      <tal:not-scanned condition="not:context/last_scanned">
        This branch has not been scanned yet.
      </tal:not-scanned>
      <tal:scanned condition="context/last_scanned">
        This branch is empty.
      </tal:scanned>
    </tal:mirrored>
  </p>

  <tal:history-available condition="context/revision_count">
  <ol>
    <li tal:repeat="rev_no context/latest_revisions"
        tal:attributes="value rev_no/sequence; id string:rev${rev_no/sequence}">
      <div>
        By
        <strong>
          <tal:not-anonymous condition="view/user">
            <span tal:replace="rev_no/revision/revision_author/name">
              John Doe &lt;john.doe@example.com&gt;
            </span>
          </tal:not-anonymous>
          <tal:anonymous condition="not:view/user">
            <span
               tal:replace="rev_no/revision/revision_author/name_without_email">
              John Doe
            </span>
            &lt;email address hidden&gt;
          </tal:anonymous>
        </strong>
        <span
            tal:attributes="title rev_no/revision/revision_date/fmt:datetime"
            tal:content="rev_no/revision/revision_date/fmt:displaydate"
            >2005-10-05 14:34:22 WST</span>
      </div>
      <p tal:replace="structure rev_no/revision/log_body/fmt:text-to-html">
        The revision commit message.
      </p>
    </li>
  </ol>
  </tal:history-available>

  <tal:related-bugs condition="context/related_bugs">
    <h2>Related Bugs</h2>
    <ul style="list-style: none">
      <span tal:repeat="bug context/related_bugs"
            tal:omit-tag="">
        <li tal:condition="bug/required:launchpad.View">
          <a href="#"
             tal:content="string:${bug/id}. ${bug/title}"
             tal:attributes="href bug/fmt:url">Foo is Broken</a>
        </li>
      </span>
    </ul>
  </tal:related-bugs>

  <h2>Nearby</h2>
  <ul style="list-style: none">
    <li tal:condition="context/product">
      <a tal:attributes="href string:${context/product/fmt:url}/+branches">
        Other <tal:product replace="context/product/displayname" /> branches
      </a>
    </li>
    <li>
      <tal:author condition="context/author">
        <a tal:attributes="href string:${context/author/fmt:url}/+authoredbranches">
          Other branches authored by <tal:person
          replace="context/author/displayname">Author</tal:person>
        </a>
      </tal:author>
      <tal:no-author condition="not:context/author">
        <a tal:attributes="href string:${context/owner/fmt:url}/+registeredbranches">
          Other branches registered (and not authored) by <tal:person
          replace="context/owner/displayname">Owner</tal:person>
        </a>
      </tal:no-author>
    </li>
  </ul>
</div><tal:comment condition="nothing"><!-- end main slot --></tal:comment>

<metal:block fill-slot="help">

  <p>Launchpad is integrated with the <a
    href="http://bazaar-vcs.org/">Bazaar</a> version control system. (<a
    href="http://bazaar-vcs.org/WhyUseBzr">Why use Bazaar?</a>).</p>

  <ul>
    <li>Mirror branches are primarily hosted somewhere else on the internet.
      You can register a mirror branch from the page of a person or of a
      project. Launchpad will create a mirror of this branch and pull changes
      every day from the URL provided in the branch details.</li>

    <li>Upload branches are primarily hosted on Launchpad. You can create an
      upload branch using <code>bzr push</code> with an URL on
      <code>sftp://bazaar.launchpad.net</code>. There is a latency of up to 10
      minutes between the time branch data is uploaded to Launchpad and the
      time when it is published.</li>
   </ul>

  <p>Only the registrant of a branch is allowed to edit the registry details.
    Upload branches can only be written to by the registrant. But the
    registrant can be a team. If you wish to allow other people to edit details
    or upload data, you can reassign a branch to a team.</p>

  <p>The URL of the branch on <code>bazaar.launchpad.net</code> is based on the
    short name of the registrant, project and branch. If you change any of
    those short names or assign the branch to a different project or person or
    team, the URL will change.</p>

  <p>Subscribing to a branch will make it appear in your personal branch
    listings.</p>

  <p>Once you have registered or uploaded a branch, it cannot be deleted. But
    you can set its status to &ldquo;Abandoned&rdquo;.</p>

  <p>A mirror branch cannot be converted to an upload branch, and conversely,
    you cannot convert an upload branch to a mirror branch. However you can
    rename a branch and create a new one in its place.<p>

  <p>There no browsable web content on <code>bazaar.launchpad.net<code>. This
    host only serves data for use with the Bazaar version control system.</p>

</metal:block><tal:comment condition="nothing"><!-- end help slot --></tal:comment>

</body>
</html>
<!-- 1-0 done -->
