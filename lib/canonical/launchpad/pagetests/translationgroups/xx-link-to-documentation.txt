Each translation team can provide a link to an external page that
documents the translation process for the team and provides style guides.
The link is displayed on each page where translations are entered.
Currently, the translation group responsible for the Spanish translations of
evolution do not have such a link.

    >>> anon_browser.open(
    ...     'http://translations.launchpad.dev/evolution/trunk/'
    ...     '+pots/evolution-2.2/es/+translate')
    >>> print first_tag_by_class(anon_browser.contents, 'style_guide_url')
    None

Carlos is the owner of the testing-translation-team group and can change
translators.

    >>> carlos_browser = setupBrowser(auth='Basic carlos@canonical.com:test')
    >>> carlos_browser.open(
    ...     'http://translations.launchpad.dev/'
    ...     '+groups/testing-translation-team/es/+admin')
    >>> print carlos_browser.title
    Administer Spanish translator for Just a testing team

This way he can also set the documentation URL.

    >>> carlos_browser.getControl('Translation guidelines').value = (
    ...     'http://www.ubuntu.com/')
    >>> carlos_browser.getControl('Change').click()
    >>> print carlos_browser.url
    http://translations.launchpad.dev/+groups/testing-translation-team

The link now appears in the table next to the name of the team.

    >>> info = first_tag_by_class(carlos_browser.contents, 'translator_info')
    >>> info_a = info.findAll('a')
    >>> print extract_text(info_a[0])
    testing Spanish team
    >>> print info_a[1]['href']
    http://www.ubuntu.com/

Back on the translations page, the link is now present, too.

    >>> anon_browser.open(
    ...     'http://translations.launchpad.dev/evolution/trunk/'
    ...     '+pots/evolution-2.2/es/+translate')
    >>> style_guide_url = first_tag_by_class(
    ...     anon_browser.contents, 'style-guide-url')
    >>> print extract_text(style_guide_url)
    testing Spanish team guidelines
    >>> print style_guide_url['href']
    http://www.ubuntu.com/

Carlos appoints Sample Person as a translator for Esperanto.

    >>> carlos_browser.open(
    ...     'http://translations.launchpad.dev/'
    ...     '+groups/testing-translation-team/+appoint')
    >>> carlos_browser.getControl('Language').value = ['eo']
    >>> carlos_browser.getControl('Translator').value = 'name12'
    >>> carlos_browser.getControl('Add').click()
    >>> print carlos_browser.url
    http://translations.launchpad.dev/+groups/testing-translation-team

Sample Person can not administer her ITranslator record but she can edit
the documentation url through the edit view.

    >>> test_browser = setupBrowser(auth='Basic test@canonical.com:test')
    >>> from zope.security.interfaces import Unauthorized
    >>> try:
    ...     test_browser.open(
    ...         'http://translations.launchpad.dev/'
    ...         '+groups/testing-translation-team/eo/+admin')
    ... except Unauthorized, e:
    ...     print e
    (...'launchpad.Admin')
    >>> test_browser.open(
    ...     'http://translations.launchpad.dev/'
    ...     '+groups/testing-translation-team/eo/+edit')
    >>> print test_browser.title
    Edit Esperanto translator for Just a testing team
    >>> test_browser.getControl('Translation guidelines').value = (
    ...     'http://www.launchpad.net/')
    >>> test_browser.getControl('Change').click()
    >>> print test_browser.url
    http://translations.launchpad.dev/~name12
    >>> translator_listing = find_tags_by_class(
    ...     test_browser.contents, 'listing')[1]
    >>> print extract_text(translator_listing)
    Translation group
    Language
    Translation guidelines
    Just a testing team
    Esperanto
    http://www.launchpad.net/


== Notification display ==

We are looking at how are translation instructions displayed on
Spanish Evolution translation page.

    >>> evolution_spanish_url = ('http://translations.launchpad.dev/'
    ...     'evolution/trunk/+pots/evolution-2.2/es/+translate')

    >>> # We've already confirmed setting URLs works: define methods
    >>> # to change them more easily.
    >>> def set_group_url(browser, url):
    ...     group_edit_url = ("http://translations.launchpad.dev/"
    ...         "+groups/testing-translation-team/+edit")
    ...     browser.open(group_edit_url)
    ...     browser.getControl('Translation instructions').value = url
    ...     browser.getControl('Change').click()

    >>> def set_team_url(browser, url):
    ...     team_edit_url = ("http://translations.launchpad.dev/"
    ...         "+groups/testing-translation-team/es/+edit")
    ...     browser.open(team_edit_url)
    ...     browser.getControl('Translation guidelines').value = url
    ...     browser.getControl('Change').click()

When no documentation URLs are set, no notification with the documentation
links is displayed.

    >>> set_group_url(carlos_browser, '')
    >>> set_team_url(carlos_browser, '')

    >>> browser.open(evolution_spanish_url)
    >>> notification = find_tags_by_class(
    ...     browser.contents, 'important-notice-container')
    >>> print notification
    []

Setting a group documentation will add the notification with the link
to it.

    >>> set_group_url(carlos_browser, u'https://help.launchpad.net/')
    >>> browser.open(evolution_spanish_url)
    >>> notification = find_tags_by_class(
    ...     browser.contents, 'important-notice-container')[0]
    >>> print extract_text(notification)
    Before translating, make sure to go through Just a testing team
    instructions.

    >>> links = notification.findAll('a')
    >>> links[0]['href']
    u'https://help.launchpad.net/'

Adding a Spanish team documentation adds a link to the notification.

    >>> set_team_url(carlos_browser, 'https://help.launchpad.net/Spanish')
    >>> browser.open(evolution_spanish_url)
    >>> notification = find_tags_by_class(
    ...     browser.contents, 'important-notice-container')[0]
    >>> print extract_text(notification)
    Before translating, make sure to go through Just a testing team
    instructions and Spanish guidelines.

    >>> links = notification.findAll('a')
    >>> links[0]['href']
    u'https://help.launchpad.net/'
    >>> links[1]['href']
    u'https://help.launchpad.net/Spanish'

When there is no group documentation, but only team documentation,
narrative is changed a bit to include the full team name as well.

    >>> set_group_url(carlos_browser, '')
    >>> browser.open(evolution_spanish_url)
    >>> notification = find_tags_by_class(
    ...     browser.contents, 'important-notice-container')[0]
    >>> print extract_text(notification)
    Before translating, make sure to go through testing Spanish team
    guidelines.

    >>> links = notification.findAll('a')
    >>> links[0]['href']
    u'https://help.launchpad.net/Spanish'
