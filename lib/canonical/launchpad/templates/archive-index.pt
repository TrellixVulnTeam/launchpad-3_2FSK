<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
  >
<body>
    <metal:block fill-slot="head_epilogue">
      <tal:devmode condition="devmode">
        <tal:archive_js define="lp_js string:${icingroot}/build">
          <script type="text/javascript"
                  tal:attributes="src string:${lp_js}/soyuz/lp_dynamic_dom_updater.js">
          </script>
          <script type="text/javascript"
                  tal:attributes="src string:${lp_js}/soyuz/update_archive_build_statuses.js">
          </script>
          <script type="text/javascript"
                  tal:attributes="src string:${lp_js}/soyuz/update_archive_repository_size.js">
          </script>

        </tal:archive_js>
      </tal:devmode>
      <script type="text/javascript">
          YUI().use('node', 'soyuz.update_archive_build_statuses', 'soyuz.update_archive_repository_size');

      </script>
    </metal:block>

    <div metal:fill-slot="main"
         tal:define="archive_active view/is_active;
                     archive_label view/archive_label">

      <tal:privacy replace="structure context/@@+portlet-privacy" />

      <h1 tal:content="CONTEXTS/fmt:pagetitle">PPA for user</h1>

      <div class="actions" style="float:right;">
        <tal:administer
          define="link context/menu:context/admin"
          condition="link/enabled"
          replace="structure link/render" />
        <tal:edit
          define="link context/menu:context/edit"
          condition="link/enabled"
          replace="structure link/render" />
        <tal:edit-dependencies
          define="link context/menu:context/edit_dependencies"
          condition="link/enabled"
          replace="structure link/render" />
      </div>

      <h2 style="margin-top: 0" tal:condition="not: context/is_copy">
        URL:
        <a tal:condition="archive_active"
           tal:attributes="href view/archive_url"
           tal:content="view/archive_url">url</a>
        <tal:no-link
           condition="not: archive_active"
           content="context/archive_url">url</tal:no-link>
      </h2>

      <tal:whiteboard condition="context/required:launchpad.Edit">
         <div id="whiteboard" class="informational"
              tal:condition="context/whiteboard">
           <p><tal:archive_label replace="archive_label" /> whiteboard:</p>
           <tal:archive-whiteboard
              replace="structure context/whiteboard/fmt:text-to-html" />
         </div>
      </tal:whiteboard>

      <div tal:define="archive context"
           tal:condition="archive_active"
           id="build-status-summary">
        <h2>
          <tal:archive_label replace="archive_label" /> build status
        </h2>

        <metal:build-status-summary
            use-macro="archive/@@+macros/build-status-summary" />
      </div>

      <div id="description">
         <tal:archive-description condition="context/description"
            replace="structure context/description/fmt:text-to-html" />

        <tal:package-copy-request-list tal:condition="context/is_copy">
          <metal:package-copy-request-list
              use-macro="context/@@+macros/package-copy-request-list" />
        </tal:package-copy-request-list>
      </div>

      <div tal:condition="archive_active">

        <h2>apt sources.list entries</h2>
        <tal:entries replace="structure view/sources_list_entries" />

      </div>

      <div id="signing-key"
           tal:define="signing_key context/signing_key"
	   tal:condition="signing_key">
        <p>This repository is signed with
          <a tal:attributes="href signing_key/keyserverURL">
            <code tal:content="signing_key/fingerprint">
              0123456789012345678901234567890123456789
            </code></a> OpenPGP key.
          <a href="https://help.launchpad.net/Packaging/PPA#Adding%20a%20PPA%20to%20your%20Ubuntu%20repositories"
          >Follow these instructions</a>
          for installing packages from this PPA.</p>
      </div> <!-- signing-key -->

      <div id="archive-dependencies" tal:condition="context/dependencies">

        <h3><tal:archive_label replace="archive_label" /> dependencies</h3>

        <ul>
           <li tal:repeat="dependency context/dependencies">
             <a tal:attributes="href dependency/dependency/fmt:url"
                tal:content="dependency/title" />
             (included <span
               tal:replace="dependency/date_created/fmt:displaydate" />)
           </li>
        </ul>

      </div> <!-- archive-dependencies -->

      <p tal:condition="not: archive_active">
        This <tal:archive_label replace="archive_label" /> does not contain
        any packages yet.
      </p>

      <tal:active_archive condition="archive_active">

      <div id="package_counters">
        <p class="discreet" style="line-height: 3em;">
           Package counters and estimated archive size temporarily
           unavailable.
        </p>
      </div>

      <div class="actions" style="clear:right;float:right;">
        <tal:builds
          define="link context/menu:context/builds"
          condition="link/enabled"
          replace="structure link/render" />
        <tal:copy
          define="link context/menu:context/copy"
          condition="link/enabled"
          replace="structure link/render" />
        <tal:delete
          define="link context/menu:context/delete"
          condition="link/enabled"
          replace="structure link/render" />
      </div>

      <metal:package-list
          use-macro="context/@@+macros/source-package-list" />

      </tal:active_archive>

    </div> <!--main -->

  </body>
</html>
