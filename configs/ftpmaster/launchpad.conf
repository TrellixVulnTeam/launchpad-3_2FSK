# identify the component configuration used to define the site:
site-definition site.zcml

# number of bytecode instructions to execute between checks for
# interruptions (SIGINTR, thread switches):
interrupt-check-interval 200

<server>
  type HTTP
  address 9030
</server>

# non-persistent in-memory storage
<zodb>
  <mappingstorage/>
</zodb>

<accesslog>
  <logfile>
    path /srv/launchpad.net/logs/launchpad-access.log
  </logfile>
</accesslog>

<eventlog>
  <logfile>
    path /srv/launchpad.net/logs/launchpad.log
  </logfile>
</eventlog>

<canonical default>
    dbname launchpad_prod
    dbhost jubany.ubuntu.com
    show_tracebacks false
    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        root_url https://upload.ubuntu.com/
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.net
        db_statement_timeout 8000
        <launchpad_session>
            dbuser session
            dbname session_prod
        </launchpad_session>
	<launchpad_errorreports>
            errordir /srv/launchpad.net/logs
            oops_prefix U
            copy_to_zlog false
        </launchpad_errorreports>
    </launchpad>

    <librarian>
        dbuser librarian
        upload_host mizuho.ubuntu.com
        upload_port 9090
        download_host mizuho.ubuntu.com
        download_port 8000
        download_url http://librarian.launchpad.net/
        buildd_download_url http://librarian.launchpad.net/
        <librarian_server>
            logfile /srv/launchpad.net/logs/librarian.log
            root /tmp/fatsam
            launch no
            spew no
        </librarian_server>
        <librarian_gc>
            dbuser librariangc
        </librarian_gc>
    </librarian>

    <malone>
        # The From address for Malone email interface errors
        bugmail_error_from_address noreply@bugs.staging.launchpad.net
    </malone>

    <shipit>
        # XXX: Even though this is empty, it must be kept so that the default
        # values are used. See https://launchpad.net/bugs/50033 for details.
        # Guilherme Salgado, 2006-06-16
    </shipit>

    <rosetta>
        <poimport>
            dbuser poimport
        </poimport>
        <poattach>
            dbuser poattach
        </poattach>
    </rosetta>

    <trebuchet>
        dbuser trebuchet
        port 4280
        <trebuchet_server>
            # Configuration used if we are running a trebuchet server.
            logfile /srv/launchpad.ubuntu.com/staging-logs/trebuchet.log
            root /srv/launchpad.ubuntu.com/staging/trebuchet
            # If true, a Trebuchet server will be launched by the startup
            # script
            launch no
            # Should Trebuchet twistd be run with --spew for debugging
            spew no
        </trebuchet_server>
    </trebuchet>

    <cveupdater>
        dbuser cve
    </cveupdater>

    <zopeless>
        send_email yes
        smtp_host localhost
        smtp_port 25
    </zopeless>

    <gpghandler>
        host keyserver.ubuntu.com 
        port 11371
    </gpghandler>

    <zeca>
        root /var/tmp/zeca
    </zeca>

    <gina>
        dbuser gina
        <gina_target warty>
            distro ubuntu
            distrorelease warty
            pocketrelease warty
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64
        </gina_target>
        <gina_target warty-updates>
            distro ubuntu
            distrorelease warty
            pocketrelease warty-updates
            pocket updates
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64
        </gina_target>
        <gina_target warty-security>
            distro ubuntu
            distrorelease warty
            pocketrelease warty-security
            pocket security
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64
        </gina_target>
        <gina_target hoary>
            distro ubuntu
            distrorelease hoary
            pocketrelease hoary
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc
        </gina_target>
        <gina_target hoary-updates>
            distro ubuntu
            distrorelease hoary
            pocketrelease hoary-updates
            pocket updates
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc
        </gina_target>
        <gina_target hoary-security>
            distro ubuntu
            distrorelease hoary
            pocketrelease hoary-security
            pocket security
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc
        </gina_target>
        <gina_target hoary-backports>
            distro ubuntu
            distrorelease hoary
            pocketrelease hoary-backports
            pocket backports
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc
        </gina_target>
        <gina_target breezy>
            distro ubuntu
            distrorelease breezy
            pocketrelease breezy
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target breezy-backports>
            distro ubuntu
            distrorelease breezy
            pocketrelease breezy-backports
            pocket backports
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target breezy-updates>
            distro ubuntu
            distrorelease breezy
            pocketrelease breezy-updates
            pocket updates
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target breezy-security>
            distro ubuntu
            distrorelease breezy
            pocketrelease breezy-security
            pocket security
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target dapper>
            distro ubuntu
            distrorelease dapper
            pocketrelease dapper
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target dapper-updates>
            distro ubuntu
            distrorelease dapper
            pocketrelease dapper-updates
            pocket updates
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
        <gina_target dapper-security>
            distro ubuntu
            distrorelease dapper
            pocketrelease dapper-security
            pocket security
            root /srv/ftp.root/ubuntu
            architectures i386,powerpc,amd64,ia64,sparc,hppa
        </gina_target>
    </gina>

    <buildsequencer>
        mailproblemsto launchpad-error-reports@lists.canonical.com
        # It makes no sense to allow the sequencer to start by default
        # on a developer machine because they're unlikely to have a 
        # build farm of their own. This does not prevent the daemon from
        # ever starting.
        launch no
        logfile /srv/launchpad.net/logs/sequencer.log
        <buildsequencer_job slave_scanner>
            command cronscripts/buildd-slave-scanner.py
            mindelay 10
        </buildsequencer_job>
        <buildsequencer_job queue_builder>
            command cronscripts/buildd-queue-builder.py
            mindelay 900
        </buildsequencer_job>
    </buildsequencer>

    <statistician>
        dbuser statistician
    </statistician>

    <tickettracker>
        dbuser tickettracker
    </tickettracker>

    <uploadqueue>
        dbuser queued
    </uploadqueue>

    <uploader>
        dbuser uploader
        default_recipient_name Launchpad Archiver
        # This is localhost to ensure security embargo stuff never goes
        # outside the box
        default_recipient_address lp_archive@localhost
        default_sender_name Ubuntu Installer
        default_sender_address archive@ubuntu.com
    </uploader>

    <builddmaster>
        dbuser fiera
        uploader scripts/process-upload.py -Mvv --context buildd
        root /srv/launchpad.net/builddmaster/
        socket_timeout 600
    </builddmaster>

    <supermirror>
        dbuser supermirror
    </supermirror>

</canonical>


# This is the config used by the test runner.
<canonical testrunner>
    dbname launchpad_ftest
    show_tracebacks true
    # chunkydiff may be turned off temporarily to help diagnose test
    # failures, but please don't commit this setting to rocketfuel.
    chunkydiff on

    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        root_url http://localhost:8086/
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.net
	<launchpad_errorreports>
            errordir /var/tmp/lperr.test
            oops_prefix T
            copy_to_zlog false
        </launchpad_errorreports>
        <launchpad_session>
            dbuser session
            dbname launchpad_ftest
        </launchpad_session>
    </launchpad>
    <librarian>
        dbuser librarian
        upload_host localhost
        upload_port 59090
        download_host localhost
        download_port 58000
        download_url http://localhost:58000/
        buildd_download_url http://localhost:58000/
        <librarian_server>
            launch no
            root /var/tmp/fatsam.test
        </librarian_server>
    </librarian>
    <zopeless>
        send_email false
    </zopeless>

    <supermirror>
        dbuser supermirror
    </supermirror>
</canonical>
