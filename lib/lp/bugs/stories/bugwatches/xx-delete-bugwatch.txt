= Delete a Bug Watch =

If a bug watch isn't linked to a bug task and no comments have been
imported for it, it's possible to delete from the bug watch edit page.

    >>> user_browser.open('http://launchpad.dev/bugs/1')
    >>> bug_watches = find_portlet(user_browser.contents, 'Remote bug watches')
    >>> for li in bug_watches('li'):
    ...     print li.findAll('a')[0].renderContents()
    mozilla.org #123543
    mozilla.org #2000
    mozilla.org #42
    debbugs #304014

    >>> user_browser.getLink(url='/+watch/3').click()
    >>> user_browser.title
    'Edit bug watch for bug 123543 in The Mozilla.org Bug Tracker on bug #1'
    >>> print find_portlet(
    ...     user_browser.contents, 'Bug watch links').span.renderContents()
    There are currently no links to this bug watch.
    >>> print find_portlet(
    ...     user_browser.contents, 'Imported bug comments'
    ...     ).span.renderContents()
    There are currently no comments linked to this bug watch.

    >>> user_browser.getControl('Delete Bug Watch').click()

    >>> for message in find_tags_by_class(user_browser.contents, 'message'):
    ...     print message.renderContents()
    The <a href="https://bugzilla.mozilla.org/...123543">mozilla.org #123543</a>
    bug watch has been deleted.

    >>> bug_watches = find_portlet(user_browser.contents, 'Remote bug watches')
    >>> for li in bug_watches('li'):
    ...     print li.findAll('a')[0].renderContents()
    mozilla.org #2000
    mozilla.org #42
    debbugs #304014

However, you can't delete a watch that is linked to a bug task.

    >>> user_browser.open('http://launchpad.dev/bugs/15/+watch/11')
    >>> print find_portlet(
    ...     user_browser.contents, 'Bug watch links').span.renderContents()
    There are currently no links to this bug watch.

    >>> user_browser.getControl('Delete Bug Watch').click()
    Traceback...
    LookupError: label 'Delete Bug Watch'
