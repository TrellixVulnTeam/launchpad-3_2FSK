<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="launchpad"
  metal:use-macro="view/macro:page/main_only"
>

<body>

<div metal:fill-slot="main">
  <h1>Translations related to <tal:name content="context/displayname" /></h1>

  <div class="top-portlet">
    <tal:active tal:condition="view/latest_activity">
      Last translation activity by
      <tal:name replace="context/displayname">Foo Bar</tal:name>
      was
      <tal:date replace="view/latest_activity/date/fmt:displaydate">
        on 2009-10-12</tal:date>.
    </tal:active>
    <tal:inactive tal:condition="not: view/latest_activity">
      No translation activities recorded for
      <tal:name replace="context/displayname">Foo Bar</tal:name>.
    </tal:inactive>
  </div>

  <tal:me condition="view/person_includes_me">
    <tal:reviewer condition="view/person_is_reviewer">
      <div id="translations-to-review-section" class="portlet">
          <span style="float:right">
            <a href="http://help.launchpad.net/Translations/Reviewing">
              Why is this important?
            </a>
          </span>
        <h2>Translations you need to review</h2>
        <metal:translations-to-review
          tal:replace="structure context/@@+translations-to-review-table" />
        <span style="float:right"
              tal:condition="python: view.num_projects_and_packages_to_review > 1">
          <a href="+translations-to-review" id="translations-to-review-link">
            See all
            <tal:num tal:replace="view/num_projects_and_packages_to_review">
              16
            </tal:num> unreviewed translations
          </a>
        </span>
      </div>
    </tal:reviewer>
  </tal:me>

  <tal:me condition="view/person_includes_me">
    <tal:translator condition="view/person_is_translator">
      <div id="translations-to-complete-section" class="portlet">
        <h2>Translations you can help complete</h2>
        <metal:translations-to-complete
          tal:replace="structure context/@@+translations-to-complete-table" />
      </div>
    </tal:translator>
  </tal:me>

  <tal:block tal:define="activities view/recent_activity">
    <tal:block condition="activities">
      <div class="portlet">
        <h2 id="translation-activities-header">
          <tal:name replace="context/displayname">Foo Bar</tal:name>'s activity
        </h2>
        <table class="summary">
          <tr tal:repeat="activity activities">
            <td tal:attributes="title activity/date/fmt:datetime"
                tal:content="activity/date/fmt:approximatedate">
              2009-08-15
            </td>
            <td>
              <a tal:content="activity/title"
                 tal:attributes="href activity/url">foo bar in package bla</a>
            </td>
          </tr>
        </table>
        <span style="float:right">
          <a href="+activity">See all</a>
        </span>
      </div>
    </tal:block>
  </tal:block>

  <div tal:condition="view/translation_groups" class="portlet">
    <h2>Translation Groups</h2>
    <span tal:replace="context/displayname">Mark Shuttleworth</span> is
    a member of the following translation groups:

      <table class="listing" id="translation-group-memberships">
        <thead>
          <tr>
            <th>Translation group</th>
            <th>Language</th>
            <th>Translation guidelines</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="translator view/translators">
            <td><a tal:attributes="href translator/translationgroup/fmt:url"
           tal:content="translator/translationgroup/title"></a></td>
           <td tal:content="translator/language/englishname">Esperanto</td>
           <td><a tal:condition="translator/style_guide_url"
                  tal:content="translator/style_guide_url"
                  tal:attributes="href translator/style_guide_url"
                >Documentation URL</a>
           <a tal:attributes="href string:${translator/translationgroup/fmt:url}/${translator/language/code}/+edit"
           ><img src="/@@/edit" /></a></td>
      </tr>
      </tbody>
    </table>
  </div>

</div>


</body>
</html>
