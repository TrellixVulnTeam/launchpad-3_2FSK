<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="view/macro:page/main_only">

  <body>

  <div metal:fill-slot="head_epilogue">
    <metal:translations-js
      use-macro="context/@@+translations-macros/translations-js" />
    <metal:languages-table-js
      use-macro="context/@@+translations-macros/languages-table-js" />
  </div>

    <div metal:fill-slot="main"
         tal:define="official_rosetta context/official_rosetta;
                     admin_user context/required:launchpad.TranslationsAdmin">
      <div class="translation-help-links">
        <a href="https://help.launchpad.net/Translations"
           id="link-to-translations-help"
           >Help for translations
        </a>
        <div></div><!-- to clear-up all floats -->
      </div>
      <div class="top-portlet notice">
        <tal:official_use replace="
            structure
            context/@@+portlet-not-using-launchpad"/>
        <div tal:condition="python:not view.has_translations and official_rosetta">
        There are no translations for this project.
        </div>
      </div>

      <tal:uses-translations
         condition="python:official_rosetta or admin_user">
        <tal:translatable define="target view/primary_translatable">

          <div class="yui-g">
            <div class="yui-u first">
              <div class="portlet">
                <h3>Translation details</h3>
                <p tal:condition="target" id="translation-recommendation">
                  Launchpad currently recommends translating
                  <tal:target replace="structure target/fmt:link"
                              >trunk</tal:target>.
                  <span tal:condition="context/required:launchpad.AnyPerson">
                    You can also
                    <a tal:attributes="href target/fmt:url/+export"
                       >download</a>
                    <tal:owner-or-admin condition="admin_user">
                      or
                      <a tal:attributes="
                          href target/fmt:url/+translations-upload"
                       >upload</a>
                    </tal:owner-or-admin>
                    translations for
                    <tal:target replace="structure target/name"
                                >trunk</tal:target>.
                  </span>
                </p>
                <p>To see all the translation files that are waiting to be
                  imported, please look at
                  <a tal:attributes="href context/fmt:url/+imports"
                     tal:content="string:${context/displayname} import queue">
                    import queue</a>.
                </p>
              </div>
              <div class="portlet">
                <h3>Permissions</h3>
                <p>
                  <tal:permissions replace="
                     structure
                     context/@@+portlet-translation-groups-and-permission"/>
                </p>
              </div>
            </div>
            <div class="yui-u">
              <div>
                <tal:registrant-or-admin
                   condition="admin_user">
                  <tal:has-obsolete-entries
                     condition="context/obsolete_translatable_series">
                    <div tal:replace="
                        structure
                        context/@@+portlet-obsolete-translatables" />
                  </tal:has-obsolete-entries>
                </tal:registrant-or-admin>
              </div>
              <div tal:replace="structure context/@@+portlet-translatables" />
            </div>
          </div>

          <div class="yui-b"
               tal:condition="target">
            <h2>Translation for
              <span tal:replace="target/displayname">main</span></h2>
            <div tal:replace="structure target/@@+languages" />
            <div style="height:1em;"></div>
            <div tal:replace="structure context/@@+rosetta-status-legend" />
          </div>
        </tal:translatable>
      </tal:uses-translations>
    </div>
  </body>
</html>
