<div class="builds_list" tal:condition="not: view/setupBuildList">

  <tal:batch define="batch view/complete_builds">

     <form name="build_records_state" action="" method="GET">
          <label for="build_state">Show builds which are:</label>

          <select id="build_state" name="build_state" size="1">
          <option tal:repeat="option view/available_states"
                  tal:attributes="selected option/selected;
                                  value option/value"
                  tal:content="option/name" />
          </select>

          <tal:searchname condition="view/searchName">
            <label for="build_text">with names containing:</label>

            <input id="build_text" title="Package Name" size="20"
                   type="text" name="build_text"
                   tal:attributes="value view/text"/>
          </tal:searchname>

          <input type="submit" value="Update" />
     </form>

     <tal:navigation
          tal:condition="batch"
          replace="structure view/batchnav/@@+navigation-links" />

  <table class="listing" tal:condition="batch">
    <tbody>
      <tal:batch repeat="complete_build batch">
        <tal:build define="build complete_build/build">

        <tr>
          <td class="left icon">
             <tal:icon replace="structure build/fmt:icon" />
          </td>
          <td>
            <a tal:attributes="href build/fmt:url">
              <span tal:replace="build/title">NAME</span>
            </a>
          </td>
        </tr>

        <tr class="secondary" tal:condition="build/dependencies">
          <td></td>
          <td>
            Missing Dependencies
            <tal:dependencies
              content="build/dependencies"
            />
          </td>
        </tr>

        <tal:built condition="build/was_built">
        <tr class="secondary">
          <td></td>
          <td>
            Built started:
            <tal:soyuz_record condition="build/buildduration">
               <tal:calc_buildstart
                    content="build/calculated_buildstart/fmt:datetime" />
            </tal:soyuz_record>
            <tal:gina_record condition="not: build/buildduration">
                <i>not available</i>
            </tal:gina_record>
            <tal:show_builder_info condition="view/showBuilderInfo">
              by
              <a
                tal:condition="build/builder"
                tal:content="build/builder/title"
                tal:attributes="href build/builder/fmt:url"
                title="Information about this build machine"
              />
             <tal:unknown_builder condition="not: build/builder">
                <i>not available</i>
             </tal:unknown_builder>
             </tal:show_builder_info>
          </td>
        <tr class="secondary">
          <td></td>
          <td>
            Build finished:
            <tal:built_time content="build/datebuilt/fmt:datetime" />
            (<tal:time
                  content="build/buildduration/fmt:approximateduration" />
            <tal:log condition="build/buildlog">
              &mdash;
              <a tal:attributes="href build/buildlog/url">see the log</a>)
            </tal:log>
          </td>
        </tr>
        </tal:built>

        <tal:not_built condition="not: build/was_built"
                       define="bq complete_build/buildqueue_record">
        <tr class="secondary">
          <td></td>
          <tal:buildqueue condition="bq">
            <td tal:condition="not: bq/builder">
              Pending
              (<span tal:replace="bq/lastscore"
             />)
            </td>
            <td tal:condition="bq/builder">
              Build started:
              <tal:built_start content="bq/buildstart/fmt:datetime" />
              by
              <a tal:content="bq/builder/title"
                 tal:attributes="href bq/builder/fmt:url"/>
            </td>
          </tal:buildqueue>
          <tal:no_buildqueue condition="not: bq">
            <td>Build not initialized yet.</td>
          </tal:no_buildqueue>
        </tr>
        </tal:not_built>
      </tal:build>
      </tal:batch>
    </tbody>
  </table>

      <div tal:condition="not: batch">
        No <span tal:replace="view/state/title" /> builds for
        <span tal:replace="context/title" />.
      </div>

      <tal:navigation
           tal:condition="batch"
           replace="structure view/batchnav/@@+navigation-links" />

  </tal:batch>
</div>
