= Changing bug assignment =

A bug is unassigned by choosing the "Assigned to" -> "Nobody" option.

    >>> admin_browser.open("http://launchpad.dev/firefox/+bug/1")

Bug 1 is currently assigned to someone.

    >>> assignee_control = admin_browser.getControl(
    ...     name="firefox.assignee.option", index=0)
    >>> assignee_control.value == ["firefox.assignee.assigned_to"]
    True

But we can change it to be assigned to nobody.

    >>> assignee_control.value = ["firefox.assignee.assign_to_nobody"]

    >>> admin_browser.getControl("Save Changes", index=0).click()

    >>> admin_browser.getControl(name="firefox.assignee.option", index=0).value
    ['firefox.assignee.assign_to_nobody']


== Bug assignment to non-contributors ==

When attempting to assign a bug to a user who isn't an established bug
contributor (they have no bugs currently assigned to them) the user is
warned immediately after the assingment, so that they can change their
choice if it was mistaken.

    >>> admin_browser.open("http://launchpad.dev/firefox/+bug/1")
    >>> assignee_control = admin_browser.getControl(
    ...     name="firefox.assignee.option", index=0)
    >>> assignee_control.value = ["firefox.assignee.assign_to"]
    >>> assign_to_control = admin_browser.getControl(
    ...     name="firefox.assignee", index=0)
    >>> assign_to_control.value = "cprov"
    >>> admin_browser.getControl("Save Changes", index=0).click()
    >>> print extract_text(
    ...     first_tag_by_class(admin_browser.contents, 'warning message'))
    Celso Providelo
    did not previously have any assigned bugs in
    Mozilla Firefox.
    If this bug was assigned by mistake,
    you may change the assignment.

If the new assignee does have bugs assigned, but not in the relevant pillar,
the user will be warned too.

    >>> admin_browser.open("http://bugs.launchpad.dev/jokosher/+bug/11")
    >>> assignee_control = admin_browser.getControl(
    ...     name="jokosher.assignee.option", index=0)
    >>> assignee_control.value = ["jokosher.assignee.assign_to"]
    >>> assign_to_control = admin_browser.getControl(
    ...     name="jokosher.assignee", index=0)
    >>> assign_to_control.value = "cprov"
    >>> admin_browser.getControl("Save Changes", index=0).click()
    >>> print extract_text(
    ...     first_tag_by_class(admin_browser.contents, 'warning message'))
    Celso Providelo
    did not previously have any assigned bugs in
    Jokosher Audio Editor.
    If this bug was assigned by mistake,
    you may change the assignment.

When assigning a bug to oneself, though, the warning message is suppreseed.

    >>> user_browser.open("http://bugs.launchpad.dev/jokosher/+bug/11")
    >>> assignee_control = user_browser.getControl(
    ...     name="jokosher.assignee.option", index=0)
    >>> assignee_control.value = ["jokosher.assignee.assign_to"]
    >>> assign_to_control = user_browser.getControl(
    ...     name="jokosher.assignee", index=0)
    >>> assign_to_control.value = "no-priv"
    >>> user_browser.getControl("Save Changes", index=0).click()
    >>> print user_browser.url
    http://bugs.launchpad.dev/jokosher/+bug/11
    >>> print first_tag_by_class(
    ...     user_browser.contents, 'warning message')
    None
