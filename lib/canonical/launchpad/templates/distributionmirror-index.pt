<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/distribution/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:rightportlets>

<metal:heading fill-slot="pageheading">
  <h1>
    <tal:distro replace="context/distribution/displayname">Ubuntu
    Linux</tal:distro>
    mirror "<tal:mirror replace="context/name">foobar</tal:mirror>"
  </h1>
</metal:heading>

<div metal:fill-slot="main">

    <div class="highlighted" style="font-size: 80%;"
         tal:condition="context/description">
      <p tal:replace="structure context/description/fmt:text-to-html">
          Distribution Mirror Description
      </p>
    </div>

    <h2>Mirror URLs</h2>

    <ul class="webref">
      <li tal:condition="context/http_base_url" >
        Web: <a tal:content="context/http_base_url"
                 tal:attributes="href context/http_base_url">http://url/</a>
      </li>
      <li tal:condition="context/ftp_base_url" >
        FTP: <a tal:content="context/ftp_base_url"
                tal:attributes="href context/ftp_base_url">ftp://url/</a>
      </li>
      <li tal:condition="context/rsync_base_url" >
        Rsync: <a tal:content="context/rsync_base_url"
                  tal:attributes="href context/rsync_base_url">
                  rsync://url/</a>
      </li>
    </ul>

    <tal:last-probe define="probe context/last_probe_record">
      <h2>Last probe</h2>

      <tal:no-last-probe condition="not: probe">
        <p tal:condition="context/isOfficial">
          This mirror has never been verified.
        </p>

        <p tal:condition="not: context/isOfficial">
          This mirror can't be verified because it's not one of the official
          mirrors for this distribution.
        </p>
      </tal:no-last-probe>

      <tal:has-last-probe condition="probe">
        <p>This mirror was last probed in 
          <span tal:replace="probe/date_created/fmt:date" />.

          <tal:is-owner condition="context/required:launchpad.Edit">
            You can see the 
            <a tal:attributes="href probe/log_file/url">log file</a> of that
            probe, in case the statuses are not what you expect.
          </tal:is-owner>
        </p>
      </tal:has-last-probe>
    </tal:last-probe>

    <tal:has-last-probe condition="context/last_probe_record"
                        define="mirror context">
      <metal:mirror-content
        use-macro="context/@@+distributionmirror-macros/mirror-content" />
    </tal:has-last-probe>

</div>

</body>
</html>

