<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main">

  <h1>Members' location</h1>
<div style="height:420px;">
  <div tal:condition="not: view/mapped_participants">
    None of the current participants in
    <tal:teamname replace="context/browsername" /> have a recorded
    location.
  </div>

  <tal:some_mapped condition="view/mapped_participants">
    <div id="team_map_div"
       style="width: 75%; height: 250px; border: 1px; float: left;
       margin: 0 14px 0 0;">
    </div>
    <tal:map replace="structure view/map_html" />

  </tal:some_mapped>

  <div tal:condition="view/mapped_participants">
    <strong>Members' local time:</strong><br />
    <tal:time_set repeat="time view/times">
      <tal:times replace="time" /><br />
    </tal:time_set>
  </div>
</div>
  <tal:unmapped condition="view/unmapped_participants">
    <div style="margin: 4px;">
      <h2><strong>Complete the map!</strong></h2>
      Do you know the current location for these team members? Set their
      Locations!
    </div>

    <table class="listing" style="width: 75%;">
      <tr tal:repeat="person view/unmapped_participants">
        <td>
          <tal:person replace="structure person/fmt:link" />
        </td>
        <td>
          <tal:email replace="person/preferredemail/email|nothing" />
        </td>
        <td width="100">
          <!-- XXX: Do we have a css class for not making this link blue or
          are we going to inline it here? -->
          <a tal:attributes="
            href string:${person/fmt:url}/+editlocation?for_team=${context/name}"
            ><img src="/@@/edit" title="Set this person's location" />
          Set location</a>
        </td>
      </tr>
    </table>
  </tal:unmapped>

</div>

</body>
</html>
