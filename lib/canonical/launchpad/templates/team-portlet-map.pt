<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">

<div class="portlet" id="portlet-map">

  <tal:can_view condition="context/required:launchpad.View"
                define="link context/menu:overview/map">
    <div
      tal:define="unmapped_count view/unmapped_participants_count"
      tal:condition="unmapped_count">
      <strong><tal:count replace="unmapped_count" /> member(s)</strong>
      have not  set their location. <a tal:attributes="href link/target">Do
      it for them!</a>
    </div>
    <tal:map condition="view/mapped_participants">
      <div id="team_map_div" class="small-map"
        style="height: 200px; border: 1px; margin-top: 4px;"></div>
      <tal:mapscript replace="structure view/map_portlet_html" />
      <div id="team_map_actions">
        <a
          tal:condition="link/enabled"
          tal:replace="structure link/render">Show map and time zones</a>
        <tal:more_mapped_participants>
        (to see <tal:count replace="view/mapped_participants_count" />
        mapped members) &nbsp;
        </tal:more_mapped_participants>
      </div>
    </tal:map>

    <a tal:condition="not: view/mapped_participants"
       tal:attributes="href link/target"
      ><img src="/+icing/portlet-map-unknown.png" /></a>
  </tal:can_view>

</div>
</tal:root>
