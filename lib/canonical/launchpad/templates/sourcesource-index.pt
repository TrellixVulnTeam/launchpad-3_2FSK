<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="rosetta">

<head>
    <title metal:fill-slot="title">Upstream Source Import</title>
    <!-- Plone style sheet -->
    <style type="text/css" media="screen">@import url(plone.css);</style>
    <!-- Launchpad style sheet -->
    <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<div metal:fill-slot="main">

    <tal:dummy condition="view/edit" />
   
    <h1>Upstream Source Import</h1>

    <div class="documentDescription">
    You can edit the details of the upstream revision control below, as long
    as we aren't yet actively syncronising upstream into The Bazaar.
    </div>

    <form method="post">
 
    <fieldset>

      <legend>Revision Control Details</legend>

      <fieldset>

        <legend>CVS Repository</legend>

        <div class="field">
          <label>CVS Root</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="cvsroot" size="30"
                 tal:attributes="value context/cvsroot" />
        </div>
        
        <div class="field">
          <label>CVS Module</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="cvsmodule" size="30"
                 tal:attributes="value context/cvsmodule" />
        </div>

        <div class="field">
          <label>CVS Tar File URL</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="cvstarfileurl" size="30"
                 tal:attributes="value context/cvstarfileurl" />
        </div>

        <div class="field">
          <label>CVS Branch</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="cvsbranch" size="30"
                 tal:attributes="value context/cvsbranch" />
        </div>

      </fieldset>

      <fieldset>

        <legend>SVN Repository</legend>
        
        <div class="field">
          <label>SVN Repository</label>
          <span class="fieldRequired" title="Required">(Required)</span>

          <div class="formHelp">
            Address for the SVN repository, in svn:// or
            http(s):// format.
          </div>

          <input type="text" name="svnrepository" size="30"
                 tal:attributes="value context/svnrepository" />
        </div>

      </fieldset>

      <div class="visualClear"></div>

      <fieldset>
        <legend>Arch Branch to Sync Into</legend>
        
        <div class="field">
          <label>New Arch Archive</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="newarchive" size="30"
                 tal:attributes="value context/newarchive" />
        </div>
        
        <div class="field">
          <label>New Arch Category</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="newbranchcategory" size="30"
                 tal:attributes="value context/newbranchcategory" />
        </div>

        <div class="field">
          <label>New Arch Branch</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="newbranchbranch" size="30"
                 tal:attributes="value context/newbranchbranch" />
        </div>

        <div class="field">
          <label>New Arch Version</label>
          <span class="fieldRequired" title="Required">(Required)</span>
          <input type="text" name="newbranchversion" size="30"
                 tal:attributes="value context/newbranchversion" />
        </div>

    </fieldset>

    <fieldset>

        <legend>FTP Repository of Releases</legend>
        <div class="field">
          <label>FTP Root</label>
          <input type="text" name="releaseroot" size="30"
                 tal:attributes="value context/releaseroot" />
        </div>

        <div class="field">
          <label>FTP Glob</label>
          <input type="text" name="releasefileglob" size="30"
                 tal:attributes="value context/releasefileglob" />
        </div>

    </fieldset>

    <fieldset>

      <legend>Product and Project Status</legend>

      <div tal:condition="context/product/project" tal:omit-tag>
        <p><b>Project: <span tal:replace="context/product/project/title">Project
        Title</span></b></p>
        <p tal:condition="python: not (context.product.project.reviewed and
        context.product.project.active)" class="portalMessage">This project is
        NOT YET APPROVED.</p>
        <p><span tal:replace="context/product/project/summary">product
        summary</span></p>
      </div>

      <p><b>Product: <span tal:replace="context/product/title">Product
      Title</span></b></p>
      <div tal:condition="python: not (context.product.reviewed and
        context.product.active)" class="portalMessage">This product is
        NOT YET APPROVED.</div>
        <p><span tal:replace="context/product/summary">product
        summary</span></p>

        <div tal:condition="context/namesReviewed">
        
          <div class="field">
            <label>Enabled</label>
            <div class="formHelp">Is this source certified for syncronization?
            </div>
              <input type="checkbox" name="syncCertified"
              tal:attributes="checked context/syncCertified" />
          </div>

          <div class="field">
            
                <label>Source Syncing Enabled</label>
                <div class="formHelp">Is this upstream source being syncronised
                to Arch automatically?</div>
                <input type="checkbox" name="autoSyncEnabled"
                       tal:attributes="checked context/autoSyncEnabled" />
          </div>

      </div>

    </fieldset>

    <div class="formControls">

    <input class="context" type="submit"
           name="Update"
           value="Update Upstream Source" />
    </div>

  </form>

</div>

</body>
</html>
