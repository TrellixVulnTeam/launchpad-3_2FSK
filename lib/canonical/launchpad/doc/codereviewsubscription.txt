= Code review subscriptions =

When code is proposed to be merged, people can subscribe to that proces,
which means that they will receive copies of all the discussion.

The ICodeReviewSubscription class represents this subscription.


== Creating CodeReviewSubscriptions ==

CodeReviewSubscriptions are created from their BranchMergeProposals:

    >>> login('test@canonical.com')
    >>> from canonical.launchpad.testing import LaunchpadObjectFactory
    >>> factory = LaunchpadObjectFactory()
    >>> merge_proposal = factory.makeProposalToMerge()
    >>> person = factory.makePerson()
    >>> subscription = merge_proposal.createSubscription(person)

If only one person is specified, they are considered both the subscriber
and the registrant.

    >>> subscription.person == person
    True
    >>> subscription.registrant == person
    True

However, a separate registrant can also be supplied

    >>> registrant = factory.makePerson()
    >>> subscription = merge_proposal.createSubscription(person, registrant)
    >>> subscription.person == person
    True
    >>> subscription.registrant == registrant
    True

== Interfaces ==

The CodeReviewSubscription must implement the ICodeReviewSubscription
interface.

    >>> from canonical.launchpad.webapp.testing import verifyObject
    >>> from canonical.launchpad.interfaces import ICodeReviewSubscription
    >>> verifyObject(ICodeReviewSubscription, subscription)
    True
