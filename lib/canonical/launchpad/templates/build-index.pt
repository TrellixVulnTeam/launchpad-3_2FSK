<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Build details</h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
<div tal:replace="structure context/@@+portlet-binaries"
     tal:condition="context/binarypackages"/>
</metal:rightportlets>

<div metal:fill-slot="main">

      <table>
        <tbody>

          <tr>
            <th>Changes file:</th>
            <td tal:condition="context/changesfile">
              <a tal:attributes="href context/changesfile/http_url"
                 tal:content="context/changesfile/filename">CHANGESFILE</a>
            </td>
            <td tal:condition="not:context/changesfile">
              <i>not available</i>
            </td>
          </tr>

          <tr>
            <th>Archive:</th>
            <td tal:condition="not: context/is_trusted">
              <a tal:attributes="href context/archive/fmt:url">
               <span tal:replace="context/archive/owner/displayname"/> PPA
              </a>
            </td>
            <td tal:condition="context/is_trusted">
               <i><span tal:replace="context/distribution/name"/> archive</i>
            </td>
          </tr>

          <tr>
            <th>Component:</th>
            <td tal:content="context/current_component/name"/>
          </tr>

          <tr>
            <th>Status:</th>
            <td>
              <span tal:replace="context/buildstate/title" />
            </td>
          </tr>

          <tr tal:condition="context/dependencies">
            <th>Missing Dependencies:</th>
            <td tal:content="context/dependencies" />
          </tr>

          <tr>
            <th>Queued:</th>
            <td
              tal:attributes="title context/datecreated/fmt:datetime"
              tal:content="context/datecreated/fmt:approximatedate" />
          </tr>

          <tal:not_built condition="not: context/was_built">
            <tal:buildqueue condition="context/buildqueue_record"
                            define="bq context/buildqueue_record">
              <tal:bq_not_started condition="not: bq/builder">
                <tr>
                  <th>Build score:</th>
                  <td><span tal:replace="bq/lastscore"/></td>
                </tr>
              </tal:bq_not_started>
              <tal:bq_started condition="bq/buildstart">
                <tr>
                  <th>Started:</th>
                  <td
                    tal:attributes="title bq/buildstart/fmt:datetime"
                    tal:content="bq/buildstart/fmt:approximatedate" />
                </tr>
                <tr>
                  <th>Builder:</th>
                  <td> <a tal:content="bq/builder/title"
                          tal:attributes="href bq/builder/fmt:url"/></td>
                </tr>
              </tal:bq_started>
            </tal:buildqueue>

          </tal:not_built>

            <tr>
              <th>Started:</th>
              <td tal:condition="context/buildduration">
                <span
                  tal:attributes="
                    title context/calculated_buildstart/fmt:datetime"
                  tal:content="
                    context/calculated_buildstart/fmt:approximatedate" />
              </td>
              <td tal:condition="not: context/buildduration">
                 <i>not available</i>
              </td>
            </tr>

            <tr>
              <th>Finished:</th>
              <td tal:condition="context/datebuilt">
                <span
                  tal:attributes="title context/datebuilt/fmt:datetime"
                  tal:content="context/datebuilt/fmt:approximatedate"/>
                (took <span tal:replace="
                       context/buildduration/fmt:approximateduration"/>)
              </td>
              <td tal:condition="not: context/datebuilt">
                 <i>not available</i>
              </td>
            </tr>

            <tr>
              <th>Builder:</th>
              <td tal:condition="context/builder">
                <a tal:content="context/builder/title"
                   tal:attributes="href context/builder/fmt:url"/>
              </td>
              <td tal:condition="not: context/builder">
                 <i>not available</i>
              </td>
            </tr>
            <tr>
              <th>Build log:</th>
              <td tal:condition="context/buildlog">
                <a tal:attributes="href context/buildlog/http_url"
                   tal:content="context/buildlog/filename">BUILDLOG</a>
              </td>
              <td tal:condition="not: context/buildlog">
                <i>not available</i>
              </td>
            </tr>

        </tbody>
      </table>

    </div>
  </body>
</html>

