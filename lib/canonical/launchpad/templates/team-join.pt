<tal:do-this-first tal:content="view/processForm" />
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<div metal:fill-slot="main">

  <tal:block tal:condition="view/userCanRequestToJoin">
    <h1>Joining <span tal:replace="context/browsername" /></h1>

    <p>Are you sure you want to join this team?</p>
    <p>
      (Subscription policy:
      <span tal:replace="context/subscriptionpolicy/title">Open Team</span>)
    </p>

    <p class="informational message" tal:condition="view/userHasMembershipEntry" 
       tal:content="view/membershipStatusDesc" />
    <form class="actions" name="join" action="" method="POST">
        <input type="submit" name="goback" value="Cancel" />
        <input type="submit" name="join" value="Join" />
    </form>
  </tal:block>

  <tal:block tal:condition="not: view/userCanRequestToJoin">
    <p tal:condition="view/joinAllowed" class="error message">
      <span tal:replace="view/membershipStatusDesc" />
      You can't join this team.
    </p>

    <p tal:condition="not: view/joinAllowed" class="error message">
      <span tal:replace="context/browsername" /> is a restricted team.
      Only a team administrator can add new members.
    </p>

    <form name="join" action="" method="POST">
    <table width="100%">
      <tr><td>
        <input type="submit" name="goback" value="Back to team" />
      </td></tr>
    </table>
    </form>
  </tal:block>

</div> 

</body>
</html>

