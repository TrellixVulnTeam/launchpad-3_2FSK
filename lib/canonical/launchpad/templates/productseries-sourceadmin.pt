<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="rosetta">

<head>
  <title metal:fill-slot="title">Add Source Import</title>
  <!-- Plone style sheet -->
  <style type="text/css" media="screen">@import url(plone.css);</style>
  <!-- Launchpad style sheet -->
  <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<div metal:fill-slot="main">

  <!-- try to process a previous form submission -->
  <tal:dummy condition="view/adminSource" omit-tag="" />

  <h1>Upstream Source Import</h1>

  <p class="documentDescription">Please fill in the form below to register
  the branch in upstream's revision control system that represents
  development for this Product Series.</p>
  
  <p>We will attempt to import that code and publish it as a Bazaar branch,
  which allows the Ubuntu distro team to share code with upstream very
  efficiently, and also allows for distributed development of the upstream
  code.</p>

  <div tal:repeat="errmsg view/errormsgs" tal:omit-tag>
  <p class="portalMessage" tal:content="errmsg" />
  </div>

  <form method="post">
  
  <fieldset>

  <legend>Source Import Details</legend>

  <fieldset>
  
  <legend>CVS Repository</legend>

  <div class="field">
    <label>CVS root</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="cvsroot" size="30"
       tal:attributes="value view/cvsroot" />
  </div>
  
  <div class="field">
    <label>CVS module</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="cvsmodule" size="30"
       tal:attributes="value view/cvsmodule" />
  </div>

  <div class="field">
    <label>CVS branch name</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="cvsbranch" size="30"
       tal:attributes="value view/cvsbranch" />
  </div>

  </fieldset>

  <fieldset>

  <legend>SVN Repository</legend>
  <div class="field">
    <label>SVN repository</label>
    <span class="fieldRequired" title="Required">(Required)</span>
      <div class="formHelp">
      Address for the SVN repository, either in svn:// or http(s):// form.
      </div>
    <input type="text" name="svnrepository" size="30"
       tal:attributes="value view/svnrepository" />
  </div>

  </fieldset>

  <!--
  <fieldset>
  <legend>Arch source</legend>
  <p class="discreet">
  If you fill out this, the CVS/SVN/Arch stuff above isn't required.
  This will be governed by JS in the later versions.
  </p>
  
  <div class="field">
    <label>GPG Key ID</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="archsourcegpgkeyid" size="30"
       value="" />
  </div>

  <div class="field">
    <label>Arch Archive Name</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="archsourcename" size="30"
       value="" />
  </div>

  <div class="field">
    <label>URL</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="archsourceurl" size="30"
       value="" />
  </div>

  </fieldset>
  -->
  
  <fieldset>

  <legend>Import and Sync Details</legend>

  <div class="field">
    <label>Import from...</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <br />
    <span tal:replace="structure view/rcs_selector">RCS Selector</span>
    <div class="formHelp">
      Which revision control system details to use for the import.
    </div>
  </div>
  
  <div class="field">
    <label>Arch archive</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="targetarcharchive" size="30"
       tal:attributes="value view/targetarcharchive" />
    <div class="formHelp">
      The recommended value would be <span
      tal:replace="view/default_targetarcharchive" />
    </div>
  </div>

  <div class="field">
    <label>Arch category</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="targetarchcategory" size="30"
       tal:attributes="value view/targetarchcategory" />
    <div class="formHelp">
      The recommended value would be <span
      tal:replace="view/default_targetarchcategory" />
    </div>
  </div>

  <div class="field">
    <label>Arch branch</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="targetarchbranch" size="30"
       tal:attributes="value view/targetarchbranch" />
    <div class="formHelp">
      The recommended value would be <span
      tal:replace="view/default_targetarchbranch" />
    </div>
  </div>

  <div class="field">
    <label>Arch version</label>
    <span class="fieldRequired" title="Required">(Required)</span>
    <input type="text" name="targetarchversion" size="30"
       tal:attributes="value view/targetarchversion" />
    <div class="formHelp">
      The recommended value would be <span
      tal:replace="view/default_targetarchversion" />
    </div>
  </div>

  </fieldset>

  <fieldset>

    <legend>Product and Project Status</legend>

    <div tal:condition="context/product/project" tal:omit-tag>
      <p><b>Project: <span tal:replace="context/product/project/title">Project
      Title</span></b></p>
      <p tal:condition="python: not (context.product.project.reviewed and
         context.product.project.active)"
         class="portalMessage">This project is not yet approved.</p>

      <p tal:content="context/product/project/summary">product
      summary</p>
    </div>

    <p><b>Product: <span tal:replace="context/product/title">Product
    Title</span></b></p>
    <div tal:condition="python: not (context.product.reviewed and
      context.product.active)" class="portalMessage">This product is
      not yet approved.</div>
      <p><span tal:replace="context/product/summary">product
      summary</span></p>

      <div tal:condition="view/namesReviewed">
      
        <div class="field">
          <label>Enabled</label>
          <div class="formHelp">Is this source certified for syncronization?
          </div>
            <input type="checkbox" name="syncCertified"
            tal:attributes="checked context/syncCertified" />
        </div>

        <div class="field">
          
              <label>Source Syncing Enabled</label>
              <div class="formHelp">Is this upstream source being syncronised
              to Arch automatically?</div>
              <input type="checkbox" name="autoSyncEnabled"
                     tal:attributes="checked context/autoSyncEnabled" />
        </div>

    </div>

  </fieldset>

  <div class="formControls">

  <!--NB. DO NOT CHANGE THE VALUE OF THIS
    it is used to verify that the correct form was posted.
    -->
  <input class="context" type="submit"
     name="Update RCS Details"
     value="Update RCS Details" />

  </div>

  </form>

</div>

</body>
</html>
