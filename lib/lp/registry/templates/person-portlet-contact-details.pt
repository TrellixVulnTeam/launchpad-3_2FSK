<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">

<div class="portlet" id="contact-details"
     tal:define="overview_menu context/menu:overview">

  <h2>User information</h2>

  <div class="two-column-list">
    <dl>
      <dt>Email:</dt>
      <dd
        tal:attributes="title view/visible_email_address_description">
        <tal:not_logged_in
          condition="view/email_address_visibility/is_login_required">
          <a href="+login">Log in</a> for email information.
        </tal:not_logged_in>

        <tal:no_preferredemail
          condition="view/email_address_visibility/are_none_available">
          <tal:comment replace="nothing">
          The user is not valid; this portlet is not used.
          </tal:comment>
        </tal:no_preferredemail>

        <tal:cant-view-hidden-emails
          condition="view/email_address_visibility/are_hidden">
          No public address provided.
        </tal:cant-view-hidden-emails>

        <tal:emails
          repeat="email view/visible_email_addresses">
          <span style="white-space: nowrap">
            <img src="/@@/private" alt=""
              tal:condition="view/email_address_visibility/are_allowed"/>
            <img src="/@@/mail" alt=""
              tal:condition="view/email_address_visibility/are_public"/>
            <tal:email replace="email">foo2@bar.com</tal:email>
            <br tal:omit-tag="repeat/email/end" />
          </span>
        </tal:emails>
      </dd>
    </dl>

    <dl tal:condition="context/time_zone">
      <dt>Time zone:</dt>
      <dd tal:replace="context/time_zone">UTC</dd>
    </dl>
  </div>

  <div class="two-column-list">
    <dl tal:condition="not: context/wiki_names/is_empty">
      <dt>Wiki:</dt>
      <dd>
        <span tal:repeat="wiki context/wiki_names">
          <a tal:content="wiki/url"
             tal:attributes="href wiki/url"
           >WikiName</a><tal:block condition="not: repeat/wiki/end">,
           </tal:block>
        </span>
      </dd>
    </dl>
    <dl tal:repeat="ircnick context/ircnicknames">
      <dt>IRC:</dt>
      <dd><code style="font-size: 120%"
                tal:content="ircnick/nickname"/>
          on network <code style="font-size: 120%"
                           tal:content="ircnick/network" />
      </dd>
    </dl>

    <dl tal:condition="context/jabberids">
      <dt>Jabber:</dt>
      <dd>
        <tal:block repeat="jabberid context/jabberids">
          <span tal:replace="jabberid/jabberid/fmt:obfuscate-email"
            /><span tal:condition="not: repeat/jabberid/end">,</span>
        </tal:block>
      </dd>
    </dl>

    <dl tal:condition="context/gpgkeys">
      <dt>OpenPGP keys:</dt>
      <dd>
        <tal:keys repeat="key context/gpgkeys">
          <a tal:attributes="href key/keyserverURL"
             tal:omit-tag="not: request/lp:person">
            <tal:keyid replace="key/keyid"
              /></a><span tal:condition="not: repeat/key/end">,</span>
        </tal:keys>
      </dd>
    </dl>

    <dl id="sshkeys">
      <dt>SSH Keys:</dt>
      <dd tal:define="sshkeys context/sshkeys">
        <tal:no_keys condition="not: sshkeys">
          <tal:is_user condition="view/viewing_own_page">
            <a tal:replace="structure overview_menu/editsshkeys/fmt:icon-link" />
          </tal:is_user>
          <tal:other_user condition="not: view/viewing_own_page">
            No keys registered
          </tal:other_user>
        </tal:no_keys>

        <tal:has_keys condition="sshkeys">
          <tal:keys repeat="sshkey sshkeys">
            <a href="+sshkeys"><tal:key replace="sshkey/comment" /></a>
            <tal:first condition="repeat/sshkey/start">
              <a tal:replace="structure overview_menu/editsshkeys/fmt:icon" />
            </tal:first>
            <br />
          </tal:keys>
        </tal:has_keys>
      </dd>
    </dl>

    <dl id="languages">
      <dt>Languages:</dt>
      <dd>
        <tal:languages content="view/languages">
          English
        </tal:languages>
        <a tal:replace="structure overview_menu/editlanguages/fmt:icon" />
      </dd>
    </dl>

    <dl id="karma">
      <dt>Karma:</dt>
      <dd><a id="karma-total"
             tal:attributes="href overview_menu/karma/url"
             tal:content="context/karma">342</a>
      </dd>
    </dl>
  </div>

  <dl tal:condition="view/viewing_own_page" id="openid-info">
    <dt>OpenID login:</dt>
    <dd>
      <img src="/@@/private" alt="" />
      <tal:openid-login content="view/openid_identity_url" />
      <a target="help" href="/+help/openid.html"
         >(What&rsquo;s&nbsp;this?)</a>
    </dd>
  </dl>
</div>

</tal:root>
