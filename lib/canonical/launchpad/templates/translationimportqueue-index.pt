<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Translation files waiting to be imported</h1>
    </metal:heading>

<div metal:fill-slot="main">

  <tal:block condition="view/has_things_to_import">
  <div class="documentDescription">
    These are all the translation resources that are waiting to be imported
    into Rosetta. <tal:loggedin condition="not:request/lp:person">
    <a href="+login">Log in</a> if you want to remove items from this
    list.</tal:loggedin>
  </div>

  <form name="entries_to_import" action="" method="POST">

    <table class="sortable listing" id="translation-import-queue" width="100%">
      <thead>
        <tr>
          <th></th>
          <th>Origin</th>
          <th>Path</th>
          <th>Uploader</th>
          <th>Uploaded on</th>
          <th>Published</th>
          <th>Import into</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="entry view/iterReadyToImport">
          <td>
            <a tal:condition="entry/sourcepackage"
               tal:content="entry/sourcepackage/title"
               tal:attributes="href string:${entry/sourcepackage/fmt:url}"
               >evolution in Ubuntu Hoary</a>
            <a tal:condition="entry/productseries"
               tal:content="entry/productseries/title"
               tal:attributes="href string:${entry/productseries/fmt:url}"
               >Evolution Series: MAIN</a>
          </td>
          <td>
            <span tal:content="entry/path">po/foo.pot</span>
          </td>
          <td>
            <input type="checkbox"
                   tal:condition="entry/required:launchpad.Edit"
                   tal:attributes="name string:entry-${entry/id}" />
          </td>
          <td>
            <a tal:content="entry/importer/browsername"
               tal:attributes="href string:${entry/importer/fmt:url}"
               >Mark Shuttleworth</a>
          </td>
          <td tal:content="entry/dateimported/fmt:datetime">
            date
          </td>
          <td>
            <span tal:content="entry/is_published">True</span>
          </td>
          <td>
            <a tal:content="entry/import_into/title"
               tal:attributes="href string:${entry/import_into/fmt:url}"
               >Foo</a>
          </td>
          <td>
            [<a tal:attributes="href string:${entry/content/url}">Download</a>]
          </td>
          <td>
            <tal:block condition="entry/required:launchpad.Admin">
              [<a tal:attributes="href string:${entry/fmt:url}">Edit</a>]
            </tal:block>
          </td>
        </tr>
      </tbody>
    </table>
    <input tal:condition="request/lp:person"
           type="submit" name="remove_import" value="Remove" />
    <input tal:condition="context/required:launchpad.Admin"
           type="submit" name="block_import" value="Block" />
    <br />
  </form>
  </tal:block>

  <tal:block condition="view/has_pending_reviews">
  <div class="documentDescription">
    These are the translation resources that need to be reviewed by a Rosetta
    Expert before they are imported into Rosetta.
    <tal:loggedin condition="not:request/lp:person">To remove resources from
    this list, <a href="+login">log in</a> first.</tal:loggedin>
  </div>

  <form name="entries_to_review" action="" method="POST">

    <table class="sortable listing" id="translation-import-queue-review" width="100%">
      <thead>
        <tr>
          <th></th>
          <th>Origin</th>
          <th>Path</th>
          <th>Uploader</th>
          <th>Imported on</th>
          <th>Published</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="entry view/iterPendingReview">
          <td>
            <input type="checkbox"
                   tal:condition="entry/required:launchpad.Edit"
                   tal:attributes="name string:entry-${entry/id}" />
          </td>
          <td>
            <a tal:condition="entry/sourcepackage"
               tal:content="entry/sourcepackage/title"
               tal:attributes="href string:${entry/sourcepackage/fmt:url}"
               >evolution in Ubuntu Hoary</a>
            <a tal:condition="entry/productseries"
               tal:content="entry/productseries/title"
               tal:attributes="href string:${entry/productseries/fmt:url}"
               >Evolution Series: MAIN</a>
          </td>
          <td>
            <span tal:content="entry/path">po/foo.pot</span>
          </td>
          <td>
            <a tal:content="entry/importer/browsername"
               tal:attributes="href string:${entry/importer/fmt:url}"
               >Mark Shuttleworth</a>
          </td>
          <td tal:content="entry/dateimported/fmt:datetime">
            date
          </td>
          <td>
            <span tal:content="entry/is_published">True</span>
          </td>
          <td>
            [<a tal:attributes="href string:${entry/content/url}">Download</a>]
          </td>
          <td>
            <tal:block condition="entry/required:launchpad.Admin">
              [<a tal:attributes="href string:${entry/fmt:url}">Edit</a>]
            </tal:block>
          </td>
        </tr>
      </tbody>
    </table>
    <input tal:condition="request/lp:person"
           type="submit" name="remove_review" value="Remove" />
    <input tal:condition="context/required:launchpad.Admin"
           type="submit" name="block_review" value="Block" />
    <br />
  </form>
  </tal:block>

  <tal:block condition="not: view/has_things_to_import">
    <tal:block condition="not: view/has_pending_reviews">
      <div class="documentDescription">
        There are no files waiting to be imported into Rosetta.
      </div>
    </tal:block>
  </tal:block>
</div>

</body>
</html>
