Templates view for DistroSeries
===============================

The +templates view for DistroSeries gives an overview of the translation
templates in this series and provides easy access to the various subpages of
each template.


Getting there
-------------

To get to the listing of all templates, one needs to use the link
from the distribution series translations page.

    >>> user_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary')
    >>> user_browser.getLink('full list of templates').click()
    >>> print user_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+templates


The templates table
-------------------

Full template listing for a distribution series is reached by following
a link from the distribution series translations page.

    >>> anon_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary')
    >>> anon_browser.getLink('full list of templates').click()

Full listing of templates shows source package name, template name and
the date of last update for this distribution series.

    >>> table = find_tag_by_id(anon_browser.contents, 'templates_table')
    >>> print extract_text(table)
    Source package Template name      Last update
    evolution      evolution-2.2      2005-05-06
    evolution      man                2006-08-14
    mozilla        pkgconf-mozilla    2005-05-06
    pmount         man                2006-08-14
    pmount         pmount             2005-05-06


Logged-in users see a link to all the active translation templates
on a distribution series translation page.
    >>> user_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary')
    >>> user_browser.getLink('full list of templates').click()

Regular users only see the option to download translations for each of
the active templates.

    >>> table = find_tag_by_id(user_browser.contents, 'templates_table')
    >>> print extract_text(table)
    Source package Template name     Last update  Actions
    evolution      evolution-2.2     2005-05-06   Download
    ...
    mozilla        pkgconf-mozilla   2005-05-06   Download
    ...

Administrator can see all editing options.

    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary')
    >>> admin_browser.getLink('full list of templates').click()

The page shows a table of all templates and links to their subpages.

    >>> table = find_tag_by_id(admin_browser.contents, 'templates_table')
    >>> print extract_text(table)
    Source package Template name                Last update  Actions
    evolution      disabled-template (inactive) 2007-01-05   Edit Upload Download Administer
    evolution      evolution-2.2                2005-05-06   Edit Upload Download Administer
    evolution      man                          2006-08-14   Edit Upload Download Administer
    mozilla        pkgconf-mozilla              2005-05-06   Edit Upload Download Administer
    pmount         man                          2006-08-14   Edit Upload Download Administer
    pmount         pmount                       2005-05-06   Edit Upload Download Administer

Ubuntu Translations Coordinator can administer all templates, including
those that are currently disabled.

New user is made an owner of an Ubuntu translation group, thus being
considered a translations administrator for Ubuntu.

    >>> from zope.component import getUtility
    >>> from canonical.launchpad.ftests import login, logout
    >>> from canonical.launchpad.interfaces import (
    ...     IDistributionSet, IPersonSet, ILaunchpadCelebrities)
    >>> login('foo.bar@canonical.com')
    >>> a_person = factory.makePerson(email='utc-member@example.com',
    ...     name='utc-member', password='test', displayname='Some Guy')
    >>> utc_member = factory.makeTranslator('ro', person=a_person)
    >>> utc_team = factory.makeTeam(owner=a_person)
    >>> utg = factory.makeTranslationGroup(owner=utc_team,
    ...                                 name="Ubuntu Translation Group")
    >>> ubuntu = getUtility(ILaunchpadCelebrities).ubuntu
    >>> ubuntu.translationgroup = utg
    >>> # Log out so we can go back to using test browsers.
    >>> logout()

Visiting the Ubuntu Hoary templates page, translation administrators
will see "Edit" and "Administer" links for all templates.

Trying to edit/administer enabled templates brings them to the
appropriate page.

    >>> utc_browser = setupBrowser(auth='Basic utc-member@example.com:test')
    >>> utc_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary/+templates')
    >>> utc_browser.getLink(url='ubuntu/hoary/+source/evolution/+pots/evolution-2.2/+edit').click()
    >>> print utc_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/+edit

    >>> utc_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary/+templates')
    >>> utc_browser.getLink(url='/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/+admin').click()
    >>> print utc_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/+admin

Trying to edit/administer disabled templates brings them to the
appropriate page.

    >>> utc_browser = setupBrowser(auth='Basic utc-member@example.com:test')
    >>> utc_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary/+templates')
    >>> utc_browser.getLink(url='ubuntu/hoary/+source/evolution/+pots/disabled-template/+edit').click()
    >>> print utc_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+source/evolution/+pots/disabled-template/+edit

    >>> utc_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary/+templates')
    >>> utc_browser.getLink(url='/ubuntu/hoary/+source/evolution/+pots/disabled-template/+admin').click()
    >>> print utc_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+source/evolution/+pots/disabled-template/+admin


Links to the templates
----------------------

Clicking on a template name will take the user to that template's overview
page.

    >>> admin_browser.getLink('pmount').click()
    >>> print admin_browser.url
    http://translations.launchpad.dev/ubuntu/hoary/+source/pmount/+pots/pmount

Clicking on 'Edit' will take the user to the page to edit the template
details. Likewise for the other links for each template.

    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/ubuntu/hoary/+templates')
    >>> admin_browser.getLink('Edit').click()
    >>> print admin_browser.url
    http://translations.../evolution/+pots/disabled-template/+edit

