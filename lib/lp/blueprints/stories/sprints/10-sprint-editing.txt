We should be able to edit the details on a sprint but the menus are only
available to those who have permissions to edit that sprint.

  >>> anon_browser.open('http://launchpad.dev/sprints/ubz')
  >>> anon_browser.title
  'Ubuntu Below Zero (sprint or meeting)'

  >>> anon_browser.getLink('Change details')
  Traceback (most recent call last):
  ...
  LinkNotFoundError

We will log in as Sample Person and edit the ubz sprint.

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')

  >>> browser.open('http://launchpad.dev/sprints/ubz')
  >>> browser.title
  'Ubuntu Below Zero (sprint or meeting)'

  >>> address = 'Holiday Inn Select, Downtown Montreal, Canada'
  >>> address in browser.contents
  False
  >>> browser.getLink('Change details').click()
  >>> browser.url
  'http://launchpad.dev/sprints/ubz/+edit'

The sprint start and end times are expressed to the nearest minute, and
not the second:

  >>> start_control = browser.getControl('Starting Date and Time')
  >>> start_control.value
  '2005-10-07 19:30'
  >>> end_control = browser.getControl('Finishing Date and Time')
  >>> end_control.value
  '2005-11-16 19:11'

If we alter the date to an ending date that precedes the starting date we
should receive a nice error message.

  >>> start_control.value = '2006-01-10 23:30'
  >>> end_control.value = '2005-02-12 00:11'
  >>> browser.getControl('Change').click()

  >>> for tag in find_tags_by_class(browser.contents, 'message'):
  ...     print tag.renderContents()
  There is 1 error.
  This event can't start after it ends

We fix the dates and change the address, we expect to be redirected to the
sprint home page.

  >>> browser.getControl('Timezone').value = ['America/Montreal']
  >>> browser.getControl(
  ...     'Starting Date and Time').value = '2006-01-10 08:30'
  >>> browser.getControl(
  ...     'Finishing Date and Time').value = '2006-02-12 17:00'
  >>> browser.getControl('Meeting Address').value = address
  >>> browser.getControl('Change').click()

  >>> browser.url
  'http://launchpad.dev/sprints/ubz'


The address of the sprint is now visible in the sprint details portlet.

  >>> details_portlet = find_portlet(browser.contents, 'Meeting details')
  >>> address in details_portlet.renderContents()
  True

  >>> print details_portlet
  <...
  ...Starts:...
  2006-01-10 08:30 EST...
  ...Ends:...
  2006-02-12 17:00 EST...
  ...


If we just change the time zone on the edit form, the start and finish
dates will be changed too, since they follow local time:

  >>> browser.open('http://launchpad.dev/sprints/ubz/+edit')
  >>> browser.getControl('Timezone').value = ['Australia/Darwin']
  >>> browser.getControl('Change').click()
  >>> print browser.url
  http://launchpad.dev/sprints/ubz

  >>> print find_portlet(browser.contents, 'Meeting details')
  <...
  ...Starts:...
  2006-01-10 08:30 CST...
  ...Ends:...
  2006-02-12 17:00 CST...
  ...

