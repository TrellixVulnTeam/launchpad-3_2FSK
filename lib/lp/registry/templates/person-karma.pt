<!-- Copyright 2009 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
<body>

<metal:leftportlets fill-slot="portlets_one">
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<div metal:fill-slot="main"
  tal:define="latestkarma context/latestKarma">

  <h1>Launchpad karma</h1>

  <p>
    This is a summary of the Launchpad karma earned by
    <span tal:replace="context/displayname" />, organized by activity
    type.
  </p>

  <p id="no-karma" tal:condition="not: view/has_karma">
    <tal:expired condition="view/has_expired_karma">
        <tal:name replace="context/displayname" />'s karma has expired.
    </tal:expired>
    <tal:never condition="not: view/has_expired_karma">
        No karma has yet been assigned to
       <tal:name replace="context/displayname" />.
        Karma is updated daily.
    </tal:never>
  </p>

  <table class="listing sortable" id="karmapoints"
    tal:condition="context/karma_category_caches">
    <thead>
      <tr>
        <th>Category</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody>
      <tr tal:repeat="cache context/karma_category_caches">
        <td tal:content="cache/category/title">Bug Management</td>
        <td tal:content="cache/karmavalue">10</td>
      </tr>
    </tbody>
  </table>
  <table>
    <tr>
      <td><b>Total:</b></td>
      <td tal:content="context/karma">34</td>
    </tr>
  </table>

  <tal:latest_events condition="latestkarma">

    <h2>Latest actions</h2>

    <table class="listing sortable" id="karmaactions">
      <thead>
        <tr>
          <th>Action</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="karma latestkarma">
          <td tal:content="karma/action/title">Bug Filed</td>
          <td>
            <span class="sortkey"
              tal:content="karma/datecreated/fmt:datetime">2005-10-06</span>
            <span
              tal:attributes="title karma/datecreated/fmt:datetime"
              tal:content="karma/datecreated/fmt:approximatedate" />
          </td>
        </tr>
      </tbody>
    </table>

  </tal:latest_events>

</div>

</body>
</html>
