<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="launchpad"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
>

<body>

<h1>Translations related to <tal:name content="context/displayname" /></h1>

<div metal:fill-slot="main">

  <tal:me condition="view/person_includes_me">
    <p tal:condition="view/requires_preferred_languages" id="no-languages">
      You have not selected your preferred languages.  Please
      <a href="/+editmylanguages" id="set-languages">set them now</a>.
    </p>
    <tal:reviewer condition="view/person_is_reviewer">
      <div id="translations-to-review-section" style="max-width:800px">
          <span style="float:right">
            <a href="http://help.launchpad.net/Translations/Reviewing">
              Why is this important?
            </a>
          </span>
        <h2>Translations you need to review</h2>
        <metal:translations-to-review
          tal:replace="structure context/@@+translations-to-review-table" />
        <span style="float:right"
              tal:condition="python: view.num_projects_and_packages_to_review > 1">
          <a href="+translations-to-review" id="translations-to-review-link">
            See all
            <tal:num tal:replace="view/num_projects_and_packages_to_review">
              16
            </tal:num> unreviewed translations
          </a>
        </span>
      </div>
    </tal:reviewer>

    <tal:translator condition="view/person_is_translator">
      <div id="translations-to-complete-section" style="max-width:800px">
        <h2>Translations you can help complete</h2>
        <metal:translations-to-complete
          tal:replace="structure context/@@+translations-to-complete-table" />
      </div>
    </tal:translator>
  </tal:me>


  <h2 id="translation-history-header">Applications and packages translated</h2>

  <tal:block define="history view/batchnav/currentBatch">

    <tal:block condition="history">

      <div class="lesser" id="top-navigation">
        <tal:navigation content="structure view/batchnav/@@+navigation-links-upper" />
      </div>

      <table class="listing" style="max-width:800px">
        <thead>
          <tr>
            <th>Translation file</th>
            <th>Untranslated</th>
            <th>Need review</th>
            <th>Latest translation</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="record history">
            <tal:block define="translationmessage record/latest_message">
            <td><a tal:content="record/pofile/title"
                   tal:attributes="href string:${record/pofile/fmt:url}/+filter?${view/person_filter_querystring}">foo bar in package bla</a>
            </td>
            <td><a tal:content="record/pofile/untranslatedCount"
                   tal:attributes="href string:${record/pofile/fmt:url}/+translate?show=untranslated"
                   class="untranslated-count"
                   >17</a>
            </td>
            <td><a tal:content="record/pofile/unreviewedCount"
                   tal:attributes="href string:${record/pofile/fmt:url}/+translate?show=new_suggestions"
                   class="unreviewed-count"
                   >17</a>
            </td>
            <td style="padding-left: 2em;">
              <em
                tal:attributes="title record/date_last_touched/fmt:datetime"
                tal:content="record/date_last_touched/fmt:approximatedate"
                style="margin-left: -2em;" />
              <div tal:content="translationmessage/potmsgset/singular_text" />
              <div
                tal:condition="python:not(view.should_display_message(translationmessage))">
                <strong>For privacy reasons this translation is not visible to
                 anonymous visitors.  To see it,
                <a href="+login">log in</a> first.</strong></div>
              <div
                tal:condition="python:view.should_display_message(translationmessage)">
                <tal:block
                  tal:condition="translationmessage/msgstr0"
                  tal:content="translationmessage/msgstr0/translation" />
              </div>
            </td>
            </tal:block>
          </tr>
        </tbody>
      </table>

      <div class="lesser">
        <tal:navigation content="structure view/batchnav/@@+navigation-links-lower" />
      </div>

    </tal:block>

    <tal:block condition="not: history">
      <p><i>No translations recorded from
      <span tal:replace="context/displayname">Foo Bar</span>.</i></p>
    </tal:block>
  </tal:block>

  <tal:block condition="view/translation_groups">

    <h2>Translation Groups</h2>

    <span tal:replace="context/displayname">Mark Shuttleworth</span> is
    a member of the following translation groups:

    <table class="listing"
           id="translation-group-memberships"
           style="max-width:800px">
      <thead>
        <tr>
          <th>Translation group</th>
          <th>Language</th>
          <th>Translation guidelines</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="translator view/translators">
          <td>
            <a tal:replace="structure translator/translationgroup/fmt:link">
              Launchpad Translators
            </a>
          </td>
          <td tal:content="translator/language/englishname">Esperanto</td>
          <td><a tal:condition="translator/style_guide_url"
                 tal:content="translator/style_guide_url"
                 tal:attributes="href translator/style_guide_url"
              >Documentation URL</a>
            <a class="edit sprite"
               tal:attributes="href string:${translator/translationgroup/fmt:url}/${translator/language/code}/+edit"
            ><span class="invisible-link">edit</span></a></td>
        </tr>
      </tbody>
    </table>

  </tal:block>

</div>
</body>
</html>
