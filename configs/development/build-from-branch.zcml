<!-- Copyright 2010 Canonical Ltd.  This software is licensed under the
     GNU Affero General Public License version 3 (see the file LICENSE).
-->

<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:i18n="http://namespaces.zope.org/i18n"
    xmlns:xmlrpc="http://namespaces.zope.org/xmlrpc"
    i18n_domain="launchpad">
    <browser:navigation
        module="lp.code.browser.sourcepackagerecipe"
        classes="SourcePackageRecipeNavigation" />
    <facet facet="branches">

        <browser:defaultView
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            name="+index"
            layer="canonical.launchpad.layers.CodeLayer"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeView"
            name="+index"
            template="../../lib/lp/code/templates/sourcepackagerecipe-index.pt"
            permission="launchpad.View"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeRequestBuildsView"
            name="+request-builds"
            template="../../lib/lp/code/templates/sourcepackagerecipe-request-builds.pt"
            permission="launchpad.View"/>
    </facet>
    <facet facet="branches">
        <browser:defaultView
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            name="+index"
            layer="canonical.launchpad.layers.CodeLayer"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipebuild.ISourcePackageRecipeBuild"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeBuildView"
            name="+index"
            template="../../lib/lp/code/templates/sourcepackagerecipebuild-index.pt"
            permission="launchpad.View"/>
        <browser:menus
            classes="
                SourcePackageRecipeNavigationMenu
                SourcePackageRecipeContextMenu"
            module="lp.code.browser.sourcepackagerecipe"/>

        <browser:page
            for="lp.code.interfaces.branch.IBranch"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeAddView"
            permission="zope.Public"
            facet="branches"
            name="+new-recipe"
            template="../../lib/lp/app/templates/generic-edit.pt"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeEditView"
            permission="zope.Public"
            facet="branches"
            name="+edit"
            template="../../lib/lp/app/templates/generic-edit.pt"/>
        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeDeleteView"
            permission="zope.Public"
            facet="branches"
            name="+delete"
            template="../../lib/lp/app/templates/generic-edit.pt"/>


        <browser:page
            for="lp.code.interfaces.branch.IBranch"
            class="lp.code.browser.sourcepackagerecipelisting.BranchRecipeListingView"
            permission="zope.Public"
            facet="branches"
            name="+recipes"
            template="../../lib/lp/code/templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.registry.interfaces.product.IProduct"
            class="lp.code.browser.sourcepackagerecipelisting.ProductRecipeListingView"
            permission="zope.Public"
            facet="branches"
            name="+recipes"
            template="../../lib/lp/code/templates/sourcepackagerecipe-listing.pt"/>
        <browser:page
            for="lp.registry.interfaces.person.IPerson"
            class="lp.code.browser.sourcepackagerecipelisting.PersonRecipeListingView"
            permission="zope.Public"
            facet="branches"
            name="+recipes"
            template="../../lib/lp/code/templates/sourcepackagerecipe-listing.pt"/>

        <browser:page
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            name="+hierarchy"
            class="lp.code.browser.sourcepackagerecipe.SourcePackageRecipeHierarchy"
            template="../../lib/lp/app/templates/launchpad-hierarchy.pt"
            permission="zope.Public"/>

        <adapter
            provides="canonical.launchpad.webapp.interfaces.IBreadcrumb"
            for="lp.code.interfaces.sourcepackagerecipe.ISourcePackageRecipe"
            factory="canonical.launchpad.webapp.breadcrumb.NameBreadcrumb"
            permission="zope.Public"/>
    </facet>
  <securedutility
    name="BuildableDistroSeries"
    component="lp.code.browser.sourcepackagerecipe.buildable_distroseries_vocabulary"
    provides="zope.schema.interfaces.IVocabularyFactory"
    >
    <allow interface="zope.schema.interfaces.IVocabularyFactory"/>
  </securedutility>
  <securedutility
    name="TargetPPAs"
    component="lp.code.browser.sourcepackagerecipe.target_ppas_vocabulary"
    provides="zope.schema.interfaces.IVocabularyFactory"
    >
    <allow interface="zope.schema.interfaces.IVocabularyFactory"/>
  </securedutility>
</configure>
