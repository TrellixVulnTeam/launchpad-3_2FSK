<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
<body>
<div metal:fill-slot="head_epilogue">
  <style type="text/css">
  .inline-icon {
    position: relative;
    bottom: -3px;
  }
  </style>
</div>

<div metal:fill-slot="main">

  <h1>Translations settings</h1>

  <p
    class="not-translated-in-launchpad"
    tal:condition="not: context/product/official_rosetta">
    <strong>
      This project is not configured to use Launchpad for translations.
    </strong>
    <tal:admin_or_owner condition="context/product/required:launchpad.Edit">
      You can change this in the
      <a tal:attributes="href view/product_edit_url">
        project settings</a>.
    </tal:admin_or_owner>
  </p>

  <tal:rosetta condition="context/product/official_rosetta">
  <h2>Import translations from branch</h2>
  <p>
    You can ask Launchpad to continuously import any translation
    files (templates and translations) that it finds in 
    <strong><tal:series replace="structure view/series_title">
      Evolution Series:trunk</tal:series>'s</strong> official Bazaar branch.
    After the initial import, Launchpad will continue to scan your Bazaar
    branch for updates to template and translation files.
  </p>
  <p id="bzr-request-display">
    <img src="/@@/info" class="inline-icon" />
      If you only need a one-time import, please request it 
    <a tal:attributes="href view/request_bzr_import_url">here</a>.
  </p>
  <p tal:condition="view/context/branch"
     tal:define="branch view/context/branch"
     id="branch-display">
    The official Bazaar branch is:
    <img src="/@@/branch" class="inline-icon" />
    <a tal:attributes="href branch/fmt:url; title branch/bzr_identity"
       tal:content="branch/displayname">
          branchname
    </a>
    <a tal:attributes="href view/link_branch_url;
                       title string:Change official branch"
                       ><img src="/@@/edit" class="inline-icon" /></a>
  </p>
  <p tal:condition="not:view/context/branch"
     id="no-branch-display">
    This series does not have an official Bazaar branch. 
    <a tal:attributes="href view/link_branch_url">Set it now!</a>
  </p>
  <div metal:use-macro="context/@@launchpad_form/form"></div>

  <h2>Export translations to branch</h2>
  <p>
    Launchpad can commit daily snapshots of the translations for this
    release series to a code branch.
  </p>
  <p>
    Use this to make it easy to download the latest translations using
    Bazaar, or to make sure the latest Launchpad translations are always
    included with the files you distribute.
  </p>
  <p>
    <strong>Warning:</strong> This may replace translation files that are
    already in the branch you choose.  You should consider creating a
    separate branch where Launchpad can commit translations.
  </p>

  <p id="translations-branch">
    <tal:no-translations-branch condition="not: context/translations_branch">
      Currently not exporting translations to a branch.
      <a href="+link-translations-branch">
        Choose a target branch.
        <img src="/@@/edit" class="inline-icon" alt="edit" />
      </a>
    </tal:no-translations-branch>
    <tal:translations-branch condition="context/translations_branch">
      Exporting translations to branch:
      <img src="/@@/branch" class="inline-icon" />
      <a
        id="translations-branch-link"
        tal:attributes="href context/translations_branch/fmt:url;
                        title string:Change translations export branch"
        tal:content="context/translations_branch/displayname"
        >branch name</a>
      <a
        id="translations-branch-edit-link"
        tal:attributes="href string:+link-translations-branch;
                        title string:Set translations export branch"
        ><img src="/@@/edit" class="inline-icon" alt="edit" /></a>
  
    </tal:translations-branch>
  </p>

  </tal:rosetta>
</div>

</body>
</html>
