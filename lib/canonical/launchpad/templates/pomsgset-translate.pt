<tal:block condition="nothing">
  <metal:suggestions define-macro="translation-suggestions">
    <tal:block condition="submissions">
      <tr class="secondary">
        <th colspan="2" style="border: inherit;">
          <label><metal:title define-slot="suggestion-title" />:</label>
        </th>
        <td class="icon left right" />
        <td>
          <tal:block condition="not:view/isMultiline">
            <tal:submission repeat="submission submissions">
              <div
                tal:define="submissionlang submission/pomsgset/pofile/language"
                tal:attributes="
                  lang submissionlang/dashedcode;
                  dir submissionlang/abbreviated_text_dir
                "
                tal:content="submission/potranslation/translation"
                >suggestion</div>
              <div class="discreet">
                &mdash;
                <span tal:replace="submission/person/browsername">
                  Foo Bar
                </span>
              </div>
            </tal:submission>
          </tal:block>
          <tal:block
            condition="view/isMultiline"
            define="submission python:submissions[0]">
            <pre
              tal:define="submissionlang submission/pomsgset/pofile/language"
              tal:attributes="
                lang submissionlang/dashedcode;
                dir submissionlang/abbreviated_text_dir
                "
              tal:content="submission/potranslation/translation">
              suggestion
            </pre>
            <div class="discreet">
              &mdash;
              <span tal:replace="submission/person/browsername">Foo Bar</span>
              <tal:block
                define="submissions_remaining python:len(submissions)-1"
                condition="submissions_remaining">
                (<span tal:replace="submissions_remaining">3</span> more)
              </tal:block>
            </div>
          </tal:block>
        </td>
      </tr>
    </tal:block>
  </metal:suggestions>
</tal:block>

<tr>
  <td style="text-align: right;">
    <span tal:replace="view/getSequence">1</span>.
    <input
      type="hidden"
      tal:attributes="
      name string:set_${view/id}_msgid"
      />
  </td>
  <th style="border-style: dotted; border-width: 1px 0 0;">
    <label class="language-code" tal:condition="not:view/isPlural">
      English:
    </label>
    <label class="language-code" tal:condition="view/isPlural">
      English singular:
    </label>
  </th>
  <td class="icon left right" />
  <td tal:content="structure view/getMsgID">
    The original text.
  </td>
</tr>
<tr class="secondary" tal:condition="view/isPlural">
  <th colspan="2">
    <label>English plural:</label>
  </th>
  <td class="icon left right" />
  <td tal:content="structure view/getMsgIDPlural">
    plural source
  </td>
</tr>
<tr class="discreet secondary" tal:condition="view/msgidHasTab">
  <td colspan="3" />
  <td>
    <img
      alt="Note:"
      src="/@@/info_icon.gif"
      title="This is a note to translators"
      />
    <code>[tab]</code> represents a tab character. Please enter it as
    <code>[tab]</code> in your translation too.
  </td>
</tr>
<tr class="discreet secondary" tal:condition="view/getSourceComment">
  <td colspan="3" />
  <td>
    <img
      alt="Developer note:"
      src="/@@/info_icon.gif"
      title="This note was provided by the software developer."
      />
    <span
      tal:content="view/getSourceComment"
      tal:omit-tag="">
      This refers to the content type.
    </span>
  </td>
</tr>
<tal:block
  tal:define="language_code context/language/code"
  repeat="index view/getTranslationRange">
  <tr class="secondary">
    <th colspan="2">
      <label class="language-code">
        <span tal:replace="context/language/englishname">
          Welsh
        </span>:
      </label>
    </th>
    <td>
      <!-- will eventually contain copy buttons -->
    </td>
    <td>
      <div tal:condition="view/getError" class="error">
        <strong>Error in Translation:</strong>
        <span tal:replace="view/getError" />
      </div>
      <tal:comment tal:replace="nothing">
        XXX: Carlos Perello Marin 2005-05-05
        This 'python:' expression should be fixed by SteveA.
      </tal:comment>
      <input
        type="text"
        tal:condition="not:view/isMultiline"
        tal:attributes="
          name string:set_${view/id}_translation_${language_code}_${index};
          value python:view.getTranslation(index);
          tabindex view/makeTabIndex;
          lang context/language/dashedcode;
          dir context/language/abbreviated_text_dir;
          " />
      <tal:block condition="view/isMultiline">
        <tal:comment tal:replace="nothing">
          XXX: Carlos Perello Marin 2005-05-05
          This 'python:' expression should be fixed by SteveA.
        </tal:comment>
        <tal:with-content condition="python:view.getTranslation(index)">
          <tal:comment tal:replace="nothing">
            The lack of indentation for tal:content is deliberate or we would
            add extra whitespaces to the textarea, which causes us to
            potentially corrupt translations.
            https://bugzilla.mozilla.org/show_bug.cgi?id=299009
          </tal:comment>
          <textarea
            tal:attributes="
              name string:set_${view/id}_translation_${language_code}_${index};
              rows view/getMaxLinesCount;
              tabindex view/makeTabIndex;
              lang context/language/dashedcode;
              dir context/language/abbreviated_text_dir;
              ">
<tal:content replace="structure python:view.getTranslation(index)" /></textarea>
        </tal:with-content>
        <tal:without-content condition="python:not view.getTranslation(index)">
          <tal:comment tal:replace="nothing">
            XXX: Carlos Perello Marin 2005-05-05
            This 'python:' expression should be fixed by SteveA.

            We are using an special case if we don't have any content for this
            textarea because tal expressions leave empty lines behind so we
            get new lines added to the textarea for free and that causes
            erroneous translations.
          </tal:comment>
          <textarea
            tal:attributes="
              name string:set_${view/id}_translation_${language_code}_${index};
              rows view/getMaxLinesCount;
              tabindex view/makeTabIndex;
              lang context/language/dashedcode;
              dir context/language/abbreviated_text_dir;
              "></textarea>
        </tal:without-content>
      </tal:block>
    </td>
  </tr>
  <tr class="secondary">
    <td colspan="3" />
    <td>
      <div>
        <label class="fuzzy-checkbox">
          <input
            type="checkbox"
            value="fuzzy"
            tal:attributes="
              checked view/isFuzzy;
              name string:set_${view/id}_fuzzy_${language_code};
              tabindex: view/makeTabIndex
              " />
          <tal:block condition="not:view/isPlural">
            Someone should review this translation
          </tal:block>
          <tal:block condition="view/isPlural">
            Someone should review these translations
          </tal:block>
        </label>
      </div>
    </td>
  </tr>
  <tal:block define="submissions python:view.getSuggestedSubmissions(index)">
    <metal:use metal:use-macro="template/macros/translation-suggestions">
      <metal:fill metal:fill-slot="suggestion-title"><tal:block
        condition="not:view/isMultiline"
        >Suggestions</tal:block><tal:block condition="view/isMultiline"
        >Suggestion</tal:block></metal:fill>
    </metal:use>
  </tal:block>
  <tal:block define="submissions python:view.getCurrentSubmissions(index)">
    <metal:use metal:use-macro="template/macros/translation-suggestions">
      <metal:fill metal:fill-slot="suggestion-title"><tal:block
        condition="not:view/isMultiline"
        >Used elsewhere</tal:block><tal:block condition="view/isMultiline"
        >Used elsewhere</tal:block></metal:fill>
    </metal:use>
  </tal:block>
  <tal:block define="submissions python:view.getWikiSubmissions(index)">
    <metal:use metal:use-macro="template/macros/translation-suggestions">
      <metal:fill metal:fill-slot="suggestion-title"><tal:block
        condition="not:view/isMultiline"
        >Suggested elsewhere</tal:block><tal:block condition="view/isMultiline"
        >Suggested elsewhere</tal:block></metal:fill>
    </metal:use>
  </tal:block>
  <tal:block
    define="submissions
    python:view.getAlternateLanguageSubmissions(index)">
    <metal:use metal:use-macro="template/macros/translation-suggestions">
      <metal:fill metal:fill-slot="suggestion-title"><tal:block
        condition="not:view/isMultiline"
        ><span tal:replace="view/second_lang_pofile/language/englishname"
        /> (Alternate Language)</tal:block><tal:block
        condition="view/isMultiline"
        ><span tal:replace="view/second_lang_pofile/language/englishname"
        /> (Alternate Language)</tal:block></metal:fill>
    </metal:use>
  </tal:block>
</tal:block>
<tr tal:condition="view/getComment" class="secondary">
  <th colspan="2"><label>Translator note:</label></th>
  <td />
  <td tal:content="view/getComment">
    Translator comment.
  </td>
</tr>
<tr class="discreet secondary">
  <th colspan="2" style="padding-bottom: 1em;">
    Located in:
  </th>
  <td class="icon left right" />
  <td style="overflow: auto;" tal:content="view/getFileReferences">
    ./plone_forms/discussion_reply_form.pt
  </td>
</tr>
