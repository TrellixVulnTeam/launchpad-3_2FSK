= Bug heat view =

Bug heat is represented as four flame icons. The quantity of flames that are
coloured is dependent on the value of the heat field. The view BugHeatView
is used to render the flames.

    >>> from lp.bugs.browser.bug import MAX_HEAT
    >>> from canonical.launchpad.ftests import login, logout
    >>> from canonical.launchpad.webapp import canonical_url
    >>> from zope.security.proxy import removeSecurityProxy
    >>> from BeautifulSoup import BeautifulSoup
    >>> def print_flames(html):
    ...     soup = BeautifulSoup(html)
    ...     for img in soup.span.contents:
    ...         print img['src']
    >>> login('foo.bar@canonical.com')
    >>> bug = factory.makeBug()

The maximum heat is defined as a constant in browser/bug.py. A bug with
a heat of half the maximum will result in a display of two coloured flames
and two black-and-white flames.

    >>> removeSecurityProxy(bug).heat = MAX_HEAT / 2
    >>> bug_heat_view = create_initialized_view(bug, name='+bug-heat')
    >>> print_flames(bug_heat_view())
    /@@/flame-icon
    /@@/flame-icon
    /@@/flame-bw-icon
    /@@/flame-bw-icon

A bug with a maximum heat will display all four flames coloured.

    >>> removeSecurityProxy(bug).heat = MAX_HEAT
    >>> bug_heat_view = create_initialized_view(bug, name='+bug-heat')
    >>> print_flames(bug_heat_view())
    /@@/flame-icon
    /@@/flame-icon
    /@@/flame-icon
    /@@/flame-icon

A heat of less than a quarter of the maximum will display no coloured flames.

    >>> removeSecurityProxy(bug).heat = 0.1 * MAX_HEAT
    >>> bug_heat_view = create_initialized_view(bug, name='+bug-heat')
    >>> print_flames(bug_heat_view())
    /@@/flame-bw-icon
    /@@/flame-bw-icon
    /@@/flame-bw-icon
    /@@/flame-bw-icon

    >>> logout()
