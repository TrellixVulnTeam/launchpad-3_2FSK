Editing team details
====================

Only an administrator (as well as the team owner) of a team can change the
details of that team.

    >>> user_browser.open('http://launchpad.dev/~ubuntu-team/+edit')
    Traceback (most recent call last):
    ...
    Unauthorized:...

    >>> browser.addHeader('Authorization', 'Basic mark@example.com:test')
    >>> browser.open('http://launchpad.dev/~ubuntu-team')
    >>> browser.getLink('Change details').click()
    >>> browser.url
    'http://launchpad.dev/~ubuntu-team/+edit'
    >>> browser.getControl('Name', index=0).value
    'ubuntu-team'
    >>> browser.getControl('Display Name').value
    'Ubuntu Team'
    >>> browser.getControl('Team Description').value
    'This Team is responsible for the Ubuntu Distribution'
    >>> browser.getControl('Moderated Team').selected
    True
    >>> browser.getControl('invite them to apply for renewal').selected
    True
    >>> print browser.getControl('Renewal period').value

Now we'll change some values.

    >>> browser.getControl('Name', index=0).value = 'ubuntuteam'
    >>> browser.getControl('Display Name').value = 'The Ubuntu Team'
    >>> browser.getControl('Team Description').value = ''
    >>> browser.getControl('Restricted Team').selected = True

    >>> browser.getControl('Save').click()

We're now redirected to the team's home page, which is now on a different
URL since we changed its name.

    >>> browser.url
    'http://launchpad.dev/~ubuntuteam'
    >>> browser.getLink('Change details').click()

    >>> browser.url
    'http://launchpad.dev/~ubuntuteam/+edit'
    >>> browser.getControl('Name', index=0).value
    'ubuntuteam'
    >>> browser.getControl('Display Name').value
    'The Ubuntu Team'
    >>> browser.getControl('Team Description').value
    ''
    >>> browser.getControl('Restricted Team').selected
    True

If we try to use a name which is already in use, we'll get an error
message explaining it.

    >>> browser.getControl('Name', index=0).value = 'mark'
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/%7Eubuntuteam/+edit'
    >>> for tag in find_tags_by_class(browser.contents, 'message'):
    ...     print extract_text(tag)
    There is 1 error.
    mark is already in use by another person or team.
