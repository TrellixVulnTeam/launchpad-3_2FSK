  The shipit admins can do any changes they want to a request.

  First let's approve request number 12.

  >>> print http(r"""
  ... POST /requests/12 HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... 
  ... field.ubuntu_quantityx86approved=9&field.ubuntu_quantityamd64approved=3&field.ubuntu_quantityppcapproved=9&field.kubuntu_quantityx86approved=0&field.kubuntu_quantityamd64approved=0&field.edubuntu_quantityx86approved=0&field.highpriority.used=&APPROVE=Approve""")
  HTTP/1.1 303 See Other
  ...
  Location: http://shipit.ubuntu.dev//requests/13?previous=12&approved=1
  <BLANKLINE>


  That redirected us to the next request pending approval.

  >>> print http(r"""
  ... GET /requests/13?previous=12&approved=1 HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... """)
  HTTP/1.1 200 Ok
  ...
  ...The request #12...
  ...was approved...
  ...
  ...Status: pending...
  ...


  But this request's address was wrong, and Marilize noticed that, so she'll
  correct it by going to the /adminrequest page.

  >>> print http(r"""
  ... GET /adminrequest?order=13 HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... """)
  HTTP/1.1 200 Ok
  ...
  ...Change a Request...
  ...
  ...<input class="textType" id="field.addressline1"...
  ...


  Now she submits her changes.

  >>> print http(r"""
  ... POST /adminrequest?order=13 HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... 
  ... field.ubuntu_quantityx86=9&field.ubuntu_quantityamd64=8&field.ubuntu_quantityppc=4&field.kubuntu_quantityx86=0&field.kubuntu_quantityamd64=0&field.edubuntu_quantityx86=0&field.highpriority.used=&field.recipientdisplayname=Miroslav+Kure&field.organization=Something&field.addressline1=Somewhere+around+here&field.addressline2=in+this+world&field.city=whatever&field.province=not+mandatory&field.postcode=999432423&field.country=32&field.country-empty-marker=1&field.phone=%2B55+16+3374-2027&order=8&FORM_SUBMIT=Change+Request""")
  HTTP/1.1 303 See Other
  ...
  Location: http://shipit.ubuntu.dev//requests/19
  ...
  <BLANKLINE>


  But then she realizes this person requested too many CDs without a good
  reason, so she denies the request, and get redirected to this same request,
  because there are no other pending requests.

  >>> print http(r"""
  ... POST /requests/13 HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... 
  ... DENY=Deny""")
  HTTP/1.1 303 See Other
  ...
  Location: http://shipit.ubuntu.dev//requests/13?previous=13&denied=1
  <BLANKLINE>


  Marilize can also create new requests on behalf of other people. She can
  specify any number of CDs from all different flavours/architectures and
  these requests are automatically approved. Also, any request made using this
  administrative interface will have the shipit-admins team as the recipient.

  >>> print http(r"""
  ... POST /adminrequest HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... 
  ... field.ubuntu_quantityx86=5&field.ubuntu_quantityamd64=&field.ubuntu_quantityppc=&field.kubuntu_quantityx86=5&field.kubuntu_quantityamd64=&field.edubuntu_quantityx86=&field.highpriority.used=&field.recipientdisplayname=Steve+Jobs&field.organization=&field.addressline1=Apple%27s+office&field.addressline2=&field.city=San+Diego&field.province=California&field.postcode=13456782&field.country=226&field.country-empty-marker=1&field.phone=43243252&FORM_SUBMIT=Request""")
  HTTP/1.1 303 See Other
  ...
  Location: http://shipit.ubuntu.dev//requests/20
  ...
  <BLANKLINE>

  >>> from canonical.launchpad.database import ShippingRequest
  >>> admin_request = ShippingRequest.selectFirst(orderBy='-id')
  >>> admin_request.recipient.name
  u'shipit-admins'

  >>> print http(r"""
  ... GET /requests/%d HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... """ % admin_request.id)
  HTTP/1.1 200 Ok
  ...
  ...Status: approved (unshipped)...
  ...

  The shipit-admins team is the only person/team that can have multiple open
  requests at a time, that's one of the reasons we use it for all requests
  created using the admin UI.

  >>> print http(r"""
  ... POST /adminrequest HTTP/1.1
  ... Authorization: Basic bWFyaWxpemVAaGJkLmNvbTp0ZXN0
  ... Host: shipit.ubuntu.dev
  ... 
  ... field.ubuntu_quantityx86=5&field.ubuntu_quantityamd64=&field.ubuntu_quantityppc=&field.kubuntu_quantityx86=5&field.kubuntu_quantityamd64=&field.edubuntu_quantityx86=&field.highpriority.used=&field.recipientdisplayname=Foo+Bar&field.organization=&field.addressline1=Apple%27s+office&field.addressline2=&field.city=San+Diego&field.province=California&field.postcode=13456782&field.country=226&field.country-empty-marker=1&field.phone=43243252&FORM_SUBMIT=Request""")
  HTTP/1.1 303 See Other
  ...
  Location: http://shipit.ubuntu.dev//requests/21
  ...
  <BLANKLINE>

  >>> admin_request2 = ShippingRequest.selectFirst(orderBy='-id')
  >>> admin_request2.recipient.name
  u'shipit-admins'
  >>> admin_request2 != admin_request
  True

