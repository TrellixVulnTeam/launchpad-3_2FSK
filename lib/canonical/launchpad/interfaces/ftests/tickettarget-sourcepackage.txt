= ITicketTarget for SourcePackage =

The implementation of ITicketTarget by SourcePackage and
DistributionSourcePackage contain some small differences with
the other ones. (See tickettarget.txt for the generic interface
description.)

=== ISourcePackage.target ===

The target attribute of tickets created on SourcePackage will be
that of the DistributionSourcePackage (and not the SourcePackage):

    >>> login('no-priv@canonical.com')
    >>> from canonical.launchpad.interfaces import (
    ...     IPersonSet, IDistributionSet)
    >>> ubuntu = getUtility(IDistributionSet).getByName('ubuntu')
    >>> firefox = ubuntu.currentrelease.getSourcePackage('mozilla-firefox')

    >>> ticket = firefox.getTicket(3)
    >>> ticket.target == firefox
    False
    >>> ticket.target == ubuntu.getSourcePackage('mozilla-firefox')
    True

=== get() ===

The ticket created on a SourcePackage or DistributionSourcePackage can
also be retrieved via the distribution.

    >>> ubuntu.getTicket(3) == ticket
    True

    # Create a new ticket on the evolution source package.
    >>> sample_person = getUtility(IPersonSet).getByName('name16')
    >>> evolution = ubuntu.getSourcePackage('evolution')
    >>> evolution_ticket = evolution.newTicket(
    ...     sample_person, 'Evolution crashed',
    ...     'Surprise, surprise! Evolution crashed... again...'
    ...     'while clicking on a thread expander.')

    >>> ubuntu.getTicket(evolution_ticket.id) == evolution_ticket
    True

=== Support Contacts ===

The support contacts of a SourcePackage contain all the support contacts
from its containing distribution.

    >>> ubuntu.addSupportContact(sample_person)
    True
    >>> [person.name for person in firefox.support_contacts]
    [u'name16']

It is possible to obtain the list of IPerson registed as support
contacts specifically for the source package through the
registered_support_contacts attributes.

    >>> [person.name for person in firefox.registered_support_contacts]
    []

A user can still subscribe as support contact for specific sourcepackage
even if he's already a support contact for the distribution.

    >>> firefox.addSupportContact(sample_person)
    True
    >>> [person.name for person in firefox.registered_support_contacts]
    [u'name16']

But he's only listed once in the support contacts list.

    >>> [person.name for person in firefox.support_contacts]
    [u'name16']

The removeSupportContact() method can only be used to remove the user
from the sourcepackage support contact list, not from the ubuntu
distribution list:

    >>> firefox.removeSupportContact(sample_person)
    True
    >>> [person.name for person in firefox.registered_support_contacts]
    []
    >>> [person.name for person in firefox.support_contacts]
    [u'name16']
    >>> firefox.removeSupportContact(sample_person)
    False
    >>> [person.name for person in firefox.support_contacts]
    [u'name16']

The same principle applies to DistributionSourcePackage:

    >>> [person.name for person in evolution.registered_support_contacts]
    []
    >>> [person.name for person in evolution.support_contacts]
    [u'name16']
    >>> evolution.addSupportContact(sample_person)
    True
    >>> [person.name for person in evolution.registered_support_contacts]
    [u'name16']
    >>> [person.name for person in evolution.support_contacts]
    [u'name16']
    >>> evolution.removeSupportContact(sample_person)
    True
    >>> [person.name for person in evolution.support_contacts]
    [u'name16']
    >>> evolution.removeSupportContact(sample_person)
    False
    >>> [person.name for person in evolution.registered_support_contacts]
    []
    >>> [person.name for person in evolution.support_contacts]
    [u'name16']
