<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="bazaar">

<body>

<div metal:fill-slot="main" class="visualPadding"
     tal:define="batch view/batchnav/currentBatch">

  <h1>Bazaar: Upstream revision control imports</h1>

  <form action="" method="GET">
    <fieldset>
        <legend>Filter criteria</legend>

        <div class="formControls">
            <input type="text" name="text"
                   tal:attributes="value view/text" size="25">
            <span tal:replace="structure view/sourcestateselector">
                StateSelector
            </span>
            <input type="checkbox" name="ready" id="ready"
                   tal:attributes="checked view/ready">
            <label for="ready">Ready</label>
            <input type="submit" name="search" value="search" />
            <br />
        </div>

    </fieldset>
  </form>

  <tal:no-results condition="not:batch">
    <p>No project series found matching criteria.</p>
  </tal:no-results>

  <tal:results condition="batch">
    <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-upper" />
    <table class="listing" width="100%">
      <thead>
        <tr>
          <th>Project Series</th>
          <th>Started</th>
          <th>Finished</th>
          <th>Tested</th>
          <th>Process</th>
          <th>Sync</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="series batch">
          <td><a tal:attributes="href string:${series/fmt:url}/+source"
                 style="display: block"
                 tal:content="string:${series/product/name}/${series/name}"
              >$Product.name/$Series.name</a></td>
          <td>
            <span
              tal:attributes="title series/datestarted/fmt:datetime"
              tal:content="series/datestarted/fmt:approximatedate"
              >$Series.datestarted</span>
          </td>
          <td>
            <span
              tal:attributes="title series/datefinished/fmt:datetime"
              tal:content="series/datefinished/fmt:approximatedate"
              >$Series.datefinished</span>
          </td>
          <td>
            <span
              tal:attributes="title series/dateautotested/fmt:datetime"
              tal:content="series/dateautotested/fmt:approximatedate"
              >$Series.dateautotested</span>
          </td>
          <td>
            <span
              tal:attributes="title series/dateprocessapproved/fmt:datetime"
              tal:content="series/dateprocessapproved/fmt:approximatedate"
              >$Series.dateprocessapproved</span>
          </td>
          <td>
            <span
              tal:attributes="title series/datesyncapproved/fmt:datetime"
              tal:content="series/datesyncapproved/fmt:approximatedate"
              >$Series.datesyncapproved</span>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="lesser" tal:content="structure view/batchnav/@@+navigation-links-lower" />
  </tal:results>

</div>

</body>
</html>
