Let's change the preferred email from no-priv.

  >>> browser.addHeader('Authorization', 'Basic no-priv@canonical.com:test')
  >>> browser.open('http://launchpad.dev/~no-priv')
  >>> browser.getLink('E-mail Addresses').click()
  >>> browser.url
  'http://launchpad.dev/~no-priv/+editemails'
  >>> browser.title
  "No Privileges Person's e-mail addresses"

  >>> from zope.testbrowser.testing import Browser
  >>> second_browser = Browser()
  >>> second_browser.handleErrors = False
  >>> second_browser.addHeader('Authorization', 'Basic no-priv@canonical.com:test')
  >>> second_browser.open('http://launchpad.dev/~no-priv/+editemails')

Set foo@baz.com as no-priv's preferred email address.

# XXX matsubara 2006-09-13: Ideally this should be:
# browser.getControl('foo@baz.com').selected = True
# but that isn't working.
  >>> browser.getControl(name='VALIDATED_SELECTED').value = ['foo@baz.com']
  >>> browser.getControl('Set as Contact Address').click()

  >>> message = 'Your contact address has been changed to: foo@baz.com'
  >>> message in browser.contents
  True

Setting foo@baz.com again in another browser should return a nice message.

  >>> second_browser.getControl(name='VALIDATED_SELECTED').value = ['foo@baz.com']
  >>> second_browser.getControl('Set as Contact Address').click()

  >>> message = "foo@baz.com is already set as your contact address."
  >>> message in second_browser.contents
  True
