<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<metal:heading fill-slot="pageheading">
  <h3 tal:content="context/browsername">Steve Alexander</h3>
  <h1>Register a branch</h1>
</metal:heading>

<div metal:fill-slot="main">

  <div metal:use-macro="context/@@launchpad_form/form">

    <p metal:fill-slot="extra_info">
      Register a new Bazaar branch whose author is
      <tal:author replace="context/browsername">Person</tal:author>.
      (<a href="/bazaar">What is Bazaar?</a>)
    </p>

  </div>

<script type="text/javascript">

function populate_name()
{
   var url_text = trim(this.value);
   // strip of any trailing slashes
   url_text = url_text.replace(/\/+$/, '')
   if (url_text != this.value) {
      this.value = url_text;
   }
   // if the url finishes with a /, strip it off
   var name_field = document.getElementById('field.name');
   if (name_field.value == '') 
   {
      // parse the value of the url field
      url_bits = url_text.split('/');
      if (url_bits.length > 2) {
         // attempt at not barfing on something completely invalid
         last_bit = url_bits[url_bits.length - 1];
         name_field.value = last_bit;
      }
   }
}

var field = document.getElementById('field.url');
// Since it is possible that the form could be submitted without
// the onblur getting called, and onblur can be called without
// onchange being fired, set them both, and handle it in the function.
field.onchange = populate_name;
field.onblur = populate_name;
</script>

</div><tal:comment condition="nothing"><!-- end main slot --></tal:comment>

<metal:block fill-slot="help">

  <p>Launchpad is integrated with the <a
    href="http://bazaar-vcs.org/">Bazaar</a> version control system. (<a
    href="http://bazaar-vcs.org/WhyUseBzr">Why use Bazaar?</a>).</p>

  <p>Use this page to register a mirror branch on behalf this person. The
    branch must be already available on the internet in a publicly accessible
    location.</p>

  <p>The URL of the branch mirror is based on the nickname of the registrant,
    not the author.</p>

  <p>The product this branch belongs to is specified by the
    &ldquo;Product&rdquo; entry. You can also register branches from product
    pages.</p>

  <p>Do not use this page to:</p>

  <ul>
    <li>Request a <em>VCS import</em>, that is a Bazaar mirror of a CVS or
      Subversion branch. Instead, edit the source details of the trunk release
      series of this product.</li>

    <li>Create an <em>upload</em> branch, that is a branch that you upload
      directly, to use Launchpad has a community hosting service. Instead, use
      the <code>bzr push</code>.</li>

    <tal:comment condition="nothing"><!-- XXX: Need a pointer to more detailed
    documentation. - David Allouche 2006-12-05 --></tal:comment>
  </ul>

</metal:block><tal:comment condition="nothing"><!-- end help slot --></tal:comment>
</body>
</html>
