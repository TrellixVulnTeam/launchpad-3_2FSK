<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad">
<head>
  <metal:block fill-slot="head_epilogue">
    <script tal:content="structure string:
      LPJS.use('base', 'node', 'event', 'lp.services.webhooks.deliveries',
          function(Y) {
              Y.on('domready', function() {
                  var deliveries_widget = new Y.lp.services.webhooks.deliveries.WebhookDeliveries({
                    srcNode: '#webhook-deliveries'});
                  deliveries_widget.render();
                  deliveries_widget.set('deliveries', LP.cache.deliveries);
              });
          });
    "/>
  </metal:block>
</head>
<body>
  <div metal:fill-slot="main">
    <div metal:use-macro="context/@@launchpad_form/form">
      <div class="actions" id="launchpad-form-actions"
           metal:fill-slot="buttons">
        <tal:actions repeat="action view/actions">
          <input tal:replace="structure action/render"
                 tal:condition="action/available"/>
        </tal:actions>
        <a tal:attributes="href context/fmt:url/+delete">Delete webhook</a>
      </div>
    </div>
    <h2>Recent deliveries</h2>
    <div id="webhook-deliveries">
      <div class="lesser"
          tal:content="structure view/deliveries/@@+navigation-links-upper" />

      <table id="webhook-deliveries-table" class="listing">
        <colgroup>
          <col style="width: 18px" />
        </colgroup>
        <tbody>
          <tr id='webhook-deliveries-table-loading'>
            <td colspan="3" style="padding-left: 0.25em">
              <img class="spinner" src="/@@/spinner" alt="Loading..." />
              Loading...
            </td>
          </tr>
        </tbody>
      </table>

      <div class="lesser"
          tal:content="structure view/deliveries/@@+navigation-links-lower" />
    </div>
  </div>
</body>
</html>

