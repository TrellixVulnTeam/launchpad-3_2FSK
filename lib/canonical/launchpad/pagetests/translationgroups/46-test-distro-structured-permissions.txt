First, we set the 'structured' permission for the netapplet product
translations.

  >>> from zope.testbrowser.testing import Browser

  >>> test_browser = Browser()
  >>> test_browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> test_browser.open(
  ...     'http://translations.launchpad.dev/netapplet/+changetranslators')
  >>> print test_browser.url
  http://translations.launchpad.dev/netapplet/+changetranslators

  >>> test_browser.getControl(
  ...     'Translation group').value = ['testing-translation-team']
  >>> test_browser.getControl(
  ...     'Translation Permission System').value = ['Structured']
  >>> test_browser.getControl('Change').click()
  >>> print test_browser.url
  http://translations.launchpad.dev/netapplet

Now, we test that a member of a translation team is able to translate
directly, in this example, we are using 'tsukimi' account.

  >>> tsukimi_browser = Browser()
  >>> tsukimi_browser.addHeader('Authorization', 'Basic tsukimi@quaqua.net:test')
  >>> tsukimi_browser.open(
  ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
  ...         'netapplet/es/+translate')
  >>> print tsukimi_browser.url
  http://translations.launchpad.dev/netapplet/trunk/+pots/netapplet/es/+translate
  >>> content = find_main_content(tsukimi_browser.contents)
  >>> print content
  <...
  ...Translating into Spanish...
  ...Dial-up connection...

Next test is with a non member of that translation team, the 'No Privileges'
account. We check that we get the warning that we are not members of the team.

  >>> no_priv_browser = Browser()
  >>> no_priv_browser.addHeader('Authorization', 'Basic no-priv@canonical.com:test')
  >>> no_priv_browser.open(
  ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
  ...         'netapplet/es/+translate')
  >>> print no_priv_browser.url
  http://translations.launchpad.dev/netapplet/trunk/+pots/netapplet/es/+translate
  >>> content = find_main_content(no_priv_browser.contents)
  >>> print content
  <...
  ...Translating into Spanish...
  ...Your translations will be held for review...

And finally, we test that a language without a team lets to anyone (in this
case, the 'No Privileges' account) to translate directly.

  >>> no_priv_browser.open(
  ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
  ...         'netapplet/fr/+translate')
  >>> content = find_main_content(no_priv_browser.contents)
  >>> print content
  <...
  ...Translating into French...

  >>> portlet = find_portlet(no_priv_browser.contents, 'French translators')
  >>> print portlet.renderContents()
  <...No translators currently designated for this PO file...
