<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
  >

<body>
  <div metal:fill-slot="main"
       tal:define="direct context/myactivememberships;
                   indirect context/teams_indirectly_participated_in">

    <p tal:condition="direct/count">
      <span tal:replace="context/title">Foo Bar</span>
      is a member of the following teams:
    </p>
    <p tal:condition="not: direct/count">
      <span tal:replace="context/title">Foo Bar</span>
       has not yet joined any teams.
    </p>

    <div class="left" tal:condition="direct/count">
      <div class="portlet">
        <h2>Direct membership</h2>
        <table id="participation">
          <tal:loop repeat="membership context/myactivememberships">
            <tr tal:replace="structure membership/@@+listing-simple"
                tal:condition="membership/team/@@+restricted-membership/userCanViewMembership"
                />
          </tal:loop>
        </table>
      </div>
    </div>

    <div class="right" tal:condition="indirect/count">
      <div class="portlet">
        <h2>Indirect membership</h2>
        <table id="indirect participation">
          <tal:loop repeat="team_via view/indirect_teams_via">
            <tr tal:condition="team_via/team/@@+restricted-membership/userCanViewMembership">
              <td><img tal:replace="structure team_via/team/image:icon" />
              </td>
              <td>
                <div>
                  <a tal:replace="structure team_via/team/fmt:link"
                    >Team name</a>
                </div>
                <div>
                  Via
                  <span tal:replace="team_via/via">guadamen</span>.
                </div>
              </td>
            </tr>
          </tal:loop>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
