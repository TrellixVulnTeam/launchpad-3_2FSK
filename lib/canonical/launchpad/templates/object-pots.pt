<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    lang="en"
    metal:use-macro="context/@@main_template/master"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    i18n:domain="launchpad">

    <tal:block tal:replace="nothing" tal:omit-tag>
     <!--
     This is a page that lists a bunch of POTemplates that are associated
     with something. That context object needs to have two attributes:
     self.potemplates and self.potemplatecount. It displays either a long
     list (compact) or short list (detailed).

     It expects the View object to support two attributes:

       .templateviews a set of ViewPOTemplate objects
       .languages a set of user-preferred languages

    Currently this is used for source package, distrorelease and product
    release.
     -->
    </tal:block>

<head>
  <title metal:fill-slot="title" i18n:translate="">Rosetta Translation
    Templates for <span tal:replace="context/title">foopackage in
    Hoary</span>
  </title>
  <!-- Plone style sheet -->
  <style type="text/css" media="screen">@import url(plone.css);</style>
  <!-- Launchpad style sheet -->
  <style type="text/css" media="screen">@import url(launchpad.css);</style>
</head>

<body>

<metal:rightportlets fill-slot="portlets_two">
    <div tal:replace="structure view/prefLangPortlet" />
    <div tal:replace="structure view/countryPortlet" />
    <div tal:replace="structure view/browserLangPortlet" />
</metal:rightportlets>

<div metal:fill-slot="main">

  <h1 i18n:translate="">Translation Templates</h1>

  <!-- indicate if no templates are registered for this object and
     redirect to the mailing lists in case that is incorrect
  -->
  <tal:block condition="not: context/potemplates">

    <h2 i18n:translate="">No Translatable Templates Available</h2>

    <p i18n:translate=""><span tal:replace="context/displayname" />
    does not have any strings to be translated through Rosetta. If
    you think this is incorrect, please send an email to
    <a href="mailto:rosetta-users@lists.ubuntu.com">the Rosetta
    mailing list</a> or file a bug in our
    <a href="https://launchpad.ubuntu.com/malone/products/rosetta">bug
    tracking system</a> so we can look into the problem. Thanks.
    </p>
  </tal:block>

  <tal:block condition="view/templateviews">

    <!-- Listing of MANY templates -->
    <tal:block tal:condition="python:context.potemplatecount > 5">

      <p>The templates below can be translated. Click on your chosen
      template, then choose the language into which you would like to
      translate.</p>

      <table class="listing rowNavigation">
        <thead>
          <tr>
            <th>name</th>
            <th>template title</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="potview view/templateviews"
              tal:attributes="onclick
                 string:window.location='${potview/URL}'">
            <td><a tal:attributes="href potview/URL"
                   tal:content="potview/context/name"></a></td>
            <td><span tal:replace="potview/context/title"></span></td>
          </tr>
        </tbody>
      </table>

    </tal:block>

    <!-- Listing of FEW templates. -->
    <tal:block tal:condition="python:context.potemplatecount <= 5">

      <p i18n:translate="">
        Below is a list of translation templates for
        <span tal:replace="context/displayname">displayname</span>.
      </p>

      <div tal:condition="not: view/languages">
        <ul>
          <li tal:repeat="potview view/templateviews">
            <a tal:attributes="href potview/URL"
              tal:content="potview/context/title">template</a>
          </li>
        </ul>
      </div>

      <p tal:condition="view/languages" i18n:translate="">We have
      determined a short list of languages that you may be interested in
      translating, and show the translation template status in each of
      those languages below:
      </p>

      <div tal:condition="view/languages"
           tal:repeat="potview view/templateviews"
           tal:omit-tag=""> <!-- PO Template Details -->

        <h2><span tal:replace="potview/name">name</span>:
            <span tal:replace="potview/title">Template Title</span></h2>

        <p tal:content="potview/description">
          Template description
        </p>

        <div tal:replace="structure potview/context/@@+chart" />

        <div align="right">
          [ <a tal:attributes="href potview/URL">More...</a> ]
        </div>

      </div>

      <div tal:replace="structure view/statusLegend" />

    </tal:block> <!-- the detailed template+language listing -->

  </tal:block> <!-- condition="view/templateviews -->

</div>

</body>
</html>
