Editing Tickets
===============

Any logged in user should be able to edit the title and description of a ticket.

  >>> browser.addHeader('Authorization', 'Basic no-priv@canonical.com:test')
  >>> browser.open('http://localhost/products/firefox/+ticket/2')
  >>> browser.getLink('Edit Request').click()
  >>> browser.url
  'http://localhost/products/firefox/+ticket/2/+edit'

When we post the form, we should be redirected back to the ticket page.

  >>> description = (
  ...   "Hi! I'm trying to learn about SVG but I can't get it to work at "
  ...   "all in firefox. Maybe there is a plugin? Help! Thanks. Mark")
  >>> browser.getControl('Description').value = description 
  >>> summary = "Problem showing the SVG demo on W3C web site"
  >>> browser.getControl('Summary').value = summary
  >>> browser.getControl('Change').click()

  >>> browser.url
  'http://localhost/products/firefox/+ticket/2'

And viewing that page should show the updated information.

  >>> description in browser.contents
  True
  >>> summary in browser.contents
  True

There should be a +admin page for the ticket. It should be visible to
ticket.target.owner.

  # XXX matsubara 2006-05-26 Workaround for bug
  # https://launchpad.net/bugs/45226
  >>> from zope.testbrowser.testing import Browser
  >>> browser = Browser()
  >>> browser.handleErrors = False

  >>> browser.addHeader(
  ...   'Authorization', 'Basic jeff.waugh@ubuntulinux.com:jdub')
  >>> browser.open('http://localhost/distros/ubuntu/+ticket/5')
  >>> browser.getLink('Administer').click()

And the page should be visible too.

  >>> browser.url
  'http://localhost/distros/ubuntu/+ticket/5/+admin'

  >>> 'Administer request' in browser.contents
  True

Let's change the ticket status, priority, assignee and add some notes to the
whiteboard.

  >>> browser.getControl(name='field.status').value = ['Answered']
  >>> browser.getControl('Priority').value = ['Wishlist']
  >>> browser.getControl('Assignee').value = 'name16' 
  >>> browser.getControl('Status Whiteboard').value = 'Some note'
  >>> browser.getControl('Change').click()

We're then redirected to the ticket page

  >>> browser.url
  'http://localhost/distros/ubuntu/+ticket/5'

Where we can see the updated information

  >>> 'Some note' in browser.contents
  True
  >>> 'Foo Bar' in browser.contents
  True

  >>> print browser.contents
  <!DOCTYPE...
  ...Status:...
  ...Answered...
  ...Priority:...
  ...Wishlist...
