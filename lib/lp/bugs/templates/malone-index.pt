<malone-index
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="malone">

  <h1 metal:fill-slot="heading">Bug tracking</h1>

  <ul class="rollover buttons" metal:fill-slot="side">
        <li>
          <a href="/+tour/bugs"
             tal:attributes="href string:${rooturl}+tour/bugs">
            <img
              alt="Take a tour"
              src="/+icing/but-lrg-takeatour.gif"
            />
          </a>
        </li>
        <li>
          <a href="+filebug">
            <img
              alt="Report a bug"
              src="/+icing/but-lrg-reportabug.gif"
            />
          </a>
        </li>
  </ul>

  <div metal:fill-slot="main">
    <div class="top-portlet">
      <p
        tal:condition="view/error_message"
        tal:content="view/error_message"
        class="error message"
      >Error message.</p>
      <form class="central" action="/bugs/+bugs" method="get">
        <table>
          <tbody>
            <tr>
              <td style="text-align: right;">
                <input
                  tal:replace="structure view/widgets/searchtext"
                  id="text"
                  type="text"
                  name="field.searchtext"
                  size="50"
                />
              </td>
              <td>
                <input
                  type="submit"
                  name="search"
                  value="Search Bug Reports"
                />
              </td>
            </tr>
            <tr tal:define="options nocall:view/widgets/scope/options;
                            target_widget nocall:view/widgets/scope/target_widget">
              <td tal:attributes="class view/target_css_class"
                  style="text-align: right;">
               <div>
                <label>
                  <input
                    tal:replace="structure options/all"
                    name="scope"
                    type="radio"
                    value="all"
                    checked="checked"
                  />
                  All projects
                </label>
                <label>
                  <input
                    tal:replace="structure options/project"
                    name="scope"
                    id="scope.project"
                    type="radio"
                    value="project"
                    onclick="document.getElementById('field.target').focus();"
                  />
                  One project:
                  <tal:input replace="structure target_widget/inputField" />
                </label>
               </div>
               <div class="message"
                    tal:condition="view/target_error"
                    tal:content="structure view/target_error">
                  Error message
               </div>
              </td>
              <td tal:content="structure target_widget/chooseLink" />
            </tr>
          </tbody>
        </table>
        <script type="text/javascript"
                tal:define="script view/focusedElementScript"
                tal:condition="script"
                tal:content="structure script" />
      </form>
      <p id="application-summary">
        Launchpad&rsquo;s bug tracker helps software teams to 
        collaborate on bug reports and fixes. 
        (<a href="https://help.launchpad.net/Bugs">Read our guide</a>)
      </p>
    </div>

    <div class="yui-g">
      <div class="first yui-u">
        <div class="portlet">
          <h2>Recently reported</h2>
          <table>
            <tbody>
              <tr
                tal:repeat="bug context/latest_bugs"
                tal:replace="structure bug/@@+listing-detailed"
              />
            </tbody>
          </table>
        </div>
      </div>
      <div class="yui-u">
        <div class="portlet">
          <h2>Recently fixed</h2>
          <table id="fixed-bugs">
            <tbody>
              <tr
                tal:repeat="fixed_bug view/getMostRecentlyFixedBugs"
                tal:replace="structure fixed_bug/@@+listing-detailed"
              />
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="yui-g">
      <div class="portlet">
      <div
        id="application-footer"
        tal:content="structure context/@@+portlet-stats"
      />
      </div>
    </div>

  </div><!--main-->

</malone-index>
