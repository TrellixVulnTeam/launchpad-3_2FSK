<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="launchpad">
  <body>

<metal:block fill-slot="head_epilogue">
  <style type="text/css">
    #implementation div.yui3-ichoicesource {
      display: inline;
    }
  </style>
</metal:block>

  <tal:registering metal:fill-slot="registering">
    Registered by
    <tal:registrant tal:replace="structure context/owner/fmt:link" />
    <span
        tal:attributes="title context/datecreated/fmt:datetime"
        tal:content="context/datecreated/fmt:displaydate" />
  </tal:registering>

<metal:heading fill-slot="heading">
  <h1 tal:replace="structure view/title_widget">
    blueprint title
YUI().use('lp.anim', 'lp.ui', function(Y) {

        Y.on('lp:context:implementation_status:changed', function(e) {
            var icon = Y.one('#informational-icon');
            if (e.new_value == 'Informational') {
              icon.removeClass('unseen');
            } else {
              icon.addClass('unseen');
            }
        });
        Y.on('lp:context:lifecycle_status:changed', function(e) {
            Y.lp.ui.update_field('#lifecycle-status', e.new_value);
        });
        Y.on('lp:context:is_started:changed', function(e) {
            var started = Y.one('#started-by');
            if (e.new_value) {
              started.removeClass('unseen');
              started.one('dd').setContent(e.entry.getHTML('starter'));
              Y.lp.anim.green_flash({node:started}).run();
            } else {
              started.addClass('unseen');
            }
        });
        Y.on('lp:context:is_complete:changed', function(e) {
            var completed = Y.one('#completed-by');
            if (e.new_value) {
              completed.removeClass('unseen');
              completed.one('dd').setContent(e.entry.getHTML('completer'));
              Y.lp.anim.green_flash({node:completed}).run();
            } else {
              completed.addClass('unseen');
            }
        });
        Y.on('lp:context:title:changed', function(e) {
            // change the window title and breadcrumb.
            Y.lp.ui.update_field('ol.breadcrumbs li:last-child', e.new_value);
            var title = window.document.title;
            title = e.new_value + title.substring(e.old_value.length);
            window.document.title = title;
        });

      });
    </script>

  </div>

  <tal:side metal:fill-slot="side">
    <tal:menu replace="structure context/@@+global-actions" />

    <div tal:replace="structure context/@@+portlet-subscribers" />
  </tal:side>
</body>
</html>
