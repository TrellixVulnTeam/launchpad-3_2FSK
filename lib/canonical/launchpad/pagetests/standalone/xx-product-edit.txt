Page to edit a product - does the page load?

  >>> print http(r"""
  ... GET /products/firefox/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... """)
  HTTP/1.1 200 Ok
  Content-Length: ...
  ...
      <title>Edit Upstream Details: Mozilla Firefox</title>
  ...
            <h1>Edit Upstream Product Details</h1>
  ...

We try to edit the project related to that product. First with a invalid
project.

  >>> print http(r"""
  ... POST /products/firefox/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------72246659918172988711735173175
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.project"
  ... 
  ... asdasfasd
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... firefox
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... Mozilla Firefox
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... Mozilla Firefox
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------72246659918172988711735173175
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Change
  ... -----------------------------72246659918172988711735173175--
  ... """)
  HTTP/1.1 200 Ok
  ...
  ...<p class="portalMessage">An error occurred.</p>...
  ...
  ...Invalid value...
  ...


  Now we try to edit with a project that exists.


  >>> print http(r"""
  ... POST /products/firefox/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------1660756244906766702065105631
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.project"
  ... 
  ... gnome
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... Mozilla Firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... Mozilla Firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Change
  ... -----------------------------1660756244906766702065105631--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: http://localhost:9000/products/firefox
  ...


  Now we test if we edited it successfully. 

  >>> print http(r"""
  ... GET /products/firefox HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Referer: http://localhost:9000/products/firefox/+edit
  ... """)
  HTTP/1.1 200 Ok
  ...
  ...<h4>The GNOME Project:</h4>
  ...

  And now we revert the changes so other tests will not break.
  
  >>> print http(r"""
  ... POST /products/firefox/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------1660756244906766702065105631
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.project"
  ... 
  ... mozilla
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... Mozilla Firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... Mozilla Firefox
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... The Mozilla Firefox web browser
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------1660756244906766702065105631
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Change
  ... -----------------------------1660756244906766702065105631--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: http://localhost:9000/products/firefox
  ...



First Sample Person adds a product named newproductname.

  >>> print http(r"""
  ... POST /products/+new HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------367972547738338092465973618
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... newproductname
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... dname
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... title
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... summaru
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... description
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------367972547738338092465973618
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Add
  ... -----------------------------367972547738338092465973618--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: newproductname...

Then a product named newproductname2.

  >>> print http(r"""
  ... POST /products/+new HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------179594757816383945471528315043
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... newproductname2
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... dname2
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... title2
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... summaru2
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... description2
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------179594757816383945471528315043
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Add
  ... -----------------------------179594757816383945471528315043--
  ... """)
  HTTP/1.1 303 See Other
  ...
  Location: newproductname2...
  
Now we try to change newproductcname2's name to newproductname.

  >>> print http(r"""
  ... POST /products/newproductname2/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------92338662989865824723972696
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... newproductname
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... dname2
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... title2
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... summaru2
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... description2
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------92338662989865824723972696
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Change
  ... -----------------------------92338662989865824723972696--
  ... """)
  HTTP/1.1 200 Ok
  ...newproductname is already in use by another product...
  
Now we try to change it to newproductname3.  
  
  >>> print http(r"""
  ... POST /products/newproductname2/+edit HTTP/1.1
  ... Authorization: Basic dGVzdEBjYW5vbmljYWwuY29tOnRlc3Q=
  ... Content-Type: multipart/form-data; boundary=---------------------------606210877343429295508972697
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.name"
  ... 
  ... newproductname3
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.displayname"
  ... 
  ... dname2
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.title"
  ... 
  ... title2
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.summary"
  ... 
  ... summaru2
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.description"
  ... 
  ... description2
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.homepageurl"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.sourceforgeproject"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.freshmeatproject"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.wikiurl"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.screenshotsurl"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.downloadurl"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="field.programminglang"
  ... 
  ... 
  ... -----------------------------606210877343429295508972697
  ... Content-Disposition: form-data; name="UPDATE_SUBMIT"
  ... 
  ... Change
  ... -----------------------------606210877343429295508972697--
  ... """)
  HTTP/1.1 303 See Other
  ...

