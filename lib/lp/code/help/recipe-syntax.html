<html>
  <head>
    <title>Source package recipe syntax</title>
    <link rel="stylesheet" type="text/css"
          href="/+icing/yui/cssreset/reset.css" />
    <link rel="stylesheet" type="text/css"
          href="/+icing/yui/cssfonts/fonts.css" />
    <link rel="stylesheet" type="text/css"
          href="/+icing/yui/cssbase/base.css" />
  </head>
  <body>
    <h1>Source package recipe syntax</h1>

    <p>A recipe is just text that starts with a line such as:</p>
    <dl>
      <dd>
        <tt># bzr-builder format 0.2 deb-version {debupstream}-0~{revno}</tt>
      </dd>
    </dl>

    <p>
      The format specifier is there to allow the syntax to be changed in later
      versions, and the meaning of "deb-version" will be explained below.
    </p>

    <p>
      The next line specifies the base branch, this is the branch that will
      be used to define the initial files and directory structure.
    </p>

    <p>
      Next comes any number of lines of other branches to be merged in, but
      using a slightly different format. To merge a branch in to the base
      specify something like:
    </p>

    <dl>
      <dd>
        <tt>merge packaging lp:~foo-dev/foo/packaging</tt>
      </dd>
    </dl>

    <p>
      which specifies we are merging a branch we will refer to as "packaging",
      which can be found at the given URI. The name you give to the branch as
      the second item doesn't have to match anything else, it's just an
      identifier specific to the recipe.
    </p>

    <p>
      <a href="https://help.launchpad.net/Packaging/SourceBuilds/Recipes"
         target="_blank">Read more &gt;</a> on recipe syntax for other commands and
         specifying revisions for the branches.
    </p>

    <h2>deb-version</h2>

    <p>
      To build Debian source package that you desire you should make sure that
      "deb-version" is set to an appropriate value on the first line of your
      recipe. This will be used as the version number of the package. The
      value you put there also allows for substitution of values in to it
      based on various things when the recipe is processed:
    </p>

    <ul class="bulleted">
      <li><tt>{date}</tt> &mdash; will be substituted with just the current
        date, such as <tt>20090819</tt></li>
      <li><tt>{debupstream}</tt> &mdash; will be replaced by the upstream
        portion of the version number taken from debian/changelog in the final
        tree. If when the tree is built the top of debian/changelog has a
        version number of "<tt>1.0-1</tt>" then this would evaluate to
        "<tt>1.0</tt>".
      </li>
      <li><tt>{revno}</tt> &mdash; will be the revno of the base branch (the
        first specified)</li>
      <li><tt>{revno:&lt;branch name&gt;}</tt> &mdash; will be substituted
        with the revno for the branch named &lt;branch name&gt; in the
        recipe</li>
      <li><tt>{time}</tt> &mdash; will be substituted with the current date
        and time, such as <tt>200908191512</tt></li>
    </ul>

    <p>
      <a href="https://help.launchpad.net/Packaging/SourceBuilds/Recipes"
         target="_blank">Read more &gt;</a> on recipe syntax for other commands and
         specifying revisions for the branches.
    </p>

  </body>
</html>
