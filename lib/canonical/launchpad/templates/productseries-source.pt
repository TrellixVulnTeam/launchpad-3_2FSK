<tal:layout define="columns1 default">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="rosetta"
>
  <body>
    <div metal:fill-slot="main">
      <table>
        <tbody>
          <tr>
            <td style="width: 75%; padding-right: 1em;">

              <tal:processform condition="view/editSource" omit-tag="" />

              <h1>Upstream source import</h1>
              
              <p tal:condition="not:view/errormsgs">
                Once you enter the details of the
                <abbr title="revision control system">RCS</abbr>
                you use for this product series,
                Launchpad can attempt to import that code
                and publish it as a Bazaar branch.
                This lets distributors share code with you more efficiently,
                and also allows distributed upstream development.
              </p>
  
              <div tal:repeat="errmsg view/errormsgs" tal:omit-tag>
                <p class="portalMessage" tal:content="errmsg" />
              </div>

              <form method="post" name="mf">
  
                <h2>Package in Ubuntu,
                  <span tal:replace="view/curr_ubuntu_release/title">
                    The Hoary Hedgehog Release
                  </span>
                </h2>

                <table>
                  <tbody>
                    <tr>
                      <th><label>Source Package:</label></th>
                      <td>
                        <div>
                          <input
                            type="text" name="ubuntupkg" size="30" value=""
                            tal:attributes="value view/curr_ubuntu_pkgname"
                          />
                        </div>
                        <div class="formHelp">
                          The name of the <strong>source</strong> package
                          in the current release of Ubuntu
                          (version <span tal:replace=
                          "view/curr_ubuntu_release/version">4.10</span>,
                          <span tal:replace="view/curr_ubuntu_release/title">
                          The Hoary Hedgehog Release</span>).
                          It&#8217;s very important to link exactly the right
                          branch to the relevant Ubuntu package, to ensure
                          that bugs, patches and translations are correctly
                          shared. Do not enter "HEAD", "MAIN", or "TRUNK"
                          unless you are certain that the package is actually
                          based on HEAD.
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <h2>Source import details</h2>

                
                <fieldset>
                  <legend>Revision Control Repository</legend>

                  <div class="formHelp">
                    Enter details below for only the selected Repository type.
                  </div>

                  <fieldset>
                    <legend>
                     <input type="radio" name="rcstype" value="cvs"
                            onClick="javascript:updateWidgets()"
                            tal:attributes="checked not:view/svnrepository" />
                      CVS</legend>
                    <table>
                      <tbody>
                        <tr>
                          <th><label>Repository Root:</label></th>
                          <td>
                            <input type="text" name="cvsroot" size="30"
                            tal:attributes="value view/cvsroot" />
                            <span class="fieldRequired">(Required)</span>
                          </td>
                        </tr>
                        <tr class="formHelp">
                          <th>Example:</th>
                          <td><code>
                            :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome
                          </code></td>
                        </tr>
                        <tr>
                          <th><label>Module:</label></th>
                          <td>
                            <input type="text" name="cvsmodule" size="30"
                            tal:attributes="value view/cvsmodule" />
                            <span class="fieldRequired">(Required)</span>
                          </td>
                        </tr>
                        <tr>
                          <th><label>Branch Name:</label></th>
                          <td>
                            <div>
                              <input type="text" name="cvsbranch" size="30"
                              tal:attributes="value view/cvsbranch" />
                              <span class="fieldRequired">(Required)</span>
                            </div>
                            <div class="formHelp">
                              The branch representing the upstream codebase
                              for this product series.
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </fieldset>

                  <fieldset>
                    <legend>
                      <input type="radio" name="rcstype" value="svn"
                              onClick="javascript: updateWidgets()" 
                              tal:attributes="checked view/svnrepository" />
                      SVN</legend>
                    <table>
                      <tbody>
                        <tr>
                          <th><label>Repository:</label></th>
                          <td>
                            <div>
                              <input type="text" name="svnrepository" size="30"
                              tal:attributes="value view/svnrepository" />
                              <span class="fieldRequired">(Required)</span>
                            </div>
                            <div class="formHelp">
                              The <abbr>URL</abbr> (Internet address) of the
                              repository and branch to be imported, in
                              <code>svn://</code> or
                              <code>http</code>(<code>s</code>)<code>://</code>
                              format. This must be the correct upstream branch
                              for the <tal:x replace="context/displayname" />
                              series of
                              <tal:x replace="context/product/displayname" />.
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </fieldset>
                </fieldset>


                <fieldset>
                  <legend>FTP Details</legend>
                  <table>
                    <tbody>
                      <tr>
                        <th><label>Root Directory URL:</label></th>
                        <td>
                          <input name="releaseroot" size=40
                          tal:attributes="value context/releaseroot" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Example:</th>
                        <td>
                          <code>ftp://www.mozilla.org/pub/firefox/1.1/</code>
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th />
                        <td>
                          The directory containing releases that are
                          part of this series.
                          Launchpad automatically scans this directory
                          regularly to import new releases.
                        </td>
                      </tr>
                      <tr>
                        <th><label>Filename Pattern:</label></th>
                        <td>
                          <input name="releasefileglob" size=40
                          tal:attributes="value context/releasefileglob" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Example:</th>
                        <td><code>firefox-1.1.*.src.tgz</code></td>
                      </tr>
                      <tr class="formHelp">
                        <th />
                        <td>
                          Launchpad uses this pattern to find new releases of
                          <span tal:replace="context/product/displayname" />
                          when they are uploaded to the root directory.
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </fieldset>

      <script type="text/javascript">
        function updateWidgets() {
          var form = document.forms['mf'];
          state = (form.rcstype[0].checked == false);
          form.cvsroot.disabled =  state;
          form.cvsbranch.disabled =  state;
          form.cvsmodule.disabled =  state;
          form.svnrepository.disabled = ! state;
        }
      updateWidgets();
      </script>

                <div class="actions">
                  <tal:x condition="nothing">
                    DO NOT CHANGE THE VALUE OF THIS.
                    It is used to verify that the correct form was posted.
                  </tal:x>
                  <input type="submit"
                     name="Update RCS Details"
                     value="Update RCS Details" />
                </div>
              </form>
            </td>
            <td
              style="width: 25%;"
              tal:content="structure CONTEXTS/@@+menubox"
            />
          </tr>
        </tbody>
      </table>
    </div>
    <metal:nomenu fill-slot="column_two"></metal:nomenu>
  </body>
</html>
</tal:layout>
