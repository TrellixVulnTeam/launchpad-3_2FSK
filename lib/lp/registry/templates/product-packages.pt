<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="view/macro:page/main_only"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main">
  <div class="top-portlet">
  <ul class="horizontal">
    <li>
      <a tal:replace="structure context/menu:overview/distributions/fmt:link" />
    </li>
  </ul>
  </div>

  <tal:series_dict repeat="series_dict view/series_packages">
  <tal:series_packagings
    define="series series_dict/series;
            packagings series_dict/packagings">
    <h2>
      <a tal:attributes="href series/name">
        <span tal:replace="series/name">main</span> series
      </a>
    </h2>

    <p tal:condition="not: packagings">
      No packages linked to this series.
    </p>

    <tal:comment condition="nothing">
      This DIV is necessary for the table-actions:nth-child stylesheet.
    </tal:comment>
    <div>
      <table class="listing"
        tal:condition="packagings"
        tal:attributes="id series/name/fmt:css-id/packages-">
        <thead>
          <tr>
            <th>Distribution</th>
            <th>Series</th>
            <th>Source Package</th>
            <th>Version</th>
            <th style="width: 1em;"
              tal:condition="view/can_delete_packaging">&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="packaging_dict packagings">
          <tal:packaging_field
            define="packaging packaging_dict/packaging;
                    form_id packaging_dict/form_id;
                    field packaging_dict/field">
            <td>
              <a tal:replace="structure packaging/distroseries/distribution/fmt:link" />
            </td>

            <td>
              <a tal:attributes="href packaging/distroseries/fmt:url"><tal:version
                replace="packaging/distroseries/version" />
                (<tal:name replace="packaging/distroseries/displayname" />)</a>
            </td>

            <td>
              <a
                tal:attributes="href string:${packaging/distroseries/fmt:url}/+source/${packaging/sourcepackagename/name}"
                tal:content="packaging/sourcepackagename/name">Apache</a>
            </td>

            <td>
              <tal:currentrelease
                replace="packaging/sourcepackage/currentrelease/version|nothing">
                  2.3.4-1
              </tal:currentrelease>       
            </td>
            <td tal:condition="view/can_delete_packaging">
              <form style="display: inline" method="post"
                tal:attributes="action request/URL;
                                id form_id">
                <tal:hidden replace="structure field" />
                <tal:action replace="structure view/renderDeletePackagingAction" />
              </form>
            </td>
          </tal:packaging_field>
          </tr>
        </tbody>
      </table>

      <ul class="table-actions"
        tal:condition="view/can_delete_packaging">
        <li tal:condition="context/required:launchpad.Edit">
          <a tal:replace="structure series/menu:overview/add_package/fmt:link" />
        </li>
      </ul>
    </div>
  </tal:series_packagings>
  </tal:series_dict>

</div>
</body>
</html>
