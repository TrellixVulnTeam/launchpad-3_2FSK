<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/main_side"
  i18n:domain="malone"
>
  <metal:block fill-slot="head_epilogue">
    <script type="text/javascript" src="/+icing/FormatAndColor.js"></script>
    <script type="text/javascript" src="/+icing/PlotKit_Packed.js"></script>
  </metal:block>
  <metal:portlets fill-slot="portlets">
  </metal:portlets>
  <body>
    <tal:side metal:fill-slot="side">
      <div id="involvement" class="portlet involvement">
        <ul>
          <li style="border: none">
            <a href="+filebug" class="menu-link-filebug sprite bugs">
              Report a bug
            </a>
          </li>
          <li>
            <a href="+filebug" class="menu-link-filebug sprite answers">
              Ask a question
            </a>
          </li>
        </ul>
      </div>
      <div class="portlet">
        <strong>Bug tracker:</strong>
        <tal:bugtracker replace="structure view/bugtracker" />
        <tal:subscribe
            replace="structure context/menu:bugs/subscribe/render" />
        <table class="summary" style="width: 100%;">
        <tbody>
          <tr tal:define="bug_supervisor context/bug_supervisor">
          <th>Bug supervisor:</th>
          <td>
            <tal:none condition="not:bug_supervisor">None set</tal:none>
            <a tal:condition="bug_supervisor"
               tal:replace="structure bug_supervisor/fmt:link">Bob Johnson</a>
          </td>
          <td>
           <tal:edit-bug-supervisor
               condition="context/menu:bugs/bugsupervisor|nothing">
             <a tal:define="link context/menu:bugs/bugsupervisor"
                tal:condition="link/enabled"
                tal:attributes="href link/url; title link/text">
               <img tal:attributes="alt link/text" src="/@@/edit" />
            </a>
          </tal:edit-bug-supervisor>
        </td>
        </tr>
        <tr tal:define="securitycontact context/security_contact">
          <th>Security contact:</th>
          <td>
            <tal:none condition="not:securitycontact">None set</tal:none>
            <a tal:condition="securitycontact"
               tal:replace="structure securitycontact/fmt:link">
              Billy Anderson
            </a>
        </td>
        <td>
          <tal:edit-securitycontact
              condition="context/menu:bugs/securitycontact|nothing">
            <a tal:define="link context/menu:bugs/securitycontact"
               tal:condition="link/enabled"
               tal:attributes="href link/url; title link/text">
              <img tal:attributes="alt link/text" src="/@@/edit" />
            </a>
          </tal:edit-securitycontact>
        </td>
        </tr>
        </tbody>
        </table>
      </div>
      <div class="portlet">
          <ul class="cross-reference">
            <li tal:define="fixed_elsewhere view/bugs_fixed_elsewhere_info">
              <a tal:attributes="href fixed_elsewhere/url">
                <strong tal:content="fixed_elsewhere/count">42</strong>
                <tal:label
                  tal:replace="fixed_elsewhere/label">bugs</tal:label>
                fixed elsewhere
              </a>
            </li>
            <li tal:define="cve_bugs view/open_cve_bugs_info">
              <a tal:attributes="href cve_bugs/url">
                <strong tal:content="cve_bugs/count"></strong>
                open CVE
                <tal:label tal:replace="cve_bugs/label">bugs</tal:label>
              </a>
              <tal:cve-reports
                  condition="context/menu:bugs/cve|nothing">
                -<a tal:define="link context/menu:bugs/cve"
                   tal:replace="structure link/render"
                   tal:condition="link/enabled">
                  CVE reports
                </a>
              </tal:cve-reports>
            </li>
            <li tal:define="pending_bugwatches view/pending_bugwatches_info"
                tal:condition="pending_bugwatches">
              <a tal:attributes="href pending_bugwatches/url">
                <strong tal:content="pending_bugwatches/count"></strong>
                <tal:label
                  tal:replace="pending_bugwatches/label">bugs</tal:label>
                <tal:need-or-needs
                    define="count pending_bugwatches/count"
                    content="python:(count == 1) and 'needs' or 'need'" />
                forwarding upstream
              </a>
            </li>
            <li tal:define="expirable_bugs view/expirable_bugs_info"
              tal:condition="expirable_bugs">
              <a tal:attributes="href expirable_bugs/url">
                <strong tal:content="expirable_bugs/count"></strong>
                incomplete
                <tal:label
                  tal:replace="expirable_bugs/label">bugs</tal:label>
                can expire
              </a>
            </li>
            <tal:review-nominations
                condition="context/menu:bugs/nominations|nothing">
              <li tal:define="link context/menu:bugs/nominations">
                <a tal:attributes="href link/url"
                   tal:content="link/text" />
              </li>
            </tal:review-nominations>
            <li style="font-weight: bold;">
              <a href="+bugs">List all open bugs</a>
            </li>
          </ul>
      </div>
      <tal:block content="structure context/@@+portlet-bugfilters" />
      <div tal:replace="structure context/@@+portlet-bugtags" />
      <tal:releasecriticalbugs
          tal:condition="view/shouldShowReleaseCriticalPortlet"
          tal:content="structure context/@@+portlet-bugtasklist-seriesbugs" />
    </tal:side>
    <div metal:fill-slot="main" class="tab-bugs"
         tal:define="search_url string:+bugs;
                     advanced_search_url string:+bugs?advanced=1">
      <h1>Bugs in <tal:context replace="context/title">Ubuntu</tal:context></h1>
      <div class="search-box" style="text-align: center; clear: both;">
        <metal:search
          use-macro="context/@@+bugtarget-macros-search/simple-search-form"
        />
      </div>
      <script type="text/javascript"><!--
           $('field.searchtext').focus();
      --></script>

    </div><!-- main -->
  </body>
</html>
