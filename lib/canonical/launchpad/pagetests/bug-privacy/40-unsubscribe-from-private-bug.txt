First, some setup. Find out what the latest [private] bug reported on
Ubuntu evolution is, so we can avoid hardcoding its ID here:

    >>> from canonical.launchpad.interfaces import (
    ...     IDistributionSet, BugTaskSearchParams, ILaunchBag,
    ...     ISourcePackageNameSet)
    >>> from zope.component import getUtility
    >>> from canonical.launchpad.ftests import login, logout

    >>> login("foo.bar@canonical.com")
    >>> launchbag = getUtility(ILaunchBag)
    >>> evo = getUtility(ISourcePackageNameSet).queryByName("evolution")
    >>> params = BugTaskSearchParams(user=launchbag.user,
    ...     sourcepackagename=evo, orderby="id")

    >>> ubuntu = getUtility(IDistributionSet).getByName("ubuntu")
    >>> latest_evo_task = ubuntu.searchTasks(params)[-1]
    >>> latest_evo_bug = latest_evo_task.bug.id
    >>> logout()

Unsubscribing from a private bug redirects you to the bug listing (see
further down for an exception to this rule.) Let's demonstrate by having
Foo Bar, an admin, subscribe Sample Person to a private bug.

    >>> from zope.testbrowser.testing import Browser

    >>> browser = Browser()

    >>> browser.addHeader("Authorization", "Basic foo.bar@canonical.com:test")

    >>> add_subscriber_url = (
    ...     "http://launchpad.dev/ubuntu/+source/evolution/+bug/%s"
    ...     "/+addsubscriber" % latest_evo_bug)
    >>> browser.open(add_subscriber_url)
    >>> browser.getControl("Person").value = "name12"
    >>> browser.getControl("Add").click()
    >>> browser.url
    'http://bugs.launchpad.dev/ubuntu/+source/evolution/+bug/...'

If Sample Person decides to unsubscribe from the bug, he'll be
redirected to the bug listing page, because he will no longer have
permission to see the private bug.

    >>> from zope.testbrowser.testing import Browser
    >>> browser = Browser()
    >>> browser.addHeader("Authorization", "Basic test@canonical.com:test")
    >>> unsubscribe_url = (
    ...     "http://launchpad.dev/ubuntu/+source/evolution/+bug/%s"
    ...     "/+subscribe" % latest_evo_bug)
    >>> browser.open(unsubscribe_url)
    >>> browser.getControl("Continue").click()

    >>> browser.url
    'http://launchpad.dev/ubuntu/+source/evolution/+bugs'

    >>> "You have been unsubscribed" in browser.contents
    True

But if Foo Bar decides to unsubscribe from the private bug, he won't be
redirected to the bug listing because he still has permission to view
the private bug, because admins can see all bugs.

    >>> browser = Browser()

    >>> browser.addHeader("Authorization", "Basic foo.bar@canonical.com:test")
    >>> browser.open(unsubscribe_url)
    >>> browser.getControl("Continue").click()

    >>> browser.url
    'http://launchpad.dev/ubuntu/+source/evolution/+bug/...'
    >>> "You have been unsubscribed" in browser.contents
    True

