First, we state that netapplet is using Launchpad Translations.


    >>> admin_browser.open('http://launchpad.dev/netapplet')
    >>> print admin_browser.title
    Network Applet in Launchpad
    >>> admin_browser.getLink('Change details').click()
    >>> print admin_browser.title
    Change project details
    >>> admin_browser.getControl(
    ...     'Translations for this project are done in Launchpad'
    ...     ).selected = True
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.title
    Network Applet in Launchpad

we set the 'structured' permission for the netapplet product
translations and its associated project, GNOME.

    >>> admin_browser.getLink('Translations').click()
    >>> print admin_browser.title
    Translations of Network Applet in Launchpad
    >>> admin_browser.getLink('Change translators').click()
    >>> print admin_browser.title
    Set translation group for Network Applet
    >>> admin_browser.getControl(
    ...     name='field.translationgroup').value = ['renamed-group']
    >>> admin_browser.getControl(
    ...     name='field.translationpermission').value = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.url
    http://translations.launchpad.dev/netapplet
    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/gnome/+changetranslators')
    >>> admin_browser.getControl(
    ...     name='field.translationgroup').value = ['renamed-group']
    >>> admin_browser.getControl(
    ...     name='field.translationpermission').value = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.url
    http://translations.launchpad.dev/gnome/+changetranslators
    >>> for tag in find_tags_by_class(
    ...     admin_browser.contents, 'informational message'):
    ...     print tag.renderContents()
    Updated on ...

Now, we test that a member of a translation team is able to translate
directly, in this example, we are using 'tsukimi' account.

    >>> tsukimi_browser = setupBrowser(auth='Basic tsukimi@quaqua.net:test')
    >>> tsukimi_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(tsukimi_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Dial-up connection...

Next test is with a non member of that translation team, the 'No Privileges'
account. We check that we get the warning that we are not members of the team.

    >>> no_priv_browser = setupBrowser(auth='Basic no-priv@canonical.com:test')
    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Your translations will be held for review...

And finally, we test that a language without a team lets to anyone (in this
case, the 'No Privileges' account) to translate directly.

    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/fr/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into French...

    >>> portlet = find_portlet(no_priv_browser.contents, 'French translators')
    >>> print portlet.renderContents()
    <...No translators currently designated for this PO file...
